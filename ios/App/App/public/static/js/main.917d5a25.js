/*! For license information please see main.917d5a25.js.LICENSE.txt */
(()=>{var __webpack_modules__={228:function(e,t){!function(e){"use strict";var t="1.9.4";function n(e){var t,n,r,o;for(n=1,r=arguments.length;n<r;n++)for(t in o=arguments[n])e[t]=o[t];return e}var r=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function o(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var r=n.call(arguments,2);return function(){return e.apply(t,r.length?r.concat(n.call(arguments)):arguments)}}var i=0;function a(e){return"_leaflet_id"in e||(e._leaflet_id=++i),e._leaflet_id}function s(e,t,n){var r,o,i,a;return a=function(){r=!1,o&&(i.apply(n,o),o=!1)},i=function(){r?o=arguments:(e.apply(n,arguments),setTimeout(a,t),r=!0)},i}function l(e,t,n){var r=t[1],o=t[0],i=r-o;return e===r&&n?e:((e-o)%i+i)%i+o}function c(){return!1}function u(e,t){if(!1===t)return e;var n=Math.pow(10,void 0===t?6:t);return Math.round(e*n)/n}function d(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function h(e){return d(e).split(/\s+/)}function f(e,t){for(var n in Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?r(e.options):{}),t)e.options[n]=t[n];return e.options}function p(e,t,n){var r=[];for(var o in e)r.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(e[o]));return(t&&-1!==t.indexOf("?")?"&":"?")+r.join("&")}var m=/\{ *([\w_ -]+) *\}/g;function g(e,t){return e.replace(m,function(e,n){var r=t[n];if(void 0===r)throw new Error("No value provided for variable "+e);return"function"===typeof r&&(r=r(t)),r})}var v=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function y(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var b="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function x(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var w=0;function _(e){var t=+new Date,n=Math.max(0,16-(t-w));return w=t+n,window.setTimeout(e,n)}var k=window.requestAnimationFrame||x("RequestAnimationFrame")||_,A=window.cancelAnimationFrame||x("CancelAnimationFrame")||x("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function S(e,t,n){if(!n||k!==_)return k.call(window,o(e,t));e.call(t)}function N(e){e&&A.call(window,e)}var C={__proto__:null,extend:n,create:r,bind:o,get lastId(){return i},stamp:a,throttle:s,wrapNum:l,falseFn:c,formatNum:u,trim:d,splitWords:h,setOptions:f,getParamString:p,template:g,isArray:v,indexOf:y,emptyImageUrl:b,requestFn:k,cancelFn:A,requestAnimFrame:S,cancelAnimFrame:N};function j(){}function E(e){if("undefined"!==typeof L&&L&&L.Mixin){e=v(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}j.extend=function(e){var t=function(){f(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=t.__super__=this.prototype,i=r(o);for(var a in i.constructor=t,t.prototype=i,this)Object.prototype.hasOwnProperty.call(this,a)&&"prototype"!==a&&"__super__"!==a&&(t[a]=this[a]);return e.statics&&n(t,e.statics),e.includes&&(E(e.includes),n.apply(null,[i].concat(e.includes))),n(i,e),delete i.statics,delete i.includes,i.options&&(i.options=o.options?r(o.options):{},n(i.options,e.options)),i._initHooks=[],i.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=i._initHooks.length;e<t;e++)i._initHooks[e].call(this)}},t},j.include=function(e){var t=this.prototype.options;return n(this.prototype,e),e.options&&(this.prototype.options=t,this.mergeOptions(e.options)),this},j.mergeOptions=function(e){return n(this.prototype.options,e),this},j.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"===typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var T={on:function(e,t,n){if("object"===typeof e)for(var r in e)this._on(r,e[r],t);else for(var o=0,i=(e=h(e)).length;o<i;o++)this._on(e[o],t,n);return this},off:function(e,t,n){if(arguments.length)if("object"===typeof e)for(var r in e)this._off(r,e[r],t);else{e=h(e);for(var o=1===arguments.length,i=0,a=e.length;i<a;i++)o?this._off(e[i]):this._off(e[i],t,n)}else delete this._events;return this},_on:function(e,t,n,r){if("function"===typeof t){if(!1===this._listens(e,t,n)){n===this&&(n=void 0);var o={fn:t,ctx:n};r&&(o.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(o)}}else console.warn("wrong listener type: "+typeof t)},_off:function(e,t,n){var r,o,i;if(this._events&&(r=this._events[e]))if(1!==arguments.length)if("function"===typeof t){var a=this._listens(e,t,n);if(!1!==a){var s=r[a];this._firingCount&&(s.fn=c,this._events[e]=r=r.slice()),r.splice(a,1)}}else console.warn("wrong listener type: "+typeof t);else{if(this._firingCount)for(o=0,i=r.length;o<i;o++)r[o].fn=c;delete this._events[e]}},fire:function(e,t,r){if(!this.listens(e,r))return this;var o=n({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var i=this._events[e];if(i){this._firingCount=this._firingCount+1||1;for(var a=0,s=i.length;a<s;a++){var l=i[a],c=l.fn;l.once&&this.off(e,c,l.ctx),c.call(l.ctx||this,o)}this._firingCount--}}return r&&this._propagateEvent(o),this},listens:function(e,t,n,r){"string"!==typeof e&&console.warn('"string" type argument expected');var o=t;"function"!==typeof t&&(r=!!t,o=void 0,n=void 0);var i=this._events&&this._events[e];if(i&&i.length&&!1!==this._listens(e,o,n))return!0;if(r)for(var a in this._eventParents)if(this._eventParents[a].listens(e,t,n,r))return!0;return!1},_listens:function(e,t,n){if(!this._events)return!1;var r=this._events[e]||[];if(!t)return!!r.length;n===this&&(n=void 0);for(var o=0,i=r.length;o<i;o++)if(r[o].fn===t&&r[o].ctx===n)return o;return!1},once:function(e,t,n){if("object"===typeof e)for(var r in e)this._on(r,e[r],t,!0);else for(var o=0,i=(e=h(e)).length;o<i;o++)this._on(e[o],t,n,!0);return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[a(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[a(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,n({layer:e.target,propagatedFrom:e.target},e),!0)}};T.addEventListener=T.on,T.removeEventListener=T.clearAllEventListeners=T.off,T.addOneTimeEventListener=T.once,T.fireEvent=T.fire,T.hasEventListeners=T.listens;var I=j.extend(T);function P(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t}var O=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};function M(e,t,n){return e instanceof P?e:v(e)?new P(e[0],e[1]):void 0===e||null===e?e:"object"===typeof e&&"x"in e&&"y"in e?new P(e.x,e.y):new P(e,t,n)}function R(e,t){if(e)for(var n=t?[e,t]:e,r=0,o=n.length;r<o;r++)this.extend(n[r])}function D(e,t){return!e||e instanceof R?e:new R(e,t)}function F(e,t){if(e)for(var n=t?[e,t]:e,r=0,o=n.length;r<o;r++)this.extend(n[r])}function z(e,t){return e instanceof F?e:new F(e,t)}function B(e,t,n){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,void 0!==n&&(this.alt=+n)}function U(e,t,n){return e instanceof B?e:v(e)&&"object"!==typeof e[0]?3===e.length?new B(e[0],e[1],e[2]):2===e.length?new B(e[0],e[1]):null:void 0===e||null===e?e:"object"===typeof e&&"lat"in e?new B(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new B(e,t,n)}P.prototype={clone:function(){return new P(this.x,this.y)},add:function(e){return this.clone()._add(M(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(M(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new P(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new P(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=O(this.x),this.y=O(this.y),this},distanceTo:function(e){var t=(e=M(e)).x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return(e=M(e)).x===this.x&&e.y===this.y},contains:function(e){return e=M(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},R.prototype={extend:function(e){var t,n;if(!e)return this;if(e instanceof P||"number"===typeof e[0]||"x"in e)t=n=M(e);else if(t=(e=D(e)).min,n=e.max,!t||!n)return this;return this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)):(this.min=t.clone(),this.max=n.clone()),this},getCenter:function(e){return M((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return M(this.min.x,this.max.y)},getTopRight:function(){return M(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return(e="number"===typeof e[0]||e instanceof P?M(e):D(e))instanceof R?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=D(e);var t=this.min,n=this.max,r=e.min,o=e.max,i=o.x>=t.x&&r.x<=n.x,a=o.y>=t.y&&r.y<=n.y;return i&&a},overlaps:function(e){e=D(e);var t=this.min,n=this.max,r=e.min,o=e.max,i=o.x>t.x&&r.x<n.x,a=o.y>t.y&&r.y<n.y;return i&&a},isValid:function(){return!(!this.min||!this.max)},pad:function(e){var t=this.min,n=this.max,r=Math.abs(t.x-n.x)*e,o=Math.abs(t.y-n.y)*e;return D(M(t.x-r,t.y-o),M(n.x+r,n.y+o))},equals:function(e){return!!e&&(e=D(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight()))}},F.prototype={extend:function(e){var t,n,r=this._southWest,o=this._northEast;if(e instanceof B)t=e,n=e;else{if(!(e instanceof F))return e?this.extend(U(e)||z(e)):this;if(t=e._southWest,n=e._northEast,!t||!n)return this}return r||o?(r.lat=Math.min(t.lat,r.lat),r.lng=Math.min(t.lng,r.lng),o.lat=Math.max(n.lat,o.lat),o.lng=Math.max(n.lng,o.lng)):(this._southWest=new B(t.lat,t.lng),this._northEast=new B(n.lat,n.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,r=Math.abs(t.lat-n.lat)*e,o=Math.abs(t.lng-n.lng)*e;return new F(new B(t.lat-r,t.lng-o),new B(n.lat+r,n.lng+o))},getCenter:function(){return new B((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new B(this.getNorth(),this.getWest())},getSouthEast:function(){return new B(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"===typeof e[0]||e instanceof B||"lat"in e?U(e):z(e);var t,n,r=this._southWest,o=this._northEast;return e instanceof F?(t=e.getSouthWest(),n=e.getNorthEast()):t=n=e,t.lat>=r.lat&&n.lat<=o.lat&&t.lng>=r.lng&&n.lng<=o.lng},intersects:function(e){e=z(e);var t=this._southWest,n=this._northEast,r=e.getSouthWest(),o=e.getNorthEast(),i=o.lat>=t.lat&&r.lat<=n.lat,a=o.lng>=t.lng&&r.lng<=n.lng;return i&&a},overlaps:function(e){e=z(e);var t=this._southWest,n=this._northEast,r=e.getSouthWest(),o=e.getNorthEast(),i=o.lat>t.lat&&r.lat<n.lat,a=o.lng>t.lng&&r.lng<n.lng;return i&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return!!e&&(e=z(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t))},isValid:function(){return!(!this._southWest||!this._northEast)}},B.prototype={equals:function(e,t){return!!e&&(e=U(e),Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng))<=(void 0===t?1e-9:t))},toString:function(e){return"LatLng("+u(this.lat,e)+", "+u(this.lng,e)+")"},distanceTo:function(e){return V.distance(this,U(e))},wrap:function(){return V.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return z([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new B(this.lat,this.lng,this.alt)}};var q={latLngToPoint:function(e,t){var n=this.projection.project(e),r=this.scale(t);return this.transformation._transform(n,r)},pointToLatLng:function(e,t){var n=this.scale(t),r=this.transformation.untransform(e,n);return this.projection.unproject(r)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e);return new R(this.transformation.transform(t.min,n),this.transformation.transform(t.max,n))},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?l(e.lng,this.wrapLng,!0):e.lng;return new B(this.wrapLat?l(e.lat,this.wrapLat,!0):e.lat,t,e.alt)},wrapLatLngBounds:function(e){var t=e.getCenter(),n=this.wrapLatLng(t),r=t.lat-n.lat,o=t.lng-n.lng;if(0===r&&0===o)return e;var i=e.getSouthWest(),a=e.getNorthEast();return new F(new B(i.lat-r,i.lng-o),new B(a.lat-r,a.lng-o))}},V=n({},q,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var n=Math.PI/180,r=e.lat*n,o=t.lat*n,i=Math.sin((t.lat-e.lat)*n/2),a=Math.sin((t.lng-e.lng)*n/2),s=i*i+Math.cos(r)*Math.cos(o)*a*a,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}}),H=6378137,G={R:H,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,e.lat),-n),o=Math.sin(r*t);return new P(this.R*e.lng*t,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(e){var t=180/Math.PI;return new B((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:function(){var e=H*Math.PI;return new R([-e,-e],[e,e])}()};function K(e,t,n,r){if(v(e))return this._a=e[0],this._b=e[1],this._c=e[2],void(this._d=e[3]);this._a=e,this._b=t,this._c=n,this._d=r}function W(e,t,n,r){return new K(e,t,n,r)}K.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new P((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};var Q=n({},V,{code:"EPSG:3857",projection:G,transformation:function(){var e=.5/(Math.PI*G.R);return W(e,.5,-e,.5)}()}),Z=n({},Q,{code:"EPSG:900913"});function Y(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function J(e,t){var n,r,o,i,a,s,l="";for(n=0,o=e.length;n<o;n++){for(r=0,i=(a=e[n]).length;r<i;r++)l+=(r?"L":"M")+(s=a[r]).x+" "+s.y;l+=t?Re.svg?"z":"x":""}return l||"M0 0"}var $=document.documentElement.style,X="ActiveXObject"in window,ee=X&&!document.addEventListener,te="msLaunchUri"in navigator&&!("documentMode"in document),ne=Le("webkit"),re=Le("android"),oe=Le("android 2")||Le("android 3"),ie=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ae=re&&Le("Google")&&ie<537&&!("AudioNode"in window),se=!!window.opera,le=!te&&Le("chrome"),ce=Le("gecko")&&!ne&&!se&&!X,ue=!le&&Le("safari"),de=Le("phantom"),he="OTransition"in $,fe=0===navigator.platform.indexOf("Win"),pe=X&&"transition"in $,me="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!oe,ge="MozPerspective"in $,ve=!window.L_DISABLE_3D&&(pe||me||ge)&&!he&&!de,ye="undefined"!==typeof orientation||Le("mobile"),be=ye&&ne,xe=ye&&me,we=!window.PointerEvent&&window.MSPointerEvent,_e=!(!window.PointerEvent&&!we),ke="ontouchstart"in window||!!window.TouchEvent,Ae=!window.L_NO_TOUCH&&(ke||_e),Se=ye&&se,Ne=ye&&ce,Ce=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,je=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",c,t),window.removeEventListener("testPassiveEventSupport",c,t)}catch(n){}return e}(),Ee=!!document.createElement("canvas").getContext,Te=!(!document.createElementNS||!Y("svg").createSVGRect),Ie=!!Te&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(e.firstChild&&e.firstChild.namespaceURI)}(),Pe=!Te&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"===typeof t.adj}catch(n){return!1}}(),Oe=0===navigator.platform.indexOf("Mac"),Me=0===navigator.platform.indexOf("Linux");function Le(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var Re={ie:X,ielt9:ee,edge:te,webkit:ne,android:re,android23:oe,androidStock:ae,opera:se,chrome:le,gecko:ce,safari:ue,phantom:de,opera12:he,win:fe,ie3d:pe,webkit3d:me,gecko3d:ge,any3d:ve,mobile:ye,mobileWebkit:be,mobileWebkit3d:xe,msPointer:we,pointer:_e,touch:Ae,touchNative:ke,mobileOpera:Se,mobileGecko:Ne,retina:Ce,passiveEvents:je,canvas:Ee,svg:Te,vml:Pe,inlineSvg:Ie,mac:Oe,linux:Me},De=Re.msPointer?"MSPointerDown":"pointerdown",Fe=Re.msPointer?"MSPointerMove":"pointermove",ze=Re.msPointer?"MSPointerUp":"pointerup",Be=Re.msPointer?"MSPointerCancel":"pointercancel",Ue={touchstart:De,touchmove:Fe,touchend:ze,touchcancel:Be},qe={touchstart:$e,touchmove:Je,touchend:Je,touchcancel:Je},Ve={},He=!1;function Ge(e,t,n){return"touchstart"===t&&Ye(),qe[t]?(n=qe[t].bind(this,n),e.addEventListener(Ue[t],n,!1),n):(console.warn("wrong event specified:",t),c)}function Ke(e,t,n){Ue[t]?e.removeEventListener(Ue[t],n,!1):console.warn("wrong event specified:",t)}function We(e){Ve[e.pointerId]=e}function Qe(e){Ve[e.pointerId]&&(Ve[e.pointerId]=e)}function Ze(e){delete Ve[e.pointerId]}function Ye(){He||(document.addEventListener(De,We,!0),document.addEventListener(Fe,Qe,!0),document.addEventListener(ze,Ze,!0),document.addEventListener(Be,Ze,!0),He=!0)}function Je(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||"mouse")){for(var n in t.touches=[],Ve)t.touches.push(Ve[n]);t.changedTouches=[t],e(t)}}function $e(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Wt(t),Je(e,t)}function Xe(e){var t,n,r={};for(n in e)t=e[n],r[n]=t&&t.bind?t.bind(e):t;return e=r,r.type="dblclick",r.detail=2,r.isTrusted=!1,r._simulated=!0,r}var et=200;function tt(e,t){e.addEventListener("dblclick",t);var n,r=0;function o(e){if(1===e.detail){if("mouse"!==e.pointerType&&(!e.sourceCapabilities||e.sourceCapabilities.firesTouchEvents)){var o=Zt(e);if(!o.some(function(e){return e instanceof HTMLLabelElement&&e.attributes.for})||o.some(function(e){return e instanceof HTMLInputElement||e instanceof HTMLSelectElement})){var i=Date.now();i-r<=et?2===++n&&t(Xe(e)):n=1,r=i}}}else n=e.detail}return e.addEventListener("click",o),{dblclick:t,simDblclick:o}}function nt(e,t){e.removeEventListener("dblclick",t.dblclick),e.removeEventListener("click",t.simDblclick)}var rt,ot,it,at,st,lt=St(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ct=St(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ut="webkitTransition"===ct||"OTransition"===ct?ct+"End":"transitionend";function dt(e){return"string"===typeof e?document.getElementById(e):e}function ht(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||"auto"===n)&&document.defaultView){var r=document.defaultView.getComputedStyle(e,null);n=r?r[t]:null}return"auto"===n?null:n}function ft(e,t,n){var r=document.createElement(e);return r.className=t||"",n&&n.appendChild(r),r}function pt(e){var t=e.parentNode;t&&t.removeChild(e)}function mt(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function gt(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function vt(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function yt(e,t){if(void 0!==e.classList)return e.classList.contains(t);var n=_t(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function bt(e,t){if(void 0!==e.classList)for(var n=h(t),r=0,o=n.length;r<o;r++)e.classList.add(n[r]);else if(!yt(e,t)){var i=_t(e);wt(e,(i?i+" ":"")+t)}}function xt(e,t){void 0!==e.classList?e.classList.remove(t):wt(e,d((" "+_t(e)+" ").replace(" "+t+" "," ")))}function wt(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}function _t(e){return e.correspondingElement&&(e=e.correspondingElement),void 0===e.className.baseVal?e.className:e.className.baseVal}function kt(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&At(e,t)}function At(e,t){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(r)}catch(o){if(1===t)return}t=Math.round(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+r+"(opacity="+t+")"}function St(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1}function Nt(e,t,n){var r=t||new P(0,0);e.style[lt]=(Re.ie3d?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")}function Ct(e,t){e._leaflet_pos=t,Re.any3d?Nt(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function jt(e){return e._leaflet_pos||new P(0,0)}if("onselectstart"in document)rt=function(){Dt(window,"selectstart",Wt)},ot=function(){zt(window,"selectstart",Wt)};else{var Et=St(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);rt=function(){if(Et){var e=document.documentElement.style;it=e[Et],e[Et]="none"}},ot=function(){Et&&(document.documentElement.style[Et]=it,it=void 0)}}function Tt(){Dt(window,"dragstart",Wt)}function It(){zt(window,"dragstart",Wt)}function Pt(e){for(;-1===e.tabIndex;)e=e.parentNode;e.style&&(Ot(),at=e,st=e.style.outlineStyle,e.style.outlineStyle="none",Dt(window,"keydown",Ot))}function Ot(){at&&(at.style.outlineStyle=st,at=void 0,st=void 0,zt(window,"keydown",Ot))}function Mt(e){do{e=e.parentNode}while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function Lt(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var Rt={__proto__:null,TRANSFORM:lt,TRANSITION:ct,TRANSITION_END:ut,get:dt,getStyle:ht,create:ft,remove:pt,empty:mt,toFront:gt,toBack:vt,hasClass:yt,addClass:bt,removeClass:xt,setClass:wt,getClass:_t,setOpacity:kt,testProp:St,setTransform:Nt,setPosition:Ct,getPosition:jt,get disableTextSelection(){return rt},get enableTextSelection(){return ot},disableImageDrag:Tt,enableImageDrag:It,preventOutline:Pt,restoreOutline:Ot,getSizedParentNode:Mt,getScale:Lt};function Dt(e,t,n,r){if(t&&"object"===typeof t)for(var o in t)qt(e,o,t[o],n);else for(var i=0,a=(t=h(t)).length;i<a;i++)qt(e,t[i],n,r);return this}var Ft="_leaflet_events";function zt(e,t,n,r){if(1===arguments.length)Bt(e),delete e[Ft];else if(t&&"object"===typeof t)for(var o in t)Vt(e,o,t[o],n);else if(t=h(t),2===arguments.length)Bt(e,function(e){return-1!==y(t,e)});else for(var i=0,a=t.length;i<a;i++)Vt(e,t[i],n,r);return this}function Bt(e,t){for(var n in e[Ft]){var r=n.split(/\d/)[0];t&&!t(r)||Vt(e,r,null,null,n)}}var Ut={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function qt(e,t,n,r){var o=t+a(n)+(r?"_"+a(r):"");if(e[Ft]&&e[Ft][o])return this;var i=function(t){return n.call(r||e,t||window.event)},s=i;!Re.touchNative&&Re.pointer&&0===t.indexOf("touch")?i=Ge(e,t,i):Re.touch&&"dblclick"===t?i=tt(e,i):"addEventListener"in e?"touchstart"===t||"touchmove"===t||"wheel"===t||"mousewheel"===t?e.addEventListener(Ut[t]||t,i,!!Re.passiveEvents&&{passive:!1}):"mouseenter"===t||"mouseleave"===t?(i=function(t){t=t||window.event,Xt(e,t)&&s(t)},e.addEventListener(Ut[t],i,!1)):e.addEventListener(t,s,!1):e.attachEvent("on"+t,i),e[Ft]=e[Ft]||{},e[Ft][o]=i}function Vt(e,t,n,r,o){o=o||t+a(n)+(r?"_"+a(r):"");var i=e[Ft]&&e[Ft][o];if(!i)return this;!Re.touchNative&&Re.pointer&&0===t.indexOf("touch")?Ke(e,t,i):Re.touch&&"dblclick"===t?nt(e,i):"removeEventListener"in e?e.removeEventListener(Ut[t]||t,i,!1):e.detachEvent("on"+t,i),e[Ft][o]=null}function Ht(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function Gt(e){return qt(e,"wheel",Ht),this}function Kt(e){return Dt(e,"mousedown touchstart dblclick contextmenu",Ht),e._leaflet_disable_click=!0,this}function Wt(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Qt(e){return Wt(e),Ht(e),this}function Zt(e){if(e.composedPath)return e.composedPath();for(var t=[],n=e.target;n;)t.push(n),n=n.parentNode;return t}function Yt(e,t){if(!t)return new P(e.clientX,e.clientY);var n=Lt(t),r=n.boundingClientRect;return new P((e.clientX-r.left)/n.x-t.clientLeft,(e.clientY-r.top)/n.y-t.clientTop)}var Jt=Re.linux&&Re.chrome?window.devicePixelRatio:Re.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function $t(e){return Re.edge?e.wheelDeltaY/2:e.deltaY&&0===e.deltaMode?-e.deltaY/Jt:e.deltaY&&1===e.deltaMode?20*-e.deltaY:e.deltaY&&2===e.deltaMode?60*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?20*-e.detail:e.detail?e.detail/-32765*60:0}function Xt(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch(r){return!1}return n!==e}var en={__proto__:null,on:Dt,off:zt,stopPropagation:Ht,disableScrollPropagation:Gt,disableClickPropagation:Kt,preventDefault:Wt,stop:Qt,getPropagationPath:Zt,getMousePosition:Yt,getWheelDelta:$t,isExternalTarget:Xt,addListener:Dt,removeListener:zt},tn=I.extend({run:function(e,t,n,r){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=jt(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=S(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,n=1e3*this._duration;t<n?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),Ct(this._el,n),this.fire("step")},_complete:function(){N(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),nn=I.extend({options:{crs:Q,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=f(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),void 0!==t.zoom&&(this._zoom=this._limitZoom(t.zoom)),t.center&&void 0!==t.zoom&&this.setView(U(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ct&&Re.any3d&&!Re.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Dt(this._proxy,ut,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,r){return t=void 0===t?this._zoom:this._limitZoom(t),e=this._limitCenter(U(e),t,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&!0!==r&&(void 0!==r.animate&&(r.zoom=n({animate:r.animate},r.zoom),r.pan=n({animate:r.animate,duration:r.duration},r.pan)),this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,r.zoom):this._tryAnimatedPan(e,r.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(e,t,r.pan&&r.pan.noMoveStart),this)},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(Re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(Re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,n){var r=this.getZoomScale(t),o=this.getSize().divideBy(2),i=(e instanceof P?e:this.latLngToContainerPoint(e)).subtract(o).multiplyBy(1-1/r),a=this.containerPointToLatLng(o.add(i));return this.setView(a,t,{zoom:n})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():z(e);var n=M(t.paddingTopLeft||t.padding||[0,0]),r=M(t.paddingBottomRight||t.padding||[0,0]),o=this.getBoundsZoom(e,!1,n.add(r));if((o="number"===typeof t.maxZoom?Math.min(t.maxZoom,o):o)===1/0)return{center:e.getCenter(),zoom:o};var i=r.subtract(n).divideBy(2),a=this.project(e.getSouthWest(),o),s=this.project(e.getNorthEast(),o);return{center:this.unproject(a.add(s).divideBy(2).add(i),o),zoom:o}},fitBounds:function(e,t){if(!(e=z(e)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(t=t||{},!(e=M(e).round()).x&&!e.y)return this.fire("moveend");if(!0!==t.animate&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new tn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){bt(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,n){if(!1===(n=n||{}).animate||!Re.any3d)return this.setView(e,t,n);this._stop();var r=this.project(this.getCenter()),o=this.project(e),i=this.getSize(),a=this._zoom;e=U(e),t=void 0===t?a:t;var s=Math.max(i.x,i.y),l=s*this.getZoomScale(a,t),c=o.distanceTo(r)||1,u=1.42,d=u*u;function h(e){var t=(l*l-s*s+(e?-1:1)*d*d*c*c)/(2*(e?l:s)*d*c),n=Math.sqrt(t*t+1)-t;return n<1e-9?-18:Math.log(n)}function f(e){return(Math.exp(e)-Math.exp(-e))/2}function p(e){return(Math.exp(e)+Math.exp(-e))/2}function m(e){return f(e)/p(e)}var g=h(0);function v(e){return s*(p(g)/p(g+u*e))}function y(e){return s*(p(g)*m(g+u*e)-f(g))/d}function b(e){return 1-Math.pow(1-e,1.5)}var x=Date.now(),w=(h(1)-g)/u,_=n.duration?1e3*n.duration:1e3*w*.8;function k(){var n=(Date.now()-x)/_,i=b(n)*w;n<=1?(this._flyToFrame=S(k,this),this._move(this.unproject(r.add(o.subtract(r).multiplyBy(y(i)/c)),a),this.getScaleZoom(s/v(i),a),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),k.call(this),this},flyToBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds:function(e){return e=z(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,z(e));return n.equals(r)||this.panTo(r,t),this._enforcingBounds=!1,this},panInside:function(e,t){var n=M((t=t||{}).paddingTopLeft||t.padding||[0,0]),r=M(t.paddingBottomRight||t.padding||[0,0]),o=this.project(this.getCenter()),i=this.project(e),a=this.getPixelBounds(),s=D([a.min.add(n),a.max.subtract(r)]),l=s.getSize();if(!s.contains(i)){this._enforcingBounds=!0;var c=i.subtract(s.getCenter()),u=s.extend(i).getSize().subtract(l);o.x+=c.x<0?-u.x:u.x,o.y+=c.y<0?-u.y:u.y,this.panTo(this.unproject(o),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=n({animate:!1,pan:!0},!0===e?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),i=t.divideBy(2).round(),a=r.divideBy(2).round(),s=i.subtract(a);return s.x||s.y?(e.animate&&e.pan?this.panBy(s):(e.pan&&this._rawPanBy(s),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:r})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=n({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=o(this._handleGeolocationResponse,this),r=o(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,r,e):navigator.geolocation.getCurrentPosition(t,r,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var t=new B(e.coords.latitude,e.coords.longitude),n=t.toBounds(2*e.coords.accuracy),r=this._locateOptions;if(r.setView){var o=this.getBoundsZoom(n);this.setView(t,r.maxZoom?Math.min(o,r.maxZoom):o)}var i={latlng:t,bounds:n,timestamp:e.timestamp};for(var a in e.coords)"number"===typeof e.coords[a]&&(i[a]=e.coords[a]);this.fire("locationfound",i)}},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var e;for(e in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),pt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(N(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[e].remove();for(e in this._panes)pt(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var n=ft("div","leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),t||this._mapPane);return e&&(this._panes[e]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds();return new F(this.unproject(e.getBottomLeft()),this.unproject(e.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=z(e),n=M(n||[0,0]);var r=this.getZoom()||0,o=this.getMinZoom(),i=this.getMaxZoom(),a=e.getNorthWest(),s=e.getSouthEast(),l=this.getSize().subtract(n),c=D(this.project(s,r),this.project(a,r)).getSize(),u=Re.any3d?this.options.zoomSnap:1,d=l.x/c.x,h=l.y/c.y,f=t?Math.max(d,h):Math.min(d,h);return r=this.getScaleZoom(f,r),u&&(r=Math.round(r/(u/100))*(u/100),r=t?Math.ceil(r/u)*u:Math.floor(r/u)*u),Math.max(o,Math.min(i,r))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new P(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new R(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(void 0===e?this.getZoom():e)},getPane:function(e){return"string"===typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var n=this.options.crs;return t=void 0===t?this._zoom:t,n.scale(e)/n.scale(t)},getScaleZoom:function(e,t){var n=this.options.crs;t=void 0===t?this._zoom:t;var r=n.zoom(e*n.scale(t));return isNaN(r)?1/0:r},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(U(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(M(e),t)},layerPointToLatLng:function(e){var t=M(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){return this.project(U(e))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(U(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(z(e))},distance:function(e,t){return this.options.crs.distance(U(e),U(t))},containerPointToLayerPoint:function(e){return M(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return M(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(M(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(U(e)))},mouseEventToContainerPoint:function(e){return Yt(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=dt(e);if(!t)throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");Dt(t,"scroll",this._onScroll,this),this._containerId=a(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&Re.any3d,bt(e,"leaflet-container"+(Re.touch?" leaflet-touch":"")+(Re.retina?" leaflet-retina":"")+(Re.ielt9?" leaflet-oldie":"")+(Re.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=ht(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&"sticky"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ct(this._mapPane,new P(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(bt(e.markerPane,"leaflet-zoom-hide"),bt(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t,n){Ct(this._mapPane,new P(0,0));var r=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var o=this._zoom!==t;this._moveStart(o,n)._move(e,t)._moveEnd(o),this.fire("viewreset"),r&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,n,r){void 0===t&&(t=this._zoom);var o=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),r?n&&n.pinch&&this.fire("zoom",n):((o||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return N(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){Ct(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[a(this._container)]=this;var t=e?zt:Dt;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),Re.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){N(this._resizeRequest),this._resizeRequest=S(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var n,r=[],o="mouseout"===t||"mouseover"===t,i=e.target||e.srcElement,s=!1;i;){if((n=this._targets[a(i)])&&("click"===t||"preclick"===t)&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(t,!0)){if(o&&!Xt(i,e))break;if(r.push(n),o)break}if(i===this._container)break;i=i.parentNode}return r.length||s||o||!this.listens(t,!0)||(r=[this]),r},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var t=e.target||e.srcElement;if(!(!this._loaded||t._leaflet_disable_events||"click"===e.type&&this._isClickDisabled(t))){var n=e.type;"mousedown"===n&&Pt(t),this._fireDOMEvent(e,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,r){if("click"===e.type){var o=n({},e);o.type="preclick",this._fireDOMEvent(o,o.type,r)}var i=this._findEventTargets(e,t);if(r){for(var a=[],s=0;s<r.length;s++)r[s].listens(t,!0)&&a.push(r[s]);i=a.concat(i)}if(i.length){"contextmenu"===t&&Wt(e);var l=i[0],c={originalEvent:e};if("keypress"!==e.type&&"keydown"!==e.type&&"keyup"!==e.type){var u=l.getLatLng&&(!l._radius||l._radius<=10);c.containerPoint=u?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(e),c.layerPoint=this.containerPointToLayerPoint(c.containerPoint),c.latlng=u?l.getLatLng():this.layerPointToLatLng(c.layerPoint)}for(s=0;s<i.length;s++)if(i[s].fire(t,c,!0),c.originalEvent._stopped||!1===i[s].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,t))return}},_draggableMoved:function(e){return(e=e.dragging&&e.dragging.enabled()?e:this).dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return jt(this._mapPane)||new P(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){return(e&&void 0!==t?this._getNewPixelOrigin(e,t):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var r=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(r)},_latLngBoundsToNewLayerBounds:function(e,t,n){var r=this._getNewPixelOrigin(n,t);return D([this.project(e.getSouthWest(),t)._subtract(r),this.project(e.getNorthWest(),t)._subtract(r),this.project(e.getSouthEast(),t)._subtract(r),this.project(e.getNorthEast(),t)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var r=this.project(e,t),o=this.getSize().divideBy(2),i=new R(r.subtract(o),r.add(o)),a=this._getBoundsOffset(i,n,t);return Math.abs(a.x)<=1&&Math.abs(a.y)<=1?e:this.unproject(r.add(a),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),r=new R(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(r,t))},_getBoundsOffset:function(e,t,n){var r=D(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),o=r.min.subtract(e.min),i=r.max.subtract(e.max);return new P(this._rebound(o.x,-i.x),this._rebound(o.y,-i.y))},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom(),r=Re.any3d?this.options.zoomSnap:1;return r&&(e=Math.round(e/r)*r),Math.max(t,Math.min(n,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){xt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._trunc();return!(!0!==(t&&t.animate)&&!this.getSize().contains(n))&&(this.panBy(n,t),!0)},_createAnimProxy:function(){var e=this._proxy=ft("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(e){var t=lt,n=this._proxy.style[t];Nt(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),n===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){pt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();Nt(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(t),o=this._getCenterOffset(e)._divideBy(1-1/r);return!(!0!==n.animate&&!this.getSize().contains(o))&&(S(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(e,t,!0)},this),!0)},_animateZoom:function(e,t,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,bt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:r}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&xt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function rn(e,t){return new nn(e,t)}var on=j.extend({options:{position:"topright"},initialize:function(e){f(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),r=e._controlCorners[n];return bt(t,"leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(t,r.firstChild):r.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(pt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),an=function(e){return new on(e)};nn.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",n=this._controlContainer=ft("div",t+"control-container",this._container);function r(r,o){var i=t+r+" "+t+o;e[r+o]=ft("div",i,n)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)pt(this._controlCorners[e]);pt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var sn=on.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,n,r){return n<r?-1:r<n?1:0}},initialize:function(e,t,n){for(var r in f(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,e)this._addLayer(e[r],r);for(r in t)this._addLayer(t[r],r,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return on.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(a(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){bt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(bt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):xt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return xt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=ft("div",e),n=this.options.collapsed;t.setAttribute("aria-haspopup",!0),Kt(t),Gt(t);var r=this._section=ft("section",e+"-list");n&&(this._map.on("click",this.collapse,this),Dt(t,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var o=this._layersLink=ft("a",e+"-toggle",t);o.href="#",o.title="Layers",o.setAttribute("role","button"),Dt(o,{keydown:function(e){13===e.keyCode&&this._expandSafely()},click:function(e){Wt(e),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=ft("div",e+"-base",r),this._separator=ft("div",e+"-separator",r),this._overlaysList=ft("div",e+"-overlays",r),t.appendChild(r)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&a(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,n){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:n}),this.options.sortLayers&&this._layers.sort(o(function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;mt(this._baseLayersList),mt(this._overlaysList),this._layerControlInputs=[];var e,t,n,r,o=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),t=t||r.overlay,e=e||!r.overlay,o+=r.overlay?0:1;return this.options.hideSingleBase&&(e=e&&o>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(a(e.target)),n=t.overlay?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;n&&this._map.fire(n,t)},_createRadioElement:function(e,t){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(e){var t,n=document.createElement("label"),r=this._map.hasLayer(e.layer);e.overlay?((t=document.createElement("input")).type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=r):t=this._createRadioElement("leaflet-base-layers_"+a(this),r),this._layerControlInputs.push(t),t.layerId=a(e.layer),Dt(t,"click",this._onInputClick,this);var o=document.createElement("span");o.innerHTML=" "+e.name;var i=document.createElement("span");return n.appendChild(i),i.appendChild(t),i.appendChild(o),(e.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){if(!this._preventClick){var e,t,n=this._layerControlInputs,r=[],o=[];this._handlingClick=!0;for(var i=n.length-1;i>=0;i--)e=n[i],t=this._getLayer(e.layerId).layer,e.checked?r.push(t):e.checked||o.push(t);for(i=0;i<o.length;i++)this._map.hasLayer(o[i])&&this._map.removeLayer(o[i]);for(i=0;i<r.length;i++)this._map.hasLayer(r[i])||this._map.addLayer(r[i]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e,t,n=this._layerControlInputs,r=this._map.getZoom(),o=n.length-1;o>=0;o--)e=n[o],t=this._getLayer(e.layerId).layer,e.disabled=void 0!==t.options.minZoom&&r<t.options.minZoom||void 0!==t.options.maxZoom&&r>t.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,Dt(e,"click",Wt),this.expand();var t=this;setTimeout(function(){zt(e,"click",Wt),t._preventClick=!1})}}),ln=function(e,t,n){return new sn(e,t,n)},cn=on.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=ft("div",t+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,t+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,t+"-out",n,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,n,r,o){var i=ft("a",n,r);return i.innerHTML=e,i.href="#",i.title=t,i.setAttribute("role","button"),i.setAttribute("aria-label",t),Kt(i),Dt(i,"click",Qt),Dt(i,"click",o,this),Dt(i,"click",this._refocusOnMap,this),i},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";xt(this._zoomInButton,t),xt(this._zoomOutButton,t),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(bt(this._zoomOutButton,t),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(bt(this._zoomInButton,t),this._zoomInButton.setAttribute("aria-disabled","true"))}});nn.mergeOptions({zoomControl:!0}),nn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new cn,this.addControl(this.zoomControl))});var un=function(e){return new cn(e)},dn=on.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",n=ft("div",t),r=this.options;return this._addScales(r,t+"-line",n),e.on(r.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=ft("div",t,n)),e.imperial&&(this._iScale=ft("div",t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),n=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,n,t/e)},_updateImperial:function(e){var t,n,r,o=3.2808399*e;o>5280?(t=o/5280,n=this._getRoundNum(t),this._updateScale(this._iScale,n+" mi",n/t)):(r=this._getRoundNum(o),this._updateScale(this._iScale,r+" ft",r/o))},_updateScale:function(e,t,n){e.style.width=Math.round(this.options.maxWidth*n)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return t*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),hn=function(e){return new dn(e)},fn='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',pn=on.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Re.inlineSvg?fn+" ":"")+"Leaflet</a>"},initialize:function(e){f(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=ft("div","leaflet-control-attribution"),Kt(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});nn.mergeOptions({attributionControl:!0}),nn.addInitHook(function(){this.options.attributionControl&&(new pn).addTo(this)});var mn=function(e){return new pn(e)};on.Layers=sn,on.Zoom=cn,on.Scale=dn,on.Attribution=pn,an.layers=ln,an.zoom=un,an.scale=hn,an.attribution=mn;var gn=j.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});gn.addTo=function(e,t){return e.addHandler(t,this),this};var vn={Events:T},yn=Re.touch?"touchstart mousedown":"mousedown",bn=I.extend({options:{clickTolerance:3},initialize:function(e,t,n,r){f(this,r),this._element=e,this._dragStartTarget=t||e,this._preventOutline=n},enable:function(){this._enabled||(Dt(this._dragStartTarget,yn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(bn._dragging===this&&this.finishDrag(!0),zt(this._dragStartTarget,yn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!yt(this._element,"leaflet-zoom-anim")))if(e.touches&&1!==e.touches.length)bn._dragging===this&&this.finishDrag();else if(!(bn._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches)&&(bn._dragging=this,this._preventOutline&&Pt(this._element),Tt(),rt(),!this._moving)){this.fire("down");var t=e.touches?e.touches[0]:e,n=Mt(this._element);this._startPoint=new P(t.clientX,t.clientY),this._startPos=jt(this._element),this._parentScale=Lt(n);var r="mousedown"===e.type;Dt(document,r?"mousemove":"touchmove",this._onMove,this),Dt(document,r?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(e){if(this._enabled)if(e.touches&&e.touches.length>1)this._moved=!0;else{var t=e.touches&&1===e.touches.length?e.touches[0]:e,n=new P(t.clientX,t.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Wt(e),this._moved||(this.fire("dragstart"),this._moved=!0,bt(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),bt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=e,this._updatePosition()))}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),Ct(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){xt(document.body,"leaflet-dragging"),this._lastTarget&&(xt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),zt(document,"mousemove touchmove",this._onMove,this),zt(document,"mouseup touchend touchcancel",this._onUp,this),It(),ot();var t=this._moved&&this._moving;this._moving=!1,bn._dragging=!1,t&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function xn(e,t,n){var r,o,i,a,s,l,c,u,d,h=[1,4,2,8];for(o=0,c=e.length;o<c;o++)e[o]._code=On(e[o],t);for(a=0;a<4;a++){for(u=h[a],r=[],o=0,i=(c=e.length)-1;o<c;i=o++)s=e[o],l=e[i],s._code&u?l._code&u||((d=Pn(l,s,u,t,n))._code=On(d,t),r.push(d)):(l._code&u&&((d=Pn(l,s,u,t,n))._code=On(d,t),r.push(d)),r.push(s));e=r}return e}function wn(e,t){var n,r,o,i,a,s,l,c,u;if(!e||0===e.length)throw new Error("latlngs not passed");Rn(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var d=U([0,0]),h=z(e);h.getNorthWest().distanceTo(h.getSouthWest())*h.getNorthEast().distanceTo(h.getNorthWest())<1700&&(d=_n(e));var f=e.length,p=[];for(n=0;n<f;n++){var m=U(e[n]);p.push(t.project(U([m.lat-d.lat,m.lng-d.lng])))}for(s=l=c=0,n=0,r=f-1;n<f;r=n++)o=p[n],i=p[r],a=o.y*i.x-i.y*o.x,l+=(o.x+i.x)*a,c+=(o.y+i.y)*a,s+=3*a;u=0===s?p[0]:[l/s,c/s];var g=t.unproject(M(u));return U([g.lat+d.lat,g.lng+d.lng])}function _n(e){for(var t=0,n=0,r=0,o=0;o<e.length;o++){var i=U(e[o]);t+=i.lat,n+=i.lng,r++}return U([t/r,n/r])}var kn,An={__proto__:null,clipPolygon:xn,polygonCenter:wn,centroid:_n};function Sn(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=jn(e=Tn(e,n),n)}function Nn(e,t,n){return Math.sqrt(Ln(e,t,n,!0))}function Cn(e,t,n){return Ln(e,t,n)}function jn(e,t){var n=e.length,r=new(typeof Uint8Array!==void 0+""?Uint8Array:Array)(n);r[0]=r[n-1]=1,En(e,r,t,0,n-1);var o,i=[];for(o=0;o<n;o++)r[o]&&i.push(e[o]);return i}function En(e,t,n,r,o){var i,a,s,l=0;for(a=r+1;a<=o-1;a++)(s=Ln(e[a],e[r],e[o],!0))>l&&(i=a,l=s);l>n&&(t[i]=1,En(e,t,n,r,i),En(e,t,n,i,o))}function Tn(e,t){for(var n=[e[0]],r=1,o=0,i=e.length;r<i;r++)Mn(e[r],e[o])>t&&(n.push(e[r]),o=r);return o<i-1&&n.push(e[i-1]),n}function In(e,t,n,r,o){var i,a,s,l=r?kn:On(e,n),c=On(t,n);for(kn=c;;){if(!(l|c))return[e,t];if(l&c)return!1;s=On(a=Pn(e,t,i=l||c,n,o),n),i===l?(e=a,l=s):(t=a,c=s)}}function Pn(e,t,n,r,o){var i,a,s=t.x-e.x,l=t.y-e.y,c=r.min,u=r.max;return 8&n?(i=e.x+s*(u.y-e.y)/l,a=u.y):4&n?(i=e.x+s*(c.y-e.y)/l,a=c.y):2&n?(i=u.x,a=e.y+l*(u.x-e.x)/s):1&n&&(i=c.x,a=e.y+l*(c.x-e.x)/s),new P(i,a,o)}function On(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n}function Mn(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function Ln(e,t,n,r){var o,i=t.x,a=t.y,s=n.x-i,l=n.y-a,c=s*s+l*l;return c>0&&((o=((e.x-i)*s+(e.y-a)*l)/c)>1?(i=n.x,a=n.y):o>0&&(i+=s*o,a+=l*o)),s=e.x-i,l=e.y-a,r?s*s+l*l:new P(i,a)}function Rn(e){return!v(e[0])||"object"!==typeof e[0][0]&&"undefined"!==typeof e[0][0]}function Dn(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Rn(e)}function Fn(e,t){var n,r,o,i,a,s,l,c;if(!e||0===e.length)throw new Error("latlngs not passed");Rn(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var u=U([0,0]),d=z(e);d.getNorthWest().distanceTo(d.getSouthWest())*d.getNorthEast().distanceTo(d.getNorthWest())<1700&&(u=_n(e));var h=e.length,f=[];for(n=0;n<h;n++){var p=U(e[n]);f.push(t.project(U([p.lat-u.lat,p.lng-u.lng])))}for(n=0,r=0;n<h-1;n++)r+=f[n].distanceTo(f[n+1])/2;if(0===r)c=f[0];else for(n=0,i=0;n<h-1;n++)if(a=f[n],s=f[n+1],(i+=o=a.distanceTo(s))>r){l=(i-r)/o,c=[s.x-l*(s.x-a.x),s.y-l*(s.y-a.y)];break}var m=t.unproject(M(c));return U([m.lat+u.lat,m.lng+u.lng])}var zn={__proto__:null,simplify:Sn,pointToSegmentDistance:Nn,closestPointOnSegment:Cn,clipSegment:In,_getEdgeIntersection:Pn,_getBitCode:On,_sqClosestPointOnSegment:Ln,isFlat:Rn,_flat:Dn,polylineCenter:Fn},Bn={project:function(e){return new P(e.lng,e.lat)},unproject:function(e){return new B(e.y,e.x)},bounds:new R([-180,-90],[180,90])},Un={R:6378137,R_MINOR:6356752.314245179,bounds:new R([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,n=this.R,r=e.lat*t,o=this.R_MINOR/n,i=Math.sqrt(1-o*o),a=i*Math.sin(r),s=Math.tan(Math.PI/4-r/2)/Math.pow((1-a)/(1+a),i/2);return r=-n*Math.log(Math.max(s,1e-10)),new P(e.lng*t*n,r)},unproject:function(e){for(var t,n=180/Math.PI,r=this.R,o=this.R_MINOR/r,i=Math.sqrt(1-o*o),a=Math.exp(-e.y/r),s=Math.PI/2-2*Math.atan(a),l=0,c=.1;l<15&&Math.abs(c)>1e-7;l++)t=i*Math.sin(s),t=Math.pow((1-t)/(1+t),i/2),s+=c=Math.PI/2-2*Math.atan(a*t)-s;return new B(s*n,e.x*n/r)}},qn={__proto__:null,LonLat:Bn,Mercator:Un,SphericalMercator:G},Vn=n({},V,{code:"EPSG:3395",projection:Un,transformation:function(){var e=.5/(Math.PI*Un.R);return W(e,.5,-e,.5)}()}),Hn=n({},V,{code:"EPSG:4326",projection:Bn,transformation:W(1/180,1,-1/180,.5)}),Gn=n({},q,{projection:Bn,transformation:W(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var n=t.lng-e.lng,r=t.lat-e.lat;return Math.sqrt(n*n+r*r)},infinite:!0});q.Earth=V,q.EPSG3395=Vn,q.EPSG3857=Q,q.EPSG900913=Z,q.EPSG4326=Hn,q.Simple=Gn;var Kn=I.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[a(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[a(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var n=this.getEvents();t.on(n,this),this.once("remove",function(){t.off(n,this)},this)}this.onAdd(t),this.fire("add"),t.fire("layeradd",{layer:this})}}});nn.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=a(e);return this._layers[t]||(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e)),this},removeLayer:function(e){var t=a(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return a(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){for(var t=0,n=(e=e?v(e)?e:[e]:[]).length;t<n;t++)this.addLayer(e[t])},_addZoomLimit:function(e){isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[a(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=a(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var o=this._zoomBoundLayers[r].options;e=void 0===o.minZoom?e:Math.min(e,o.minZoom),t=void 0===o.maxZoom?t:Math.max(t,o.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Wn=Kn.extend({initialize:function(e,t){var n,r;if(f(this,t),this._layers={},e)for(n=0,r=e.length;n<r;n++)this.addLayer(e[n])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return("number"===typeof e?e:this.getLayerId(e))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t,n,r=Array.prototype.slice.call(arguments,1);for(t in this._layers)(n=this._layers[t])[e]&&n[e].apply(n,r);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return a(e)}}),Qn=function(e,t){return new Wn(e,t)},Zn=Wn.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),Wn.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),Wn.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new F;for(var t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),Yn=function(e,t){return new Zn(e,t)},Jn=j.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){f(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(r,e),(this.options.crossOrigin||""===this.options.crossOrigin)&&(r.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),r},_setIconStyles:function(e,t){var n=this.options,r=n[t+"Size"];"number"===typeof r&&(r=[r,r]);var o=M(r),i=M("shadow"===t&&n.shadowAnchor||n.iconAnchor||o&&o.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(n.className||""),i&&(e.style.marginLeft=-i.x+"px",e.style.marginTop=-i.y+"px"),o&&(e.style.width=o.x+"px",e.style.height=o.y+"px")},_createImg:function(e,t){return(t=t||document.createElement("img")).src=e,t},_getIconUrl:function(e){return Re.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function $n(e){return new Jn(e)}var Xn=Jn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return"string"!==typeof Xn.imagePath&&(Xn.imagePath=this._detectIconPath()),(this.options.imagePath||Xn.imagePath)+Jn.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var t=function(e,t,n){var r=t.exec(e);return r&&r[n]};return(e=t(e,/^url\((['"])?(.+)\1\)$/,2))&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=ft("div","leaflet-default-icon-path",document.body),t=ht(e,"background-image")||ht(e,"backgroundImage");if(document.body.removeChild(e),t=this._stripUrl(t))return t;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),er=gn.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new bn(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),bt(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&xt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,n=t._map,r=this._marker.options.autoPanSpeed,o=this._marker.options.autoPanPadding,i=jt(t._icon),a=n.getPixelBounds(),s=n.getPixelOrigin(),l=D(a.min._subtract(s).add(o),a.max._subtract(s).subtract(o));if(!l.contains(i)){var c=M((Math.max(l.max.x,i.x)-l.max.x)/(a.max.x-l.max.x)-(Math.min(l.min.x,i.x)-l.min.x)/(a.min.x-l.min.x),(Math.max(l.max.y,i.y)-l.max.y)/(a.max.y-l.max.y)-(Math.min(l.min.y,i.y)-l.min.y)/(a.min.y-l.min.y)).multiplyBy(r);n.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),Ct(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=S(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(N(this._panRequest),this._panRequest=S(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,n=t._shadow,r=jt(t._icon),o=t._map.layerPointToLatLng(r);n&&Ct(n,r),t._latlng=o,e.latlng=o,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){N(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),tr=Kn.extend({options:{icon:new Xn,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){f(this,t),this._latlng=U(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=U(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=e.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,e.title&&(n.title=e.title),"IMG"===n.tagName&&(n.alt=e.alt||"")),bt(n,t),e.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Dt(n,"focus",this._panOnFocus,this);var o=e.icon.createShadow(this._shadow),i=!1;o!==this._shadow&&(this._removeShadow(),i=!0),o&&(bt(o,t),o.alt=""),this._shadow=o,e.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&i&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&zt(this._icon,"focus",this._panOnFocus,this),pt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&pt(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&Ct(this._icon,e),this._shadow&&Ct(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(bt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),er)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new er(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&kt(this._icon,e),this._shadow&&kt(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var t=this.options.icon.options,n=t.iconSize?M(t.iconSize):M(0,0),r=t.iconAnchor?M(t.iconAnchor):M(0,0);e.panInside(this._latlng,{paddingTopLeft:r,paddingBottomRight:n.subtract(r)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function nr(e,t){return new tr(e,t)}var rr=Kn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return f(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),or=rr.extend({options:{fill:!0,radius:10},initialize:function(e,t){f(this,t),this._latlng=U(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=U(e),this.redraw(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return rr.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),r=[e+n,t+n];this._pxBounds=new R(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ir(e,t){return new or(e,t)}var ar=or.extend({initialize:function(e,t,r){if("number"===typeof t&&(t=n({},r,{radius:t})),f(this,t),this._latlng=U(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new F(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:rr.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===V.distance){var o=Math.PI/180,i=this._mRadius/V.R/o,a=n.project([t+i,e]),s=n.project([t-i,e]),l=a.add(s).divideBy(2),c=n.unproject(l).lat,u=Math.acos((Math.cos(i*o)-Math.sin(t*o)*Math.sin(c*o))/(Math.cos(t*o)*Math.cos(c*o)))/o;(isNaN(u)||0===u)&&(u=i/Math.cos(Math.PI/180*t)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(u)?0:l.x-n.project([c,e-u]).x,this._radiusY=l.y-a.y}else{var d=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(d).x}this._updateBounds()}});function sr(e,t,n){return new ar(e,t,n)}var lr=rr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){f(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t,n,r=1/0,o=null,i=Ln,a=0,s=this._parts.length;a<s;a++)for(var l=this._parts[a],c=1,u=l.length;c<u;c++){var d=i(e,t=l[c-1],n=l[c],!0);d<r&&(r=d,o=i(e,t,n))}return o&&(o.distance=Math.sqrt(r)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Fn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=U(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new F,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return Rn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],n=Rn(e),r=0,o=e.length;r<o;r++)n?(t[r]=U(e[r]),this._bounds.extend(t[r])):t[r]=this._convertLatLngs(e[r]);return t},_project:function(){var e=new R;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new P(e,e);this._rawPxBounds&&(this._pxBounds=new R([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(e,t,n){var r,o,i=e[0]instanceof B,a=e.length;if(i){for(o=[],r=0;r<a;r++)o[r]=this._map.latLngToLayerPoint(e[r]),n.extend(o[r]);t.push(o)}else for(r=0;r<a;r++)this._projectLatlngs(e[r],t,n)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else{var t,n,r,o,i,a,s,l=this._parts;for(t=0,r=0,o=this._rings.length;t<o;t++)for(n=0,i=(s=this._rings[t]).length;n<i-1;n++)(a=In(s[n],s[n+1],e,n,!0))&&(l[r]=l[r]||[],l[r].push(a[0]),a[1]===s[n+1]&&n!==i-2||(l[r].push(a[1]),r++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,r=e.length;n<r;n++)e[n]=Sn(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var n,r,o,i,a,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(n=0,i=this._parts.length;n<i;n++)for(r=0,o=(a=(s=this._parts[n]).length)-1;r<a;o=r++)if((t||0!==r)&&Nn(e,s[o],s[r])<=l)return!0;return!1}});function cr(e,t){return new lr(e,t)}lr._flat=Dn;var ur=lr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return wn(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var t=lr.prototype._convertLatLngs.call(this,e),n=t.length;return n>=2&&t[0]instanceof B&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){lr.prototype._setLatLngs.call(this,e),Rn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Rn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,n=new P(t,t);if(e=new R(e.min.subtract(n),e.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else for(var r,o=0,i=this._rings.length;o<i;o++)(r=xn(this._rings[o],e,!0)).length&&this._parts.push(r)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t,n,r,o,i,a,s,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(o=0,s=this._parts.length;o<s;o++)for(i=0,a=(l=(t=this._parts[o]).length)-1;i<l;a=i++)n=t[i],r=t[a],n.y>e.y!==r.y>e.y&&e.x<(r.x-n.x)*(e.y-n.y)/(r.y-n.y)+n.x&&(c=!c);return c||lr.prototype._containsPoint.call(this,e,!0)}});function dr(e,t){return new ur(e,t)}var hr=Zn.extend({initialize:function(e,t){f(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,n,r,o=v(e)?e:e.features;if(o){for(t=0,n=o.length;t<n;t++)((r=o[t]).geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var i=this.options;if(i.filter&&!i.filter(e))return this;var a=fr(e,i);return a?(a.feature=xr(e),a.defaultOptions=a.options,this.resetStyle(a),i.onEachFeature&&i.onEachFeature(e,a),this.addLayer(a)):this},resetStyle:function(e){return void 0===e?this.eachLayer(this.resetStyle,this):(e.options=n({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){e.setStyle&&("function"===typeof t&&(t=t(e.feature)),e.setStyle(t))}});function fr(e,t){var n,r,o,i,a="Feature"===e.type?e.geometry:e,s=a?a.coordinates:null,l=[],c=t&&t.pointToLayer,u=t&&t.coordsToLatLng||mr;if(!s&&!a)return null;switch(a.type){case"Point":return pr(c,e,n=u(s),t);case"MultiPoint":for(o=0,i=s.length;o<i;o++)n=u(s[o]),l.push(pr(c,e,n,t));return new Zn(l);case"LineString":case"MultiLineString":return r=gr(s,"LineString"===a.type?0:1,u),new lr(r,t);case"Polygon":case"MultiPolygon":return r=gr(s,"Polygon"===a.type?1:2,u),new ur(r,t);case"GeometryCollection":for(o=0,i=a.geometries.length;o<i;o++){var d=fr({geometry:a.geometries[o],type:"Feature",properties:e.properties},t);d&&l.push(d)}return new Zn(l);case"FeatureCollection":for(o=0,i=a.features.length;o<i;o++){var h=fr(a.features[o],t);h&&l.push(h)}return new Zn(l);default:throw new Error("Invalid GeoJSON object.")}}function pr(e,t,n,r){return e?e(t,n):new tr(n,r&&r.markersInheritOptions&&r)}function mr(e){return new B(e[1],e[0],e[2])}function gr(e,t,n){for(var r,o=[],i=0,a=e.length;i<a;i++)r=t?gr(e[i],t-1,n):(n||mr)(e[i]),o.push(r);return o}function vr(e,t){return void 0!==(e=U(e)).alt?[u(e.lng,t),u(e.lat,t),u(e.alt,t)]:[u(e.lng,t),u(e.lat,t)]}function yr(e,t,n,r){for(var o=[],i=0,a=e.length;i<a;i++)o.push(t?yr(e[i],Rn(e[i])?0:t-1,n,r):vr(e[i],r));return!t&&n&&o.length>0&&o.push(o[0].slice()),o}function br(e,t){return e.feature?n({},e.feature,{geometry:t}):xr(t)}function xr(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}var wr={toGeoJSON:function(e){return br(this,{type:"Point",coordinates:vr(this.getLatLng(),e)})}};function _r(e,t){return new hr(e,t)}tr.include(wr),ar.include(wr),or.include(wr),lr.include({toGeoJSON:function(e){var t=!Rn(this._latlngs);return br(this,{type:(t?"Multi":"")+"LineString",coordinates:yr(this._latlngs,t?1:0,!1,e)})}}),ur.include({toGeoJSON:function(e){var t=!Rn(this._latlngs),n=t&&!Rn(this._latlngs[0]),r=yr(this._latlngs,n?2:t?1:0,!0,e);return t||(r=[r]),br(this,{type:(n?"Multi":"")+"Polygon",coordinates:r})}}),Wn.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(n){t.push(n.toGeoJSON(e).geometry.coordinates)}),br(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(e);var n="GeometryCollection"===t,r=[];return this.eachLayer(function(t){if(t.toGeoJSON){var o=t.toGeoJSON(e);if(n)r.push(o.geometry);else{var i=xr(o);"FeatureCollection"===i.type?r.push.apply(r,i.features):r.push(i)}}}),n?br(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});var kr=_r,Ar=Kn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,n){this._url=e,this._bounds=z(t),f(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(bt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){pt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&gt(this._image),this},bringToBack:function(){return this._map&&vt(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=z(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e="IMG"===this._url.tagName,t=this._image=e?this._url:ft("img");bt(t,"leaflet-image-layer"),this._zoomAnimated&&bt(t,"leaflet-zoom-animated"),this.options.className&&bt(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onload=o(this.fire,this,"load"),t.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(t.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e?this._url=t.src:(t.src=this._url,t.alt=this.options.alt)},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;Nt(this._image,n,t)},_reset:function(){var e=this._image,t=new R(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();Ct(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_updateOpacity:function(){kt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),Sr=function(e,t,n){return new Ar(e,t,n)},Nr=Ar.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:ft("video");if(bt(t,"leaflet-image-layer"),this._zoomAnimated&&bt(t,"leaflet-zoom-animated"),this.options.className&&bt(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onloadeddata=o(this.fire,this,"load"),e){for(var n=t.getElementsByTagName("source"),r=[],i=0;i<n.length;i++)r.push(n[i].src);this._url=n.length>0?r:[t.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,"objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var a=0;a<this._url.length;a++){var s=ft("source");s.src=this._url[a],t.appendChild(s)}}}});function Cr(e,t,n){return new Nr(e,t,n)}var jr=Ar.extend({_initImage:function(){var e=this._image=this._url;bt(e,"leaflet-image-layer"),this._zoomAnimated&&bt(e,"leaflet-zoom-animated"),this.options.className&&bt(e,this.options.className),e.onselectstart=c,e.onmousemove=c}});function Er(e,t,n){return new jr(e,t,n)}var Tr=Kn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,t){e&&(e instanceof B||v(e))?(this._latlng=U(e),f(this,t)):(f(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn:function(e){return(e=arguments.length?e:this._source._map).hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&kt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&kt(this._container,1),this.bringToFront(),this.options.interactive&&(bt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(kt(this._container,0),this._removeTimeout=setTimeout(o(pt,void 0,this._container),200)):pt(this._container),this.options.interactive&&(xt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=U(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&gt(this._container),this},bringToBack:function(){return this._map&&vt(this._container),this},_prepareOpen:function(e){var t=this._source;if(!t._map)return!1;if(t instanceof Zn){t=null;var n=this._source._layers;for(var r in n)if(n[r]._map){t=n[r];break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else{if(!t.getBounds)throw new Error("Unable to get source layer LatLng.");e=t.getBounds().getCenter()}return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"===typeof this._content?this._content(this._source||this):this._content;if("string"===typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=M(this.options.offset),n=this._getAnchor();this._zoomAnimated?Ct(this._container,e.add(n)):t=t.add(e).add(n);var r=this._containerBottom=-t.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=r+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}});nn.include({_initOverlay:function(e,t,n,r){var o=t;return o instanceof e||(o=new e(r).setContent(t)),n&&o.setLatLng(n),o}}),Kn.include({_initOverlay:function(e,t,n,r){var o=n;return o instanceof e?(f(o,r),o._source=this):(o=t&&!r?t:new e(r,this)).setContent(n),o}});var Ir=Tr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return!(e=arguments.length?e:this._source._map).hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,Tr.prototype.openOn.call(this,e)},onAdd:function(e){Tr.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof rr||this._source.on("preclick",Ht))},onRemove:function(e){Tr.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof rr||this._source.off("preclick",Ht))},getEvents:function(){var e=Tr.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",t=this._container=ft("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=ft("div",e+"-content-wrapper",t);if(this._contentNode=ft("div",e+"-content",n),Kt(t),Gt(this._contentNode),Dt(t,"contextmenu",Ht),this._tipContainer=ft("div",e+"-tip-container",t),this._tip=ft("div",e+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=ft("a",e+"-close-button",t);r.setAttribute("role","button"),r.setAttribute("aria-label","Close popup"),r.href="#close",r.innerHTML='<span aria-hidden="true">&#215;</span>',Dt(r,"click",function(e){Wt(e),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var r=e.offsetHeight,o=this.options.maxHeight,i="leaflet-popup-scrolled";o&&r>o?(t.height=o+"px",bt(e,i)):xt(e,i),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),n=this._getAnchor();Ct(this._container,t.add(n))},_adjustPan:function(){if(this.options.autoPan)if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)this._autopanning=!1;else{var e=this._map,t=parseInt(ht(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+t,r=this._containerWidth,o=new P(this._containerLeft,-n-this._containerBottom);o._add(jt(this._container));var i=e.layerPointToContainerPoint(o),a=M(this.options.autoPanPadding),s=M(this.options.autoPanPaddingTopLeft||a),l=M(this.options.autoPanPaddingBottomRight||a),c=e.getSize(),u=0,d=0;i.x+r+l.x>c.x&&(u=i.x+r-c.x+l.x),i.x-u-s.x<0&&(u=i.x-s.x),i.y+n+l.y>c.y&&(d=i.y+n-c.y+l.y),i.y-d-s.y<0&&(d=i.y-s.y),(u||d)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([u,d]))}},_getAnchor:function(){return M(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Pr=function(e,t){return new Ir(e,t)};nn.mergeOptions({closePopupOnClick:!0}),nn.include({openPopup:function(e,t,n){return this._initOverlay(Ir,e,t,n).openOn(this),this},closePopup:function(e){return(e=arguments.length?e:this._popup)&&e.close(),this}}),Kn.include({bindPopup:function(e,t){return this._popup=this._initOverlay(Ir,this._popup,e,t),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof Zn||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(this._popup&&this._map){Qt(e);var t=e.layer||e.target;this._popup._source!==t||t instanceof rr?(this._popup._source=t,this.openPopup(e.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){13===e.originalEvent.keyCode&&this._openPopup(e)}});var Or=Tr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){Tr.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){Tr.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=Tr.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ft("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,n,r=this._map,o=this._container,i=r.latLngToContainerPoint(r.getCenter()),a=r.layerPointToContainerPoint(e),s=this.options.direction,l=o.offsetWidth,c=o.offsetHeight,u=M(this.options.offset),d=this._getAnchor();"top"===s?(t=l/2,n=c):"bottom"===s?(t=l/2,n=0):"center"===s?(t=l/2,n=c/2):"right"===s?(t=0,n=c/2):"left"===s?(t=l,n=c/2):a.x<i.x?(s="right",t=0,n=c/2):(s="left",t=l+2*(u.x+d.x),n=c/2),e=e.subtract(M(t,n,!0)).add(u).add(d),xt(o,"leaflet-tooltip-right"),xt(o,"leaflet-tooltip-left"),xt(o,"leaflet-tooltip-top"),xt(o,"leaflet-tooltip-bottom"),bt(o,"leaflet-tooltip-"+s),Ct(o,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&kt(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return M(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Mr=function(e,t){return new Or(e,t)};nn.include({openTooltip:function(e,t,n){return this._initOverlay(Or,e,t,n).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),Kn.include({bindTooltip:function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Or,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(e||!this._tooltipHandlersAdded){var t=e?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[t](n),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof Zn||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&(Dt(t,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),Dt(t,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&t.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(this._tooltip&&this._map)if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var t=this;this._map.once("moveend",function(){t._openOnceFlag=!1,t._openTooltip(e)})}else this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)},_moveTooltip:function(e){var t,n,r=e.latlng;this._tooltip.options.sticky&&e.originalEvent&&(t=this._map.mouseEventToContainerPoint(e.originalEvent),n=this._map.containerPointToLayerPoint(t),r=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(r)}});var Lr=Jn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),n=this.options;if(n.html instanceof Element?(mt(t),t.appendChild(n.html)):t.innerHTML=!1!==n.html?n.html:"",n.bgPos){var r=M(n.bgPos);t.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});function Rr(e){return new Lr(e)}Jn.Default=Xn;var Dr=Kn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Re.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){f(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),pt(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(gt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(vt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof P?e:new P(e,e)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t,n=this.getPane().children,r=-e(-1/0,1/0),o=0,i=n.length;o<i;o++)t=n[o].style.zIndex,n[o]!==this._container&&t&&(r=e(r,+t));isFinite(r)&&(this.options.zIndex=r+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Re.ielt9){kt(this._container,this.options.opacity);var e=+new Date,t=!1,n=!1;for(var r in this._tiles){var o=this._tiles[r];if(o.current&&o.loaded){var i=Math.min(1,(e-o.loaded)/200);kt(o.el,i),i<1?t=!0:(o.active?n=!0:this._onOpaqueTile(o),o.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),t&&(N(this._fadeFrame),this._fadeFrame=S(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=ft("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===e?(this._levels[n].el.style.zIndex=t-Math.abs(e-n),this._onUpdateLevel(n)):(pt(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[e],o=this._map;return r||((r=this._levels[e]={}).el=ft("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=t,r.origin=o.project(o.unproject(o.getPixelOrigin()),e).round(),r.zoom=e,this._setZoomTransform(r,o.getCenter(),o.getZoom()),c(r.el.offsetWidth),this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var e,t,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(e in this._tiles)(t=this._tiles[e]).retain=t.current;for(e in this._tiles)if((t=this._tiles[e]).current&&!t.active){var r=t.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)pt(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,n,r){var o=Math.floor(e/2),i=Math.floor(t/2),a=n-1,s=new P(+o,+i);s.z=+a;var l=this._tileCoordsToKey(s),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),a>r&&this._retainParent(o,i,a,r))},_retainChildren:function(e,t,n,r){for(var o=2*e;o<2*e+2;o++)for(var i=2*t;i<2*t+2;i++){var a=new P(o,i);a.z=n+1;var s=this._tileCoordsToKey(a),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<r&&this._retainChildren(o,i,n+1,r))}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,n,r){var o=Math.round(t);o=void 0!==this.options.maxZoom&&o>this.options.maxZoom||void 0!==this.options.minZoom&&o<this.options.minZoom?void 0:this._clampZoom(o);var i=this.options.updateWhenZooming&&o!==this._tileZoom;r&&!i||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==o&&this._update(e),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var r=this._map.getZoomScale(n,e.zoom),o=e.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(t,n)).round();Re.any3d?Nt(e.el,o,r):Ct(e.el,o)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],r).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],r).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],r).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(e){var t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),r=t.getZoomScale(n,this._tileZoom),o=t.project(e,this._tileZoom).floor(),i=t.getSize().divideBy(2*r);return new R(o.subtract(i),o.add(i))},_update:function(e){var t=this._map;if(t){var n=this._clampZoom(t.getZoom());if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var r=this._getTiledPixelBounds(e),o=this._pxBoundsToTileRange(r),i=o.getCenter(),a=[],s=this.options.keepBuffer,l=new R(o.getBottomLeft().subtract([s,-s]),o.getTopRight().add([s,-s]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var u=this._tiles[c].coords;u.z===this._tileZoom&&l.contains(new P(u.x,u.y))||(this._tiles[c].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(e,n);else{for(var d=o.min.y;d<=o.max.y;d++)for(var h=o.min.x;h<=o.max.x;h++){var f=new P(h,d);if(f.z=this._tileZoom,this._isValidTile(f)){var p=this._tiles[this._tileCoordsToKey(f)];p?p.current=!0:a.push(f)}}if(a.sort(function(e,t){return e.distanceTo(i)-t.distanceTo(i)}),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(h=0;h<a.length;h++)this._addTile(a[h],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(e);return z(this.options.bounds).overlaps(r)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,n=this.getTileSize(),r=e.scaleBy(n),o=r.add(n);return[t.unproject(r,e.z),t.unproject(o,e.z)]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),n=new F(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),n=new P(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(pt(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){bt(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=c,e.onmousemove=c,Re.ielt9&&this.options.opacity<1&&kt(e,this.options.opacity)},_addTile:function(e,t){var n=this._getTilePos(e),r=this._tileCoordsToKey(e),i=this.createTile(this._wrapCoords(e),o(this._tileReady,this,e));this._initTile(i),this.createTile.length<2&&S(o(this._tileReady,this,e,null,i)),Ct(i,n),this._tiles[r]={el:i,coords:e,current:!0},t.appendChild(i),this.fire("tileloadstart",{tile:i,coords:e})},_tileReady:function(e,t,n){t&&this.fire("tileerror",{error:t,tile:n,coords:e});var r=this._tileCoordsToKey(e);(n=this._tiles[r])&&(n.loaded=+new Date,this._map._fadeAnimated?(kt(n.el,0),N(this._fadeFrame),this._fadeFrame=S(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),t||(bt(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Re.ielt9||!this._map._fadeAnimated?S(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new P(this._wrapX?l(e.x,this._wrapX):e.x,this._wrapY?l(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new R(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function Fr(e){return new Dr(e)}var zr=Dr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,t){this._url=e,(t=f(this,t)).detectRetina&&Re.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),"string"===typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&void 0===t&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var n=document.createElement("img");return Dt(n,"load",o(this._tileOnLoad,this,t,n)),Dt(n,"error",o(this._tileOnError,this,t,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"===typeof this.options.referrerPolicy&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(e),n},getTileUrl:function(e){var t={r:Re.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=r),t["-y"]=r}return g(this._url,n(t,this.options))},_tileOnLoad:function(e,t){Re.ielt9?setTimeout(o(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,n){var r=this.options.errorTileUrl;r&&t.getAttribute("src")!==r&&(t.src=r),e(n,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom;return this.options.zoomReverse&&(e=t-e),e+this.options.zoomOffset},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&((t=this._tiles[e].el).onload=c,t.onerror=c,!t.complete)){t.src=b;var n=this._tiles[e].coords;pt(t),delete this._tiles[e],this.fire("tileabort",{tile:t,coords:n})}},_removeTile:function(e){var t=this._tiles[e];if(t)return t.el.setAttribute("src",b),Dr.prototype._removeTile.call(this,e)},_tileReady:function(e,t,n){if(this._map&&(!n||n.getAttribute("src")!==b))return Dr.prototype._tileReady.call(this,e,t,n)}});function Br(e,t){return new zr(e,t)}var Ur=zr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var r=n({},this.defaultWmsParams);for(var o in t)o in this.options||(r[o]=t[o]);var i=(t=f(this,t)).detectRetina&&Re.retina?2:1,a=this.getTileSize();r.width=a.x*i,r.height=a.y*i,this.wmsParams=r},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,zr.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),n=this._crs,r=D(n.project(t[0]),n.project(t[1])),o=r.min,i=r.max,a=(this._wmsVersion>=1.3&&this._crs===Hn?[o.y,o.x,i.y,i.x]:[o.x,o.y,i.x,i.y]).join(","),s=zr.prototype.getTileUrl.call(this,e);return s+p(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(e,t){return n(this.wmsParams,e),t||this.redraw(),this}});function qr(e,t){return new Ur(e,t)}zr.WMS=Ur,Br.wms=qr;var Vr=Kn.extend({options:{padding:.1},initialize:function(e){f(this,e),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),bt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var n=this._map.getZoomScale(t,this._zoom),r=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,t),i=r.multiplyBy(-n).add(o).subtract(this._map._getNewPixelOrigin(e,t));Re.any3d?Nt(this._container,i,n):Ct(this._container,i)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new R(n,n.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Hr=Vr.extend({options:{tolerance:0},getEvents:function(){var e=Vr.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Vr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");Dt(e,"mousemove",this._onMouseMove,this),Dt(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Dt(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){N(this._redrawRequest),delete this._ctx,pt(this._container),zt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var e in this._redrawBounds=null,this._layers)this._layers[e]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Vr.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),r=Re.retina?2:1;Ct(t,e.min),t.width=r*n.x,t.height=r*n.y,t.style.width=n.x+"px",t.style.height=n.y+"px",Re.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){Vr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[a(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,n=t.next,r=t.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete e._order,delete this._layers[a(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if("string"===typeof e.options.dashArray){var t,n,r=e.options.dashArray.split(/[, ]+/),o=[];for(n=0;n<r.length;n++){if(t=Number(r[n]),isNaN(t))return;o.push(t)}e.options._dashArray=o}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||S(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new R,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var n=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)e=r.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var n,r,o,i,a=e._parts,s=a.length,l=this._ctx;if(s){for(l.beginPath(),n=0;n<s;n++){for(r=0,o=a[n].length;r<o;r++)i=a[n][r],l[r?"lineTo":"moveTo"](i.x,i.y);t&&l.closePath()}this._fillStroke(l,e)}}},_updateCircle:function(e){if(this._drawing&&!e._empty()){var t=e._point,n=this._ctx,r=Math.max(Math.round(e._radius),1),o=(Math.max(Math.round(e._radiusY),1)||r)/r;1!==o&&(n.save(),n.scale(1,o)),n.beginPath(),n.arc(t.x,t.y/o,r,0,2*Math.PI,!1),1!==o&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=t.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor||n.color,e.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke())},_onClick:function(e){for(var t,n,r=this._map.mouseEventToLayerPoint(e),o=this._drawFirst;o;o=o.next)(t=o.layer).options.interactive&&t._containsPoint(r)&&("click"!==e.type&&"preclick"!==e.type||!this._map._draggableMoved(t))&&(n=t);this._fireEvent(!!n&&[n],e)},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(xt(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var n,r,i=this._drawFirst;i;i=i.next)(n=i.layer).options.interactive&&n._containsPoint(t)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(e),r&&(bt(this._container,"leaflet-interactive"),this._fireEvent([r],e,"mouseover"),this._hoveredLayer=r)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],e),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,t,n){this._map._fireDOMEvent(t,n||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var n=t.next,r=t.prev;n&&(n.prev=r,r?r.next=n:n&&(this._drawFirst=n),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e))}},_bringToBack:function(e){var t=e._order;if(t){var n=t.next,r=t.prev;r&&(r.next=n,n?n.prev=r:r&&(this._drawLast=r),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e))}}});function Gr(e){return Re.canvas?new Hr(e):null}var Kr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Wr={_initContainer:function(){this._container=ft("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Vr.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=Kr("shape");bt(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=Kr("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[a(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;pt(t),e.removeInteractiveTarget(t),delete this._layers[a(e)]},_updateStyle:function(e){var t=e._stroke,n=e._fill,r=e.options,o=e._container;o.stroked=!!r.stroke,o.filled=!!r.fill,r.stroke?(t||(t=e._stroke=Kr("stroke")),o.appendChild(t),t.weight=r.weight+"px",t.color=r.color,t.opacity=r.opacity,r.dashArray?t.dashStyle=v(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=r.lineCap.replace("butt","flat"),t.joinstyle=r.lineJoin):t&&(o.removeChild(t),e._stroke=null),r.fill?(n||(n=e._fill=Kr("fill")),o.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(o.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=Math.round(e._radius),r=Math.round(e._radiusY||n);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+n+","+r+" 0,23592600")},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){gt(e._container)},_bringToBack:function(e){vt(e._container)}},Qr=Re.vml?Kr:Y,Zr=Vr.extend({_initContainer:function(){this._container=Qr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Qr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){pt(this._container),zt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){Vr.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,n.setAttribute("width",t.x),n.setAttribute("height",t.y)),Ct(n,e.min),n.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=Qr("path");e.options.className&&bt(t,e.options.className),e.options.interactive&&bt(t,"leaflet-interactive"),this._updateStyle(e),this._layers[a(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){pt(e._path),e.removeInteractiveTarget(e._path),delete this._layers[a(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight),t.setAttribute("stroke-linecap",n.lineCap),t.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?t.setAttribute("stroke-dasharray",n.dashArray):t.removeAttribute("stroke-dasharray"),n.dashOffset?t.setAttribute("stroke-dashoffset",n.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity),t.setAttribute("fill-rule",n.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,J(e._parts,t))},_updateCircle:function(e){var t=e._point,n=Math.max(Math.round(e._radius),1),r="a"+n+","+(Math.max(Math.round(e._radiusY),1)||n)+" 0 1,0 ",o=e._empty()?"M0 0":"M"+(t.x-n)+","+t.y+r+2*n+",0 "+r+2*-n+",0 ";this._setPath(e,o)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){gt(e._path)},_bringToBack:function(e){vt(e._path)}});function Yr(e){return Re.svg||Re.vml?new Zr(e):null}Re.vml&&Zr.include(Wr),nn.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||void 0===e)return!1;var t=this._paneRenderers[e];return void 0===t&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&Gr(e)||Yr(e)}});var Jr=ur.extend({initialize:function(e,t){ur.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return[(e=z(e)).getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function $r(e,t){return new Jr(e,t)}Zr.create=Qr,Zr.pointsToPath=J,hr.geometryToLayer=fr,hr.coordsToLatLng=mr,hr.coordsToLatLngs=gr,hr.latLngToCoords=vr,hr.latLngsToCoords=yr,hr.getFeature=br,hr.asFeature=xr,nn.mergeOptions({boxZoom:!0});var Xr=gn.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){Dt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){zt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){pt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||1!==e.which&&1!==e.button)return!1;this._clearDeferredResetState(),this._resetState(),rt(),Tt(),this._startPoint=this._map.mouseEventToContainerPoint(e),Dt(document,{contextmenu:Qt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=ft("div","leaflet-zoom-box",this._container),bt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new R(this._point,this._startPoint),n=t.getSize();Ct(this._box,t.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(pt(this._box),xt(this._container,"leaflet-crosshair")),ot(),It(),zt(document,{contextmenu:Qt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if((1===e.which||1===e.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var t=new F(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){27===e.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});nn.addInitHook("addHandler","boxZoom",Xr),nn.mergeOptions({doubleClickZoom:!0});var eo=gn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom(),r=t.options.zoomDelta,o=e.originalEvent.shiftKey?n-r:n+r;"center"===t.options.doubleClickZoom?t.setZoom(o):t.setZoomAround(e.containerPoint,o)}});nn.addInitHook("addHandler","doubleClickZoom",eo),nn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var to=gn.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new bn(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}bt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){xt(this._map._container,"leaflet-grab"),xt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=z(this._map.options.maxBounds);this._offsetLimit=D(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,o=(r-t+n)%e+t-n,i=(r+t+n)%e-t-n,a=Math.abs(o+n)<Math.abs(i+n)?o:i;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(e){var t=this._map,n=t.options,r=!n.inertia||e.noInertia||this._times.length<2;if(t.fire("dragend",e),r)t.fire("moveend");else{this._prunePositions(+new Date);var o=this._lastPos.subtract(this._positions[0]),i=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,s=o.multiplyBy(a/i),l=s.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,l),u=s.multiplyBy(c/l),d=c/(n.inertiaDeceleration*a),h=u.multiplyBy(-d/2).round();h.x||h.y?(h=t._limitOffset(h,t.options.maxBounds),S(function(){t.panBy(h,{duration:d,easeLinearity:a,noMoveStart:!0,animate:!0})})):t.fire("moveend")}}});nn.addInitHook("addHandler","dragging",to),nn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var no=gn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),Dt(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),zt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,r=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t,n,r=this._panKeys={},o=this.keyCodes;for(t=0,n=o.left.length;t<n;t++)r[o.left[t]]=[-1*e,0];for(t=0,n=o.right.length;t<n;t++)r[o.right[t]]=[e,0];for(t=0,n=o.down.length;t<n;t++)r[o.down[t]]=[0,e];for(t=0,n=o.up.length;t<n;t++)r[o.up[t]]=[0,-1*e]},_setZoomDelta:function(e){var t,n,r=this._zoomKeys={},o=this.keyCodes;for(t=0,n=o.zoomIn.length;t<n;t++)r[o.zoomIn[t]]=e;for(t=0,n=o.zoomOut.length;t<n;t++)r[o.zoomOut[t]]=-e},_addHooks:function(){Dt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){zt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t,n=e.keyCode,r=this._map;if(n in this._panKeys){if(!r._panAnim||!r._panAnim._inProgress)if(t=this._panKeys[n],e.shiftKey&&(t=M(t).multiplyBy(3)),r.options.maxBounds&&(t=r._limitOffset(M(t),r.options.maxBounds)),r.options.worldCopyJump){var o=r.wrapLatLng(r.unproject(r.project(r.getCenter()).add(t)));r.panTo(o)}else r.panBy(t)}else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!r._popup||!r._popup.options.closeOnEscapeKey)return;r.closePopup()}Qt(e)}}});nn.addInitHook("addHandler","keyboard",no),nn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ro=gn.extend({addHooks:function(){Dt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){zt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=$t(e),n=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),r),Qt(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),n=this._map.options.zoomSnap||0;e._stop();var r=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,i=n?Math.ceil(o/n)*n:o,a=e._limitZoom(t+(this._delta>0?i:-i))-t;this._delta=0,this._startTime=null,a&&("center"===e.options.scrollWheelZoom?e.setZoom(t+a):e.setZoomAround(this._lastMousePos,t+a))}});nn.addInitHook("addHandler","scrollWheelZoom",ro);var oo=600;nn.mergeOptions({tapHold:Re.touchNative&&Re.safari&&Re.mobile,tapTolerance:15});var io=gn.extend({addHooks:function(){Dt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){zt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),1===e.touches.length){var t=e.touches[0];this._startPos=this._newPos=new P(t.clientX,t.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Dt(document,"touchend",Wt),Dt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",t))},this),oo),Dt(document,"touchend touchcancel contextmenu",this._cancel,this),Dt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){zt(document,"touchend",Wt),zt(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),zt(document,"touchend touchcancel contextmenu",this._cancel,this),zt(document,"touchmove",this._onMove,this)},_onMove:function(e){var t=e.touches[0];this._newPos=new P(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,t){var n=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});n._simulated=!0,t.target.dispatchEvent(n)}});nn.addInitHook("addHandler","tapHold",io),nn.mergeOptions({touchZoom:Re.touch,bounceAtZoomLimits:!0});var ao=gn.extend({addHooks:function(){bt(this._map._container,"leaflet-touch-zoom"),Dt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){xt(this._map._container,"leaflet-touch-zoom"),zt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&!t._animatingZoom&&!this._zooming){var n=t.mouseEventToContainerPoint(e.touches[0]),r=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),"center"!==t.options.touchZoom&&(this._pinchStartLatLng=t.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),Dt(document,"touchmove",this._onTouchMove,this),Dt(document,"touchend touchcancel",this._onTouchEnd,this),Wt(e)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length&&this._zooming){var t=this._map,n=t.mouseEventToContainerPoint(e.touches[0]),r=t.mouseEventToContainerPoint(e.touches[1]),i=n.distanceTo(r)/this._startDist;if(this._zoom=t.getScaleZoom(i,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&i<1||this._zoom>t.getMaxZoom()&&i>1)&&(this._zoom=t._limitZoom(this._zoom)),"center"===t.options.touchZoom){if(this._center=this._startLatLng,1===i)return}else{var a=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===i&&0===a.x&&0===a.y)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),N(this._animRequest);var s=o(t._move,t,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=S(s,this,!0),Wt(e)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,N(this._animRequest),zt(document,"touchmove",this._onTouchMove,this),zt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});nn.addInitHook("addHandler","touchZoom",ao),nn.BoxZoom=Xr,nn.DoubleClickZoom=eo,nn.Drag=to,nn.Keyboard=no,nn.ScrollWheelZoom=ro,nn.TapHold=io,nn.TouchZoom=ao,e.Bounds=R,e.Browser=Re,e.CRS=q,e.Canvas=Hr,e.Circle=ar,e.CircleMarker=or,e.Class=j,e.Control=on,e.DivIcon=Lr,e.DivOverlay=Tr,e.DomEvent=en,e.DomUtil=Rt,e.Draggable=bn,e.Evented=I,e.FeatureGroup=Zn,e.GeoJSON=hr,e.GridLayer=Dr,e.Handler=gn,e.Icon=Jn,e.ImageOverlay=Ar,e.LatLng=B,e.LatLngBounds=F,e.Layer=Kn,e.LayerGroup=Wn,e.LineUtil=zn,e.Map=nn,e.Marker=tr,e.Mixin=vn,e.Path=rr,e.Point=P,e.PolyUtil=An,e.Polygon=ur,e.Polyline=lr,e.Popup=Ir,e.PosAnimation=tn,e.Projection=qn,e.Rectangle=Jr,e.Renderer=Vr,e.SVG=Zr,e.SVGOverlay=jr,e.TileLayer=zr,e.Tooltip=Or,e.Transformation=K,e.Util=C,e.VideoOverlay=Nr,e.bind=o,e.bounds=D,e.canvas=Gr,e.circle=sr,e.circleMarker=ir,e.control=an,e.divIcon=Rr,e.extend=n,e.featureGroup=Yn,e.geoJSON=_r,e.geoJson=kr,e.gridLayer=Fr,e.icon=$n,e.imageOverlay=Sr,e.latLng=U,e.latLngBounds=z,e.layerGroup=Qn,e.map=rn,e.marker=nr,e.point=M,e.polygon=dr,e.polyline=cr,e.popup=Pr,e.rectangle=$r,e.setOptions=f,e.stamp=a,e.svg=Yr,e.svgOverlay=Er,e.tileLayer=Br,e.tooltip=Mr,e.transformation=W,e.version=t,e.videoOverlay=Cr;var so=window.L;e.noConflict=function(){return window.L=so,this},window.L=e}(t)},350:(e,t,n)=>{const r=n(7969),o=r.getBCHDigit(1335);t.getEncodedBits=function(e,t){const n=e.bit<<3|t;let i=n<<10;for(;r.getBCHDigit(i)-o>=0;)i^=1335<<r.getBCHDigit(i)-o;return 21522^(n<<10|i)}},443:(e,t,n)=>{"use strict";n.d(t,{$b:()=>o,Vy:()=>c});const r=[];var o;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(o||(o={}));const i={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},a=o.INFO,s={[o.DEBUG]:"log",[o.VERBOSE]:"log",[o.INFO]:"info",[o.WARN]:"warn",[o.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=s[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class c{constructor(e){this.name=e,this._logLevel=a,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in o))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?i[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,o.DEBUG,...t),this._logHandler(this,o.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,o.VERBOSE,...t),this._logHandler(this,o.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,o.INFO,...t),this._logHandler(this,o.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,o.WARN,...t),this._logHandler(this,o.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,o.ERROR,...t),this._logHandler(this,o.ERROR,...t)}}},579:(e,t,n)=>{"use strict";e.exports=n(1153)},900:(e,t,n)=>{const r=n(7421);function o(e){this.mode=r.NUMERIC,this.data=e.toString()}o.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){let t,n,r;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),r=parseInt(n,10),e.put(r,10);const o=this.data.length-t;o>0&&(n=this.data.substr(t),r=parseInt(n,10),e.put(r,3*o+1))},e.exports=o},1056:module=>{var t;self,t=function(){return function(){var __webpack_modules__={8:function(e,t){t=function(e){var t,i,a=e[0]/255,s=e[1]/255,l=e[2]/255,c=n(a,s,l),u=r(a,s,l),d=u-c;(t=n(60*(t=u===c?0:a===u?(s-l)/d:s===u?2+(l-a)/d:4+(a-s)/d),360))<0&&(t+=360);var h=(c+u)/2;i=u===c?0:h<=.5?d/(u+c):d/(2-u-c);var f=[o(t),o(100*i),o(100*h)];return e[3]&&(f[3]=e[3]),f};var n=Math.min,r=Math.max,o=Math.round;e.exports=t},15:function(e,t,n){var r=n(5651),o=n(8971);t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(n,i);var a=n.ellipsis,s=n.separator;if(t>e.length)return e;var l=t-a.length;if(l<1)return a;var c=e.slice(0,l);if(o(s))return c+a;if(e.indexOf(s,l)!==l){var u=c.lastIndexOf(s);u>-1&&(c=c.slice(0,u))}return c+a};var i={ellipsis:"..."};e.exports=t},21:function(e,t,n){var r=n(2717),o=n(1738),i=n(9100),a=n(8178),s=new(t=r({className:"Select",initialize:function(e){return this.length=0,e?o(e)?s.find(e):void(e.nodeType&&(this[0]=e,this.length=1)):this},find:function(e){var n=new t;return this.each(function(){a(n,this.querySelectorAll(e))}),n},each:function(e){return i(this,function(t,n){e.call(t,n,t)}),this}}))(document);e.exports=t},96:function(e,t,n){var r=n(2561);t=function(e){return r(e).toLocaleLowerCase()},e.exports=t},128:function(e,t,n){"use strict";n.d(t,{A:function(){return Y}});var r=n(3029),o=n(2901),i=n(388),a=n(3954),s=n(5361),l=n(3915),c=n.n(l),u=n(6097),d=n.n(u),h=n(1738),f=n.n(h),p=n(4994),m=n.n(p),g=n(9405),v=n.n(g),y=n(5169),b=n.n(y),x=n(9548),w=n.n(x),_=n(3249),k=n.n(_),A=n(6030),S=n.n(A),N=n(5004),C=n.n(N);function j(e){var t="luna-".concat(e,"-");function n(e){return c()(v()(e).split(/\s+/),function(e){return k()(e,t)?e:e.replace(/[\w-]+/,function(e){return"".concat(t).concat(e)})}).join(" ")}return function(e){if(/<[^>]*>/g.test(e))try{var t=w().parse(e);return E(t,function(e){e.attrs&&e.attrs.class&&(e.attrs.class=n(e.attrs.class))}),w().stringify(t)}catch(t){return n(e)}return n(e)}}function E(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];t(o),o.content&&E(o.content,t)}}function T(e){return S()(e.replace("px",""))}n(9410),n(8609),b();var I=n(2263),P=n.n(I),O=n(3693),M=n.n(O),L=n(9100),R=n.n(L),D=n(8105),F=n.n(D),z=n(5651),B=n.n(z),U=n(961),q=n.n(U),V=n(7e3),H=n.n(V),G=n(1009),K=n.n(G);function W(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(W=function(){return!!e})()}var Q=function(e){function t(e,n){var o,s,l=n.compName,c=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).theme,u=void 0===c?"light":c;return(0,r.A)(this,t),o=function(e,t,n){return t=(0,a.A)(t),(0,i.A)(e,W()?Reflect.construct(t,[],(0,a.A)(e).constructor):t.apply(e,n))}(this,t),o.subComponents=[],o.theme="",o.onThemeChange=function(e){"auto"===o.options.theme&&o.setTheme(e)},o.compName=l,o.c=j(l),o.options={},o.container=e,o.$container=M()(e),o.$container.addClass(["luna-".concat(l),o.c("platform-".concat((s=C()(),"os x"===s?"mac":s)))]),o.on("changeOption",function(e,t){if("theme"===e&&t){var n=t;"auto"===t&&(n=H().get()),o.setTheme(n),R()(o.subComponents,function(e){return e.setOption("theme",t)})}}),H().on("change",o.onThemeChange),o.setOption("theme",u),o}return(0,s.A)(t,e),(0,o.A)(t,[{key:"destroy",value:function(){var e=this;this.destroySubComponents();var t=this.$container,n=t.attr("class");R()(n.split(/\s+/),function(n){K()(n,"luna-".concat(e.compName))&&t.rmClass(n)}),t.html(""),this.emit("destroy"),this.removeAllListeners(),H().off("change",this.onThemeChange)}},{key:"setOption",value:function(e,t){var n=this,r=this.options,o={};"string"==typeof e?o[e]=t:o=e,R()(o,function(e,t){var o=r[t];r[t]=e,e!==o&&n.emit("changeOption",t,e,o)})}},{key:"getOption",value:function(e){return this.options[e]}},{key:"addSubComponent",value:function(e){e.setOption("theme",this.options.theme),this.subComponents.push(e)}},{key:"removeSubComponent",value:function(e){q()(this.subComponents,function(t){return t===e})}},{key:"destroySubComponents",value:function(){R()(this.subComponents,function(e){return e.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};B()(e,t),F()(this.options,e)}},{key:"find",value:function(e){return this.$container.find(this.c(e))}},{key:"setTheme",value:function(e){var t=this.c,n=this.$container;this.theme&&n.rmClass(t("theme-".concat(this.theme))),n.addClass(t("theme-".concat(e))),this.theme=e}}])}(P());function Z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Z=function(){return!!e})()}e=n.hmd(e);var Y=function(e){function t(e){var n,o,s,l,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.A)(this,t),o=this,s=t,l=[e,{compName:"box-model"}],s=(0,a.A)(s),(n=(0,i.A)(o,Z()?Reflect.construct(s,l||[],(0,a.A)(o).constructor):s.apply(o,l))).initOptions(c),n.options.element&&n.render(),n.bindEvent(),n}return(0,s.A)(t,e),(0,o.A)(t,[{key:"bindEvent",value:function(){var e=this;this.on("changeOption",function(t){"element"===t&&e.render()})}},{key:"render",value:function(){var e=this,t=this.c,n=this.$container,r=this.getBoxModelData();n.html([r.position?'<div class="'.concat(t("position"),'">'):"",r.position?'<div class="'.concat(t("label"),'">position</div><div class="').concat(t("top"),'">').concat(r.position.top,'</div><br><div class="').concat(t("left"),'">').concat(r.position.left,"</div>"):"",'<div class="'.concat(t("margin"),'">'),'<div class="'.concat(t("label"),'">margin</div><div class="').concat(t("top"),'">').concat(r.margin.top,'</div><br><div class="').concat(t("left"),'">').concat(r.margin.left,"</div>"),'<div class="'.concat(t("border"),'">'),'<div class="'.concat(t("label"),'">border</div><div class="').concat(t("top"),'">').concat(r.border.top,'</div><br><div class="').concat(t("left"),'">').concat(r.border.left,"</div>"),'<div class="'.concat(t("padding"),'">'),'<div class="'.concat(t("label"),'">padding</div><div class="').concat(t("top"),'">').concat(r.padding.top,'</div><br><div class="').concat(t("left"),'">').concat(r.padding.left,"</div>"),'<div class="'.concat(t("content"),'">'),"<span>".concat(r.content.width,"</span>&nbsp;\xd7&nbsp;<span>").concat(r.content.height,"</span>"),"</div>",'<div class="'.concat(t("right"),'">').concat(r.padding.right,'</div><br><div class="').concat(t("bottom"),'">').concat(r.padding.bottom,"</div>"),"</div>",'<div class="'.concat(t("right"),'">').concat(r.border.right,'</div><br><div class="').concat(t("bottom"),'">').concat(r.border.bottom,"</div>"),"</div>",'<div class="'.concat(t("right"),'">').concat(r.margin.right,'</div><br><div class="').concat(t("bottom"),'">').concat(r.margin.bottom,"</div>"),"</div>",r.position?'<div class="'.concat(t("right"),'">').concat(r.position.right,'</div><br><div class="').concat(t("bottom"),'">').concat(r.position.bottom,"</div>"):"",r.position?"</div>":""].join(""));var o=this.find(".margin"),i=this.find(".border"),a=this.find(".padding"),s=this.find(".content"),l=function(){o.addClass(t("highlighted")),i.addClass(t("highlighted")),a.addClass(t("highlighted")),s.addClass(t("highlighted"))};l();var c=function(n){var r;switch(e.find(".highlighted").rmClass(t("highlighted")),n){case"margin":r=o;break;case"border":r=i;break;case"padding":r=a;break;default:r=s}r.addClass(t("highlighted")),e.emit("highlight",n)},u=m()(c,this,"margin"),d=m()(c,this,"border"),h=m()(c,this,"padding"),f=m()(c,this,"content");o.on("mouseenter",u).on("mouseleave",function(){l(),e.emit("highlight","all")}),i.on("mouseenter",d).on("mouseleave",u),a.on("mouseenter",h).on("mouseleave",d),s.on("mouseenter",f).on("mouseleave",h)}},{key:"getBoxModelData",value:function(){var e=this.options.element,t=window.getComputedStyle(e);function n(e){var n=["top","left","right","bottom"];return"position"!==e&&(n=c()(n,function(t){return"".concat(e,"-").concat(t)})),"border"===e&&(n=c()(n,function(e){return"".concat(e,"-width")})),{top:J(t[n[0]],e),left:J(t[n[1]],e),right:J(t[n[2]],e),bottom:J(t[n[3]],e)}}var r,o,i,a,s,l,u={margin:n("margin"),border:n("border"),padding:n("padding"),content:(r=e,o=window.getComputedStyle(r),i=T(o.paddingLeft)+T(o.paddingRight),a=T(o.paddingTop)+T(o.paddingBottom),s=T(o.borderLeftWidth)+T(o.borderRightWidth),l=T(o.borderTopWidth)+T(o.borderBottomWidth),{width:J(r.offsetWidth-i-s),height:J(r.offsetHeight-a-l)})};return"static"!==t.position&&(u.position=n("position")),u}}])}(Q);function J(e,t){if(d()(e))return e;if(!f()(e))return"\u2012";var n=T(e);return isNaN(n)?e:"position"===t?n:0===n?"\u2012":n}!function(e,t){try{e.exports=t,e.exports.default=t}catch(e){}}(e,Y)},162:function(e,t){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.adoptStyleSheet=t.constrainNumber=t.ellipsify=t.createElement=t.createTextChild=t.createChild=t.log=t.Overlay=void 0;var i=function(){function e(e,t){void 0===t&&(t=[]),this.viewportSize={width:800,height:600},this.deviceScaleFactor=1,this.emulationScaleFactor=1,this.pageScaleFactor=1,this.pageZoomFactor=1,this.scrollX=0,this.scrollY=0,this.canvasWidth=0,this.canvasHeight=0,this._installed=!1,this._window=e,this._document=e.document,Array.isArray(t)||(t=[t]),this.style=t}return e.prototype.setCanvas=function(e){this.canvas=e,this._context=e.getContext("2d")},e.prototype.install=function(){var e,t;try{for(var r=n(this.style),o=r.next();!o.done;o=r.next())l(o.value)}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this._installed=!0},e.prototype.uninstall=function(){var e,t,r=function(e){document.adoptedStyleSheets=document.adoptedStyleSheets.filter(function(t){return t!==e})};try{for(var o=n(this.style),i=o.next();!i.done;i=o.next())r(i.value)}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}this._installed=!1},e.prototype.reset=function(e){e&&(this.viewportSize=e.viewportSize,this.visualViewportSize=e.visualViewportSize,this.deviceScaleFactor=e.deviceScaleFactor,this.pageScaleFactor=e.pageScaleFactor,this.pageZoomFactor=e.pageZoomFactor,this.emulationScaleFactor=e.emulationScaleFactor,this.scrollX=Math.round(e.scrollX),this.scrollY=Math.round(e.scrollY)),this.resetCanvas()},e.prototype.resetCanvas=function(){this.canvas&&this._context&&(this.canvas.width=this.deviceScaleFactor*this.viewportSize.width,this.canvas.height=this.deviceScaleFactor*this.viewportSize.height,this.canvas.style.width=this.viewportSize.width+"px",this.canvas.style.height=this.viewportSize.height+"px",this._context.scale(this.deviceScaleFactor,this.deviceScaleFactor),this.canvasWidth=this.viewportSize.width,this.canvasHeight=this.viewportSize.height)},e.prototype.setPlatform=function(e){this.platform=e,this._installed||this.install()},e.prototype.dispatch=function(e){this[e.shift()].apply(this,e)},e.prototype.eventHasCtrlOrMeta=function(e){return"mac"===this.platform?e.metaKey&&!e.ctrlKey:e.ctrlKey&&!e.metaKey},Object.defineProperty(e.prototype,"context",{get:function(){if(!this._context)throw new Error("Context object is missing");return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"document",{get:function(){if(!this._document)throw new Error("Document object is missing");return this._document},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){if(!this._window)throw new Error("Window object is missing");return this._window},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"installed",{get:function(){return this._installed},enumerable:!1,configurable:!0}),e}();function a(e,t,n){var r=s(t,n);return r.addEventListener("click",function(e){e.stopPropagation()},!1),e.appendChild(r),r}function s(e,t){var n=document.createElement(e);if(t){var r=t.split(/\s+/);r=r.map(function(e){return"luna-dom-highlighter-"+e}),n.className=r.join(" ")}return n}function l(e){document.adoptedStyleSheets=o(o([],r(document.adoptedStyleSheets),!1),[e],!1)}t.Overlay=i,t.log=function(e){var t=document.getElementById("log");t||((t=a(document.body,"div")).id="log"),a(t,"div").textContent=e},t.createChild=a,t.createTextChild=function(e,t){var n=document.createTextNode(t);return e.appendChild(n),n},t.createElement=s,t.ellipsify=function(e,t){return e.length<=t?String(e):e.substr(0,t-1)+"\u2026"},t.constrainNumber=function(e,t,n){return e<t?e=t:e>n&&(e=n),e},t.adoptStyleSheet=l},187:function(e,t,n){(t=n(6314)(!1)).push([e.id,'.luna-setting{min-width:320px;color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));background-color:rgba(0,0,0,0);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-family:var(--luna-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px}.luna-setting .luna-setting-hidden,.luna-setting.luna-setting-hidden{display:none}.luna-setting .luna-setting-invisible,.luna-setting.luna-setting-invisible{visibility:hidden}.luna-setting *{box-sizing:border-box}.luna-setting.luna-setting-theme-dark{color-scheme:dark;color:hsla(0,0%,100%,.85);color:var(--luna-color-text-dark,rgba(255,255,255,.85));background-color:rgba(0,0,0,0)}.luna-setting-item.luna-setting-selected:focus{outline:1px solid}.luna-setting-item .luna-setting-title{line-height:1.4em;font-weight:600}.luna-setting-item .luna-setting-description,.luna-setting-item.luna-setting-item-markdown{line-height:1.4em}.luna-setting-item .luna-setting-description *,.luna-setting-item.luna-setting-item-markdown *{margin:0}.luna-setting-item .luna-setting-description strong,.luna-setting-item.luna-setting-item-markdown strong{font-weight:600}.luna-setting-item .luna-setting-description a,.luna-setting-item.luna-setting-item-markdown a{background-color:rgba(0,0,0,0);text-decoration:none}.luna-setting-item .luna-setting-control,.luna-setting-item .luna-setting-description{font-size:12px}.luna-setting-item .luna-setting-description{margin-bottom:8px}.luna-setting-item .luna-setting-control{display:flex;align-items:center}.luna-setting-item-button,.luna-setting-item-checkbox,.luna-setting-item-input,.luna-setting-item-markdown,.luna-setting-item-number,.luna-setting-item-select,.luna-setting-item-title{padding:10px}.luna-setting-item-title{font-weight:600}.luna-setting-item-title.luna-setting-level-1{font-size:18px}.luna-setting-item-title.luna-setting-level-2{font-size:16px}.luna-setting-item-title.luna-setting-level-3{font-size:14px}.luna-setting-item-input.luna-setting-disabled input{opacity:.6}.luna-setting-item-input input{-webkit-tap-highlight-color:transparent;color:rgba(0,0,0,.88);-webkit-appearance:none;-moz-appearance:none;appearance:none;border:1px solid;outline:0;padding:2px 8px;border-radius:2px;font-size:14px;width:100%}.luna-setting-item-number.luna-setting-disabled .luna-setting-range-container,.luna-setting-item-number.luna-setting-disabled input{opacity:.6}.luna-setting-item-number.luna-setting-disabled .luna-setting-range-container input{opacity:1}.luna-setting-item-number input[type=number]{-webkit-tap-highlight-color:transparent;color:rgba(0,0,0,.88);-webkit-appearance:none;-moz-appearance:none;appearance:none;border:1px solid;outline:0;padding:2px 8px;border-radius:2px;font-size:14px;width:200px;padding:2px}.luna-setting-item-number .luna-setting-range-container{flex:2;position:relative;top:1px}.luna-setting-item-number .luna-setting-range-container .luna-setting-range-track{height:4px;width:100%;padding:0 10px;position:absolute;left:0;top:4px}.luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar{border-radius:2px;overflow:hidden;width:100%;height:4px}.luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar .luna-setting-range-track-progress{height:100%;width:50%}.luna-setting-item-number .luna-setting-range-container input{-webkit-appearance:none;background:rgba(0,0,0,0);height:4px;width:100%;position:relative;top:-3px;margin:0 auto;outline:0;border-radius:2px}.luna-setting-item-number .luna-setting-range-container input::-webkit-slider-thumb{-webkit-appearance:none;position:relative;top:0;z-index:1;width:16px;border:none;height:16px;border-radius:10px;border:1px solid}.luna-setting-item-checkbox.luna-setting-disabled .luna-setting-control{opacity:.6}.luna-setting-item-checkbox input{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:14px;height:14px;border:1px solid;border-radius:0;position:relative;outline:0;margin-left:0;margin-right:8px;transition:background-color .1s;align-self:flex-start;flex-shrink:0}.luna-setting-item-checkbox input:checked:after{content:"";width:100%;height:100%;position:absolute;left:0;top:0;background-image:url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9JzMwMHB4JyB3aWR0aD0nMzAwcHgnICBmaWxsPSIjZmZmZmZmIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgdmVyc2lvbj0iMS4xIiB4PSIwcHgiIHk9IjBweCI+PHRpdGxlPmljb25fYnlfUG9zaGx5YWtvdjEwPC90aXRsZT48ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz48ZyBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyBmaWxsPSIjZmZmZmZmIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi4wMDAwMDAsIDI2LjAwMDAwMCkiPjxwYXRoIGQ9Ik0xNy45OTk5ODc4LDMyLjQgTDEwLjk5OTk4NzgsMjUuNCBDMTAuMjI2Nzg5MSwyNC42MjY4MDE0IDguOTczMTg2NDQsMjQuNjI2ODAxNCA4LjE5OTk4Nzc5LDI1LjQgTDguMTk5OTg3NzksMjUuNCBDNy40MjY3ODkxNCwyNi4xNzMxOTg2IDcuNDI2Nzg5MTQsMjcuNDI2ODAxNCA4LjE5OTk4Nzc5LDI4LjIgTDE2LjU4NTc3NDIsMzYuNTg1Nzg2NCBDMTcuMzY2ODIyOCwzNy4zNjY4MzUgMTguNjMzMTUyOCwzNy4zNjY4MzUgMTkuNDE0MjAxNCwzNi41ODU3ODY0IEw0MC41OTk5ODc4LDE1LjQgQzQxLjM3MzE4NjQsMTQuNjI2ODAxNCA0MS4zNzMxODY0LDEzLjM3MzE5ODYgNDAuNTk5OTg3OCwxMi42IEw0MC41OTk5ODc4LDEyLjYgQzM5LjgyNjc4OTEsMTEuODI2ODAxNCAzOC41NzMxODY0LDExLjgyNjgwMTQgMzcuNzk5OTg3OCwxMi42IEwxNy45OTk5ODc4LDMyLjQgWiI+PC9wYXRoPjwvZz48L2c+PC9nPjwvc3ZnPg==);background-size:30px;background-repeat:no-repeat;background-position:center}.luna-setting-item-checkbox label{-webkit-tap-highlight-color:transparent}.luna-setting-item-checkbox label *{margin:0}.luna-setting-item-select.luna-setting-disabled .luna-setting-select{opacity:.6}.luna-setting-item-select .luna-setting-select{position:relative}.luna-setting-item-select .luna-setting-select select{margin:0;font-size:14px;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:1px solid;padding:2px 8px;padding-right:18px;outline:0;border-radius:2px;-webkit-tap-highlight-color:transparent}.luna-setting-item-select .luna-setting-select:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:0;bottom:0;right:6px;margin:auto;pointer-events:none}.luna-setting-item-select .luna-setting-select select{width:300px}.luna-setting-item-button button{-webkit-tap-highlight-color:transparent;border:1px solid;padding:2px 8px;font-size:14px;border-radius:2px}.luna-setting-item-button button:active{border:1px solid}.luna-setting-item-separator{border-bottom:1px solid}.luna-setting-theme-light .luna-setting-item.luna-setting-selected,.luna-setting-theme-light .luna-setting-item:hover{background-color:rgba(0,0,0,.06);background-color:var(--luna-color-fill-secondary,rgba(0,0,0,.06))}.luna-setting-theme-light .luna-setting-item.luna-setting-selected:focus{outline-color:#1a73e8;outline-color:var(--luna-color-primary,#1a73e8)}.luna-setting-theme-light .luna-setting-item .luna-setting-description a,.luna-setting-theme-light .luna-setting-item.luna-setting-item-markdown a{color:#1a73e8;color:var(--luna-color-primary,#1a73e8)}.luna-setting-theme-light .luna-setting-item-separator{border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9)}.luna-setting-theme-light .luna-setting-item-input input{background-color:#fff;background-color:var(--luna-color-bg-container,#fff);color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9)}.luna-setting-theme-light .luna-setting-item-checkbox input{border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9)}.luna-setting-theme-light .luna-setting-item-checkbox input:checked{background-color:#1a73e8;background-color:var(--luna-color-primary,#1a73e8);border-color:#1a73e8;border-color:var(--luna-color-primary,#1a73e8)}.luna-setting-theme-light .luna-setting-item-select .luna-setting-select select{background-color:#fff;background-color:var(--luna-color-bg-container,#fff);color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9)}.luna-setting-theme-light .luna-setting-item-select .luna-setting-select:after{border-top-color:rgba(0,0,0,.88);border-top-color:var(--luna-color-text,rgba(0,0,0,.88))}.luna-setting-theme-light .luna-setting-item-button button{background-color:#fff;background-color:var(--luna-color-bg-container,#fff);border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9);color:#1a73e8;color:var(--luna-color-primary,#1a73e8)}.luna-setting-theme-light .luna-setting-item-button button:active,.luna-setting-theme-light .luna-setting-item-button button:hover{background-color:rgba(0,0,0,.06);background-color:var(--luna-color-fill-secondary,rgba(0,0,0,.06))}.luna-setting-theme-light .luna-setting-item-button button:active{border-color:#1a73e8;border-color:var(--luna-color-primary,#1a73e8)}.luna-setting-theme-light .luna-setting-item-number input[type=number]{background-color:#fff;background-color:var(--luna-color-bg-container,#fff);color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9)}.luna-setting-theme-light .luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar{background-color:#d9d9d9;background-color:var(--luna-color-border,#d9d9d9)}.luna-setting-theme-light .luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar .luna-setting-range-track-progress{background-color:#1a73e8;background-color:var(--luna-color-primary,#1a73e8)}.luna-setting-theme-light .luna-setting-item-number .luna-setting-range-container input::-webkit-slider-thumb{border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9);background:radial-gradient(circle at center,#eee 0,#eee 15%,#fff 22%,#fff 100%)}.luna-setting-theme-dark .luna-setting-item.luna-setting-selected,.luna-setting-theme-dark .luna-setting-item:hover{background-color:hsla(0,0%,100%,.12);background-color:var(--luna-color-fill-secondary,rgba(255,255,255,.12))}.luna-setting-theme-dark .luna-setting-item.luna-setting-selected:focus{outline-color:#1965c8;outline-color:var(--luna-color-primary,#1965c8)}.luna-setting-theme-dark .luna-setting-item .luna-setting-description a,.luna-setting-theme-dark .luna-setting-item.luna-setting-item-markdown a{color:#1965c8;color:var(--luna-color-primary,#1965c8)}.luna-setting-theme-dark .luna-setting-item-separator{border-color:#424242;border-color:var(--luna-color-border,#424242)}.luna-setting-theme-dark .luna-setting-item-input input{background-color:#141414;background-color:var(--luna-color-bg-container,#141414);color:hsla(0,0%,100%,.85);color:var(--luna-color-text,rgba(255,255,255,.85));border-color:#424242;border-color:var(--luna-color-border,#424242)}.luna-setting-theme-dark .luna-setting-item-checkbox input{border-color:#424242;border-color:var(--luna-color-border,#424242)}.luna-setting-theme-dark .luna-setting-item-checkbox input:checked{background-color:#1965c8;background-color:var(--luna-color-primary,#1965c8);border-color:#1965c8;border-color:var(--luna-color-primary,#1965c8)}.luna-setting-theme-dark .luna-setting-item-select .luna-setting-select select{background-color:#141414;background-color:var(--luna-color-bg-container,#141414);color:hsla(0,0%,100%,.85);color:var(--luna-color-text,rgba(255,255,255,.85));border-color:#424242;border-color:var(--luna-color-border,#424242)}.luna-setting-theme-dark .luna-setting-item-select .luna-setting-select:after{border-top-color:hsla(0,0%,100%,.85);border-top-color:var(--luna-color-text,rgba(255,255,255,.85))}.luna-setting-theme-dark .luna-setting-item-button button{background-color:#141414;background-color:var(--luna-color-bg-container,#141414);border-color:#424242;border-color:var(--luna-color-border,#424242);color:#1965c8;color:var(--luna-color-primary,#1965c8)}.luna-setting-theme-dark .luna-setting-item-button button:active,.luna-setting-theme-dark .luna-setting-item-button button:hover{background-color:hsla(0,0%,100%,.12);background-color:var(--luna-color-fill-secondary,rgba(255,255,255,.12))}.luna-setting-theme-dark .luna-setting-item-button button:active{border-color:#1965c8;border-color:var(--luna-color-primary,#1965c8)}.luna-setting-theme-dark .luna-setting-item-number input[type=number]{background-color:#141414;background-color:var(--luna-color-bg-container,#141414);color:hsla(0,0%,100%,.85);color:var(--luna-color-text,rgba(255,255,255,.85));border-color:#424242;border-color:var(--luna-color-border,#424242)}.luna-setting-theme-dark .luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar{background-color:#424242;background-color:var(--luna-color-border,#424242)}.luna-setting-theme-dark .luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar .luna-setting-range-track-progress{background-color:#1965c8;background-color:var(--luna-color-primary,#1965c8)}.luna-setting-theme-dark .luna-setting-item-number .luna-setting-range-container input::-webkit-slider-thumb{border-color:#424242;border-color:var(--luna-color-border,#424242);background:radial-gradient(circle at center,#aaa 0,#aaa 15%,#ccc 22%,#ccc 100%)}',""]),e.exports=t},199:function(e,t,n){var r=n(3089),o=n(7468);t=function(e){return e=r({},e),function(t){return o(t,e)}},e.exports=t},282:function(e,t,n){var r=n(438),o=n(9405),i=n(3915),a=n(769);t=function(e){var t=a(e.match(s));return r(i(t,function(e){return o(e)}))};var s=/((https?)|(ftp)):\/\/[\w.]+[^ \f\n\r\t\v"\\<>[\]\u2100-\uFFFF(),]*/gi;e.exports=t},311:function(e,t,n){var r=n(3957),o=n(9993),i=n(5651),a=n(9760),s=n(7257);function l(e,t,n,o){return r(t)&&(o=n,n=t,t={}),{url:e,data:t,success:n,dataType:o}}(t=function(e){i(e,t.setting);var n,r=e.type,l=e.url,c=e.data,u=e.dataType,d=e.success,h=e.error,f=e.timeout,p=e.complete,m=e.xhr();return m.onreadystatechange=function(){if(4===m.readyState){var e;clearTimeout(n);var t=m.status;if(t>=200&&t<300||304===t){e=m.responseText,"xml"===u&&(e=m.responseXML);try{"json"===u&&(e=JSON.parse(e))}catch(e){}d(e,m)}else h(m);p(m)}},"GET"===r?(c=s.stringify(c))&&(l+=l.indexOf("?")>-1?"&"+c:"?"+c):"application/x-www-form-urlencoded"===e.contentType?a(c)&&(c=s.stringify(c)):"application/json"===e.contentType&&a(c)&&(c=JSON.stringify(c)),m.open(r,l,!0),m.setRequestHeader("Content-Type",e.contentType),f>0&&(n=setTimeout(function(){m.onreadystatechange=o,m.abort(),h(m,"timeout"),p(m)},f)),m.send("GET"===r?null:c),m}).setting={type:"GET",success:o,error:o,complete:o,dataType:"json",contentType:"application/x-www-form-urlencoded",data:{},xhr:function(){return new XMLHttpRequest},timeout:0},t.get=function(){return t(l.apply(null,arguments))},t.post=function(){var e=l.apply(null,arguments);return e.type="POST",t(e)},e.exports=t},365:function(e,t){var n=Object.prototype.hasOwnProperty;t=function(e,t){return n.call(e,t)},e.exports=t},383:function(e,t,n){var r=n(3497),o=n(1849),i=n(1009),a=n(96);t=function(e,t){for(var n,o=[],h=e;e;){if(n=!0,r(o)&&d[r(o)]){var f=new RegExp("</".concat(r(o),"[^>]*>")).exec(e);if(f){var p=e.substring(0,f.index);e=e.substring(f.index+f[0].length),p&&t.text&&t.text(p)}_(0,r(o))}else{if(i(e,"\x3c!--")){var m=e.indexOf("--\x3e");m>=0&&(t.comment&&t.comment(e.substring(4,m)),e=e.substring(m+3),n=!1)}else if(i(e,"<!")){var g=e.match(s);g&&(t.text&&t.text(e.substring(0,g[0].length)),e=e.substring(g[0].length),n=!1)}else if(i(e,"</")){var v=e.match(l);v&&(e=e.substring(v[0].length),v[0].replace(l,_),n=!1)}else if(i(e,"<")){var y=e.match(c);y&&(e=e.substring(y[0].length),y[0].replace(c,w),n=!1)}if(n){var b=e.indexOf("<"),x=b<0?e:e.substring(0,b);e=b<0?"":e.substring(b),t.text&&t.text(x)}}if(h===e)throw Error("Parse Error: "+e);h=e}function w(e,n,r,i){if(n=a(n),(i=!!i)||o.push(n),t.start){var s={};r.replace(u,function(e,t,n,r,o){s[t]=n||r||o||""}),t.start(n,s,i)}}function _(e,n){var r;if(n=a(n))for(r=o.length-1;r>=0&&o[r]!==n;r--);else r=0;if(r>=0){for(var i=o.length-1;i>=r;i--)t.end&&t.end(o[i]);o.length=r}}_()};var s=/^<!\s*doctype((?:\s+[\w:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/i,l=/^<\/([-A-Za-z0-9_]+)[^>]*>/,c=/^<([-A-Za-z0-9_]+)((?:\s+[-A-Za-z0-9_:@.]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/i,u=/([-A-Za-z0-9_:@.]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,d=o("script,style".split(","));e.exports=t},387:function(e,t,n){var r=n(6833);function o(e,t){this[t]=e.replace(/\w/,function(e){return e.toUpperCase()})}t=function(e){var t=r(e),n=t[0];return t.shift(),t.forEach(o,t),n+t.join("")},e.exports=t},388:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var r=n(2284);function o(e,t){if(t&&("object"==(0,r.A)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}},438:function(e,t,n){var r=n(2571);function o(e,t){return e===t}t=function(e,t){return t=t||o,r(e,function(e,n,r){for(var o=r.length;++n<o;)if(t(e,r[n]))return!1;return!0})},e.exports=t},466:function(e,t,n){var r=n(2510),o=n(2971),i=n(2571),a=n(3249);t=r(function(e,t){return t=o(t),i(e,function(e){return!a(t,e)})}),e.exports=t},500:function(e,t,n){var r=n(6214),o=n(6186);t=function(e){return r(e)?function(t){return o(t,e)}:(t=e,function(e){return null==e?void 0:e[t]});var t},e.exports=t},541:function(e,t,n){(t=n(6314)(!1)).push([e.id,"._dev-tools{position:absolute;width:100%;height:100%;left:0;bottom:0;background:var(--background);z-index:500;display:none;padding-top:40px!important;opacity:0;transition:opacity .3s;border-top:1px solid var(--border)}._dev-tools ._resizer{position:absolute;width:100%;touch-action:none;left:0;top:-8px;cursor:row-resize;z-index:120}._dev-tools ._tools{overflow:auto;-webkit-overflow-scrolling:touch;height:100%;width:100%;position:relative}._dev-tools ._tools ._tool{position:absolute;width:100%;height:100%;left:0;top:0;overflow:hidden;display:none}",""]),e.exports=t},621:function(e,t,n){var r=n(3974);t="undefined"!=typeof process&&"[object process]"===r(process),e.exports=t},688:function(e,t,n){(t=n(6314)(!1)).push([e.id,"._search-highlight-block{display:inline}._search-highlight-block ._keyword{background:var(--console-warn-background);color:var(--console-warn-foreground)}",""]),e.exports=t},769:function(e,t,n){var r=n(5793),o=n(3915),i=n(6214),a=n(1738);t=function(e){return e?i(e)?e:r(e)&&!a(e)?o(e):[e]:[]},e.exports=t},816:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var r=n(2284);function o(e){var t=function(e){if("object"!=(0,r.A)(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=(0,r.A)(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==(0,r.A)(t)?t:t+""}},825:function(e,t,n){"use strict";n.r(t),t.default={}},879:function(e,t,n){(t=n(6314)(!1)).push([e.id,'@font-face{font-family:luna-dom-viewer-icon;src:url(\'data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAS8AAsAAAAAB7QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAGEAAACMISgl+k9TLzIAAAFsAAAAPQAAAFZLxUkWY21hcAAAAawAAADWAAACdBU42qdnbHlmAAAChAAAAC4AAAAwabU7V2hlYWQAAAK0AAAALwAAADZzjr4faGhlYQAAAuQAAAAYAAAAJAFyANlobXR4AAAC/AAAABAAAABAAZAAAGxvY2EAAAMMAAAAEAAAACIAtACobWF4cAAAAxwAAAAfAAAAIAEbAA9uYW1lAAADPAAAASkAAAIWm5e+CnBvc3QAAARoAAAAUwAAAHZW8MNZeJxNjTsOQFAQRc/z/+sV1mABohKV0gZeJRJR2X9cT4RJZu7nFIMBMjoGvHGaF6rdngcNAc/c/O/Nvq2W5E1igdNE2zv1iGh1c5FQPlYXUlJRyxt9+/pUKadQa/AveGEGZQAAAHicY2BkkGScwMDKwMBQx9ADJGWgdAIDJ4MxAwMTAyszA1YQkOaawnCAQfcjE8MJIFcITDIwMIIIAFqDCGkAAAB4nM2STQ4BQRCFv54ZP8MwFhYW4gQcShBsSERi50BWDuFCcwJedddKRGKnOt8k9aanqudVAy0gF3NRQLgTsLhJDVHP6UW94Kp8zEhKwYIlG/YcOXHm0mTPp96aumLLwdUQ1fcIqmJrwpSZL+iqak5JmyE1Ayr1bdGhr/2ZPmp/qPQtuj/uJzqQl+pfDyypesQD6AT/ElV8PjyrMccT9rdLR3PUFBI227VTio1jbm6dodg5VnPvmAsHxzofHfmi+Sbs/pwdWcXFkWdNSNg9arIE2QufuSCyAAB4nGNgZACBlQzTGZgYGMyVxVc2O073AIpAxHsYloHFRc2dPZY2OTIwAACmEQesAAB4nGNgZGBgAOINe2b6x/PbfGXgZjgBFIjifLyvAUEDwUqGZUCSg4EJxAEAUn4LLAB4nGNgZGBgOMHAACdXMjAyoAIBADizAkx4nGNgAIITUEwGAABZUAGReJxjYAACHgYJ3BAAE94BXXicY2BkYGAQYGBmANEMDExAzAWEDAz/wXwGAApcASsAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxdxjkOgCAUANE/uOOGB+FQBIjaaEJIuL6FsfE1M6Lk9fXPoKioaWjp6BnQjEzMLKwYNtHepZhtuMs1vpvO/ch4HIlIxhK4KVyc7BwiD8nvDlkA\') format(\'woff\')}[class*=\' luna-dom-viewer-icon-\'],[class^=luna-dom-viewer-icon-]{display:inline-block;font-family:luna-dom-viewer-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-dom-viewer-icon-caret-down:before{content:\'\\f101\'}.luna-dom-viewer-icon-caret-right:before{content:\'\\f102\'}.luna-dom-viewer{padding:0 0 0 12px;cursor:default;list-style:none;min-width:100%;color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));background-color:rgba(0,0,0,0);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-family:var(--luna-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px}.luna-dom-viewer .luna-dom-viewer-hidden,.luna-dom-viewer.luna-dom-viewer-hidden{display:none}.luna-dom-viewer .luna-dom-viewer-invisible,.luna-dom-viewer.luna-dom-viewer-invisible{visibility:hidden}.luna-dom-viewer *{box-sizing:border-box}.luna-dom-viewer.luna-dom-viewer-theme-dark{color-scheme:dark;color:hsla(0,0%,100%,.85);color:var(--luna-color-text-dark,rgba(255,255,255,.85));background-color:rgba(0,0,0,0)}.luna-dom-viewer{font-size:12px;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace}.luna-dom-viewer ul{display:inline-block}.luna-dom-viewer-toggle{min-width:12px;margin-left:-12px}.luna-dom-viewer-icon-caret-down,.luna-dom-viewer-icon-caret-right{position:absolute!important;font-size:12px!important}.luna-dom-viewer-tree-item{min-width:200px;line-height:16px;min-height:16px;position:relative;z-index:10;outline:0}.luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection,.luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{display:block}.luna-dom-viewer-tree-item .luna-dom-viewer-icon-caret-down{display:none}.luna-dom-viewer-tree-item.luna-dom-viewer-expanded .luna-dom-viewer-icon-caret-down{display:inline-block}.luna-dom-viewer-tree-item.luna-dom-viewer-expanded .luna-dom-viewer-icon-caret-right{display:none}.luna-dom-viewer-attribute-value{word-break:break-all}.luna-dom-viewer-attribute-value.luna-dom-viewer-attribute-underline{text-decoration:underline}.luna-dom-viewer-selection{position:absolute;display:none;left:-10000px;right:0;top:0;bottom:0;z-index:-1}.luna-dom-viewer-children{margin:0;overflow-x:visible;overflow-y:visible;padding-left:15px}.luna-dom-viewer-theme-light .luna-dom-viewer-icon-caret-down,.luna-dom-viewer-theme-light .luna-dom-viewer-icon-caret-right{color:#9aa0a6}.luna-dom-viewer-theme-light .luna-dom-viewer-html-tag,.luna-dom-viewer-theme-light .luna-dom-viewer-tag-name{color:#881280}.luna-dom-viewer-theme-light .luna-dom-viewer-attribute-name{color:#994500}.luna-dom-viewer-theme-light .luna-dom-viewer-attribute-value{color:#1a1aa6}.luna-dom-viewer-theme-light .luna-dom-viewer-html-comment{color:#236e25}.luna-dom-viewer-theme-light .luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{background:#e8eaed}.luna-dom-viewer-theme-light .luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection{background:#e0e0e0}.luna-dom-viewer-theme-light .luna-dom-viewer-tree-item.luna-dom-viewer-selected:focus .luna-dom-viewer-selection{background:#cfe8fc}.luna-dom-viewer-theme-light .luna-dom-viewer-text-node{word-break:break-all}.luna-dom-viewer-theme-light .luna-dom-viewer-text-node .luna-dom-viewer-keyword{color:#881280}.luna-dom-viewer-theme-light .luna-dom-viewer-text-node .luna-dom-viewer-number{color:#1c00cf}.luna-dom-viewer-theme-light .luna-dom-viewer-text-node .luna-dom-viewer-operator{color:gray}.luna-dom-viewer-theme-light .luna-dom-viewer-text-node .luna-dom-viewer-comment{color:#236e25}.luna-dom-viewer-theme-light .luna-dom-viewer-text-node .luna-dom-viewer-string{color:#1a1aa6}.luna-dom-viewer-theme-dark{color:#e8eaed}.luna-dom-viewer-theme-dark .luna-dom-viewer-icon-caret-down,.luna-dom-viewer-theme-dark .luna-dom-viewer-icon-caret-right{color:#9aa0a6}.luna-dom-viewer-theme-dark .luna-dom-viewer-html-tag,.luna-dom-viewer-theme-dark .luna-dom-viewer-tag-name{color:#5db0d7}.luna-dom-viewer-theme-dark .luna-dom-viewer-attribute-name{color:#9bbbdc}.luna-dom-viewer-theme-dark .luna-dom-viewer-attribute-value{color:#f29766}.luna-dom-viewer-theme-dark .luna-dom-viewer-html-comment{color:#898989}.luna-dom-viewer-theme-dark .luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{background:#083c69}.luna-dom-viewer-theme-dark .luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection{background:#454545}.luna-dom-viewer-theme-dark .luna-dom-viewer-tree-item.luna-dom-viewer-selected:focus .luna-dom-viewer-selection{background:#073d69}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node{word-break:break-all}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-keyword{color:#e36eec}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-number{color:#9980ff}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-operator{color:#7f7f7f}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-comment{color:#747474}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-string{color:#f29766}',""]),e.exports=t},894:function(e,t,n){var r=n(5207);t=function(e,t,n){return e.replace(new RegExp(r(t),"g"),n)},e.exports=t},896:function(e,t,n){var r=n(1738),o=n(6214),i=n(3249),a=n(9100);t=function(e,t,n){if(r(t)&&(t=[t]),o(t)){var s=t;t=function(e,t){return i(s,t)}}var l={},c=function(e,n){t(e,n)&&(l[n]=e)};return n&&(c=function(e,n){t(e,n)||(l[n]=e)}),a(e,c),l},e.exports=t},916:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorWithCode=void 0,t.createId=function(){return(0,l.default)(g)},t.getAbsoluteUrl=function(e){var t=document.createElement("a");return t.href=e,t.href},t.createErr=function(e,t){return new v(e,t)},t.getUrl=function(){var e=location.href;return(0,u.default)(e,"about:")?parent.location.href:e},t.getOrigin=function(){var e=location.origin;return"null"===e?parent.location.origin:e},t.getTextContent=function(e){return i(this,arguments,void 0,function(e,t){return void 0===t&&(t=""),a(this,function(n){switch(n.label){case 0:return[4,y(e,"text",t)];case 1:return[2,n.sent()]}})})},t.getBase64Content=function(e){return i(this,arguments,void 0,function(e,t){var n;return void 0===t&&(t=""),a(this,function(r){switch(r.label){case 0:return n=h.default,[4,y(e,"arraybuffer",t)];case 1:return[2,n.apply(void 0,[r.sent(),"base64"])]}})})},t.getType=function(e,t){try{return p.default.apply(null,[e,t])}catch(e){return"Error"}},t.has=function(e,t){try{return m.default.apply(null,[e,t])}catch(e){return!1}};var l=s(n(5630)),c=s(n(6774)),u=s(n(1009)),d=s(n(6032)),h=s(n(5957)),f=s(n(825)),p=s(n(2989)),m=s(n(365)),g=(0,c.default)(1e3,9999)+".",v=function(e){function t(t,n){var r=this.constructor,o=e.call(this,n)||this;return o.code=t,Object.setPrototypeOf(o,r.prototype),o}return o(t,e),t}(Error);function y(e,t){return i(this,arguments,void 0,function(e,t,n){var r;return void 0===n&&(n=""),a(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,8]),(r=new d.default(e)).setQuery("__chobitsu-hide__","true"),[4,f.default.get(r.toString(),{responseType:t})];case 1:return[2,o.sent().data];case 2:if(o.sent(),!n)return[3,7];o.label=3;case 3:return o.trys.push([3,6,,7]),[4,f.default.get(b(n,e),{responseType:t})];case 4:return[4,o.sent().data];case 5:return[2,o.sent()];case 6:return o.sent(),[3,7];case 7:return[3,8];case 8:return[2,"arraybuffer"===t?new ArrayBuffer(0):""]}})})}function b(e,t){var n=new d.default(e);return n.setQuery("url",t),n.setQuery("__chobitsu-hide__","true"),n.toString()}t.ErrorWithCode=v},926:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HighlightOverlay=void 0;var a=i(n(1580)),s=n(3703),l=n(162),c=n(3979),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gridLabelState={gridLayerCounter:0},t}return o(t,e),t.prototype.setContainer=function(e){this._container=e},t.prototype.setPlatform=function(t){this.container&&this.container.classList.add("luna-dom-highlighter-platform-"+t),e.prototype.setPlatform.call(this,t)},Object.defineProperty(t.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),t.prototype.reset=function(t){e.prototype.reset.call(this,t),this.tooltip.innerHTML="",this.gridLabelState.gridLayerCounter=0},t.prototype.install=function(){var t=this.document.createElement("canvas");t.classList.add("luna-dom-highlighter-fill"),this.container.appendChild(t);var n=this.document.createElement("div");this.container.appendChild(n),this.tooltip=n,this.setCanvas(t),e.prototype.install.call(this)},t.prototype.uninstall=function(){this.document.body.classList.remove("fill"),this.document.body.innerHTML="",e.prototype.uninstall.call(this)},t.prototype.drawHighlight=function(e){this.context.save();for(var t=(0,c.emptyBounds)(),n=e.paths.slice();n.length;){var r=n.pop();r&&(this.context.save(),(0,c.drawPath)(this.context,r.path,r.fillColor,r.outlineColor,void 0,t,this.emulationScaleFactor),n.length&&(this.context.globalCompositeOperation="destination-out",(0,c.drawPath)(this.context,n[n.length-1].path,"red",void 0,void 0,t,this.emulationScaleFactor)),this.context.restore())}this.context.restore(),this.context.save();var o=Boolean(e.paths.length&&e.showRulers&&t.minX<20&&t.maxX+20<this.canvasWidth),i=Boolean(e.paths.length&&e.showRulers&&t.minY<20&&t.maxY+20<this.canvasHeight);return e.showRulers&&this.drawAxis(this.context,o,i),e.paths.length&&(e.showExtensionLines&&function(e,t,n,r,o,i,a,s){e.save();var l=a,c=s;if(e.strokeStyle=p,e.lineWidth=1,e.translate(.5,.5),n)for(var u in t.rightmostXForY)e.beginPath(),e.moveTo(l,Number(u)),e.lineTo(t.rightmostXForY[u],Number(u)),e.stroke();else for(var u in t.leftmostXForY)e.beginPath(),e.moveTo(0,Number(u)),e.lineTo(t.leftmostXForY[u],Number(u)),e.stroke();if(r)for(var d in t.bottommostYForX)e.beginPath(),e.moveTo(Number(d),c),e.lineTo(Number(d),t.topmostYForX[d]),e.stroke();else for(var d in t.topmostYForX)e.beginPath(),e.moveTo(Number(d),0),e.lineTo(Number(d),t.topmostYForX[d]),e.stroke();e.restore()}(this.context,t,o,i,0,0,this.canvasWidth,this.canvasHeight),e.elementInfo&&function(e,t,n,r,o,i){e.innerHTML="";var u=(0,l.createChild)(e,"div"),d=(0,l.createChild)(u,"div","tooltip-content"),h=function(e,t){var n=(0,l.createElement)("div","element-info"),r=(0,l.createChild)(n,"div","element-info-header"),o=function(e){return e.layoutObjectName&&(0,a.default)(e.layoutObjectName,"Grid")?"grid":e.layoutObjectName&&"LayoutNGFlexibleBox"===e.layoutObjectName?"flex":null}(e);o&&(0,l.createChild)(r,"div","element-layout-type ".concat(o));var i=(0,l.createChild)(r,"div","element-description");(0,l.createChild)(i,"span","material-tag-name").textContent=e.tagName;var u=(0,l.createChild)(i,"span","material-node-id");u.textContent=e.idValue?"#"+(0,l.ellipsify)(e.idValue,80):"",u.classList.toggle("hidden",!e.idValue);var d=(0,l.createChild)(i,"span","material-class-name");u.textContent.length<80&&(d.textContent=(0,l.ellipsify)(e.className||"",80-u.textContent.length)),d.classList.toggle("hidden",!e.className);var h=(0,l.createChild)(r,"div","dimensions");(0,l.createChild)(h,"span","material-node-width").textContent=String(Math.round(100*e.nodeWidth)/100),(0,l.createTextChild)(h,"\xd7"),(0,l.createChild)(h,"span","material-node-height").textContent=String(Math.round(100*e.nodeHeight)/100);var f,p=e.style||{};e.isLockedAncestor&&S("Showing content-visibility ancestor",""),e.isLocked&&S("Descendants are skipped due to content-visibility","");var m=p.color;m&&"#00000000"!==m&&N("Color",m,t);var g=p["font-family"],v=p["font-size"];g&&"0px"!==v&&S("Font","".concat(v," ").concat(g));var y=p["background-color"];y&&"#00000000"!==y&&N("Background",y,t);var b=p.margin;b&&"0px"!==b&&S("Margin",b);var x=p.padding;x&&"0px"!==x&&S("Padding",x);var w=e.contrast?e.contrast.backgroundColor:null,_=m&&"#00000000"!==m&&w&&"#00000000"!==w;function k(){f||(f=(0,l.createChild)(n,"div","element-info-body"))}function A(e,t,n){k();var r=(0,l.createChild)(f,"div","element-info-row");return t&&r.classList.add(t),(0,l.createChild)(r,"div","element-info-name").textContent=e,(0,l.createChild)(r,"div","element-info-gap"),(0,l.createChild)(r,"div",n||"")}function S(e,t){(0,l.createTextChild)(A(e,"","element-info-value-text"),t)}function N(e,t,n){var r=A(e,"","element-info-value-color"),o=(0,l.createChild)(r,"div","color-swatch");(0,l.createChild)(o,"div","color-swatch-inner").style.backgroundColor=t,(0,l.createTextChild)(r,(0,c.formatColor)(t,n))}return e.showAccessibilityInfo&&(function(e){k();var t=(0,l.createChild)(f,"div","element-info-row element-info-section");(0,l.createChild)(t,"div","section-name").textContent=e,(0,l.createChild)((0,l.createChild)(t,"div","separator-container"),"div","separator")}("Accessibility"),_&&p.color&&e.contrast&&function(e,t){var n=(0,c.parseHexa)(e),r=(0,c.parseHexa)(t.backgroundColor);n[3]*=t.textOpacity;var o=A("Contrast","","element-info-value-contrast"),i=(0,l.createChild)(o,"div","contrast-text");i.style.color=(0,c.formatRgba)(n,"rgb"),i.style.backgroundColor=t.backgroundColor,i.textContent="Aa";var a=(0,l.createChild)(o,"span");if("apca"===t.contrastAlgorithm){var u=(0,s.contrastRatioAPCA)(n,r),d=(0,s.getAPCAThreshold)(t.fontSize,t.fontWeight);a.textContent=String(Math.floor(100*u)/100)+"%",(0,l.createChild)(o,"div",null===d||Math.abs(u)<d?"a11y-icon a11y-icon-warning":"a11y-icon a11y-icon-ok")}else if("aa"===t.contrastAlgorithm||"aaa"===t.contrastAlgorithm){var h=(0,s.contrastRatio)(n,r);d=(0,s.getContrastThreshold)(t.fontSize,t.fontWeight)[t.contrastAlgorithm],a.textContent=String(Math.floor(100*h)/100),(0,l.createChild)(o,"div",h<d?"a11y-icon a11y-icon-warning":"a11y-icon a11y-icon-ok")}}(p.color,e.contrast),S("Name",e.accessibleName),S("Role",e.accessibleRole),function(e,t){(0,l.createChild)(A(e,"","element-info-value-icon"),"div",t)}("Keyboard-focusable",e.isKeyboardFocusable?"a11y-icon a11y-icon-ok":"a11y-icon a11y-icon-not-ok")),n}(t,n);d.appendChild(h);var f,p=d.offsetWidth,m=d.offsetHeight,g=10,v=o-2-g-16;if(r.maxX-r.minX<36)f=.5*(r.minX+r.maxX)-8;else{var y=r.minX+g,b=r.maxX-g-16;f=y>12&&y<v?y:(0,l.constrainNumber)(12,y,b)}var x=f<12||f>v,w=f-g;w=(0,l.constrainNumber)(w,2,o-p-2);var _=r.minY-8-m,k=!0;_<0?(_=Math.min(i-m,r.maxY+8),k=!1):r.minY>i&&(_=i-8-m);var A=w>=r.minX&&w+p<=r.maxX&&_>=r.minY&&_+m<=r.maxY;if(w<r.maxX&&w+p>r.minX&&_<r.maxY&&_+m>r.minY&&!A)d.style.display="none";else if(d.style.top=_+"px",d.style.left=w+"px",!x){var S=(0,l.createChild)(d,"div","tooltip-arrow");S.style.clipPath=k?"polygon(0 0, 100% 0, 50% 100%)":"polygon(50% 0, 0 100%, 100% 100%)",S.style.top=(k?m-1:-8)+"px",S.style.left=f-w+"px"}}(this.tooltip,e.elementInfo,e.colorFormat,t,this.canvasWidth,this.canvasHeight)),this.context.restore(),{bounds:t}},t.prototype.drawAxis=function(e,t,n){e.save();var r=this.pageZoomFactor*this.pageScaleFactor*this.emulationScaleFactor,o=this.scrollX*this.pageScaleFactor,i=this.scrollY*this.pageScaleFactor;function a(e){return Math.round(e*r)}function s(e){return Math.round(e/r)}var l=this.canvasWidth/r,c=this.canvasHeight/r,u=50;e.save(),e.fillStyle=f,n?e.fillRect(0,a(c)-15,a(l),a(c)):e.fillRect(0,0,a(l),15),e.globalCompositeOperation="destination-out",e.fillStyle="red",t?e.fillRect(a(l)-15,0,a(l),a(c)):e.fillRect(0,0,15,a(c)),e.restore(),e.fillStyle=f,t?e.fillRect(a(l)-15,0,a(l),a(c)):e.fillRect(0,0,15,a(c)),e.lineWidth=1,e.strokeStyle=h,e.fillStyle=h,e.save(),e.translate(-o,.5-i);for(var p=c+s(i),m=100;m<p;m+=100)e.save(),e.translate(o,a(m)),e.rotate(-Math.PI/2),e.fillText(String(m),2,t?a(l)-7:13),e.restore();e.translate(.5,-.5);for(var g=l+s(o),v=100;v<g;v+=100)e.save(),e.fillText(String(v),a(v)+2,n?i+a(c)-7:i+13),e.restore();for(e.restore(),e.save(),t&&(e.translate(a(l),0),e.scale(-1,1)),e.translate(-o,.5-i),p=c+s(i),m=u;m<p;m+=u){e.beginPath(),e.moveTo(o,a(m));var y=m%100?5:8;e.lineTo(o+y,a(m)),e.stroke()}for(e.strokeStyle=d,m=5;m<p;m+=5)m%u&&(e.beginPath(),e.moveTo(o,a(m)),e.lineTo(o+5,a(m)),e.stroke());for(e.restore(),e.save(),n&&(e.translate(0,a(c)),e.scale(1,-1)),e.translate(.5-o,-i),g=l+s(o),v=u;v<g;v+=u)e.beginPath(),e.moveTo(a(v),i),y=v%100?5:8,e.lineTo(a(v),i+y),e.stroke();for(e.strokeStyle=d,v=5;v<g;v+=5)v%u&&(e.beginPath(),e.moveTo(a(v),i),e.lineTo(a(v),i+5),e.stroke());e.restore(),e.restore()},t}(l.Overlay);t.HighlightOverlay=u;var d="rgba(0,0,0,0.2)",h="rgba(0,0,0,0.7)",f="rgba(255, 255, 255, 0.8)",p="rgba(128, 128, 128, 0.3)"},928:function(e,t){t=function(e){var t,r,o,i=e[0]/360,a=e[1]/100,s=e[2]/100,l=[];if(e[3]&&(l[3]=e[3]),0===a)return o=n(255*s),l[0]=l[1]=l[2]=o,l;for(var c=2*s-(t=s<.5?s*(1+a):s+a-s*a),u=0;u<3;u++)(r=i+1/3*-(u-1))<0&&r++,r>1&&r--,o=6*r<1?c+6*(t-c)*r:2*r<1?t:3*r<2?c+(t-c)*(2/3-r)*6:c,l[u]=n(255*o);return l};var n=Math.round;e.exports=t},961:function(e,t,n){var r=n(5693);t=function(e,t,n){var o=[];t=r(t,n);for(var i=-1,a=e.length;++i<a;){var s=i-o.length,l=e[s];t(l,i,e)&&(o.push(l),e.splice(s,1))}return o},e.exports=t},975:function(e,t,n){var r=n(5651),o=n(6097),i=n(8971),a=n(6334),s={path:"/"};function l(e,n,l){if(!i(n)){if(l=r(l=l||{},s),o(l.expires)){var c=new Date;c.setMilliseconds(c.getMilliseconds()+864e5*l.expires),l.expires=c}return n=encodeURIComponent(n),e=encodeURIComponent(e),document.cookie=[e,"=",n,l.expires&&"; expires="+l.expires.toUTCString(),l.path&&"; path="+l.path,l.domain&&"; domain="+l.domain,l.secure?"; secure":""].join(""),t}for(var u=document.cookie?document.cookie.split("; "):[],d=e?void 0:{},h=0,f=u.length;h<f;h++){var p=u[h],m=p.split("="),g=a(m.shift());if(p=m.join("="),p=a(p),e===g){d=p;break}e||(d[g]=p)}return d}t={get:l,set:l,remove:function(e,t){return(t=t||{}).expires=-1,l(e,"",t)}},e.exports=t},991:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var r=n(3954);function o(){return o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=(0,r.A)(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},o.apply(null,arguments)}},1009:function(e,t){t=function(e,t){return 0===e.indexOf(t)},e.exports=t},1023:function(e,t,n){var r=n(2717),o=n(8420),i=n(9100),a=n(769);t=r({initialize:function(){this._listeners=[]},addListener:function(e){this._listeners.push(e)},rmListener:function(e){var t=this._listeners.indexOf(e);t>-1&&this._listeners.splice(t,1)},rmAllListeners:function(){this._listeners=[]},emit:function(){var e=this,t=a(arguments),n=o(this._listeners);i(n,function(n){return n.apply(e,t)},this)}},{mixin:function(e){i(["addListener","rmListener","emit","rmAllListeners"],function(n){e[n]=t.prototype[n]}),e._listeners=e._listeners||[]}}),e.exports=t},1034:function(e,t,n){var r=n(9760),o=n(3957),i=n(6214),a=n(5154);t=function(e){return i(e)?e.map(function(e){return t(e)}):r(e)&&!o(e)?a(e,function(e){return t(e)}):e},e.exports=t},1107:function(e,t,n){(t=n(6314)(!1)).push([e.id,"@font-face{font-family:luna-text-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAS0AAsAAAAAB2QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAFQAAAB0INElr09TLzIAAAFcAAAAPQAAAFZL+0klY21hcAAAAZwAAACfAAACEAEewxRnbHlmAAACPAAAAIYAAACkNSDggmhlYWQAAALEAAAALgAAADZzrb4oaGhlYQAAAvQAAAAWAAAAJAGRANNobXR4AAADDAAAABAAAAAoAZAAAGxvY2EAAAMcAAAAEAAAABYBWgFIbWF4cAAAAywAAAAdAAAAIAEXADtuYW1lAAADTAAAASkAAAIWm5e+CnBvc3QAAAR4AAAAOwAAAFJIWdOleJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBWAdNMDGwMQkAWK1CGlYEZyGMCstiBMpxAUUYGZgDbGgXDeJxjYGTQYJzAwMrAwFDH0AMkZaB0AgMngzEDAxMDKzMDVhCQ5prCcIAh+SMTwwkgVwhMMjAwgggAY84IrgAAAHicvZFLCsMwDERHzsdJ6aL0HD1VQiDQRbIN9Axd9aI+QTpjq5Bdd5F4Bo1lybIBNAAq8iA1YB8YZG+qlvUKl6zXGBjf6MofMWHGEyu2FPb9oCxULCtHs3yy+J2urg1rtojo0HM/MKnFGabOGlbdYvdT+1N6/7drXl8e6Vajo3efHP3b7HAUvntBMy1OJKujMTeHNZMV9McpFBC+tLgY4QB4nGNgZACBEwzrGdgZGOwZxdnVDdXNPfKEGlhchO0KhZtZ3IQYmMFq1jCsZpBi0GLQY2AwNzGzZjQSk2UUYdNmVFID8UyVRUXYlNRMlVGlTM1FjU3tmZkTmVhYmFRBhHwoCyuzKgtTIjMzWJg3ZClIGMRlZQmVB7GhMixM0aGhQIsB52sTqgAAeJxjYGRgYADi2JNxkvH8Nl8ZuBlOAAWiOB/va0DQQHCCYT2Q5GBgAnEANJ0KnQAAeJxjYGRgYDjBwIBEMjKgAi4AOvoCZQAAeJxjYACCE1CMBwAAM7gBkXicY2AAAiGGIFQIABXIAqN4nGNgZGBg4GLQZ2BmAAEmMI8LSP4H8xkADjQBUwAAAHicZZA9bsJAFITHYEgCUoIUKSmzVQoimZ+SA0BPQZfCmLUxsr3WekGiywlyhBwhp4hyghwoY/NoYC0/fzNv3u7KAAb4hYd6ebhtar1auKE6cZv0IOyTn4U76ONFuEt/KNzDG6bCfTzinTt4/h2dAUrhFu7xIdym/ynsk7+EO3jCt3CX/o9wDyv8Cffx6g3TyBSxKdxSJ/sstGd5/q60rVJTqEkwPlsLXWgbOr1R66OqDsnUuVjF1uRqzq7OMqNKa3Y6csHWuXI2GsXiB5HJkSKCQYG4qQ5LaCTYI0MIe9W91CumLSr6tVaYIMD4KrVgqmiSIZXGhsk1jqwVDjxtStcxrfhazuSkucxq3iQjK/7vurejE9EPsG2mSsww4hNf5IPmDvk/PRFeqAAAAHicXcU7CsAgFEXBe4x/l/kQBAtt3X0KSZNpRk7X91/F8eAJRBKZQqUp2Og2va19MAadyWJzpBd4kgcWAA==') format('woff')}[class*=' luna-text-viewer-icon-'],[class^=luna-text-viewer-icon-]{display:inline-block;font-family:luna-text-viewer-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-text-viewer-icon-check:before{content:'\\f101'}.luna-text-viewer-icon-copy:before{content:'\\f102'}.luna-text-viewer{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;padding:0;unicode-bidi:embed;position:relative;overflow:auto;border:1px solid #ccc}.luna-text-viewer.luna-text-viewer-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-text-viewer.luna-text-viewer-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-text-viewer .luna-text-viewer-hidden,.luna-text-viewer.luna-text-viewer-hidden{display:none}.luna-text-viewer .luna-text-viewer-invisible,.luna-text-viewer.luna-text-viewer-invisible{visibility:hidden}.luna-text-viewer *{box-sizing:border-box}.luna-text-viewer.luna-text-viewer-theme-dark{color:#d9d9d9;border-color:#3d3d3d;background:#242424}.luna-text-viewer:hover .luna-text-viewer-copy{opacity:1}.luna-text-viewer-table{display:table}.luna-text-viewer-table .luna-text-viewer-line-number,.luna-text-viewer-table .luna-text-viewer-line-text{padding:0}.luna-text-viewer-table-row{display:table-row}.luna-text-viewer-line-number{display:table-cell;padding:0 3px 0 8px!important;text-align:right;vertical-align:top;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-right:1px solid #ccc}.luna-text-viewer-line-text{display:table-cell;padding-left:4px!important;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-text-viewer-copy{background:#fff;opacity:0;position:absolute;right:5px;top:5px;border:1px solid #ccc;border-radius:4px;width:25px;height:25px;text-align:center;line-height:25px;cursor:pointer;transition:opacity .3s,top .3s}.luna-text-viewer-copy .luna-text-viewer-icon-check{color:#188037}.luna-text-viewer-text{padding:4px;font-size:12px;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;box-sizing:border-box;white-space:pre;display:block}.luna-text-viewer-text.luna-text-viewer-line-numbers{padding:0}.luna-text-viewer-text.luna-text-viewer-wrap-long-lines{white-space:pre-wrap}.luna-text-viewer-text.luna-text-viewer-wrap-long-lines .luna-text-viewer-line-text{word-break:break-all}.luna-text-viewer-theme-dark{color-scheme:dark}.luna-text-viewer-theme-dark .luna-text-viewer-copy,.luna-text-viewer-theme-dark .luna-text-viewer-line-number{border-color:#3d3d3d}.luna-text-viewer-theme-dark .luna-text-viewer-copy .luna-text-viewer-icon-check{color:#81c995}.luna-text-viewer-theme-dark .luna-text-viewer-copy{background-color:#242424}",""]),e.exports=t},1162:function(e,t,n){"use strict";n.d(t,{Ay:function(){return me}});var r=n(991),o=n(3029),i=n(2901),a=n(388),s=n(3954),l=n(5361),c=n(3693),u=n.n(c),d=n(5241),h=n.n(d),f=n(5902),p=n.n(f),m=n(5630),g=n.n(m),v=n(9760),y=n.n(v),b=n(5651),x=n.n(b),w=n(3915),_=n.n(w),k=n(6030),A=n.n(k),S=n(2561),N=n.n(S),C=n(3957),j=n.n(C),E=n(3497),T=n.n(E),I=n(1976),P=n.n(I),O=n(1738),M=n.n(O),L=n(9405),R=n.n(L),D=n(3249),F=n.n(D),z=n(96),B=n.n(z),U=n(4236),q=n.n(U),V=n(9100),H=n.n(V),G=n(2263),K=n.n(G),W=n(5169),Q=n.n(W),Z=n(9548),Y=n.n(Z),J=(n(6097),n(5004)),$=n.n(J);function X(e){var t="luna-".concat(e,"-");function n(e){return _()(R()(e).split(/\s+/),function(e){return F()(e,t)?e:e.replace(/[\w-]+/,function(e){return"".concat(t).concat(e)})}).join(" ")}return function(e){if(/<[^>]*>/g.test(e))try{var t=Y().parse(e);return ee(t,function(e){e.attrs&&e.attrs.class&&(e.attrs.class=n(e.attrs.class))}),Y().stringify(t)}catch(t){return n(e)}return n(e)}}function ee(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];t(o),o.content&&ee(o.content,t)}}n(9410),n(8609),Q();var te=n(8105),ne=n.n(te),re=n(961),oe=n.n(re),ie=n(7e3),ae=n.n(ie),se=n(1009),le=n.n(se);function ce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ce=function(){return!!e})()}var ue=function(e){function t(e,n){var r,i,l=n.compName,c=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).theme,d=void 0===c?"light":c;return(0,o.A)(this,t),r=function(e,t,n){return t=(0,s.A)(t),(0,a.A)(e,ce()?Reflect.construct(t,[],(0,s.A)(e).constructor):t.apply(e,n))}(this,t),r.subComponents=[],r.theme="",r.onThemeChange=function(e){"auto"===r.options.theme&&r.setTheme(e)},r.compName=l,r.c=X(l),r.options={},r.container=e,r.$container=u()(e),r.$container.addClass(["luna-".concat(l),r.c("platform-".concat((i=$()(),"os x"===i?"mac":i)))]),r.on("changeOption",function(e,t){if("theme"===e&&t){var n=t;"auto"===t&&(n=ae().get()),r.setTheme(n),H()(r.subComponents,function(e){return e.setOption("theme",t)})}}),ae().on("change",r.onThemeChange),r.setOption("theme",d),r}return(0,l.A)(t,e),(0,i.A)(t,[{key:"destroy",value:function(){var e=this;this.destroySubComponents();var t=this.$container,n=t.attr("class");H()(n.split(/\s+/),function(n){le()(n,"luna-".concat(e.compName))&&t.rmClass(n)}),t.html(""),this.emit("destroy"),this.removeAllListeners(),ae().off("change",this.onThemeChange)}},{key:"setOption",value:function(e,t){var n=this,r=this.options,o={};"string"==typeof e?o[e]=t:o=e,H()(o,function(e,t){var o=r[t];r[t]=e,e!==o&&n.emit("changeOption",t,e,o)})}},{key:"getOption",value:function(e){return this.options[e]}},{key:"addSubComponent",value:function(e){e.setOption("theme",this.options.theme),this.subComponents.push(e)}},{key:"removeSubComponent",value:function(e){oe()(this.subComponents,function(t){return t===e})}},{key:"destroySubComponents",value:function(){H()(this.subComponents,function(e){return e.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x()(e,t),ne()(this.options,e)}},{key:"find",value:function(e){return this.$container.find(this.c(e))}},{key:"setTheme",value:function(e){var t=this.c,n=this.$container;this.theme&&n.rmClass(t("theme-".concat(this.theme))),n.addClass(t("theme-".concat(e))),this.theme=e}}])}(K()),de=function(e,t,n){return((e-t)/(n-t)*100).toFixed(2)};function he(e,t,n,o){var i=(0,r.A)((0,s.A)(1&o?e.prototype:e),t,n);return 2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function fe(e,t,n){return t=(0,s.A)(t),(0,a.A)(e,pe()?Reflect.construct(t,n||[],(0,s.A)(e).constructor):t.apply(e,n))}function pe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(pe=function(){return!!e})()}e=n.hmd(e);var me=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o.A)(this,t),(n=fe(this,t,[e,{compName:"setting"},r])).items=[],n.selectedItem=null,n.initOptions(r,{separatorCollapse:!0,filter:""}),n.bindEvent(),n}return(0,l.A)(t,e),(0,i.A)(t,[{key:"appendTitle",value:function(e){var t=new ve(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1);return this.append(t),t}},{key:"appendSeparator",value:function(){var e=this.items,t=this.options.separatorCollapse,n=T()(e);if(t&&n instanceof be)return n;var r=new be(this);return this.append(r),r}},{key:"appendNumber",value:function(e,t,n,r,o){y()(r)&&(o=r,r="");var i=new we(this,e,t,n,r,o);return this.append(i),i}},{key:"appendButton",value:function(e,t,n){j()(t)&&(n=t,t="");var r=new Ae(this,e,t,n);return this.append(r),r}},{key:"appendHtml",value:function(e){var t=new Se(this,e);return this.append(t),t}},{key:"appendMarkdown",value:function(e){var t=new ye(this,e);return this.append(t),t}},{key:"appendInput",value:function(e,t,n){var r=new xe(this,e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:"");return this.append(r),r}},{key:"appendCheckbox",value:function(e,t,n,r){r||(r=n,n="");var o=new _e(this,e,t,n,r);return this.append(o),o}},{key:"appendSelect",value:function(e,t,n,r,o){y()(r)&&(o=r,r="");var i=new ke(this,e,t,n,r,o);return this.append(i),i}},{key:"remove",value:function(e){var t=this.items,n=t.indexOf(e);n>-1&&(e.detach(),t.splice(n,1),e===this.selectedItem&&this.selectItem(null))}},{key:"clear",value:function(){H()(this.items,function(e){return e.detach()}),this.items=[],this.selectItem(null)}},{key:"selectItem",value:function(e){var t;this.selectedItem&&(this.selectedItem.deselect(),this.selectedItem=null),q()(e)||(this.selectedItem=e,null===(t=this.selectedItem)||void 0===t||t.select())}},{key:"renderSettings",value:function(){var e=this,t=this.items;H()(t,function(e){return e.detach()}),H()(t,function(t){e.filterItem(t)&&e.$container.append(t.container)})}},{key:"bindEvent",value:function(){var e=this,t=this.c;this.on("changeOption",function(t){"filter"===t&&e.renderSettings()});var n=this;this.$container.on("click",t(".item"),function(){n.selectItem(this.settingItem)})}},{key:"filterItem",value:function(e){var t=this.options.filter;if(t){if(j()(t))return t(e);if(P()(t))return t.test(e.text());if(M()(t)&&(t=R()(t)))return F()(B()(e.text()),B()(t))}return!0}},{key:"append",value:function(e){this.items.push(e),this.filterItem(e)&&this.$container.append(e.container)}}])}(ue),ge=(0,i.A)(function e(t,n,r,i){(0,o.A)(this,e),this.container=h()("div",{tabindex:"0"}),this.setting=t,this.container.settingItem=this,this.$container=u()(this.container),this.$container.addClass(t.c("item")).addClass(t.c("item-".concat(i))),this.key=n,this.value=r},[{key:"select",value:function(){this.$container.addClass(this.setting.c("selected"))}},{key:"deselect",value:function(){this.$container.rmClass(this.setting.c("selected"))}},{key:"detach",value:function(){this.$container.remove()}},{key:"disable",value:function(){this.$container.addClass(this.setting.c("disabled"))}},{key:"enable",value:function(){this.$container.rmClass(this.setting.c("disabled"))}},{key:"text",value:function(){return this.$container.text()}},{key:"onChange",value:function(e){this.value!==e&&(this.setting.emit("change",this.key,e,this.value),this.value=e)}}]),ve=function(e){function t(e,n,r){var i;return(0,o.A)(this,t),(i=fe(this,t,[e,"","","title"])).$container.addClass(e.c("level-".concat(r))),i.$container.text(n),i}return(0,l.A)(t,e),(0,i.A)(t)}(ge),ye=function(e){function t(e,n){var r;return(0,o.A)(this,t),(r=fe(this,t,[e,"","","markdown"])).$container.html(n),r}return(0,l.A)(t,e),(0,i.A)(t)}(ge),be=function(e){function t(e){return(0,o.A)(this,t),fe(this,t,[e,"","","separator"])}return(0,l.A)(t,e),(0,i.A)(t)}(ge),xe=function(e){function t(e,n,r,i,a){var s;(0,o.A)(this,t),s=fe(this,t,[e,n,r,"input"]);var l=e.c;s.$container.html('<div class="'.concat(l("title"),'">').concat(p()(i),'</div>\n      <div class="').concat(l("description"),'">').concat(a,'</div>\n      <div class="').concat(l("control"),'">\n        <input type="text"></input>\n      </div>'));var c=s.$container.find("input");return c.val(r),c.on("change",function(){return s.onChange(c.val())}),s.$input=c,s}return(0,l.A)(t,e),(0,i.A)(t,[{key:"setValue",value:function(e){this.$input.val(e),this.value=e}},{key:"disable",value:function(){he(t,"disable",this,3)([]),this.$input.attr("disabled","")}},{key:"enable",value:function(){he(t,"enable",this,3)([]),this.$input.rmAttr("disabled")}}])}(ge),we=function(e){function t(e,n,r,i,a){var s,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};(0,o.A)(this,t),(s=fe(this,t,[e,n,r,"number"])).renderRange=function(){var e=A()(s.$input.val()),t=s.options;s.$trackProgress.css("width",de(e,t.min,t.max)+"%"),s.$value.text(N()(e))},x()(l,{min:0,max:10,step:1}),s.options=l;var c=s.$container,u=e.c,d=!!l.range;delete l.range;var h=l.min,f=l.max,m='<input type="'.concat(d?"range":"number",'"').concat(_()(l,function(e,t){return" ".concat(t,'="').concat(e,'"')}),"></input>");d&&(m="".concat(h,'<div class="').concat(u("range-container"),'">\n        <div class="').concat(u("range-track"),'">\n          <div class="').concat(u("range-track-bar"),'">\n            <div class="').concat(u("range-track-progress"),'" style="width: ').concat(de(r,h,f),'%;"></div>\n          </div>\n        </div>\n        ').concat(m,'\n      </div><span class="').concat(u("value"),'">').concat(r,"</span>/").concat(f)),c.html('<div class="'.concat(u("title"),'">').concat(p()(i),'</div>\n      <div class="').concat(u("description"),'">').concat(a,'</div>\n      <div class="').concat(u("control"),'">').concat(m,"</div>"));var g=c.find("input");return s.$value=c.find(u(".value")),s.$trackProgress=c.find(u(".range-track-progress")),g.val(N()(r)),g.on("change",function(){var e=A()(g.val());s.onChange(e)}),g.on("input",s.renderRange),s.$input=g,s}return(0,l.A)(t,e),(0,i.A)(t,[{key:"setValue",value:function(e){this.$input.val(N()(e)),this.value=e,this.renderRange()}},{key:"disable",value:function(){he(t,"disable",this,3)([]),this.$input.attr("disabled","")}},{key:"enable",value:function(){he(t,"enable",this,3)([]),this.$input.rmAttr("disabled")}}])}(ge),_e=function(e){function t(e,n,r,i,a){var s;(0,o.A)(this,t),s=fe(this,t,[e,n,r,"checkbox"]);var l=e.c,c=g()(e.c("checkbox-"));s.$container.html('<div class="'.concat(l("title"),'">').concat(p()(i),'</div>\n      <div class="').concat(l("control"),'">\n        <input type="checkbox" id="').concat(c,'"></input>\n        <label for="').concat(c,'">').concat(a,"</label>\n      </div>"));var u=s.$container.find("input"),d=u.get(0);return d.checked=r,u.on("change",function(){return s.onChange(d.checked)}),s.$input=u,s.input=d,s}return(0,l.A)(t,e),(0,i.A)(t,[{key:"setValue",value:function(e){this.input.checked=e,this.value=e}},{key:"disable",value:function(){he(t,"disable",this,3)([]),this.$input.attr("disabled","")}},{key:"enable",value:function(){he(t,"enable",this,3)([]),this.$input.rmAttr("disabled")}}])}(ge),ke=function(e){function t(e,n,r,i,a,s){var l;(0,o.A)(this,t),l=fe(this,t,[e,n,r,"select"]);var c=e.c;l.$container.html('<div class="'.concat(c("title"),'">').concat(p()(i),'</div>\n      <div class="').concat(c("description"),'">').concat(a,'</div>\n      <div class="').concat(c("control"),'">\n        <div class="').concat(c("select"),'">\n          <select></select>\n        </div>\n      </div>'));var u=l.$container.find("select");return l.$select=u,l.setOptions(s),u.on("change",function(){return l.onChange(u.val())}),l}return(0,l.A)(t,e),(0,i.A)(t,[{key:"setValue",value:function(e){this.$select.val(e),this.value=e}},{key:"setOptions",value:function(e){var t=this;this.$select.html(_()(e,function(e,n){return'<option value="'.concat(p()(e),'"').concat(e===t.value?" selected":"",">").concat(p()(n),"</option>")}).join(""))}},{key:"disable",value:function(){he(t,"disable",this,3)([]),this.$select.attr("disabled","")}},{key:"enable",value:function(){he(t,"enable",this,3)([]),this.$select.rmAttr("disabled")}}])}(ge),Ae=function(e){function t(e,n,r,i){var a;return(0,o.A)(this,t),r||(r=n,n=""),(a=fe(this,t,[e,"","","button"])).$container.html(e.c('<div class="title">'.concat(p()(n),'</div>\n      <div class="control">\n        <button>').concat(p()(r),"</button>\n      </div>"))),a.$container.find("button").on("click",i),a}return(0,l.A)(t,e),(0,i.A)(t)}(ge),Se=function(e){function t(e,n){var r;return(0,o.A)(this,t),(r=fe(this,t,[e,"","","html"])).$container.append(n),r}return(0,l.A)(t,e),(0,i.A)(t)}(ge);!function(e,t){try{e.exports=t,e.exports.default=t}catch(e){}}(e,me)},1167:function(e,t,n){var r=n(1909),o=n(5869),i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,a=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i;t=o(function(e){return e=e||(r?navigator.userAgent:""),i.test(e)||a.test(e.substr(0,4))}),e.exports=t},1168:function(e,t,n){var r=n(3422);t=function(e){if(r(e))return"";try{return o.call(e)}catch(e){}try{return e+""}catch(e){}return""};var o=Function.prototype.toString;e.exports=t},1277:function(e,t,n){(t=n(6314)(!1)).push([e.id,'.luna-box-model{display:inline-block;text-align:center;white-space:nowrap;color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));background-color:#fff;background-color:var(--luna-color-bg-container,#fff);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-family:var(--luna-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px}.luna-box-model .luna-box-model-hidden,.luna-box-model.luna-box-model-hidden{display:none}.luna-box-model .luna-box-model-invisible,.luna-box-model.luna-box-model-invisible{visibility:hidden}.luna-box-model *{box-sizing:border-box}.luna-box-model.luna-box-model-theme-dark{color-scheme:dark;color:hsla(0,0%,100%,.85);color:var(--luna-color-text-dark,rgba(255,255,255,.85));background-color:#141414;background-color:var(--luna-color-bg-container-dark,#141414)}.luna-box-model{font-size:12px}.luna-box-model-label{position:absolute;margin-left:3px;padding:0 2px}.luna-box-model-bottom,.luna-box-model-left,.luna-box-model-right,.luna-box-model-top{display:inline-block}.luna-box-model-left,.luna-box-model-right{vertical-align:middle}.luna-box-model-border,.luna-box-model-content,.luna-box-model-margin,.luna-box-model-padding,.luna-box-model-position{position:relative;display:inline-block;text-align:center;vertical-align:middle;padding:3px;margin:3px;color:rgba(0,0,0,.88);background:#fff}.luna-box-model-position{border:1px gray dotted}.luna-box-model-margin{border:1px dashed}.luna-box-model-margin.luna-box-model-highlighted{color:rgba(0,0,0,.88)!important;background:rgba(246,178,107,.66)!important}.luna-box-model-border{border:1px #000 solid}.luna-box-model-border.luna-box-model-highlighted{color:rgba(0,0,0,.88)!important;background:rgba(255,229,153,.66)!important}.luna-box-model-padding{border:1px gray dashed}.luna-box-model-padding.luna-box-model-highlighted{color:rgba(0,0,0,.88)!important;background:rgba(147,196,125,.55)!important}.luna-box-model-content{border:1px gray solid;min-width:100px}.luna-box-model-content.luna-box-model-highlighted{color:rgba(0,0,0,.88)!important;background:rgba(111,168,220,.66)!important}.luna-box-model-theme-dark .luna-box-model-border,.luna-box-model-theme-dark .luna-box-model-content,.luna-box-model-theme-dark .luna-box-model-margin,.luna-box-model-theme-dark .luna-box-model-padding,.luna-box-model-theme-dark .luna-box-model-position{color:hsla(0,0%,100%,.85);background:#141414}.luna-box-model-theme-dark .luna-box-model-border{border-color:gray}',""]),e.exports=t},1443:function(e,t,n){(t=n(6314)(!1)).push([e.id,'#_resources{overflow-y:auto;-webkit-overflow-scrolling:touch;padding:10px;font-size:14px}#_resources ._section{margin-bottom:10px;overflow:hidden;border:1px solid var(--border)}#_resources ._section._warn{border:1px solid var(--console-warn-border)}#_resources ._section._warn ._title{background:var(--console-warn-background);color:var(--console-warn-foreground)}#_resources ._section._danger{border:1px solid var(--console-error-border)}#_resources ._section._danger ._title{background:var(--console-error-background);color:var(--console-error-foreground)}#_resources ._section._cookie,#_resources ._section._local-storage,#_resources ._section._session-storage{border:none}#_resources ._section._cookie ._title,#_resources ._section._local-storage ._title,#_resources ._section._session-storage ._title{border:1px solid var(--border);border-bottom:none}#_resources ._title{padding:10px;line-height:18px;color:var(--primary);background:var(--darker-background)}#_resources ._title ._btn{margin-left:5px;float:right;color:var(--primary);width:18px;height:18px;font-size:16px;cursor:pointer;transition:color .3s}#_resources ._title ._btn._filter-text{width:auto;max-width:80px;font-size:14px;overflow:hidden;font-weight:400;text-overflow:ellipsis;display:inline-block}#_resources ._title ._btn:active{color:var(--accent)}#_resources ._title ._btn._btn-disabled{color:inherit!important;cursor:default!important;pointer-events:none;opacity:.5}#_resources ._title ._btn._btn-disabled *{pointer-events:none}#_resources ._link-list{font-size:12px;color:var(--foreground)}#_resources ._link-list li{padding:10px;word-break:break-all}#_resources ._link-list li a{color:var(--link-color)!important}#_resources ._image-list{color:var(--foreground);font-size:12px;display:flex;flex-wrap:wrap;padding-left:10px;padding-top:10px}#_resources ._image-list::after{content:"";flex-grow:1000}#_resources ._image-list li{flex-grow:1;cursor:pointer;overflow-y:hidden;margin-right:10px;margin-bottom:10px;border:1px solid var(--border)}#_resources ._image-list li._image{height:100px;font-size:0}#_resources ._image-list li img{height:100px;min-width:100%;-o-object-fit:cover;object-fit:cover}._safe-area #_resources{padding-bottom:calc(10px + env(safe-area-inset-bottom))}',""]),e.exports=t},1505:function(e,t,n){var r=n(7308),o=n(6026),i=n(9405),a=n(9100),s=n(3915),l=n(1932);t=function(){var e=r("viewport");if(!e)return 1;e=s(e.split(","),function(e){return i(e)});var t=.25,n=5,c=1;a(e,function(e){var r=(e=e.split("="))[0];e=e[1],"initial-scale"===r&&(c=+e),"maximum-scale"===r&&(n=+e),"minimum-scale"===r&&(t=+e)});var u=o(c,t,n);return l(u)?1:u},e.exports=t},1532:function(e,t,n){var r=n(1009),o=n(5169),i=n(2561);function a(e,t){if(e=i(e),t=i(t),r(e,"_")&&!r(t,"_"))return 1;if(r(t,"_")&&!r(e,"_"))return-1;for(var n,a,s,l,c=/^\d+|^\D+/;;){if(!e)return t?-1:0;if(!t)return 1;if(n=e.match(c)[0],a=t.match(c)[0],s=!o.isNaN(n),l=!o.isNaN(a),s&&!l)return-1;if(l&&!s)return 1;if(s&&l){var u=n-a;if(u)return u;if(n.length!==a.length)return+n||+a?a.length-n.length:n.length-a.length}else if(n!==a)return n<a?-1:1;e=e.substring(n.length),t=t.substring(a.length)}}(t=function(e){return e.sort(a)}).comparator=a,e.exports=t},1580:function(e,t){t=function(e,t){var n=e.length-t.length;return n>=0&&e.indexOf(t,n)===n},e.exports=t},1710:function(e,t){t=function(e,t){var n="";if(t<1)return"";for(;t>0;)1&t&&(n+=e),t>>=1,e+=e;return n},e.exports=t},1714:function(e,t,n){"use strict";n.d(t,{A:function(){return ne}});var r=n(3029),o=n(2901),i=n(388),a=n(3954),s=n(991),l=n(5361),c=n(2263),u=n.n(c),d=n(3693),h=n.n(d),f=n(3915),p=n.n(f),m=n(9405),g=n.n(m),v=n(5169),y=n.n(v),b=n(9548),x=n.n(b),w=(n(6097),n(3249)),_=n.n(w),k=(n(6030),n(5004)),A=n.n(k);function S(e){var t="luna-".concat(e,"-");function n(e){return p()(g()(e).split(/\s+/),function(e){return _()(e,t)?e:e.replace(/[\w-]+/,function(e){return"".concat(t).concat(e)})}).join(" ")}return function(e){if(/<[^>]*>/g.test(e))try{var t=x().parse(e);return N(t,function(e){e.attrs&&e.attrs.class&&(e.attrs.class=n(e.attrs.class))}),x().stringify(t)}catch(t){return n(e)}return n(e)}}function N(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];t(o),o.content&&N(o.content,t)}}n(8609);var C="ontouchstart"in y();function j(){var e=A()();return"os x"===e?"mac":e}var E=n(9100),T=n.n(E),I=n(8105),P=n.n(I),O=n(5651),M=n.n(O),L=n(961),R=n.n(L);function D(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(D=function(){return!!e})()}var F=function(e){function t(e,n){var o,s,l,c,u=n.compName,d=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).theme,f=void 0===d?"light":d;return(0,r.A)(this,t),s=this,l=t,l=(0,a.A)(l),(o=(0,i.A)(s,D()?Reflect.construct(l,[],(0,a.A)(s).constructor):l.apply(s,c))).subComponents=[],o.compName=u,o.c=S(u),o.options={},o.container=e,o.$container=h()(e),o.$container.addClass(["luna-".concat(u),o.c("platform-".concat(j()))]),o.on("optionChange",function(e,t,n){var r=o.c;"theme"===e&&(o.$container.rmClass(r("theme-".concat(n))).addClass(r("theme-".concat(t))),T()(o.subComponents,function(e){return e.setOption("theme",t)}))}),o.setOption("theme",f),o}return(0,l.A)(t,e),(0,o.A)(t,[{key:"destroy",value:function(){this.destroySubComponents();var e=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(e("platform-".concat(j()))).rmClass(e("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(e,t){var n=this,r=this.options,o={};"string"==typeof e?o[e]=t:o=e,T()(o,function(e,t){var o=r[t];r[t]=e,n.emit("optionChange",t,e,o)})}},{key:"getOption",value:function(e){return this.options[e]}},{key:"addSubComponent",value:function(e){e.setOption("theme",this.options.theme),this.subComponents.push(e)}},{key:"removeSubComponent",value:function(e){R()(this.subComponents,function(t){return t===e})}},{key:"destroySubComponents",value:function(){T()(this.subComponents,function(e){return e.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};M()(e,t),P()(this.options,e)}},{key:"find",value:function(e){return this.$container.find(this.c(e))}}])}(u()),z=n(3497),B=n.n(z),U=n(9464),q=n.n(U),V=n(5865),H=n.n(V),G=n(4534),K=n.n(G),W=n(4844),Q=n.n(W),Z=n(5902),Y=n.n(Z),J=n(9389),$=n.n(J),X=n(6948),ee=n.n(X);function te(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(te=function(){return!!e})()}e=n.hmd(e);var ne=function(e){function t(e){var n,o,s,l,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.A)(this,t),o=this,s=t,l=[e,{compName:"text-viewer"},c],s=(0,a.A)(s),(n=(0,i.A)(o,te()?Reflect.construct(s,l||[],(0,a.A)(o).constructor):s.apply(o,l))).lineNum=0,n.copy=function(){var e=n.c,t=n.options,r=t.text,o=t.escape;Q()(o?r:$()(ee()(r)));var i=n.$copy.find(e(".icon"));i.addClass(e("icon-check")).rmClass(e("icon-copy")),setTimeout(function(){i.rmClass(e("icon-check")).addClass(e("icon-copy"))},1e3)},n._updateCopyPos=function(){var e=n.container;n.$copy.css({top:e.scrollTop+5,right:5-e.scrollLeft})},n.initOptions(c,{text:"",escape:!0,showLineNumbers:!0,wrapLongLines:!0,maxHeight:1/0}),n.render=H()(function(){return n._render()},16),n.updateCopyPos=K()(function(){return n._updateCopyPos()},300),n.initTpl(),n.$text=n.find(".text"),n.$copy=n.find(".copy"),C&&n.$copy.css("opacity","1"),n.options.text&&n.render(),n.bindEvent(),n.updateHeight(),n}return(0,l.A)(t,e),(0,o.A)(t,[{key:"append",value:function(e){var t=this,n=this.options,r=this.$copy,o=this.c,i=this.$text,a=n.showLineNumbers;if(this.options.text+=e,!a)return this.$text.append(n.escape?Y()(e):e);var s=function(e){return 0===e.length?[]:e.split(re)}(e);q()(s)&&(s=["&nbsp;"]),g()(B()(s))||s.pop();var l="";T()(s,function(e,r){t.lineNum+=1,l+='<div class="'.concat(o("table-row"),'"><div class="').concat(o("line-number"),'">').concat(t.lineNum,'</div><div class="').concat(o("line-text"),'">').concat(n.escape?Y()(e):e||" ","</div></div>")}),i.find(o(".table")).append(l),r.hide(),i.offset().height>40&&r.show(),this.updateCopyPos()}},{key:"destroy",value:function(){var e,n,r;this.$container.off("scroll",this.updateCopyPos),(e=t,n=this,"function"==typeof(r=(0,s.A)((0,a.A)(e.prototype),"destroy",n))?function(e){return r.apply(n,e)}:r)([])}},{key:"updateHeight",value:function(){var e=this.options.maxHeight;e>0&&e!==1/0?this.$text.css("max-height",e):this.$text.css("max-height","none")}},{key:"initTpl",value:function(){this.$container.html(this.c('<div class="text"></div><div class="copy"><span class="icon icon-copy"></span></div>'))}},{key:"bindEvent",value:function(){var e=this;this.on("optionChange",function(t){"maxHeight"===t?e.updateHeight():e.render()}),this.$container.on("scroll",this.updateCopyPos),this.$copy.on("click",this.copy)}},{key:"_render",value:function(){var e=this.c,t=this.$text,n=this.options,r=n.text,o=n.wrapLongLines,i=n.showLineNumbers;o?t.addClass(e("wrap-long-lines")):t.rmClass(e("wrap-long-lines")),i?t.addClass(e("line-numbers")):t.rmClass(e("line-numbers")),t.html('<div class="'.concat(e("table"),'"></div>')),this.lineNum=0,this.options.text="",this.append(r)}}])}(F),re=/\r\n|\r|\n/g;!function(e,t){try{e.exports=t,e.exports.default=t}catch(e){}}(e,ne)},1738:function(e,t,n){var r=n(3974);t=function(e){return"[object String]"===r(e)},e.exports=t},1751:function(e,t,n){var r=n(3974);t=function(e){return"[object Map]"===r(e)},e.exports=t},1849:function(e,t,n){var r=n(9100),o=n(8971),i=n(3957);t=function(e,t){o(t)&&(t=!0);var n=i(t),a={};return r(e,function(e){a[e]=n?t(e):t}),a},e.exports=t},1909:function(e,t){t="object"==typeof window&&"object"==typeof document&&9===document.nodeType,e.exports=t},1931:function(e,t,n){var r=n(1947);t=function(e){var t;switch(e=e||"local"){case"local":t=window.localStorage;break;case"session":t=window.sessionStorage}try{var n="test-localStorage-"+Date.now();t.setItem(n,n);var o=t.getItem(n);if(t.removeItem(n),o!==n)throw new Error}catch(e){return r}return t},e.exports=t},1932:function(e,t,n){var r=n(6097);t=function(e){return r(e)&&e!==+e},e.exports=t},1944:function(e,t,n){"use strict";n.d(t,{A:function(){return $}});var r=n(5458),o=n(4467),i=n(7528),a=n(3029),s=n(2901),l=n(388),c=n(3954),u=n(991),d=n(5361),h=n(2263),f=n.n(h),p=n(3693),m=n.n(p),g=n(3915),v=n.n(g),y=n(9405),b=n.n(y),x=n(5169),w=n.n(x),_=n(9548),k=n.n(_),A=(n(6097),n(3249)),S=n.n(A),N=(n(6030),n(5004)),C=n.n(N);function j(e){var t="luna-".concat(e,"-");function n(e){return v()(b()(e).split(/\s+/),function(e){return S()(e,t)?e:e.replace(/[\w-]+/,function(e){return"".concat(t).concat(e)})}).join(" ")}return function(e){if(/<[^>]*>/g.test(e))try{var t=k().parse(e);return E(t,function(e){e.attrs&&e.attrs.class&&(e.attrs.class=n(e.attrs.class))}),k().stringify(t)}catch(t){return n(e)}return n(e)}}function E(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];t(o),o.content&&E(o.content,t)}}n(9410),n(8609),w();var T=n(9100),I=n.n(T),P=n(8105),O=n.n(P),M=n(5651),L=n.n(M),R=n(961),D=n.n(R),F=n(7e3),z=n.n(F),B=n(1009),U=n.n(B);function q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(q=function(){return!!e})()}var V,H=function(e){function t(e,n){var r,o,i=n.compName,s=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).theme,u=void 0===s?"light":s;return(0,a.A)(this,t),r=function(e,t,n){return t=(0,c.A)(t),(0,l.A)(e,q()?Reflect.construct(t,[],(0,c.A)(e).constructor):t.apply(e,n))}(this,t),r.subComponents=[],r.theme="",r.onThemeChange=function(e){"auto"===r.options.theme&&r.setTheme(e)},r.compName=i,r.c=j(i),r.options={},r.container=e,r.$container=m()(e),r.$container.addClass(["luna-".concat(i),r.c("platform-".concat((o=C()(),"os x"===o?"mac":o)))]),r.on("changeOption",function(e,t){if("theme"===e&&t){var n=t;"auto"===t&&(n=z().get()),r.setTheme(n),I()(r.subComponents,function(e){return e.setOption("theme",t)})}}),z().on("change",r.onThemeChange),r.setOption("theme",u),r}return(0,d.A)(t,e),(0,s.A)(t,[{key:"destroy",value:function(){var e=this;this.destroySubComponents();var t=this.$container,n=t.attr("class");I()(n.split(/\s+/),function(n){U()(n,"luna-".concat(e.compName))&&t.rmClass(n)}),t.html(""),this.emit("destroy"),this.removeAllListeners(),z().off("change",this.onThemeChange)}},{key:"setOption",value:function(e,t){var n=this,r=this.options,o={};"string"==typeof e?o[e]=t:o=e,I()(o,function(e,t){var o=r[t];r[t]=e,e!==o&&n.emit("changeOption",t,e,o)})}},{key:"getOption",value:function(e){return this.options[e]}},{key:"addSubComponent",value:function(e){e.setOption("theme",this.options.theme),this.subComponents.push(e)}},{key:"removeSubComponent",value:function(e){D()(this.subComponents,function(t){return t===e})}},{key:"destroySubComponents",value:function(){I()(this.subComponents,function(e){return e.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};L()(e,t),O()(this.options,e)}},{key:"find",value:function(e){return this.$container.find(this.c(e))}},{key:"setTheme",value:function(e){var t=this.c,n=this.$container;this.theme&&n.rmClass(t("theme-".concat(this.theme))),n.addClass(t("theme-".concat(e))),this.theme=e}}])}(f()),G=n(5773),K=n.n(G),W=n(5241),Q=n.n(W),Z=n(6741),Y=n.n(Z);function J(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(J=function(){return!!e})()}e=n.hmd(e);var $=function(e){function t(e){var n,r,o,i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.A)(this,t),r=this,o=t,i=[e,{compName:"modal"},s],o=(0,c.A)(o),(n=(0,l.A)(r,J()?Reflect.construct(o,i||[],(0,c.A)(r).constructor):o.apply(r,i))).render=function(){var e=n,t=e.options,r=e.c,o=e.$body;t.title?(o.rmClass(r("no-title")),n.$title.text(t.title)):o.addClass(r("no-title")),t.footer?(o.rmClass(r("no-footer")),n.$footer.html("").append(t.footer)):o.addClass(r("no-footer")),t.showClose?n.$close.show():n.$close.hide(),n.$body.css("width",t.width+"px"),n.renderContent()},n.hide(),n.initOptions(s,{title:"",content:"",footer:"",showClose:!0,width:re()}),n.initTpl(),n.$title=n.find(".title"),n.$content=n.find(".content"),n.$body=n.find(".body"),n.$footer=n.find(".footer"),n.$close=n.find(".icon-close"),n.bindEvent(),n}return(0,d.A)(t,e),(0,s.A)(t,[{key:"show",value:function(){this.render(),this.$container.rmClass(this.c("hidden"))}},{key:"hide",value:function(){this.$container.addClass(this.c("hidden"))}},{key:"destroy",value:function(){var e,n,r;(e=t,n=this,"function"==typeof(r=(0,u.A)((0,c.A)(e.prototype),"destroy",n))?function(e){return r.apply(n,e)}:r)([]),this.$container.rmClass(this.c("hidden"))}},{key:"renderContent",value:function(){this.$content.html("").append(this.options.content)}},{key:"bindEvent",value:function(){var e=this;this.$body.on("click",this.c(".icon-close"),function(){return e.hide()}),this.on("changeOption",this.render)}},{key:"initTpl",value:function(){this.$container.html(this.c(K()(V||(V=(0,i.A)(['\n      <div class="body">\n        <span class="icon icon-close"></span>\n        <div class="title"></div>\n        <div class="content"></div>\n        <div class="footer"></div>\n      </div>\n      '])))))}}],[{key:"alert",value:function(e){return new Promise(function(n){var r=te(),i=r.c;r.setOption({title:"",content:e,width:re(),footer:ne((0,o.A)({},t.i18n.t("ok"),{type:"primary",onclick:function(){r.hide(),n()}}),i)}),r.show()})}},{key:"confirm",value:function(e){return new Promise(function(n){var r=te(),i=r.c;r.setOption({title:"",content:e,width:re(),footer:ne((0,o.A)((0,o.A)({},t.i18n.t("cancel"),{type:"secondary",onclick:function(){r.hide(),n(!1)}}),t.i18n.t("ok"),{type:"primary",onclick:function(){r.hide(),n(!0)}}),i)}),r.show()})}},{key:"prompt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise(function(r){var i=te(),a=i.c,s=Q()("input"+a(".input"),{value:n});function l(){i.hide(),r(s.value)}m()(s).on("keypress",function(e){"Enter"===(e=e.origEvent).key&&l()}),i.setOption({title:e,content:s,width:re(),footer:ne((0,o.A)((0,o.A)({},t.i18n.t("cancel"),{type:"secondary",onclick:function(){i.hide(),r(null)}}),t.i18n.t("ok"),{type:"primary",onclick:l}),a)}),i.show();var c=s.value.length;s.setSelectionRange(c,c),s.focus()})}},{key:"setContainer",value:function(e){ee=e}}])}(H);$.i18n=new(Y())("zh-CN"!==navigator.language?"en-US":"zh-CN",{"en-US":{ok:"OK",cancel:"Cancel"},"zh-CN":{ok:"\u786e\u5b9a",cancel:"\u53d6\u6d88"}});var X=null,ee=null;function te(){return ee||(ee=Q()("div"),document.body.append(ee)),X||(X=new $(ee,{showClose:!1})),X}function ne(e,t){var n=v()(e,function(e,n){return Q()(t(".button")+t("."+e.type),{onclick:e.onclick},n)});return Q().apply(void 0,[t(".button-group"),{}].concat((0,r.A)(n)))}function re(){return window.innerWidth<500?window.innerWidth-32:500}!function(e,t){try{e.exports=t,e.exports.default=t}catch(e){}}(e,$)},1947:function(e,t,n){var r=n(3145);t={getItem:function(e){return(i[e]?o[e]:this[e])||null},setItem:function(e,t){i[e]?o[e]=t:this[e]=t},removeItem:function(e){i[e]?delete o[e]:delete this[e]},key:function(e){var t=a();return e>=0&&e<t.length?t[e]:null},clear:function(){for(var e,t=s(),n=0;e=t[n];n++)delete this[e];t=l();for(var r,i=0;r=t[i];i++)delete o[r]}},Object.defineProperty(t,"length",{enumerable:!1,configurable:!0,get:function(){return a().length}});var o={},i={getItem:1,setItem:1,removeItem:1,key:1,clear:1,length:1};function a(){return s().concat(l())}function s(){return r(t).filter(function(e){return!i[e]})}function l(){return r(o)}e.exports=t},1976:function(e,t,n){var r=n(3974);t=function(e){return"[object RegExp]"===r(e)},e.exports=t},2113:function(e,t,n){var r=n(9100),o=n(3612);t=function(e){e=o(e),r(e,function(e){var t=e.parentNode;t&&t.removeChild(e)})},e.exports=t},2125:function(e,t,n){var r=n(9186),o=n(1738),i=n(9760),a=n(9100);n(3612),t=function(e,t,n){var s=t;return o(t)&&(s="data-"+t),i(t)&&(s={},a(t,function(e,t){s["data-"+t]=e})),r(e,s,n)},e.exports=t},2192:function(e,t,n){var r=n(2717),o=n(3722),i=n(6214),a=n(9100),s=n(3145);t=r({initialize:function(e){i(e)?(this.size=e.length,a(e,function(e,t){this[e]=t},this)):(this.size=s(e).length,a(e,function(e,t){this[t]=e},this)),o(this)}}),e.exports=t},2208:function(e,t,n){var r=n(2717);(t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)||(t=r({initialize:function(){},observe:function(){},disconnect:function(){},takeRecords:function(){}})),e.exports=t},2228:function(e,t,n){var r,o,i=n(3981),a=n(1909),s=0;if(a){r=window.requestAnimationFrame,o=window.cancelAnimationFrame;for(var l=["ms","moz","webkit","o"],c=0,u=l.length;c<u&&!r;c++)r=window[l[c]+"RequestAnimationFrame"],o=window[l[c]+"CancelAnimationFrame"]||window[l[c]+"CancelRequestAnimationFrame"];r&&(r=r.bind(window),o=o.bind(window))}o=o||function(e){clearTimeout(e)},(r=r||function(e){var t=i(),n=Math.max(0,16-(t-s)),r=setTimeout(function(){e(t+n)},n);return s=t+n,r}).cancel=o,t=r,e.exports=t},2230:function(e,t,n){var r=n(3612);t=function(e){var t=(e=r(e))[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},e.exports=t},2263:function(e,t,n){var r=n(2717),o=n(365),i=n(9100),a=n(4951),s=n(8996),l=n(8420);t=r({initialize:function(){this._events=this._events||{}},on:function(e,t){return this._events[e]=this._events[e]||[],this._events[e].push(t),this},off:function(e,t){var n=this._events;if(o(n,e)){var r=n[e].indexOf(t);return r>-1&&n[e].splice(r,1),this}},once:function(e,t){return this.on(e,s(t)),this},emit:function(e){var t=this;if(o(this._events,e)){var n=a(arguments,1),r=l(this._events[e]);return i(r,function(e){return e.apply(t,n)},this),this}},removeAllListeners:function(e){return e?delete this._events[e]:this._events={},this}},{mixin:function(e){i(["on","off","once","emit","removeAllListeners"],function(n){e[n]=t.prototype[n]}),e._events=e._events||{}}}),e.exports=t},2284:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:function(){return r}})},2388:function(e,t,n){"use strict";n.d(t,{A:function(){return ze}});var r=n(7528),o=n(3029),i=n(2901),a=n(388),s=n(3954),l=n(991),c=n(5361),u=n(3693),d=n.n(u),h=n(5773),f=n.n(h),p=n(2263),m=n.n(p),g=n(3915),v=n.n(g),y=n(9405),b=n.n(y),x=n(5169),w=n.n(x),_=n(9548),k=n.n(_),A=(n(6097),n(3249)),S=n.n(A),N=n(6030),C=n.n(N),j=n(5004),E=n.n(j),T=(n(9410),n(8609)),I=n.n(T);function P(e){var t="luna-".concat(e,"-");function n(e){return v()(b()(e).split(/\s+/),function(e){return S()(e,t)?e:e.replace(/[\w-]+/,function(e){return"".concat(t).concat(e)})}).join(" ")}return function(e){if(/<[^>]*>/g.test(e))try{var t=k().parse(e);return O(t,function(e){e.attrs&&e.attrs.class&&(e.attrs.class=n(e.attrs.class))}),k().stringify(t)}catch(t){return n(e)}return n(e)}}function O(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];t(o),o.content&&O(o.content,t)}}function M(e,t){var n="x"===e?"clientX":"clientY";return t[n]?t[n]:t.changedTouches?t.changedTouches[0][n]:0}function L(e){return C()(e.replace("px",""))}w();var R=n(9100),D=n.n(R),F=n(8105),z=n.n(F),B=n(5651),U=n.n(B),q=n(961),V=n.n(q),H=n(7e3),G=n.n(H),K=n(1009),W=n.n(K);function Q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Q=function(){return!!e})()}var Z,Y=function(e){function t(e,n){var r,i,l=n.compName,c=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).theme,u=void 0===c?"light":c;return(0,o.A)(this,t),r=function(e,t,n){return t=(0,s.A)(t),(0,a.A)(e,Q()?Reflect.construct(t,[],(0,s.A)(e).constructor):t.apply(e,n))}(this,t),r.subComponents=[],r.theme="",r.onThemeChange=function(e){"auto"===r.options.theme&&r.setTheme(e)},r.compName=l,r.c=P(l),r.options={},r.container=e,r.$container=d()(e),r.$container.addClass(["luna-".concat(l),r.c("platform-".concat((i=E()(),"os x"===i?"mac":i)))]),r.on("changeOption",function(e,t){if("theme"===e&&t){var n=t;"auto"===t&&(n=G().get()),r.setTheme(n),D()(r.subComponents,function(e){return e.setOption("theme",t)})}}),G().on("change",r.onThemeChange),r.setOption("theme",u),r}return(0,c.A)(t,e),(0,i.A)(t,[{key:"destroy",value:function(){var e=this;this.destroySubComponents();var t=this.$container,n=t.attr("class");D()(n.split(/\s+/),function(n){W()(n,"luna-".concat(e.compName))&&t.rmClass(n)}),t.html(""),this.emit("destroy"),this.removeAllListeners(),G().off("change",this.onThemeChange)}},{key:"setOption",value:function(e,t){var n=this,r=this.options,o={};"string"==typeof e?o[e]=t:o=e,D()(o,function(e,t){var o=r[t];r[t]=e,e!==o&&n.emit("changeOption",t,e,o)})}},{key:"getOption",value:function(e){return this.options[e]}},{key:"addSubComponent",value:function(e){e.setOption("theme",this.options.theme),this.subComponents.push(e)}},{key:"removeSubComponent",value:function(e){V()(this.subComponents,function(t){return t===e})}},{key:"destroySubComponents",value:function(){D()(this.subComponents,function(e){return e.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};U()(e,t),z()(this.options,e)}},{key:"find",value:function(e){return this.$container.find(this.c(e))}},{key:"setTheme",value:function(e){var t=this.c,n=this.$container;this.theme&&n.rmClass(t("theme-".concat(this.theme))),n.addClass(t("theme-".concat(e))),this.theme=e}}])}(m()),J=n(5902),$=n.n(J),X=n(5241),ee=n.n(X),te=n(2561),ne=n.n(te),re=n(2708),oe=n.n(re),ie=n(8971),ae=n.n(ie),se=n(4095),le=n.n(se),ce=n(5865),ue=n.n(ce),de=n(1532),he=n.n(de),fe=n(4236),pe=n.n(fe),me=n(3957),ge=n.n(me),ve=n(1976),ye=n.n(ve),be=n(6214),xe=n.n(be),we=n(1738),_e=n.n(we),ke=n(96),Ae=n.n(ke),Se=n(6026),Ne=n.n(Se),Ce=n(3539),je=n.n(Ce),Ee=n(8785),Te=n.n(Ee),Ie=n(6024),Pe=n.n(Ie),Oe=n(3981),Me=n.n(Oe),Le=n(5546),Re=n.n(Le);function De(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(De=function(){return!!e})()}e=n.hmd(e);var Fe=d()(document),ze=function(e){function t(e,n){var r,i,l,c;(0,o.A)(this,t),i=this,l=t,c=[e,{compName:"data-grid"},n],l=(0,s.A)(l),(r=(0,a.A)(i,De()?Reflect.construct(l,c||[],(0,s.A)(i).constructor):l.apply(i,c))).resizeIdx=0,r.resizeStartX=0,r.resizeStartLeft=0,r.resizeDeltaX=0,r.nodes=[],r.displayNodes=[],r.colWidthsInitialized=!1,r.colMap={},r.selectedNode=null,r.isAscending=!0,r.sorted=!1,r.colWidths=[],r.spaceHeight=0,r.topSpaceHeight=0,r.lastScrollTop=0,r.lastTimestamp=0,r.speedToleranceFactor=100,r.maxSpeedTolerance=2e3,r.minSpeedTolerance=100,r.scrollTimer=null,r.onResizeColMove=function(e){var t=r,n=t.resizeIdx,o=t.$resizers,i=t.colWidths,a=t.$colgroup,s=M("x",e=e.origEvent)-r.resizeStartX,l=i[n],c=i[n+1],u=Te()(24-l,0),h=je()(c-24,0);s=Ne()(s,u,h),a.each(function(){var e=d()(this).find("col");e.eq(n).css("width",l+s+"px"),e.eq(n+1).css("width",c-s+"px")}),r.resizeDeltaX=s;var f=r.resizeStartLeft+s;o.eq(n).css("left","".concat(f,"px"))},r.onResizeColEnd=function(e){r.onResizeColMove(e);var t=r,n=t.c,o=t.colWidths,i=t.resizeIdx,a=t.resizeDeltaX,s=r.options.columns,l=s[i],c=s[i+1],u=o[i]+a,h=u+(o[i+1]-a),f=l.weight+c.weight,p=f*(u/h),m=f-p;l.weight=p,c.weight=m,r.applyColWeights(),d()(document.body).rmClass(n("resizing")),Fe.off(Re()("move"),r.onResizeColMove),Fe.off(Re()("up"),r.onResizeColEnd)},r.onScroll=function(){var e=r.dataContainer,t=e.scrollHeight,n=e.clientHeight,o=e.scrollTop;if(!(o<=0||n+o>t)){var i=r.lastScrollTop,a=r.lastTimestamp,s=Me()(),l=s-a,c=o-i,u=Math.abs(c/l)*r.speedToleranceFactor;l>1e3&&(u=1e3),u>r.maxSpeedTolerance&&(u=r.maxSpeedTolerance),u<r.minSpeedTolerance&&(u=r.minSpeedTolerance),r.lastScrollTop=o,r.lastTimestamp=s;var d=0,h=0;i<o?(d=r.minSpeedTolerance,h=u):(d=u,h=r.minSpeedTolerance),r.topSpaceHeight<o-d&&r.topSpaceHeight+r.data.offsetHeight>o+n+h||(r.renderData({topTolerance:2*d,bottomTolerance:2*h}),r.scrollTimer&&clearTimeout(r.scrollTimer),r.scrollTimer=setTimeout(function(){r.renderData()},100))}},r.renderData=ue()(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.topTolerance,n=void 0===t?500:t,o=e.bottomTolerance,i=void 0===o?500:o;r.sortId&&!r.sorted&&r.sortNodes(r.sortId,r.isAscending);for(var a=r,s=a.dataContainer,l=a.displayNodes,c=a.tableBody,u=s.scrollTop,d=u-n,h=u+s.clientHeight+i,f=0,p=0,m=l.length,g=[],v=0;v<m;v++){var y=l[v];p<=h&&(p+20>d?(0===g.length&&Pe()(v)&&(g.push(l[v-1]),f-=20),g.push(y)):p<d&&(f+=20)),p+=20}r.updateSpace(p),r.updateTopSpace(f);for(var b=document.createDocumentFragment(),x=0,w=g.length;x<w;x++)b.appendChild(g[x].container);b.appendChild(r.fillerRow),c.textContent="",c.appendChild(b)},16),r.$container.attr("tabindex","0"),r.resizeSensor=new(le())(e),r.onResize=ue()(function(){r.updateHeight(),r.updateWeights(),r.renderData()},16),n.height&&(n.maxHeight=n.height,n.minHeight=n.height),r.initOptions(n,{minHeight:41,maxHeight:1/0,filter:"",selectable:!1});var u=r.options,h=u.columns,f=u.minHeight,p=u.maxHeight;return D()(h,function(e){U()(e,{sortable:!1}),r.colMap[e.id]=e}),p<f&&r.setOption("maxHeight",f),r.initTpl(),r.$headerRow=r.find(".header").find("tr"),r.$fillerRow=r.find(".filler-row"),r.fillerRow=r.$fillerRow.get(0),r.$data=r.find(".data"),r.data=r.$data.get(0),r.$tableBody=r.$data.find("tbody"),r.tableBody=r.$tableBody.get(0),r.$colgroup=r.$container.find("colgroup"),r.$dataContainer=r.find(".data-container"),r.dataContainer=r.$dataContainer.get(0),r.$space=r.find(".data-space"),r.space=r.$space.get(0),r.renderHeader(),r.renderResizers(),r.updateWeights(),r.updateHeight(),r.bindEvent(),r}return(0,c.A)(t,e),(0,i.A)(t,[{key:"destroy",value:function(){var e,n,r;(e=t,n=this,"function"==typeof(r=(0,l.A)((0,s.A)(e.prototype),"destroy",n))?function(e){return r.apply(n,e)}:r)([]),this.resizeSensor.destroy(),this.$container.rmAttr("tabindex")}},{key:"remove",value:function(e){var t=this.nodes,n=this.displayNodes;V()(t,function(t){return t===e}),V()(n,function(t){return t===e}),e===this.selectedNode&&this.selectNode(null),this.renderData(),this.updateHeight()}},{key:"append",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};U()(t,{selectable:this.options.selectable});var n=new Be(this,e,t);this.nodes.push(n);var r=this.filterNode(n);return r&&this.displayNodes.push(n),(this.sortId||r)&&(this.sortId&&(this.sorted=!1),this.renderData()),this.updateHeight(),n}},{key:"setData",value:function(e,t){var n=this,r=v()(e,function(e){return xe()(e)?(U()(e[1],{selectable:n.options.selectable}),e):[e,{selectable:n.options.selectable}]});if(t){var o={};D()(this.nodes,function(e){o[e.data[t]]=e});var i=[],a=[];D()(r,function(e){var r,s=e[0][t];o[s]?((r=o[s]).data=e[0],r.render()):r=new Be(n,e[0],e[1]),i.push(r),n.filterNode(r)&&a.push(r)}),this.selectedNode&&!S()(i,this.selectedNode)&&this.selectNode(null),this.nodes=i,this.displayNodes=a}else this.clearData(),D()(r,function(e){var t=new Be(n,e[0],e[1]);n.nodes.push(t),n.filterNode(t)&&n.displayNodes.push(t)});this.sortId&&(this.sorted=!1),this.renderData(),this.updateHeight()}},{key:"clear",value:function(){this.clearData(),this.renderData(),this.updateHeight()}},{key:"fit",value:function(){if(!I()(this.container)){var e=this.$container.parent().get(0),t=window.getComputedStyle(e),n=e.clientHeight-L(t.paddingTop)-L(t.paddingBottom);this.setOption({minHeight:n,maxHeight:n})}}},{key:"clearData",value:function(){this.nodes=[],this.displayNodes=[],this.selectNode(null)}},{key:"updateHeight",value:function(){var e=this.$fillerRow,t=this.$container,n=this.options,r=n.maxHeight,o=n.minHeight,i=this.$headerRow.offset().height+L(t.css("border-top-width"))+L(t.css("border-bottom-width"));(o-=i)<0&&(o=0),r-=i;var a=this.displayNodes.length,s=0;a>0&&(s=20*a),s>o?e.hide():e.show(),s<o?s=o:s>=r&&(s=r),this.$dataContainer.css({height:s})}},{key:"selectNode",value:function(e){(pe()(e)||null!=e&&e.selectable)&&this.selectedNode!==e&&(this.selectedNode&&(this.selectedNode.deselect(),this.selectedNode=null,pe()(e)&&this.emit("deselect")),pe()(e)||(this.selectedNode=e,e.select(),this.emit("select",e)))}},{key:"onResizeColStart",value:function(e){var t=this.c,n=this.resizeIdx,r=this.$resizers;e.stopPropagation(),e.preventDefault(),e=e.origEvent,this.resizeStartX=M("x",e),this.resizeStartLeft=L(r.eq(n).css("left")),d()(document.body).addClass(t("resizing")),Fe.on(Re()("move"),this.onResizeColMove),Fe.on(Re()("up"),this.onResizeColEnd)}},{key:"bindEvent",value:function(){var e=this,t=this.c,n=this.$headerRow,r=this.$tableBody,o=this.$resizers,i=this.$dataContainer;this.resizeSensor.addListener(this.onResize),i.on("scroll",this.onScroll);var a=this;r.on("click",t(".node"),function(e){var t=this;a.selectNode(this.dataGridNode),setTimeout(function(){t.hasDoubleClick||a.emit("click",e.origEvent,t.dataGridNode)},200)}).on("dblclick",t(".node"),function(e){var t=this;e.stopPropagation(),this.hasDoubleClick=!0,a.emit("dblclick",e.origEvent,this.dataGridNode),setTimeout(function(){t.hasDoubleClick=!1},300)}).on("contextmenu",t(".node"),function(e){e.preventDefault(),e.stopPropagation(),a.selectNode(this.dataGridNode),a.emit("contextmenu",e.origEvent,this.dataGridNode)}),n.on("click",t(".sortable"),function(e){e.stopPropagation();var r=d()(this),o=r.data("id"),i="descending"!==r.data("order");r.data("order",i?"descending":"ascending"),n.find(t(".icon-caret-up")).hide(),n.find(t(".icon-caret-down")).hide();var s=r.find(t(".icon-caret-up")),l=r.find(t(".icon-caret-down"));i?s.show():l.show(),a.sortNodes(o,i),a.renderData(),n.find("th").each(function(){var e=d()(this);e.data("id")!==o&&e.rmAttr("data-order")})}),o.on(Re()("down"),function(e){var t=d()(this);a.resizeIdx=C()(t.data("idx")),a.onResizeColStart(e)}),this.on("changeOption",function(t){switch(t){case"minHeight":case"maxHeight":e.updateHeight();break;case"filter":e.displayNodes=[],D()(e.nodes,function(t){e.filterNode(t)&&e.displayNodes.push(t)}),e.selectedNode&&!e.filterNode(e.selectedNode)&&e.selectNode(null),e.renderData(),e.updateHeight()}})}},{key:"sortNodes",value:function(e,t){var n=this.colMap[e].comparator||he().comparator;function r(r,o){var i=r.data[e],a=o.data[e];return oe()(i)&&(i=i.innerText),oe()(a)&&(a=a.innerText),t?n(i,a):n(a,i)}this.nodes.sort(r),this.displayNodes.sort(r),this.sorted=!0,this.sortId=e,this.isAscending=t}},{key:"updateWeights",value:function(){var e=this.container,t=this.$headerRow,n=this.options.columns,r=e.offsetWidth;if(!this.colWidthsInitialized&&r){for(var o=0,i=n.length;o<i;o++){var a=n[o];if(!a.weight){var s=t.find("th").get(o).offsetWidth;a.weight=100*s/r}}this.colWidthsInitialized=!0}this.applyColWeights()}},{key:"applyColWeights",value:function(){var e=this.container,t=this.$colgroup,n=this.options.columns,r=e.offsetWidth;if(!(r<=0)){for(var o=0,i=n.length,a=0;a<i;a++)o+=n[a].weight;var s="",l=0,c=0;this.colWidths=[];for(var u=0;u<i;u++){var d=(l+=n[u].weight)*r/o|0,h=Math.max(d-c,14);c=d,s+='<col style="width:'.concat(h,'px"></col>'),this.colWidths[u]=h}t.html(s),this.positionResizers()}}},{key:"positionResizers",value:function(){for(var e=this.colWidths,t=[],n=e.length-1,r=0;r<n;r++)t[r]=(t[r-1]||0)+e[r];for(var o=0;o<n;o++)this.$resizers.eq(o).css("left",t[o]+"px")}},{key:"updateTopSpace",value:function(e){this.topSpaceHeight=e,this.data.style.top=e+"px"}},{key:"updateSpace",value:function(e){this.spaceHeight!==e&&(this.spaceHeight=e,this.space.style.height=e+"px")}},{key:"filterNode",value:function(e){var t=this.options.filter;if(t){if(ge()(t))return t(e);if(ye()(t))return t.test(e.text());if(_e()(t)&&(t=b()(t)))return S()(Ae()(e.text()),Ae()(t))}return!0}},{key:"renderHeader",value:function(){var e=this.c,t="",n="";D()(this.options.columns,function(r){var o=$()(r.title);r.sortable?t+=e('\n          <th class="sortable" data-id="'.concat(r.id,'">\n            ').concat(o,'\n            <span class="icon-caret-up"></span>\n            <span class="icon-caret-down"></span>\n          </th>')):t+="<th>".concat(o,"</th>"),n+="<td></td>"}),this.$headerRow.html(t),this.$fillerRow.html(n)}},{key:"renderResizers",value:function(){for(var e="",t=this.options.columns.length-1,n=0;n<t;n++)e+=this.c('<div class="resizer" data-idx="'.concat(n,'"></div>'));this.$container.append(e),this.$resizers=this.find(".resizer")}},{key:"initTpl",value:function(){this.$container.html(this.c(f()(Z||(Z=(0,r.A)(['\n        <div class="header-container">\n          <table class="header">\n            <colgroup></colgroup>\n            <tbody>\n              <tr></tr>\n            </tbody>\n          </table>\n        </div>\n        <div class="data-container">\n          <div class="data-space">\n            <table class="data">\n              <colgroup></colgroup>\n              <tbody>\n                <tr class="filler-row"></tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      '])))))}}])}(Y),Be=(0,i.A)(function e(t,n,r){(0,o.A)(this,e),this.container=ee()("tr"),this.selectable=!1,this.container.dataGridNode=this,this.$container=d()(this.container),this.$container.addClass(t.c("node")),this.dataGrid=t,this.data=n,r.selectable&&(this.selectable=r.selectable,this.$container.addClass(t.c("selectable"))),this.render()},[{key:"text",value:function(){return this.$container.text()}},{key:"select",value:function(){this.$container.addClass(this.dataGrid.c("selected"))}},{key:"deselect",value:function(){this.$container.rmClass(this.dataGrid.c("selected"))}},{key:"render",value:function(){var e=this.data,t=this.$container,n=this.container,r=this.dataGrid.getOption("columns");t.html(""),D()(r,function(t){var r=ee()("td"),o=e[t.id];ae()(o)||(oe()(o)?r.appendChild(o):r.innerText=ne()(o)),n.appendChild(r)})}}]);!function(e,t){try{e.exports=t,e.exports.default=t}catch(e){}}(e,ze)},2455:function(e,t){t=function(e){return e},e.exports=t},2480:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.enable=function(){if(!k){var e=(0,h.default)("div",{class:"__chobitsu-hide__",style:{all:"initial"}});l=(0,d.default)(e),document.documentElement.appendChild(e);var t=null,n=null;if(e.attachShadow?n=e.attachShadow({mode:"open"}):e.createShadowRoot&&(n=e.createShadowRoot()),n){var r=document.createElement("style");r.textContent=N,r.type="text/css",n.appendChild(r),t=document.createElement("div"),n.appendChild(t)}else t=document.createElement("div"),e.appendChild(t),_||((0,f.default)(N),_=!0);s=new x.default(t,{monitorResize:(0,y.default)(v.default.ResizeObserver),showInfo:A}),window.addEventListener("resize",F),k=!0}},t.disable=function(){s.destroy(),l.remove(),window.removeEventListener("resize",F),k=!1},t.highlightNode=C,t.hideHighlight=j,t.setShowViewportSizeOnResize=function(e){E=e.show},t.setInspectMode=function(e){T=e.highlightConfig,I=e.mode};var s,l,c=n(9893),u=n(6192),d=a(n(3693)),h=a(n(5241)),f=a(n(3048)),p=a(n(5651)),m=a(n(8105)),g=a(n(8665)),v=a(n(5169)),y=a(n(9e3)),b=a(n(8534)),x=a(n(9196)),w=i(n(2484)),_=!1,k=!1,A=(0,b.default)("clip-path","polygon(50% 0px, 0px 100%, 100% 100%)"),S="ontouchstart"in v.default,N=n(7119).replace("/*# sourceMappingURL=luna-dom-highlighter.css.map*/","");function C(e){var t,n=e.nodeId,r=e.highlightConfig,o=e.objectId;n&&(t=(0,c.getNode)(n)),o&&(t=w.getObj(o)),1!==t.nodeType&&3!==t.nodeType||((0,p.default)(r,{contentColor:"transparent",paddingColor:"transparent",borderColor:"transparent",marginColor:"transparent"}),A||(0,m.default)(r,{showInfo:!1}),s.highlight(t,r))}function j(){s.hide()}var E=!1,T={},I="none";function P(e){if(S){var t=e.touches[0]||e.changedTouches[0];return document.elementFromPoint(t.clientX,t.clientY)}return document.elementFromPoint(e.clientX,e.clientY)}var O=-1;function M(e){if("none"!==I){var t=P(e);if(t&&(0,c.isValidNode)(t)){var n=(0,c.getNodeId)(t);n||(n=(0,u.pushNodesToFrontend)(t)),C({nodeId:n,highlightConfig:T}),n!==O&&(g.default.trigger("Overlay.nodeHighlightRequested",{nodeId:n}),O=n)}}}function L(e){if("none"!==I){e.preventDefault(),e.stopImmediatePropagation();var t=P(e);g.default.trigger("Overlay.inspectNodeRequested",{backendNodeId:(0,c.getNodeId)(t)}),O=-1,j()}}function R(e,t){document.documentElement.addEventListener(e,t,!0)}S?(R("touchstart",M),R("touchmove",M),R("touchend",L)):(R("mousemove",M),R("mouseout",function(){"none"!==I&&j()}),R("click",L));var D=(0,h.default)("div",{class:"__chobitsu-hide__",style:{position:"fixed",right:0,top:0,background:"#fff",fontSize:13,opacity:.5,padding:"4px 6px"}});function F(){E&&(B.text("".concat(window.innerWidth,"px \xd7 ").concat(window.innerHeight,"px")),z?clearTimeout(z):document.documentElement.appendChild(D),z=setTimeout(function(){B.remove(),z=null},1e3))}var z,B=(0,d.default)(D)},2484:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.clear=function(){x.clear(),w.clear(),_.clear()},t.wrap=N,t.getObj=C,t.releaseObj=function(e){var t=C(e);w.delete(t),_.delete(e),x.delete(e)},t.getProperties=function(e){for(var t=e.accessorPropertiesOnly,n=e.objectId,r=e.ownProperties,i=e.generatePreview,a=[],l={prototype:!r,unenumerable:!0,symbol:!t},c=x.get(n),h=_.get(n),f=(0,m.default)(c,l),p=(0,v.default)(c),w=0,A=f.length;w<A;w++){var S=f[w],j=void 0;try{j=h[S]}catch(e){}var E={name:(0,o.default)(S),isOwn:(0,b.has)(h,S)},T=Object.getOwnPropertyDescriptor(c,S);if(!T&&p&&(T=Object.getOwnPropertyDescriptor(p,S)),T){if(t&&!T.get&&!T.set)continue;E.configurable=T.configurable,E.enumerable=T.enumerable,E.writable=T.writable,T.get&&(E.get=N(T.get)),T.set&&(E.set=N(T.set))}p&&(0,b.has)(p,S)&&E.enumerable&&(E.isOwn=!0);var I=!0;!E.isOwn&&E.get&&(I=!1),I&&((0,y.default)(S)?(E.symbol=N(S),E.value={type:"undefined"}):E.value=N(j,{generatePreview:i})),t&&(0,s.default)(j)&&(0,g.default)(j)||a.push(E)}if(!p||r||M(c)||a.push({name:"__proto__",configurable:!0,enumerable:!1,isOwn:(0,b.has)(c,"__proto__"),value:N(p,{self:h}),writable:!1}),t)return{result:a};var P=[];if(p&&!M(c)&&P.push({name:"[[Prototype]]",value:N(p,{self:h})}),(0,u.default)(c)||(0,d.default)(c)){var L=function(e){for(var t=k.get(e),n=t?C(t):[],r=e.entries(),o=r.next().value;o;)(0,u.default)(e)?n.push(new O(o[1],o[0])):n.push(new O(o[1])),o=r.next().value;return n}(c);P.push({name:"[[Entries]]",value:N(L)})}return{internalProperties:P,result:a}};var o=r(n(2561)),i=r(n(4236)),a=r(n(6214)),s=r(n(3957)),l=r(n(2708)),c=r(n(2650)),u=r(n(1751)),d=r(n(5945)),h=r(n(1976)),f=r(n(3145)),p=r(n(1168)),m=r(n(7514)),g=r(n(9122)),v=r(n(5427)),y=r(n(9350)),b=n(916),x=new Map,w=new Map,_=new Map,k=new Map,A=1;function S(e,t){var n=w.get(e);return n||(n=JSON.stringify({injectedScriptId:0,id:A++}),w.set(e,n),x.set(n,e),_.set(n,t),n)}function N(e,t){var n=void 0===t?{}:t,r=n.generatePreview,o=void 0!==r&&r,i=n.self,a=void 0===i?e:i,s=P(e),l=s.type,c=s.subtype;return"undefined"===l?s:"string"===l||"boolean"===l||"null"===c?(s.value=e,s):(s.description=I(e,a),"number"===l?(s.value=e,s):"symbol"===l?(s.objectId=S(e,a),s):(s.className="function"===l?"Function":"array"===c?"Array":"map"===c?"Map":"set"===c?"Set":"regexp"===c?"RegExp":"error"===c?e.name:(0,b.getType)(e,!1),o&&(s.preview=E(e,a)),s.objectId=S(e,a),s))}function C(e){return x.get(e)}var j=5;function E(e,t){void 0===t&&(t=e);var n=P(e);n.description=I(e,t);var r=!1,o=[],i=(0,f.default)(e),a=i.length;a>j&&(a=j,r=!0);for(var s=0;s<a;s++){var l=i[s];o.push(T(l,t[l]))}if(n.properties=o,(0,u.default)(e)){for(var c=[],h=(s=0,e.keys()),p=h.next().value;p;){if(s>j){r=!0;break}c.push({key:E(p),value:E(e.get(p))}),s++,p=h.next().value}n.entries=c}else if((0,d.default)(e)){var m=[],g=(s=0,e.keys());for(p=g.next().value;p;){if(s>j){r=!0;break}m.push({value:E(p)}),s++,p=g.next().value}n.entries=m}return n.overflow=r,n}function T(e,t){var n=P(t);n.name=e;var r,i=n.subtype;return r="object"===n.type?"null"===i?"null":"array"===i?"Array(".concat(t.length,")"):"map"===i?"Map(".concat(t.size,")"):"set"===i?"Set(".concat(t.size,")"):(0,b.getType)(t,!1):(0,o.default)(t),n.value=r,n}function I(e,t){void 0===t&&(t=e);var n=P(e),r=n.type,i=n.subtype;return"string"===r?e:"number"===r||"symbol"===r?(0,o.default)(e):"function"===r?(0,p.default)(e):"array"===i?"Array(".concat(e.length,")"):"map"===i?"Map(".concat(t.size,")"):"set"===i?"Set(".concat(t.size,")"):"regexp"===i?(0,o.default)(e):"error"===i?e.stack:"internal#entry"===i?e.name?'{"'.concat((0,o.default)(e.name),'" => "').concat((0,o.default)(e.value),'"}'):'"'.concat((0,o.default)(e.value),'"'):(0,b.getType)(e,!1)}function P(e){var t=typeof e,n="object";if(e instanceof O)n="internal#entry";else if((0,i.default)(e))n="null";else if((0,a.default)(e))n="array";else if((0,h.default)(e))n="regexp";else if((0,c.default)(e))n="error";else if((0,u.default)(e))n="map";else if((0,d.default)(e))n="set";else try{(0,l.default)(e)&&(n="node")}catch(e){}return{type:t,subtype:n}}var O=function(e,t){t&&(this.name=t),this.value=e};function M(e){return e instanceof O||!!(e[0]&&e[0]instanceof O)}},2508:function(e,t,n){var r=n(6186),o=n(2561),i=/{{(.*?)}}/g;t=function(e,t){return e.replace(i,function(e,n){return o(r(t,n))})},e.exports=t},2510:function(e,t){t=function(e,t){return t=null==t?e.length-1:+t,function(){var n,r=Math.max(arguments.length-t,0),o=new Array(r);for(n=0;n<r;n++)o[n]=arguments[n+t];switch(t){case 0:return e.call(this,o);case 1:return e.call(this,arguments[0],o);case 2:return e.call(this,arguments[0],arguments[1],o)}var i=new Array(t+1);for(n=0;n<t;n++)i[n]=arguments[n];return i[t]=o,e.apply(this,i)}},e.exports=t},2517:function(e,t,n){var r=n(3974);t=function(e){return"[object Date]"===r(e)},e.exports=t},2556:function(e,t,n){"use strict";n.d(t,{A:function(){return Z}});var r=n(3029),o=n(2901),i=n(388),a=n(3954),s=n(5361),l=n(3693),c=n.n(l),u=n(5630),d=n.n(u),h=n(8438),f=n.n(h),p=n(5241),m=n.n(p),g=n(2263),v=n.n(g),y=n(3915),b=n.n(y),x=n(9405),w=n.n(x),_=n(5169),k=n.n(_),A=n(9548),S=n.n(A),N=(n(6097),n(3249)),C=n.n(N),j=(n(6030),n(5004)),E=n.n(j);function T(e){var t="luna-".concat(e,"-");function n(e){return b()(w()(e).split(/\s+/),function(e){return C()(e,t)?e:e.replace(/[\w-]+/,function(e){return"".concat(t).concat(e)})}).join(" ")}return function(e){if(/<[^>]*>/g.test(e))try{var t=S().parse(e);return I(t,function(e){e.attrs&&e.attrs.class&&(e.attrs.class=n(e.attrs.class))}),S().stringify(t)}catch(t){return n(e)}return n(e)}}function I(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];t(o),o.content&&I(o.content,t)}}n(9410),n(8609),k();var P=n(9100),O=n.n(P),M=n(8105),L=n.n(M),R=n(5651),D=n.n(R),F=n(961),z=n.n(F),B=n(7e3),U=n.n(B),q=n(1009),V=n.n(q);function H(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(H=function(){return!!e})()}var G=function(e){function t(e,n){var o,s,l=n.compName,u=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).theme,d=void 0===u?"light":u;return(0,r.A)(this,t),o=function(e,t,n){return t=(0,a.A)(t),(0,i.A)(e,H()?Reflect.construct(t,[],(0,a.A)(e).constructor):t.apply(e,n))}(this,t),o.subComponents=[],o.theme="",o.onThemeChange=function(e){"auto"===o.options.theme&&o.setTheme(e)},o.compName=l,o.c=T(l),o.options={},o.container=e,o.$container=c()(e),o.$container.addClass(["luna-".concat(l),o.c("platform-".concat((s=E()(),"os x"===s?"mac":s)))]),o.on("changeOption",function(e,t){if("theme"===e&&t){var n=t;"auto"===t&&(n=U().get()),o.setTheme(n),O()(o.subComponents,function(e){return e.setOption("theme",t)})}}),U().on("change",o.onThemeChange),o.setOption("theme",d),o}return(0,s.A)(t,e),(0,o.A)(t,[{key:"destroy",value:function(){var e=this;this.destroySubComponents();var t=this.$container,n=t.attr("class");O()(n.split(/\s+/),function(n){V()(n,"luna-".concat(e.compName))&&t.rmClass(n)}),t.html(""),this.emit("destroy"),this.removeAllListeners(),U().off("change",this.onThemeChange)}},{key:"setOption",value:function(e,t){var n=this,r=this.options,o={};"string"==typeof e?o[e]=t:o=e,O()(o,function(e,t){var o=r[t];r[t]=e,e!==o&&n.emit("changeOption",t,e,o)})}},{key:"getOption",value:function(e){return this.options[e]}},{key:"addSubComponent",value:function(e){e.setOption("theme",this.options.theme),this.subComponents.push(e)}},{key:"removeSubComponent",value:function(e){z()(this.subComponents,function(t){return t===e})}},{key:"destroySubComponents",value:function(){O()(this.subComponents,function(e){return e.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};D()(e,t),L()(this.options,e)}},{key:"find",value:function(e){return this.$container.find(this.c(e))}},{key:"setTheme",value:function(e){var t=this.c,n=this.$container;this.theme&&n.rmClass(t("theme-".concat(this.theme))),n.addClass(t("theme-".concat(e))),this.theme=e}}])}(v()),K=n(8971),W=n.n(K);function Q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Q=function(){return!!e})()}e=n.hmd(e);var Z=function(e){function t(e){var n,o,s,l,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.A)(this,t),o=this,s=t,l=[e,{compName:"notification"},c],s=(0,a.A)(s),(n=(0,i.A)(o,Q()?Reflect.construct(s,l||[],(0,a.A)(o).constructor):s.apply(o,l))).notifications=[],n.initOptions(c,{position:{x:"right",y:"bottom"},inline:!1,duration:2e3}),n.options.inline||n.$container.addClass(n.c("full")),n.initTpl(),n}return(0,s.A)(t,e),(0,o.A)(t,[{key:"notify",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};W()(n.duration)&&(n.duration=this.options.duration);var r=new Y(this,e,{icon:n.icon||"none"});this.notifications.push(r),this.add(r),setTimeout(function(){return t.remove(r.id)},n.duration)}},{key:"dismissAll",value:function(){for(var e=this.notifications,t=e[0];t;)this.remove(t.id),t=e[0]}},{key:"add",value:function(e){this.container.appendChild(e.container)}},{key:"remove",value:function(e){var t=this.notifications,n=f()(t,function(t){return t.id===e});if(n){n.destroy();var r=t.indexOf(n);t.splice(r,1)}}},{key:"initTpl",value:function(){var e=this.$container,t=this.options.position,n=t.x,r=t.y,o="flex-end",i="flex-end";switch(n){case"center":i="center";break;case"left":i="flex-start"}"top"===r&&(o="flex-start"),e.attr("style","justify-content: ".concat(o,"; align-items: ").concat(i))}}])}(G),Y=(0,o.A)(function e(t,n,o){(0,r.A)(this,e),this.container=m()("div"),this.$container=c()(this.container),this.notification=t,this.content=n,this.id=d()("luna-notification-"),this.$container.attr({id:this.id,class:t.c("item ".concat("bottom"===t.getOption("position").y?"lower":"upper"))}),this.initTpl(o.icon)},[{key:"destroy",value:function(){this.$container.remove()}},{key:"initTpl",value:function(e){var t=e;"success"===e?t="check":"warning"===e&&(t="warn");var n="none"===e?"":'<div class="icon-container '.concat(e,'"><span class="icon icon-').concat(t,'"></span></div>');this.$container.html(this.notification.c("".concat(n,'<div class="content">').concat(this.content,"</div>")))}}]);!function(e,t){try{e.exports=t,e.exports.default=t}catch(e){}}(e,Z)},2561:function(e,t){t=function(e){return null==e?"":e.toString()},e.exports=t},2571:function(e,t,n){var r=n(5693),o=n(9100);t=function(e,t,n){var i=[];return t=r(t,n),o(e,function(e,n,r){t(e,n,r)&&i.push(e)}),i},e.exports=t},2627:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setGlobal=function(e,t){u[e]=t},t.default=function(e){var t;(0,c.default)(u,function(e,t){window[t]||(window[t]=e)});try{t=eval.call(window,"(".concat(e,")"))}catch(n){t=eval.call(window,e)}return(0,c.default)(u,function(e,t){window[t]&&window[t]===e&&delete window[t]}),t};var o=r(n(1738)),i=r(n(4844)),a=r(n(769)),s=r(n(3145)),l=r(n(8862)),c=r(n(9100)),u={copy:function(e){(0,o.default)(e)||(e=JSON.stringify(e,null,2)),(0,i.default)(e)},$:function(e){return document.querySelector(e)},$$:function(e){return(0,a.default)(document.querySelectorAll(e))},$x:function(e){return(0,l.default)(e)},keys:s.default}},2650:function(e,t,n){var r=n(3974);t=function(e){switch(r(e)){case"[object Error]":case"[object DOMException]":return!0;default:return e instanceof Error}},e.exports=t},2693:function(e,t,n){(t=n(6314)(!1)).push([e.id,'._container a,._container abbr,._container acronym,._container address,._container applet,._container article,._container aside,._container audio,._container b,._container big,._container blockquote,._container canvas,._container caption,._container center,._container cite,._container code,._container dd,._container del,._container details,._container dfn,._container dl,._container dt,._container em,._container embed,._container fieldset,._container figcaption,._container figure,._container footer,._container form,._container h1,._container h2,._container h3,._container h4,._container h5,._container h6,._container header,._container hgroup,._container i,._container iframe,._container img,._container ins,._container kbd,._container label,._container legend,._container li,._container mark,._container menu,._container nav,._container object,._container ol,._container output,._container p,._container pre,._container q,._container ruby,._container s,._container samp,._container section,._container small,._container span,._container strike,._container strong,._container sub,._container summary,._container sup,._container table,._container tbody,._container td,._container tfoot,._container th,._container thead,._container time,._container tr,._container tt,._container u,._container ul,._container var,._container video{margin:0;padding:0;border:0;font-size:100%}._container article,._container aside,._container details,._container figcaption,._container figure,._container footer,._container header,._container hgroup,._container menu,._container nav,._container section{display:block}._container body{line-height:1}._container ol,._container ul{list-style:none}._container blockquote,._container q{quotes:none}._container blockquote:after,._container blockquote:before,._container q:after,._container q:before{content:"";content:none}._container table{border-collapse:collapse;border-spacing:0;color:inherit;font-size:1em;font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;text-decoration:inherit;white-space:inherit}',""]),e.exports=t},2708:function(e,t){t=function(e){return!(!e||1!==e.nodeType)},e.exports=t},2717:function(e,t,n){var r=n(8105),o=n(769),i=n(8009),a=n(6186),s=n(4460),l=(t=function(e,t){return l.extend(e,t)}).Base=function e(t,n,l){l=l||{};var c=n.className||a(n,"initialize.name")||"";delete n.className;var u=function(){var e=o(arguments);return this.initialize&&this.initialize.apply(this,e)||this};if(!s)try{u=new Function("toArr","return function "+c+"(){var args = toArr(arguments);return this.initialize ? this.initialize.apply(this, args) || this : this;};")(o)}catch(e){}return i(u,t),u.prototype.constructor=u,u.extend=function(t,n){return e(u,t,n)},u.inherits=function(e){i(u,e)},u.methods=function(e){return r(u.prototype,e),u},u.statics=function(e){return r(u,e),u},u.methods(n).statics(l),u}(Object,{className:"Base",callSuper:function(e,t,n){return e.prototype[t].apply(this,n)},toString:function(){return this.constructor.name}});e.exports=t},2767:function(e,t,n){var r=n(1738),o=n(5282);t=function(e){return r(e)?i[e]:u[e]};for(var i={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,windows:91,"right windows":92,"windows menu":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=97;a<123;a++)i[String.fromCharCode(a)]=a-32;for(var s=48;s<58;s++)i[s-48]=s;for(var l=1;l<13;l++)i["f"+l]=l+111;for(var c=0;c<10;c++)i["numpad "+c]=c+96;var u=o(i);e.exports=t},2797:function(e,t,n){var r=n(5693),o=n(5793),i=n(3145);t=function(e,t,n){t=r(t,n);for(var a=!o(e)&&i(e),s=(a||e).length,l=0;l<s;l++){var c=a?a[l]:l;if(t(e[c],c,e))return!0}return!1},e.exports=t},2806:function(e,t,n){var r=n(6949),o=n(8971),i=n(2561),a=n(9350),s=n(1738);t=function(e,t,n){var l,c=(t=r(t,e)).pop();for(l=t.shift();!o(l);){if(s(l)||a(l)||(l=i(l)),"__proto__"===l||"constructor"===l||"prototype"===l)return;e[l]||(e[l]={}),e=e[l],l=t.shift()}e[c]=n},e.exports=t},2884:function(e,t,n){var r=n(6097);t=function(e){return r(e)&&e%1==0},e.exports=t},2901:function(e,t,n){"use strict";n.d(t,{A:function(){return i}});var r=n(816);function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(0,r.A)(o.key),o)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},2971:function(e,t,n){var r=n(6214);function o(e,t){for(var n,i=e.length,a=-1;i--;)n=e[++a],r(n)?o(n,t):t.push(n);return t}t=function(e){return o(e,[])},e.exports=t},2980:function(e,t,n){var r=n(4209).A;e.exports=r,e.exports.default=r},2989:function(e,t,n){var r=n(3974),o=n(1932),i=n(96),a=n(3159);t=function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return null===e&&(t="Null"),void 0===e&&(t="Undefined"),o(e)&&(t="NaN"),a(e)&&(t="Buffer"),t||(t=r(e).match(s))&&(t=t[1]),t?n?i(t):t:""};var s=/^\[object\s+(.*?)]$/;e.exports=t},2990:function(e,t){t={encode:function(e){var t,n,o=[],i=e.length,a=i%3;i-=a;for(var s=0;s<i;s+=3)o.push((t=(e[s]<<16)+(e[s+1]<<8)+e[s+2],r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]));return i=e.length,1===a?(n=e[i-1],o.push(r[n>>2]),o.push(r[n<<4&63]),o.push("==")):2===a&&(n=(e[i-2]<<8)+e[i-1],o.push(r[n>>10]),o.push(r[n>>4&63]),o.push(r[n<<2&63]),o.push("=")),o.join("")},decode:function(e){var t=e.length,r=0;"="===e[t-2]?r=2:"="===e[t-1]&&(r=1);var o,i,a,s,l,c,u,d=new Array(3*t/4-r);for(t=r>0?t-4:t,o=0,i=0;o<t;o+=4){var h=(a=e[o],s=e[o+1],l=e[o+2],c=e[o+3],n[a.charCodeAt(0)]<<18|n[s.charCodeAt(0)]<<12|n[l.charCodeAt(0)]<<6|n[c.charCodeAt(0)]);d[i++]=h>>16&255,d[i++]=h>>8&255,d[i++]=255&h}return 2===r?(u=n[e.charCodeAt(o)]<<2|n[e.charCodeAt(o+1)]>>4,d[i++]=255&u):1===r&&(u=n[e.charCodeAt(o)]<<10|n[e.charCodeAt(o+1)]<<4|n[e.charCodeAt(o+2)]>>2,d[i++]=u>>8&255,d[i++]=255&u),d}};for(var n=[],r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,i=r.length;o<i;o++)n[r.charCodeAt(o)]=o;e.exports=t},3019:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[["menuitem","command"],["rel","roletype"],["article","article"],["header","banner"],["input","button",[["type","checkbox"]]],["summary","button",[["aria-expanded","false"]]],["summary","button",[["aria-expanded","true"]]],["input","button",[["type","button"]]],["input","button",[["type","image"]]],["input","button",[["type","reset"]]],["input","button",[["type","submit"]]],["button","button"],["td","cell"],["input","checkbox",[["type","checkbox"]]],["th","columnheader"],["input","combobox",[["type","email"]]],["input","combobox",[["type","search"]]],["input","combobox",[["type","tel"]]],["input","combobox",[["type","text"]]],["input","combobox",[["type","url"]]],["input","combobox",[["type","url"]]],["select","combobox"],["select","combobox",[["size",1]]],["aside","complementary"],["footer","contentinfo"],["dd","definition"],["dialog","dialog"],["body","document"],["figure","figure"],["form","form"],["form","form"],["form","form"],["span","generic"],["div","generic"],["table","grid",[["role","grid"]]],["td","gridcell",[["role","gridcell"]]],["details","group"],["fieldset","group"],["optgroup","group"],["h1","heading"],["h2","heading"],["h3","heading"],["h4","heading"],["h5","heading"],["h6","heading"],["img","img"],["img","img"],["a","link"],["area","link"],["link","link"],["menu","list"],["ol","list"],["ul","list"],["select","listbox"],["select","listbox"],["select","listbox"],["datalist","listbox"],["li","listitem"],["main","main"],["math","math"],["menuitem","command"],["nav","navigation"],["option","option"],["progress","progressbar"],["input","radio",[["type","radio"]]],["section","region"],["section","region"],["frame","region"],["tr","row"],["tbody","rowgroup"],["tfoot","rowgroup"],["thead","rowgroup"],["th","rowheader",[["scope","row"]]],["input","searchbox",[["type","search"]]],["hr","separator"],["input","slider",[["type","range"]]],["input","spinbutton",[["type","number"]]],["output","status"],["table","table"],["dfn","term"],["input","textbox"],["input","textbox",[["type","email"]]],["input","textbox",[["type","tel"]]],["input","textbox",[["type","text"]]],["input","textbox",[["type","url"]]],["textarea","textbox"]]},3029:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{A:function(){return r}})},3048:function(e,t){t=function(e){var t=document.createElement("style");return t.textContent=e,t.type="text/css",document.head.appendChild(t),t},e.exports=t},3089:function(e,t,n){var r=n(3145);t=n(6307)(r),e.exports=t},3145:function(e,t,n){var r=n(365);t=Object.keys?Object.keys:function(e){var t=[];for(var n in e)r(e,n)&&t.push(n);return t},e.exports=t},3159:function(e,t,n){var r=n(3957);t=function(e){return null!=e&&(!!e._isBuffer||e.constructor&&r(e.constructor.isBuffer)&&e.constructor.isBuffer(e))},e.exports=t},3249:function(e,t,n){var r=n(7375),o=n(1738),i=n(5793),a=n(5119);t=function(e,t){return o(e)?e.indexOf(t)>-1:(i(e)||(e=a(e)),r(e,t)>=0)},e.exports=t},3270:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},o=/([astvzqmhlc])([^astvzqmhlc]*)/gi,i=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,a=function(e){var t=[],n=String(e).trim();return"M"!==n[0]&&"m"!==n[0]||n.replace(o,function(e,n,o){var a=n.toLowerCase(),s=function(e){var t=e.match(i);return t?t.map(Number):[]}(o),l=n;if("m"===a&&s.length>2&&(t.push([l].concat(s.splice(0,2))),a="l",l="m"===l?"l":"L"),s.length<r[a])return"";for(t.push([l].concat(s.splice(0,r[a])));s.length>=r[a]&&s.length&&r[a];)t.push([l].concat(s.splice(0,r[a])));return""}),t};function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=a;function d(e,t){var n=e.x*Math.cos(t)-e.y*Math.sin(t),r=e.y*Math.cos(t)+e.x*Math.sin(t);e.x=n,e.y=r}function h(e,t){e.x*=t,e.y*=t}var f=a,p=function(e){if(void 0!==e&&e.CanvasRenderingContext2D&&(!e.Path2D||!function(e){var t=e.document.createElement("canvas").getContext("2d"),n=new e.Path2D("M0 0 L1 1");return t.strokeStyle="red",t.lineWidth=1,t.stroke(n),255===t.getImageData(0,0,1,1).data[0]}(e))){var t=function(){function e(t){var n;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.segments=[],t&&t instanceof e?(n=this.segments).push.apply(n,l(t.segments)):t&&(this.segments=u(t))}var t,n;return t=e,(n=[{key:"addPath",value:function(t){var n;t&&t instanceof e&&(n=this.segments).push.apply(n,l(t.segments))}},{key:"moveTo",value:function(e,t){this.segments.push(["M",e,t])}},{key:"lineTo",value:function(e,t){this.segments.push(["L",e,t])}},{key:"arc",value:function(e,t,n,r,o,i){this.segments.push(["AC",e,t,n,r,o,!!i])}},{key:"arcTo",value:function(e,t,n,r,o){this.segments.push(["AT",e,t,n,r,o])}},{key:"ellipse",value:function(e,t,n,r,o,i,a,s){this.segments.push(["E",e,t,n,r,o,i,a,!!s])}},{key:"closePath",value:function(){this.segments.push(["Z"])}},{key:"bezierCurveTo",value:function(e,t,n,r,o,i){this.segments.push(["C",e,t,n,r,o,i])}},{key:"quadraticCurveTo",value:function(e,t,n,r){this.segments.push(["Q",e,t,n,r])}},{key:"rect",value:function(e,t,n,r){this.segments.push(["R",e,t,n,r])}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),n=e.CanvasRenderingContext2D.prototype.fill,r=e.CanvasRenderingContext2D.prototype.stroke;e.CanvasRenderingContext2D.prototype.fill=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o="nonzero";0===t.length||1===t.length&&"string"==typeof t[0]?n.apply(this,t):(2===arguments.length&&(o=t[1]),i(this,t[0].segments),n.call(this,o))},e.CanvasRenderingContext2D.prototype.stroke=function(e){e?(i(this,e.segments),r.call(this)):r.call(this)};var o=e.CanvasRenderingContext2D.prototype.isPointInPath;e.CanvasRenderingContext2D.prototype.isPointInPath=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("Path2D"===t[0].constructor.name){var r=t[1],a=t[2],s=t[3]||"nonzero";return i(this,t[0].segments),o.apply(this,[r,a,s])}return o.apply(this,t)},e.Path2D=t}function i(e,t){var n,r,o,i,a,s,l,c,u,f,p,m,g,v,y,b,x,w,_,k,A,S,N,C,j,E,T,I,P,O={x:0,y:0},M={x:0,y:0};e.beginPath();for(var L=0;L<t.length;++L){var R=t[L];switch("S"!==(k=R[0])&&"s"!==k&&"C"!==k&&"c"!==k&&(S=null,N=null),"T"!==k&&"t"!==k&&"Q"!==k&&"q"!==k&&(C=null,j=null),k){case"m":case"M":"m"===k?(p+=R[1],g+=R[2]):(p=R[1],g=R[2]),"M"!==k&&O||(O={x:p,y:g}),e.moveTo(p,g);break;case"l":p+=R[1],g+=R[2],e.lineTo(p,g);break;case"L":p=R[1],g=R[2],e.lineTo(p,g);break;case"H":p=R[1],e.lineTo(p,g);break;case"h":p+=R[1],e.lineTo(p,g);break;case"V":g=R[1],e.lineTo(p,g);break;case"v":g+=R[1],e.lineTo(p,g);break;case"a":case"A":"a"===k?(p+=R[6],g+=R[7]):(p=R[6],g=R[7]),b=R[1],x=R[2],l=R[3]*Math.PI/180,o=!!R[4],i=!!R[5],a={x:p,y:g},d(s={x:(M.x-a.x)/2,y:(M.y-a.y)/2},-l),(c=s.x*s.x/(b*b)+s.y*s.y/(x*x))>1&&(b*=c=Math.sqrt(c),x*=c),u=b*b*x*x,f=b*b*s.y*s.y+x*x*s.x*s.x,h(A={x:b*s.y/x,y:-x*s.x/b},i!==o?Math.sqrt((u-f)/f)||0:-Math.sqrt((u-f)/f)||0),r=Math.atan2((s.y-A.y)/x,(s.x-A.x)/b),n=Math.atan2(-(s.y+A.y)/x,-(s.x+A.x)/b),d(A,l),T=A,I=(a.x+M.x)/2,P=(a.y+M.y)/2,T.x+=I,T.y+=P,e.save(),e.translate(A.x,A.y),e.rotate(l),e.scale(b,x),e.arc(0,0,1,r,n,!i),e.restore();break;case"C":S=R[3],N=R[4],p=R[5],g=R[6],e.bezierCurveTo(R[1],R[2],S,N,p,g);break;case"c":e.bezierCurveTo(R[1]+p,R[2]+g,R[3]+p,R[4]+g,R[5]+p,R[6]+g),S=R[3]+p,N=R[4]+g,p+=R[5],g+=R[6];break;case"S":null!==S&&null!==N||(S=p,N=g),e.bezierCurveTo(2*p-S,2*g-N,R[1],R[2],R[3],R[4]),S=R[1],N=R[2],p=R[3],g=R[4];break;case"s":null!==S&&null!==N||(S=p,N=g),e.bezierCurveTo(2*p-S,2*g-N,R[1]+p,R[2]+g,R[3]+p,R[4]+g),S=R[1]+p,N=R[2]+g,p+=R[3],g+=R[4];break;case"Q":C=R[1],j=R[2],p=R[3],g=R[4],e.quadraticCurveTo(C,j,p,g);break;case"q":C=R[1]+p,j=R[2]+g,p+=R[3],g+=R[4],e.quadraticCurveTo(C,j,p,g);break;case"T":null!==C&&null!==j||(C=p,j=g),C=2*p-C,j=2*g-j,p=R[1],g=R[2],e.quadraticCurveTo(C,j,p,g);break;case"t":null!==C&&null!==j||(C=p,j=g),C=2*p-C,j=2*g-j,p+=R[1],g+=R[2],e.quadraticCurveTo(C,j,p,g);break;case"z":case"Z":p=O.x,g=O.y,O=void 0,e.closePath();break;case"AC":p=R[1],g=R[2],y=R[3],r=R[4],n=R[5],E=R[6],e.arc(p,g,y,r,n,E);break;case"AT":m=R[1],v=R[2],p=R[3],g=R[4],y=R[5],e.arcTo(m,v,p,g,y);break;case"E":p=R[1],g=R[2],b=R[3],x=R[4],l=R[5],r=R[6],n=R[7],E=R[8],e.save(),e.translate(p,g),e.rotate(l),e.scale(b,x),e.arc(0,0,1,r,n,E),e.restore();break;case"R":p=R[1],g=R[2],w=R[3],_=R[4],O={x:p,y:g},e.rect(p,g,w,_)}M.x=p,M.y=g}}};"undefined"!=typeof window&&p(window);var m={path2dPolyfill:p,parsePath:f}},3277:function(e,t,n){(t=n(6314)(!1)).push([e.id,'@font-face{font-family:luna-data-grid-icon;src:url(\'data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAScAAsAAAAAB4wAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAFwAAACGIRYl5k9TLzIAAAFkAAAAPQAAAFZLxUkYY21hcAAAAaQAAADLAAACXsU3J5xnbHlmAAACcAAAACUAAAAwNxN2HmhlYWQAAAKYAAAALgAAADZzjr4QaGhlYQAAAsgAAAAYAAAAJAFyANhobXR4AAAC4AAAABAAAAA8AZAAAGxvY2EAAALwAAAAEAAAACAAnACobWF4cAAAAwAAAAAfAAAAIAEaAA9uYW1lAAADIAAAASkAAAIWm5e+CnBvc3QAAARMAAAATQAAAG/8EX8xeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiA2A9NMDGwMMkAWF1CGFchmB4pxAnncDDxAOQ4kUV4GPqA6RgZmAE91Bj94nGNgZJBmnMDAysDAUMfQAyRloHQCAyeDMQMDEwMrMwNWEJDmmsJwgEH3IxPDCSBXCEwyMDCCCABbKQhrAAAAeJzNkksKwjAQhr+kvqpVxIUL8Qh6KFG3KtLidVx5Bq/VE+g/ySCIILhzhq+Qv8lkHgG6QCFWogPhRsDsKjUkvWCY9A611jOmUiJrNuw5cabh0sbHQ/9M23KQVksLSXu3oPPmcxbypRwGilxQ0qPSTRNl1GfMSHujDvQ+Yny3wY/7SXUX5eueaphSsAz+xar0vftqgnU6Y9VuHE1P3c/YRHdOKfaOVXlwLOrR0YQ1y4zFPzv2OmqnLxpnLC6O+tSGjL2YNmaITyYUHqgAeJxjYGQAgZUM0xmYGBjMlcVXNjtO9wCKoImbA8X9geIAqRwH2QAAAHicY2BkYGAA4hwJ4Yp4fpuvDNwMJ4ACUZyP9zUgaCBYyTAdSHIwMIE4ABioCdgAAHicY2BkYGA4wcAAJ1cyMDKgAn4AOLICS3icY2AAghNQTCIAAFMMAZF4nGNgAAIeBglcEAARPAFFeJxjYGRgYOBnYGYA0QwMTEDMBYQMDP/BfAYACkEBKgB4nGWQPW7CQBSEx2BIAlKCFCkps1UKIpmfkgNAT0GXwpi1MbK91npBossJcoQcIaeIcoIcKGPzaGAtP38zb97uygAG+IWHenm4bWq9WrihOnGb9CDsk5+FO+jjRbhLfyjcwxumwn084p07eP4dnQFK4Rbu8SHcpv8p7JO/hDt4wrdwl/6PcA8r/An38eoN08gUsSncUif7LLRnef6utK1SU6hJMD5bC11oGzq9Ueujqg7J1LlYxdbkas6uzjKjSmt2OnLB1rlyNhrF4geRyZEigkGBuKkOS2gk2CNDCHvVvdQrpi0q+rVWmCDA+Cq1YKpokiGVxobJNY6sFQ48bUrXMa34Ws7kpLnMat4kIyv+77q3oxPRD7BtpkrMMOITX+SD5g75Pz0RXqgAAAB4nF3GOQ6AIBQA0T+44YoX4VAEaNEYCNe3IDa+ZkaUNF//DIqOnoGRCc3MwsrGzoHhlMW7J2Ybrpp023LjcTxEMpbARSVRuEVebe8MtgAAAA==\') format(\'woff\')}[class*=\' luna-data-grid-icon-\'],[class^=luna-data-grid-icon-]{display:inline-block;font-family:luna-data-grid-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-data-grid-icon-caret-down:before{content:\'\\f101\'}.luna-data-grid-icon-caret-up:before{content:\'\\f102\'}.luna-data-grid{position:relative;border:1px solid;overflow:hidden;outline:0;color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));background-color:#fff;background-color:var(--luna-color-bg-container,#fff);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-family:var(--luna-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px}.luna-data-grid .luna-data-grid-hidden,.luna-data-grid.luna-data-grid-hidden{display:none}.luna-data-grid .luna-data-grid-invisible,.luna-data-grid.luna-data-grid-invisible{visibility:hidden}.luna-data-grid *{box-sizing:border-box}.luna-data-grid.luna-data-grid-theme-dark{color-scheme:dark;color:hsla(0,0%,100%,.85);color:var(--luna-color-text-dark,rgba(255,255,255,.85));background-color:#141414;background-color:var(--luna-color-bg-container-dark,#141414)}.luna-data-grid{font-size:12px}.luna-data-grid table{width:100%;min-height:100%;border-collapse:separate;border-spacing:0;table-layout:fixed}.luna-data-grid td,.luna-data-grid th{padding:1px 4px;border-left:1px solid;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.luna-data-grid td:first-child,.luna-data-grid th:first-child{border-left:none}.luna-data-grid th{font-weight:400;border-bottom:1px solid;text-align:left;position:relative}.luna-data-grid th.luna-data-grid-sortable{padding-right:12px}.luna-data-grid th .luna-data-grid-icon-caret-down,.luna-data-grid th .luna-data-grid-icon-caret-up{font-size:12px;position:absolute;display:none;top:6px;right:2px}.luna-data-grid td{height:20px;cursor:default;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-data-grid:focus .luna-data-grid-node.luna-data-grid-selectable.luna-data-grid-selected{color:#fff}.luna-data-grid-data-container,.luna-data-grid-header-container{overflow:hidden}.luna-data-grid-header-container{height:21px}.luna-data-grid-data-container{overflow-y:auto;position:relative}.luna-data-grid-data-space{min-height:100%}.luna-data-grid-data{position:absolute;left:0;top:0}.luna-data-grid-filler-row td{height:auto}.luna-data-grid-resizer{position:absolute;top:0;bottom:0;width:5px;z-index:500;touch-action:none;cursor:col-resize}.luna-data-grid-resizing{cursor:col-resize!important}.luna-data-grid-resizing .luna-data-grid *{cursor:col-resize!important}.luna-data-grid-theme-light{border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9)}.luna-data-grid-theme-light td,.luna-data-grid-theme-light th{border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9)}.luna-data-grid-theme-light th{background-color:rgba(0,0,0,.06);background-color:var(--luna-color-fill-secondary,rgba(0,0,0,.06))}.luna-data-grid-theme-light th.luna-data-grid-sortable:hover{background-color:rgba(0,0,0,.15);background-color:var(--luna-color-fill,rgba(0,0,0,.15))}.luna-data-grid-theme-light .luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selectable:hover,.luna-data-grid-theme-light .luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selected{background-color:#ddd}.luna-data-grid-theme-light .luna-data-grid-data-container tr:nth-child(even){background-color:#f2f7fd}.luna-data-grid-theme-light:focus .luna-data-grid-node.luna-data-grid-selectable.luna-data-grid-selected{background-color:#1a73e8;background-color:var(--luna-color-primary,#1a73e8)}.luna-data-grid-theme-dark{border-color:#424242;border-color:var(--luna-color-border,#424242)}.luna-data-grid-theme-dark td,.luna-data-grid-theme-dark th{border-color:#424242;border-color:var(--luna-color-border,#424242)}.luna-data-grid-theme-dark th{background-color:hsla(0,0%,100%,.12);background-color:var(--luna-color-fill-secondary,rgba(255,255,255,.12))}.luna-data-grid-theme-dark th.luna-data-grid-sortable:hover{background-color:hsla(0,0%,100%,.18);background-color:var(--luna-color-fill,rgba(255,255,255,.18))}.luna-data-grid-theme-dark .luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selectable:hover,.luna-data-grid-theme-dark .luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selected{background-color:#393939}.luna-data-grid-theme-dark .luna-data-grid-data-container tr:nth-child(even){background-color:#0b2544}.luna-data-grid-theme-dark:focus .luna-data-grid-node.luna-data-grid-selectable.luna-data-grid-selected{background-color:#1965c8;background-color:var(--luna-color-primary,#1965c8)}',""]),e.exports=t},3290:function(e,t,n){var r=n(975);t=function(e){var t,n=window.location,o=n.hostname,i=n.pathname,a=o.split("."),s=i.split("/"),l="",c=s.length;if(!p())for(var u=a.length-1;u>=0;u--){var d=a[u];if(""!==d){if(p({domain:l=""===l?d:d+"."+l,path:t="/"})||p({domain:l}))return;for(var h=0;h<c;h++){var f=s[h];if(""!==f){if(p({domain:l,path:t+=f})||p({path:t}))return;if(p({domain:l,path:t+="/"})||p({path:t}))return}}}}function p(t){return t=t||{},r.remove(e,t),!r.get(e)}},e.exports=t},3411:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FetchRequest=t.XhrRequest=void 0,t.fullUrl=A;var a=i(n(2263)),s=i(n(1738)),l=i(n(3497)),c=i(n(6032)),u=i(n(9464)),d=i(n(9405)),h=i(n(3981)),f=i(n(9100)),p=i(n(1009)),m=i(n(6030)),g=n(916),v=function(e){function t(t,n,r){var o=e.call(this)||this;return o.xhr=t,o.reqHeaders={},o.method=n,o.url=A(r),o.id=(0,g.createId)(),t.addEventListener("readystatechange",function(){2===t.readyState?o.handleHeadersReceived():4===t.readyState&&(0===t.status?o.handleError():o.handleDone())}),o}return o(t,e),t.prototype.toJSON=function(){return{method:this.method,url:this.url,id:this.id}},t.prototype.handleSend=function(e){(0,s.default)(e)||(e=""),e={name:S(this.url),url:this.url,data:e,time:(0,h.default)(),reqHeaders:this.reqHeaders,method:this.method},(0,u.default)(this.reqHeaders)||(e.reqHeaders=this.reqHeaders),this.emit("send",this.id,e)},t.prototype.handleReqHeadersSet=function(e,t){e&&t&&(this.reqHeaders[e]=t)},t.prototype.handleHeadersReceived=function(){var e=this.xhr,t=N(e.getResponseHeader("Content-Type")||"");this.emit("headersReceived",this.id,{type:t.type,subType:t.subType,size:_(e,!0,this.url),time:(0,h.default)(),resHeaders:w(e)})},t.prototype.handleDone=function(){var e,t,n,r=this,o=this.xhr,i=o.responseType,a="",s=function(){r.emit("done",r.id,{status:o.status,size:_(o,!1,r.url),time:(0,h.default)(),resTxt:a})},l=N(o.getResponseHeader("Content-Type")||"");"blob"!==i||"text"!==l.type&&"javascript"!==l.subType&&"json"!==l.subType?(""!==i&&"text"!==i||(a=o.responseText),"json"===i&&(a=JSON.stringify(o.response)),s()):(e=o.response,t=function(e,t){t&&(a=t),s()},(n=new FileReader).onload=function(){t(0,n.result)},n.onerror=function(e){t()},n.readAsText(e))},t.prototype.handleError=function(){this.emit("error",this.id,{errorText:"Network error",time:(0,h.default)()})},t}(a.default);t.XhrRequest=v;var y=function(e){function t(t,n){void 0===n&&(n={});var r=e.call(this)||this,o=t instanceof window.Request,i=o?t.url:t;return r.url=A(i),r.id=(0,g.createId)(),r.options=n,r.reqHeaders=n.headers||(o?t.headers:{}),r.method=n.method||(o?t.method:"GET"),r}return o(t,e),t.prototype.send=function(e){var t=this,n=this.options,r=(0,s.default)(n.body)?n.body:"";this.emit("send",this.id,{name:S(this.url),url:this.url,data:r,reqHeaders:this.reqHeaders,time:(0,h.default)(),method:this.method}),e.then(function(e){var n=N((e=e.clone()).headers.get("Content-Type"));return e.text().then(function(r){var o={type:n.type,subType:n.subType,time:(0,h.default)(),size:b(e,r),resTxt:r,resHeaders:x(e),status:e.status};(0,u.default)(t.reqHeaders)||(o.reqHeaders=t.reqHeaders),t.emit("done",t.id,o)}),e}).catch(function(e){t.emit("error",t.id,{errorText:e.message,time:(0,h.default)()})})},t}(a.default);function b(e,t){var n=e.headers.get("Content-length");return n?(0,m.default)(n):j(t)}function x(e){var t={};return e.headers.forEach(function(e,n){return t[n]=e}),t}function w(e){var t=e.getAllResponseHeaders().split("\n"),n={};return(0,f.default)(t,function(e){if(""!==(e=(0,d.default)(e))){var t=e.split(":",2),r=t[0],o=t[1];n[r]=(0,d.default)(o)}}),n}function _(e,t,n){var r=0;function o(){if(!t){var n=e.responseType,o="";""!==n&&"text"!==n||(o=e.responseText),o&&(r=j(o))}}if(function(e){return!(0,p.default)(e,C)}(n))o();else try{r=(0,m.default)(e.getResponseHeader("Content-Length"))}catch(e){o()}return 0===r&&o(),r}t.FetchRequest=y;var k=document.createElement("a");function A(e){return k.href=e,k.protocol+"//"+k.host+k.pathname+k.search+k.hash}function S(e){var t=(0,l.default)(e.split("/"));return t.indexOf("?")>-1&&(t=(0,d.default)(t.split("?")[0])),""===t&&(t=new c.default(e).hostname),t}function N(e){if(!e)return{type:"unknown",subType:"unknown"};var t=e.split(";")[0].split("/");return{type:t[0],subType:(0,l.default)(t)}}var C=window.location.origin;function j(e){var t=encodeURIComponent(e).match(/%[89ABab]/g);return e.length+(t?t.length:0)}},3422:function(e,t){t=function(e){return null==e},e.exports=t},3497:function(e,t){t=function(e){var t=e?e.length:0;if(t)return e[t-1]},e.exports=t},3539:function(e,t){t=function(){for(var e=arguments,t=e[0],n=1,r=e.length;n<r;n++)e[n]>t&&(t=e[n]);return t},e.exports=t},3578:function(e,t,n){"use strict";n.d(t,{A:function(){return rn}});var r=n(7528),o=n(7800);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||(0,o.A)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var a=n(3029),s=n(2901),l=n(388),c=n(3954),u=n(991),d=n(5361),h=n(5902),f=n.n(h),p=n(2561),m=n.n(p),g=n(3249),v=n.n(g),y=n(1009),b=n.n(y),x=n(4950),w=n.n(x),_=n(9100),k=n.n(_),A=n(1580),S=n.n(A),N=n(9464),C=n.n(N),j=n(15),E=n.n(j),T=n(9931),I=n.n(T);function P(e){return e.constructor&&e.constructor.name?e.constructor.name:I()({}.toString.call(e).replace(/(\[object )|]/g,""))}var O=n(3915),M=n.n(O),L=n(9405),R=n.n(L),D=n(5169),F=n.n(D),z=n(9548),B=n.n(z),U=n(6097),q=n.n(U),V=n(6030),H=n.n(V),G=n(5004),K=n.n(G),W=(n(9410),n(8609)),Q=n.n(W);function Z(e){var t="luna-".concat(e,"-");function n(e){return M()(R()(e).split(/\s+/),function(e){return v()(e,t)?e:e.replace(/[\w-]+/,function(e){return"".concat(t).concat(e)})}).join(" ")}return function(e){if(/<[^>]*>/g.test(e))try{var t=B().parse(e);return Y(t,function(e){e.attrs&&e.attrs.class&&(e.attrs.class=n(e.attrs.class))}),B().stringify(t)}catch(t){return n(e)}return n(e)}}function Y(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];t(o),o.content&&Y(o.content,t)}}function J(e){var t=window.getSelection();if(!t||"Range"!==t.type||""===t.toString())return!1;var n=t.anchorNode,r=t.focusNode;return t.containsNode(e,!0)||n&&e.contains(n)||r&&e.contains(r)}F();var $=Z("console");function X(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.topObj,o=n.level,i=void 0===o?0:o,a=n.getterVal,s=void 0!==a&&a,l=n.unenumerable,c=void 0===l||l,u="",d="",h=[],p=[],g="";r=r||e;var y={getterVal:s,unenumerable:c,level:i+1},x=0===i,w='<span class="'.concat($("key"),'">'),_='<span class="'.concat($("number"),'">'),A='<span class="'.concat($("null"),'">'),N='<span class="'.concat($("string"),'">'),C='<span class="'.concat($("boolean"),'">'),j='<span class="'.concat($("special"),'">'),T=function(e){return f()(e).replace(/\\n/g,"\u21b5").replace(/\\f|\\r|\\t/g,"").replace(/\\/g,"")},I="</span>";function O(e){return e=m()(e),v()(ee,e)||b()(e,"Array[")?j+T(e)+I:(e.length>100&&(e=E()(e,100,{separator:" ",ellipsis:"\u2026"})),N+T('"'.concat(e,'"'))+I)}function M(n){if(t>5)g=", \u2026";else{var o=function(e){return w+T(e)+I}(ne(n));if(!s){var i=Object.getOwnPropertyDescriptor(e,n);if(i&&i.get)return h.push("".concat(o,": ").concat(O("(...)"))),void t++}h.push("".concat(o,": ").concat(X(r[n],y))),t++}}try{d={}.toString.call(e)}catch(e){d="[object Object]"}var L,R="[object Array]"==d,D="[object Object]"==d,F="[object Number]"==d,z="[object RegExp]"==d,B="[object Symbol]"==d,U="[object Function]"==d,q="[object Boolean]"==d;if("[object String]"==d)u=O(ne(e));else if(z)L=ne(e.toString()),u=N+L+I;else if(U)u=O("\u0192");else if(R)if(x){u="[";var V=e.length,H="";V>100&&(V=100,H=", \u2026");for(var G=0;G<V;G++)h.push("".concat(X(e[G],y)));u+=h.join(", ")+H+"]"}else u="Array(".concat(e.length,")");else if(D)te(e)&&(e=Object.getPrototypeOf(e)),p=c?Object.getOwnPropertyNames(e):Object.keys(e),x?(t=1,u="{",k()(p,M),u+=h.join(", ")+g+"}"):"Object"===(u=P(e))&&(u="{\u2026}");else if(F)u=e+"",u=S()(u,"Infinity")||"NaN"===u?'"'.concat(u,'"'):_+u+I;else if(q)u=C+(e?"true":"false")+I;else if(null===e)u=A+"null"+I;else if(B)u=O("Symbol");else if(void 0===e)u=O("undefined");else try{te(e)&&(e=Object.getPrototypeOf(e)),x?(t=1,u="{",p=c?Object.getOwnPropertyNames(e):Object.keys(e),k()(p,M),u+=h.join(", ")+g+"}"):"Object"===(u=P(e))&&(u="{\u2026}")}catch(t){u=O(e)}return u}var ee=["(...)","undefined","Symbol","Object","\u0192"];function te(e){var t=C()(Object.getOwnPropertyNames(e)),n=Object.getPrototypeOf(e);return t&&n&&n!==Object.prototype}function ne(e){return w()(e).replace(/\\'/g,"'").replace(/\t/g,"\\t")}var re,oe=n(6911),ie=n(2388),ae=n(5784),se=n(4095),le=n.n(se),ce=n(9760),ue=n.n(ce),de=n(1738),he=n.n(de),fe=n(2650),pe=n.n(fe),me=n(7696),ge=n.n(me),ve=n(5651),ye=n.n(ve),be=n(2708),xe=n.n(be),we=n(6631),_e=n.n(we),ke=n(4069),Ae=n.n(ke),Se=n(4236),Ne=n.n(Se),Ce=n(8971),je=n.n(Ce),Ee=n(3957),Te=n.n(Ee),Ie=n(769),Pe=n.n(Ie),Oe=n(6214),Me=n.n(Oe),Le=n(438),Re=n.n(Le),De=n(8420),Fe=n.n(De),ze=n(96),Be=n.n(ze),Ue=n(3145),qe=n.n(Ue),Ve=n(3693),He=n.n(Ve),Ge=n(5241),Ke=n.n(Ge),We=n(2263),Qe=n.n(We),Ze=n(4534),Ye=n.n(Ze),Je=n(8032),$e=n.n(Je),Xe=n(4844),et=n.n(Xe),tt=n(4801),nt=n.n(tt),rt=n(9041),ot=n.n(rt),it=n(8091),at=n.n(it),st=n(4249),lt=n.n(st),ct=n(2797),ut=n.n(ct),dt=n(5773),ht=n.n(dt),ft=n(4433),pt=n.n(ft),mt=n(5630),gt=n.n(mt),vt=n(6493),yt=n.n(vt),bt=n(9350),xt=n.n(bt),wt=n(1976),_t=n.n(wt);function kt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(kt=function(){return!!e})()}var At=/https?:\/\/([0-9.\-A-Za-z]+)(?::(\d+))?\/[A-Z.a-z0-9/]*\.js/g,St={comment:"",string:"",number:"",keyword:"",operator:""},Nt=function(e){function t(e,n){var r,o,i,s,u=n.type,d=void 0===u?"log":u,h=n.args,f=void 0===h?[]:h,p=n.id,m=n.group,g=n.targetGroup,v=n.header,y=n.ignoreFilter,b=void 0!==y&&y,x=n.accessGetter,w=n.unenumerable,_=n.lazyEvaluation;(0,a.A)(this,t),o=this,i=t,i=(0,c.A)(i),(r=(0,l.A)(o,kt()?Reflect.construct(i,[],(0,c.A)(o).constructor):i.apply(o,s))).container=Ke()("div"),r.count=1,r.width=0,r.height=0,r.isHidden=!1,r.columns=[],r.elements={},r.objects={},r.console=e,r.type=d,r.group=m,r.targetGroup=g,r.args=f,r.id=p,r.header=v,r.ignoreFilter=b,r.collapsed=!1,r.container.log=r,r.height=0,r.width=0,r.$container=He()(r.container),r.accessGetter=x,r.unenumerable=w,r.lazyEvaluation=_;var k="info";switch(d){case"debug":k="verbose";break;case"error":k="error";break;case"warn":k="warning"}return r.level=k,r.resizeSensor=new(le())(r.container),r.onResize=Ye()(function(){Q()(r.container)?r.isHidden=!0:(r.isHidden||r.updateSize(!1),r.isHidden=!1)},16),r.formatMsg(),r.group&&r.checkGroup(),r.bindEvent(),r}return(0,d.A)(t,e),(0,s.A)(t,[{key:"checkGroup",value:function(){for(var e=this.group,t=!1;e;){if(e.collapsed){t=!0;break}e=e.parent}return t!==this.collapsed&&(this.collapsed=t,!0)}},{key:"updateIcon",value:function(e){var t=this.console.c;return this.$container.find(t(".icon-container")).find(t(".icon")).rmAttr("class").addClass([t("icon"),t("icon-".concat(e))]),this}},{key:"addCount",value:function(){this.count++;var e=this.$container,t=this.count,n=this.console.c,r=e.find(n(".count-container")),o=e.find(n(".icon-container")),i=r.find(n(".count"));return 2===t&&r.rmClass(n("hidden")),i.text(m()(t)),o.addClass(n("hidden")),this}},{key:"groupEnd",value:function(){var e=this.$container,t=this.console.c;return e.find(".".concat(t("nesting-level"),":not(.").concat(t("group-closed"),")")).last().addClass(t("group-closed")),this}},{key:"updateTime",value:function(e){var t=this.$container.find(this.console.c(".time-container"));return this.header&&(t.find("span").eq(0).text(e),this.header.time=e),this}},{key:"isAttached",value:function(){return!!this.container.parentNode}},{key:"isSimple",value:function(){return!ut()(this.args,function(e){return ue()(e)})}},{key:"updateSize",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.container.getBoundingClientRect(),n=t.width,r=t.height-1;this.height!==r&&(this.height=r,e||this.emit("updateHeight")),this.width!==n&&(this.width=n)}},{key:"html",value:function(){return this.container.outerHTML}},{key:"text",value:function(){return this.content.textContent||""}},{key:"select",value:function(){this.$container.addClass(this.console.c("selected"))}},{key:"deselect",value:function(){this.$container.rmClass(this.console.c("selected"))}},{key:"copy",value:function(){var e=this.args,t="";k()(e,function(e,n){0!==n&&(t+=" "),ue()(e)?t+=$e()(e):t+=m()(e)}),et()(t)}},{key:"bindEvent",value:function(){var e=this,t=this.console.c,n=this;this.resizeSensor.addListener(this.onResize),this.$container.on("click",t(".dom-viewer"),function(e){return e.stopPropagation()}).on("click",t(".preview"),function(e){if(e.stopPropagation(),!J(this)){var r=He()(this).find(t(".preview-icon-container")).find(t(".icon")),o="caret-down";r.hasClass(t("icon-caret-down"))&&(o="caret-right"),r.rmAttr("class").addClass([t("icon"),t("icon-".concat(o))]),n.renderObjectViewer(this)}}).on("click",function(){return e.click()})}},{key:"renderEl",value:function(){var e=this.elements,t=this.console.c,n=this;this.$container.find(t(".dom-viewer")).each(function(){var t=He()(this).data("id");new ae.A(this,{node:e[t],theme:n.console.getOption("theme")})})}},{key:"renderObjectViewer",value:function(e){var t=this.console,n=this.unenumerable,r=this.accessGetter,o=this.lazyEvaluation,i=t.c,a=He()(e),s=a.data("id");if(s){var l=this.objects[s],c=a.find(i(".json"));if(c.hasClass(i("hidden"))){if("true"!==c.data("init")){if(o){var u=new oe.A(c.get(0),{unenumerable:n,accessGetter:r});u.setOption("theme",t.getOption("theme")),u.set(l)}else{var d=new oe.j(c.get(0));d.setOption("theme",t.getOption("theme")),d.set(l)}c.data("init","true")}c.rmClass(i("hidden"))}else c.addClass(i("hidden"))}}},{key:"renderTable",value:function(e){var t=this,n="__LunaConsoleValue",r=this.columns,o=this.$container,i=this.console,a=i.c,s=o.find(a(".data-grid")),l=e[0],c=new ie.A(s.get(0),{columns:Ae()([{id:"(index)",title:"(index)",sortable:!0}],M()(r,function(e){return{id:e,title:e===n?"Value":e,sortable:!0}})),theme:i.getOption("theme")});k()(l,function(e,o){var i={"(index)":m()(o)};r.forEach(function(r){ue()(e)?i[r]=r===n?"":t.formatTableVal(e[r]):ge()(e)&&(i[r]=r===n?t.formatTableVal(e):"")}),c.append(i)})}},{key:"extractObj",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=this.accessGetter,o=this.unenumerable;ye()(t,{accessGetter:r,unenumerable:o,symbol:o,timeout:1e3}),function(e,t,n){var r=nt()(e,t);ot()(function(){return n(r)})}(e,t,function(e){return n(JSON.parse(e))})}},{key:"click",value:function(){var e=this.type,t=this.$container,n=this.console,r=n.c;switch(e){case"log":case"warn":case"info":case"debug":case"output":case"table":case"dir":break;case"group":case"groupCollapsed":J(this.container)||n.toggleGroup(this);break;case"error":J(this.container)||t.find(r(".stack")).toggleClass(r("hidden"))}}},{key:"formatMsg",value:function(){var e=this.args,t=this.type,n=this.id,r=this.header,o=this.group,i=this.console.c;e=Fe()(e);var a,s,l="";switch("group"!==t&&"groupCollapsed"!==t||0===e.length&&(e=["console.group"]),t){case"log":case"info":case"debug":l=this.formatCommon(e);break;case"dir":l=this.formatDir(e);break;case"warn":a="warn",l=this.formatCommon(e);break;case"error":he()(e[0])&&1!==e.length&&(e=this.substituteStr(e)),s=e[0],a="error",s=pe()(s)?s:new Error(this.formatCommon(e)),l=this.formatErr(s);break;case"table":l=this.formatTable(e);break;case"html":l=e[0];break;case"input":l=this.formatJs(e[0]),a="input";break;case"output":l=this.formatCommon(e),a="output";break;case"groupCollapsed":l=this.formatCommon(e),a="caret-right";break;case"group":l=this.formatCommon(e),a="caret-down"}v()(["log","debug","warn"],t)&&this.isSimple()&&(l=at()(l,function(e){return'<a href="'.concat(e,'" target="_blank">').concat(e,"</a>")})),l=this.render({msg:l,type:t,icon:a,id:n,header:r,group:o}),this.$container.addClass("".concat(i("log-container"))).html(l),"table"===t&&(C()(this.columns)||this.renderTable(e)),C()(this.elements)||this.renderEl(),this.$content=this.$container.find(i(".log-content")),this.content=this.$content.get(0)}},{key:"render",value:function(e){var t=this.console.c,n="",o="";if(e.group)for(var i=e.group.indentLevel,a=0;a<i;a++)o+='<div class="'.concat(t("nesting-level"),'"></div>');e.header&&(n+=ht()(re||(re=(0,r.A)(['\n      <div class="','">\n        ','\n        <div class="','">\n          <span>',"</span> <span>","</span>\n        </div>\n      </div>"])),t("header"),o,t("time-from-container"),e.header.time,e.header.from));var s="";return e.icon&&(s='<div class="'.concat(t("icon-container"),'"><span class="').concat(t("icon icon-"+e.icon),'"></span></div>')),n+'\n    <div class="'.concat(t(e.type+" log-item"),'">\n      ').concat(o,"\n      ").concat(s,'\n      <div class="').concat(t("count-container hidden"),'">\n        <div class="').concat(t("count"),'"></div>\n      </div>    \n      <div class="').concat(t("log-content-wrapper"),'">\n        <div class="').concat(t("log-content"),'">').concat(e.msg,"</div>\n      </div>\n    </div>")}},{key:"formatTable",value:function(e){var t=e[0],n=e[1],r=[];return he()(n)&&(n=Pe()(n)),Me()(n)||(n=null),ue()(t)?(k()(t,function(e){ge()(e)?r.push("__LunaConsoleValue"):ue()(e)&&(r=r.concat(qe()(e)))}),(r=Re()(r)).sort(),n&&(r=r.filter(function(e){return v()(n,e)})),r.length>20&&(r=r.slice(0,20)),C()(r)?this.formatCommon(e):(this.columns=r,this.console.c('<div class="data-grid"></div>')+this.formatPreview(t))):this.formatCommon(e)}},{key:"formatErr",value:function(e){var t=e.stack?e.stack.split("\n"):[],n=e.name?"".concat(e.name,": "):"";return n+="".concat(e.message||t[0],"<br/>"),t=t.map(function(e){return f()(e)}),n+'<div class="'.concat(this.console.c("stack hidden"),'">').concat(t.slice(1).join("<br/>"),"</div>").replace(At,function(e){return'<a href="'.concat(e,'" target="_blank">').concat(e,"</a>")})}},{key:"formatCommon",value:function(e){var t=this.console.c,n=he()(e[0])&&1!==e.length;n&&(e=this.substituteStr(e));for(var r=0,o=e.length;r<o;r++){var i=e[r];xe()(i)?e[r]=this.formatEl(i):Te()(i)?e[r]=this.formatFn(i):_t()(i)?e[r]='<span class="'.concat(t("regexp"),'">').concat(f()(m()(i)),"</span>"):ue()(i)?e[r]=this.formatPreview(i):je()(i)?e[r]='<span class="'.concat(t("undefined"),'">undefined</span>'):Ne()(i)?e[r]='<span class="'.concat(t("null"),'">null</span>'):q()(i)?e[r]='<span class="'.concat(t("number"),'">').concat(m()(i),"</span>"):"bigint"==typeof i?e[r]='<span class="'.concat(t("number"),'">').concat(m()(i),"n</span>"):yt()(i)?e[r]='<span class="'.concat(t("boolean"),'">').concat(m()(i),"</span>"):xt()(i)?e[r]='<span class="'.concat(t("symbol"),'">').concat(f()(m()(i)),"</span>"):(i=m()(i),0===r&&n||(i=f()(i)),i.length>5e3&&(i=E()(i,5e3,{separator:" ",ellipsis:"\u2026"})),e[r]=i)}return e.join(" ")}},{key:"formatDir",value:function(e){return ue()(e[0])?this.formatPreview(e[0]):this.formatCommon(e)}},{key:"formatTableVal",value:function(e){var t=this.console.c;return ue()(e)?"{\u2026}":ge()(e)?pt()('<div class="'.concat(t("preview"),'">').concat(X(e),"</div>")):m()(e)}},{key:"formatPreview",value:function(e){var t=this,n=this.console.c,r=gt()();this.lazyEvaluation?this.objects[r]=e:this.extractObj(e,{},function(e){t.objects[r]=e});var o=v()(["dir","table"],this.type),i=P(e);return"Array"===i&&e.length>1?(i="(".concat(e.length,")"),o&&(i="Array".concat(i))):"RegExp"===i?i=m()(e):xe()(e)&&(i=this.formatElName(e)),'<div class="'.concat(n("preview"),'" data-id="').concat(r,'">')+'<div class="'.concat(n("preview-container"),'">')+'<div class="'.concat(n("preview-icon-container"),'"><span class="').concat(n("icon icon-caret-right"),'"></span></div>')+'<span class="'.concat(n("preview-content-container"),'">')+'<span class="'.concat(n("descriptor"),'">').concat(f()(i),"</span> ")+'<span class="'.concat(n("object-preview"),'">').concat(o?"":X(e,{getterVal:this.accessGetter,unenumerable:!1}),"</span>")+"</span></div>"+'<div class="'.concat(n("json hidden"),'"></div></div>')}},{key:"substituteStr",value:function(e){var t=f()(e[0]),n=!1,r="";e.shift();for(var o=0,i=t.length;o<i;o++){var a=t[o];if("%"===a&&0!==e.length){o++;var s=e.shift();switch(t[o]){case"i":case"d":r+=_e()(s);break;case"f":r+=H()(s);break;case"s":r+=m()(s);break;case"O":ue()(s)?r+=this.formatPreview(s):r+=m()(s);break;case"o":xe()(s)?r+=this.formatEl(s):ue()(s)?r+=this.formatPreview(s):r+=m()(s);break;case"c":if(t.length<=o+1)break;n&&(r+="</span>"),n=!0,r+='<span style="'.concat(Ct(s),'">');break;default:o--,e.unshift(s),r+=a}}else r+=a}return n&&(r+="</span>"),e.unshift(r),e}},{key:"formatJs",value:function(e){var t=lt()(e,"js",St);return t!==e&&(t=this.console.c(t)),'<pre class="'.concat(this.console.c("code"),'">').concat(t,"</pre>")}},{key:"formatFn",value:function(e){return'<pre style="display:inline">'.concat(this.formatJs(e.toString()),"</pre>")}},{key:"formatElName",value:function(e){var t=e.id,n=e.className,r=e.tagName.toLowerCase();if(""!==t&&(r+="#".concat(t)),he()(n)){var o="";k()(n.split(/\s+/g),function(e){""!==e.trim()&&(o+=".".concat(e))}),r+=o}return r}},{key:"formatEl",value:function(e){var t=gt()();return this.elements[t]=e,this.console.c('<div class="dom-viewer" data-id="'.concat(t,'"></div>'))}}])}(Qe());function Ct(e){var t=(e=Be()(e)).split(";"),n={};k()(t,function(e){if(v()(e,":")){var t=i(e.split(":"),2),r=t[0],o=t[1];n[R()(r)]=R()(o)}}),n.display="inline-block",n["max-width"]="100%",delete n.width,delete n.height;var r="";return k()(n,function(e,t){r+="".concat(t,":").concat(e,";")}),r}var jt=n(5820),Et=n.n(jt),Tt=n(3981),It=n.n(Tt),Pt=n(8105),Ot=n.n(Pt),Mt=n(7005),Lt=n.n(Mt),Rt=n(3497),Dt=n.n(Rt),Ft=n(5865),zt=n.n(Ft),Bt=n(8862),Ut=n.n(Bt),qt=n(7030),Vt=n.n(qt),Ht=n(961),Gt=n.n(Ht),Kt=n(7e3),Wt=n.n(Kt);function Qt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Qt=function(){return!!e})()}var Zt,Yt=function(e){function t(e,n){var r,o,i=n.compName,s=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).theme,u=void 0===s?"light":s;return(0,a.A)(this,t),r=function(e,t,n){return t=(0,c.A)(t),(0,l.A)(e,Qt()?Reflect.construct(t,[],(0,c.A)(e).constructor):t.apply(e,n))}(this,t),r.subComponents=[],r.theme="",r.onThemeChange=function(e){"auto"===r.options.theme&&r.setTheme(e)},r.compName=i,r.c=Z(i),r.options={},r.container=e,r.$container=He()(e),r.$container.addClass(["luna-".concat(i),r.c("platform-".concat((o=K()(),"os x"===o?"mac":o)))]),r.on("changeOption",function(e,t){if("theme"===e&&t){var n=t;"auto"===t&&(n=Wt().get()),r.setTheme(n),k()(r.subComponents,function(e){return e.setOption("theme",t)})}}),Wt().on("change",r.onThemeChange),r.setOption("theme",u),r}return(0,d.A)(t,e),(0,s.A)(t,[{key:"destroy",value:function(){var e=this;this.destroySubComponents();var t=this.$container,n=t.attr("class");k()(n.split(/\s+/),function(n){b()(n,"luna-".concat(e.compName))&&t.rmClass(n)}),t.html(""),this.emit("destroy"),this.removeAllListeners(),Wt().off("change",this.onThemeChange)}},{key:"setOption",value:function(e,t){var n=this,r=this.options,o={};"string"==typeof e?o[e]=t:o=e,k()(o,function(e,t){var o=r[t];r[t]=e,e!==o&&n.emit("changeOption",t,e,o)})}},{key:"getOption",value:function(e){return this.options[e]}},{key:"addSubComponent",value:function(e){e.setOption("theme",this.options.theme),this.subComponents.push(e)}},{key:"removeSubComponent",value:function(e){Gt()(this.subComponents,function(t){return t===e})}},{key:"destroySubComponents",value:function(){k()(this.subComponents,function(e){return e.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ye()(e,t),Ot()(this.options,e)}},{key:"find",value:function(e){return this.$container.find(this.c(e))}},{key:"setTheme",value:function(e){var t=this.c,n=this.$container;this.theme&&n.rmClass(t("theme-".concat(this.theme))),n.addClass(t("theme-".concat(e))),this.theme=e}}])}(Qe()),Jt=n(2228),$t=n.n(Jt);function Xt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Xt=function(){return!!e})()}e=n.hmd(e);var en=navigator.userAgent,tn=en.indexOf("Android")>-1||en.indexOf("Adr")>-1,nn=0,rn=function(e){function t(e){var n,r,o,i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.A)(this,t),r=this,o=t,i=[e,{compName:"console"},s],o=(0,c.A)(o),(n=(0,l.A)(r,Xt()?Reflect.construct(o,i||[],(0,c.A)(r).constructor):o.apply(r,i))).spaceHeight=0,n.topSpaceHeight=0,n.bottomSpaceHeight=0,n.lastScrollTop=0,n.lastTimestamp=0,n.speedToleranceFactor=100,n.maxSpeedTolerance=2e3,n.minSpeedTolerance=100,n.logs=[],n.displayLogs=[],n.timer={},n.counter={},n.asyncList=[],n.asyncTimer=null,n.isAtBottom=!0,n.groupStack=new(Lt()),n.selectedLog=null,n.onScroll=function(){var e=n.container,t=e.scrollHeight,r=e.offsetHeight,o=e.scrollTop;if(!(o<=0||r+o>t)){var i=!1;(t===r||Math.abs(t-r-o)<1)&&(i=!0),n.isAtBottom=i;var a=n.lastScrollTop,s=n.lastTimestamp,l=It()(),c=l-s,u=o-a,d=Math.abs(u/c)*n.speedToleranceFactor;c>1e3&&(d=1e3),d>n.maxSpeedTolerance&&(d=n.maxSpeedTolerance),d<n.minSpeedTolerance&&(d=n.minSpeedTolerance),n.lastScrollTop=o,n.lastTimestamp=l;var h=0,f=0;a<o?(h=n.minSpeedTolerance,f=d):(h=d,f=n.minSpeedTolerance),n.topSpaceHeight<o-h&&n.topSpaceHeight+n.el.offsetHeight>o+r+f||n.renderViewport({topTolerance:2*h,bottomTolerance:2*f})}},n.initTpl(),n.initOptions(s,{maxNum:0,asyncRender:!0,showHeader:!1,filter:"",level:["verbose","info","warning","error"],accessGetter:!1,unenumerable:!0,lazyEvaluation:!0}),n.$el=n.find(".logs"),n.el=n.$el.get(0),n.$fakeEl=n.find(".fake-logs"),n.fakeEl=n.$fakeEl.get(0),n.$space=n.find(".logs-space"),n.space=n.$space.get(0),tn&&(n.speedToleranceFactor=800,n.maxSpeedTolerance=3e3,n.minSpeedTolerance=800),n.resizeSensor=new(le())(e),n.renderViewport=zt()(function(e){n._renderViewport(e)},16),n.global={copy:function(e){he()(e)||(e=JSON.stringify(e,null,2)),et()(e)},$:function(e){return document.querySelector(e)},$$:function(e){return Pe()(document.querySelectorAll(e))},$x:function(e){return Ut()(e)},clear:function(){n.clear()},dir:function(e){n.dir(e)},table:function(e,t){n.table(e,t)},keys:qe()},n.bindEvent(),n}return(0,d.A)(t,e),(0,s.A)(t,[{key:"setGlobal",value:function(e,t){this.global[e]=t}},{key:"destroy",value:function(){var e,n,r;this.$container.off("scroll",this.onScroll),this.resizeSensor.destroy(),(e=t,n=this,"function"==typeof(r=(0,u.A)((0,c.A)(e.prototype),"destroy",n))?function(e){return r.apply(n,e)}:r)([])}},{key:"count",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=this.counter;je()(t[e])?t[e]=1:t[e]++,this.info("".concat(e,": ").concat(t[e]))}},{key:"countReset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";this.counter[e]=0}},{key:"assert",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];C()(t)||t.shift()||(0===t.length&&t.unshift("console.assert"),t.unshift("Assertion failed: "),this.insert("error",t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];C()(t)||this.insert("log",t)}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];C()(t)||this.insert("debug",t)}},{key:"dir",value:function(e){je()(e)||this.insert("dir",[e])}},{key:"table",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];C()(t)||this.insert("table",t)}},{key:"time",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";if(this.timer[e])return this.insert("warn",["Timer '".concat(e,"' already exists")]);this.timer[e]=Et()()}},{key:"timeLog",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=this.timer[e];if(!t)return this.insert("warn",["Timer '".concat(e,"' does not exist")]);this.info("".concat(e,": ").concat(Et()()-t,"ms"))}},{key:"timeEnd",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";this.timeLog(e),delete this.timer[e]}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.logs=[],this.displayLogs=[],this.selectLog(null),this.lastLog=void 0,this.counter={},this.timer={},this.groupStack=new(Lt()),this.asyncList=[],this.asyncTimer&&(clearTimeout(this.asyncTimer),this.asyncTimer=null),e?this.render():this.insert("log",["%cConsole was cleared","color:#808080;font-style:italic;"])}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];C()(t)||this.insert("info",t)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];C()(t)||this.insert("error",t)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];C()(t)||this.insert("warn",t)}},{key:"group",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.insert({type:"group",args:t,ignoreFilter:!0})}},{key:"groupCollapsed",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.insert({type:"groupCollapsed",args:t,ignoreFilter:!0})}},{key:"groupEnd",value:function(){this.insert("groupEnd")}},{key:"evaluate",value:function(e){this.insert({type:"input",args:[e],ignoreFilter:!0});try{this.output(this.evalJs(e))}catch(e){this.insert({type:"error",ignoreFilter:!0,args:[e]})}}},{key:"html",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.insert("html",t)}},{key:"toggleGroup",value:function(e){e.targetGroup.collapsed?this.openGroup(e):this.collapseGroup(e)}},{key:"output",value:function(e){this.insert({type:"output",args:[e],ignoreFilter:!0})}},{key:"render",value:function(){var e=this.logs,t=this.selectedLog;this.$el.html(""),this.isAtBottom=!0,this.updateBottomSpace(0),this.updateTopSpace(0),this.displayLogs=[];for(var n=0,r=e.length;n<r;n++)this.attachLog(e[n]);t&&(v()(this.displayLogs,t)||this.selectLog(null))}},{key:"insert",value:function(e,t){var n,r=this.options,o=r.showHeader,i=r.asyncRender;if(o&&(n={time:on(),from:an()}),i)return this.insertAsync(e,t,n);this.insertSync(e,t,n)}},{key:"insertAsync",value:function(e,t,n){this.asyncList.push([e,t,n]),this.handleAsyncList()}},{key:"insertSync",value:function(e,t,n){var r,o=this,i=this.logs,a=this.groupStack,s=this.options,l=s.maxNum,c=s.accessGetter,u=s.unenumerable,d=s.lazyEvaluation;if("groupEnd"===(r=he()(e)?{type:e,args:t,header:n}:e).type)return this.lastLog.groupEnd(),void this.groupStack.pop();if(a.size>0&&(r.group=a.peek()),Ot()(r,{id:++nn,accessGetter:c,unenumerable:u,lazyEvaluation:d}),"group"===r.type||"groupCollapsed"===r.type){var h={id:gt()("group"),collapsed:!1,parent:a.peek(),indentLevel:a.size+1};"groupCollapsed"===r.type&&(h.collapsed=!0),r.targetGroup=h,a.push(h)}var f=new Nt(this,r);f.on("updateHeight",function(){o.isAtBottom=!1,o.renderViewport()});var p=this.lastLog;if(p&&!v()(["html","group","groupCollapsed"],f.type)&&p.type===f.type&&f.isSimple()&&p.text()===f.text()?(p.addCount(),f.header&&p.updateTime(f.header.time),f=p,this.detachLog(p)):(i.push(f),this.lastLog=f),0!==l&&i.length>l){var m=i[0];this.detachLog(m),i.shift()}this.attachLog(f),this.emit("insert",f)}},{key:"updateTopSpace",value:function(e){this.topSpaceHeight=e,this.el.style.top=e+"px"}},{key:"updateBottomSpace",value:function(e){this.bottomSpaceHeight=e}},{key:"updateSpace",value:function(e){this.spaceHeight!==e&&(this.spaceHeight=e,this.space.style.height=e+"px")}},{key:"detachLog",value:function(e){var t=this.displayLogs,n=t.indexOf(e);n>-1&&(t.splice(n,1),this.renderViewport())}},{key:"attachLog",value:function(e){if(this.filterLog(e)&&!e.collapsed){var t=this.displayLogs;if(0===t.length)return t.push(e),void this.renderViewport();var n=Dt()(t);if(e.id>n.id)return t.push(e),void this.renderViewport();for(var r,o=0,i=t.length-1,a=0;o<=i;){if((r=t[a=o+Math.floor((i-o)/2)]).id===e.id)return;r.id<e.id?o=a+1:i=a-1}r.id<e.id?t.splice(a+1,0,e):t.splice(a,0,e),this.renderViewport()}}},{key:"handleAsyncList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,n=this.asyncList;this.asyncTimer||(this.asyncTimer=setTimeout(function(){e.asyncTimer=null;var t,r,o=!1,a=n.length;a<1e3?(r=200,t=400):a<5e3?(r=500,t=800):a<1e4?(r=800,t=1e3):a<25e3?(r=1e3,t=1200):a<5e4?(r=1500,t=1500):(r=2e3,t=2500),r>a&&(r=a,o=!0);for(var s=0;s<r;s++){var l=i(n.shift(),3),c=l[0],u=l[1],d=l[2];e.insertSync(c,u,d)}o||$t()(function(){return e.handleAsyncList(t)})},t))}},{key:"injectGlobal",value:function(){k()(this.global,function(e,t){window[t]||(window[t]=e)})}},{key:"clearGlobal",value:function(){k()(this.global,function(e,t){window[t]&&window[t]===e&&delete window[t]})}},{key:"evalJs",value:function(e){var t;this.injectGlobal();try{t=eval.call(window,"(".concat(e,")"))}catch(n){t=eval.call(window,e)}return this.setGlobal("$_",t),this.clearGlobal(),t}},{key:"filterLog",value:function(e){var t=this.options.level,n=this.options.filter;if(e.ignoreFilter)return!0;if(!v()(t,e.level))return!1;if(n){if(Te()(n))return n(e);if(_t()(n))return n.test(Be()(e.text()));if(he()(n)&&(n=R()(n)))return v()(Be()(e.text()),Be()(n))}return!0}},{key:"collapseGroup",value:function(e){e.targetGroup.collapsed=!0,e.updateIcon("caret-right"),this.updateGroup(e)}},{key:"openGroup",value:function(e){e.targetGroup.collapsed=!1,e.updateIcon("caret-down"),this.updateGroup(e)}},{key:"updateGroup",value:function(e){for(var t=e.targetGroup,n=this.logs,r=n.length,o=n.indexOf(e)+1;o<r;){var i=n[o];if(!i.checkGroup()&&i.group===t)break;i.collapsed?this.detachLog(i):this.attachLog(i),o++}}},{key:"selectLog",value:function(e){var t;this.selectedLog&&(this.selectedLog.deselect(),this.selectedLog=null),Ne()(e)?this.emit("deselect"):(this.selectedLog=e,null===(t=this.selectedLog)||void 0===t||t.select(),this.emit("select",e))}},{key:"bindEvent",value:function(){var e=this,t=this.$el,n=this.c;this.resizeSensor.addListener(this.renderViewport);var r=this;t.on("click",n(".log-container"),function(){r.selectLog(this.log)}),this.on("changeOption",function(t,n){var r=e.logs;switch(t){case"maxNum":n>0&&r.length>n&&(e.logs=r.slice(r.length-n),e.render());break;case"filter":e.render();break;case"level":e.options.level=Pe()(n),e.render()}}),this.$container.on("scroll",this.onScroll)}},{key:"_renderViewport",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.topTolerance,n=void 0===t?500:t,r=e.bottomTolerance,o=void 0===r?500:r,i=this.el,a=this.container,s=this.space;if(!Q()(a)){for(var l=a.scrollTop,c=a.offsetHeight,u=s.getBoundingClientRect().width,d=l-n,h=l+c+o,f=this.displayLogs,p=0,m=0,g=0,v=f.length,y=this.fakeEl,b=document.createDocumentFragment(),x=[],w=0;w<v;w++){var _=f[w],k=_.width;0!==_.height&&k===u||(b.appendChild(_.container),x.push(_))}if(x.length>0){y.appendChild(b);for(var A=0,S=x.length;A<S;A++)x[A].updateSize();y.textContent=""}for(var N=document.createDocumentFragment(),C=0;C<v;C++){var j=f[C],E=j.container,T=j.height;g>h?m+=T:g+T>d?N.appendChild(E):g<d&&(p+=T),g+=T}for(this.updateSpace(g),this.updateTopSpace(p),this.updateBottomSpace(m);i.firstChild;)i.lastChild&&i.removeChild(i.lastChild);i.appendChild(N);var I=a.scrollHeight;this.isAtBottom&&l<=I-c&&(a.scrollTop=1e7)}}},{key:"initTpl",value:function(){this.$container.html(this.c(ht()(Zt||(Zt=(0,r.A)(['\n      <div class="logs-space">\n        <div class="fake-logs"></div>\n        <div class="logs"></div>\n      </div>\n    '])))))}}])}(Yt),on=function(){return Vt()("HH:MM:ss ")};function an(){for(var e=new Error,t="",n=e.stack?e.stack.split("\n"):"",r=0,o=n.length;r<o;r++)if((t=n[r]).indexOf("winConsole")>-1&&r<o-1){t=n[r+1];break}return t}!function(e,t){try{e.exports=t,e.exports.default=t}catch(e){}}(e,rn)},3612:function(e,t,n){var r=n(1738),o=n(769),i=n(21);t=function(e){return o(r(e)?new i(e):e)},e.exports=t},3693:function(e,t,n){var r=n(21),o=n(2230),i=n(8604),a=n(6866),s=n(9186),l=n(7236),c=n(3497),u=n(2113),d=n(2125),h=n(3793),f=n(7661),p=n(5360),m=n(8971),g=n(1738);t=function(e){return new r(e)},r.methods({offset:function(){return o(this)},hide:function(){return this.css("display","none")},show:function(){return i(this),this},first:function(){return t(this[0])},last:function(){return t(c(this))},get:function(e){return this[e]},eq:function(e){return t(this[e])},on:function(e,t,n){return h.on(this,e,t,n),this},off:function(e,t,n){return h.off(this,e,t,n),this},html:function(e){var t=l.html(this,e);return m(e)?t:this},text:function(e){var t=l.text(this,e);return m(e)?t:this},val:function(e){var t=l.val(this,e);return m(e)?t:this},css:function(e,t){var n=a(this,e,t);return v(e,t)?n:this},attr:function(e,t){var n=s(this,e,t);return v(e,t)?n:this},data:function(e,t){var n=d(this,e,t);return v(e,t)?n:this},rmAttr:function(e){return s.remove(this,e),this},remove:function(){return u(this),this},addClass:function(e){return f.add(this,e),this},rmClass:function(e){return f.remove(this,e),this},toggleClass:function(e){return f.toggle(this,e),this},hasClass:function(e){return f.has(this,e)},parent:function(){return t(this[0].parentNode)},append:function(e){return p.append(this,e),this},prepend:function(e){return p.prepend(this,e),this},before:function(e){return p.before(this,e),this},after:function(e){return p.after(this,e),this}});var v=function(e,t){return m(t)&&g(e)};e.exports=t},3703:function(e,t){"use strict";var n=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function o(e,t){var n=e[3];return[(1-n)*t[0]+n*e[0],(1-n)*t[1]+n*e[1],(1-n)*t[2]+n*e[2],n+t[3]*(1-n)]}function i(e){var t=n(e,3),r=t[0],o=t[1],i=t[2];return.2126*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.7152*(o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))}Object.defineProperty(t,"__esModule",{value:!0}),t.getContrastThreshold=t.isLargeFont=t.getAPCAThreshold=t.desiredLuminanceAPCA=t.contrastRatioByLuminanceAPCA=t.contrastRatioAPCA=t.luminanceAPCA=t.contrastRatio=t.luminance=t.rgbaToHsla=t.blendColors=void 0,t.blendColors=o,t.rgbaToHsla=function(e){var t=n(e,4),r=t[0],o=t[1],i=t[2],a=t[3],s=Math.max(r,o,i),l=Math.min(r,o,i),c=s-l,u=s+l,d=.5*u;return[l===s?0:r===s?(1/6*(o-i)/c+1)%1:o===s?1/6*(i-r)/c+1/3:1/6*(r-o)/c+2/3,0===d||1===d?0:d<=.5?c/u:c/(2-u),d,a]},t.luminance=i,t.contrastRatio=function(e,t){var n=i(o(e,t)),r=i(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)};var a=12.82051282051282,s=.06;function l(e){var t=n(e,3),r=t[0],o=t[1],i=t[2];return.2126729*Math.pow(r,2.4)+.7151522*Math.pow(o,2.4)+.072175*Math.pow(i,2.4)}function c(e){return e>.03?e:e+Math.pow(.03-e,1.45)}function u(e,t){if(e=c(e),t=c(t),Math.abs(e-t)<5e-4)return 0;var n=0;return 100*(t>=e?(n=1.25*(Math.pow(t,.55)-Math.pow(e,.58)))<.001?0:n<.078?n-n*a*s:n-s:(n=1.25*(Math.pow(t,.62)-Math.pow(e,.57)))>-.001?0:n>-.078?n-n*a*s:n+s)}t.luminanceAPCA=l,t.contrastRatioAPCA=function(e,t){return u(l(e),l(t))},t.contrastRatioByLuminanceAPCA=u,t.desiredLuminanceAPCA=function(e,t,n){function r(){return n?Math.pow(Math.abs(Math.pow(e,.62)-(-t-s)/1.25),1/.57):Math.pow(Math.abs(Math.pow(e,.55)-(t+s)/1.25),1/.58)}e=c(e),t/=100;var o=r();return(o<0||o>1)&&(n=!n,o=r()),o};var d=[[12,-1,-1,-1,-1,100,90,80,-1,-1],[14,-1,-1,-1,100,90,80,60,60,-1],[16,-1,-1,100,90,80,60,55,50,50],[18,-1,-1,90,80,60,55,50,40,40],[24,-1,100,80,60,55,50,40,38,35],[30,-1,90,70,55,50,40,38,35,40],[36,-1,80,60,50,40,38,35,30,25],[48,100,70,55,40,38,35,30,25,20],[60,90,60,50,38,35,30,25,20,20],[72,80,55,40,35,30,25,20,20,20],[96,70,50,35,30,25,20,20,20,20],[120,60,40,30,25,20,20,20,20,20]];function h(e,t){var n=72*parseFloat(e.replace("px",""))/96;return-1!==["bold","bolder","600","700","800","900"].indexOf(t)?n>=14:n>=18}d.reverse(),t.getAPCAThreshold=function(e,t){var o,i,a,s,l=parseFloat(e.replace("px","")),c=parseFloat(t);try{for(var u=r(d),h=u.next();!h.done;h=u.next()){var f=n(h.value),p=f[0],m=f.slice(1);if(l>=p)try{for(var g=(a=void 0,r([900,800,700,600,500,400,300,200,100].entries())),v=g.next();!v.done;v=g.next()){var y=n(v.value,2),b=y[0];if(c>=y[1]){var x=m[m.length-1-b];return-1===x?null:x}}}catch(e){a={error:e}}finally{try{v&&!v.done&&(s=g.return)&&s.call(g)}finally{if(a)throw a.error}}}}catch(e){o={error:e}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}return null},t.isLargeFont=h;var f={aa:3,aaa:4.5},p={aa:4.5,aaa:7};t.getContrastThreshold=function(e,t){return h(e,t)?f:p}},3722:function(e,t,n){var r=n(3145);t=function(e){return Object.freeze?Object.freeze(e):(r(e).forEach(function(t){Object.getOwnPropertyDescriptor(e,t).configurable&&Object.defineProperty(e,t,{writable:!1,configurable:!1})}),e)},e.exports=t},3737:function(e,t,n){var r=n(2263);t=r.extend({className:"MediaQuery",initialize:function(e){var t=this;this.callSuper(r,"initialize"),this._listener=function(){t.emit(t.isMatch()?"match":"unmatch")},this.setQuery(e)},setQuery:function(e){this._mql&&this._mql.removeListener(this._listener),this._mql=window.matchMedia(e),this._mql.addListener(this._listener)},isMatch:function(){return this._mql.matches}}),e.exports=t},3750:function(e,t,n){var r=n(3974);t=function(e){return"[object Blob]"===r(e)},e.exports=t},3752:function(e,t,n){var r=n(2510),o=n(769);t=r(function(e,t){return function(){var n=[];return n=(n=n.concat(t)).concat(o(arguments)),e.apply(this,n)}}),e.exports=t},3793:function(e,t,n){var r=n(8966),o=n(8971),i=n(3612),a=n(9100);function s(e){return function(t,n,s,l){t=i(t),o(l)&&(l=s,s=void 0),a(t,function(t){r[e](t,n,s,l)})}}t={on:s("add"),off:s("remove")},e.exports=t},3805:function(e,t,n){var r=n(2561);t=function(e){return r(e).toLocaleUpperCase()},e.exports=t},3915:function(e,t,n){var r=n(5693),o=n(3145),i=n(5793);t=function(e,t,n){t=r(t,n);for(var a=!i(e)&&o(e),s=(a||e).length,l=Array(s),c=0;c<s;c++){var u=a?a[c]:c;l[c]=t(e[u],u,e)}return l},e.exports=t},3954:function(e,t,n){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{A:function(){return r}})},3957:function(e,t,n){var r=n(3974);t=function(e){var t=r(e);return"[object Function]"===t||"[object GeneratorFunction]"===t||"[object AsyncFunction]"===t},e.exports=t},3974:function(e,t){var n=Object.prototype.toString;t=function(e){return n.call(e)},e.exports=t},3979:function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.drawPath=t.formatColor=t.formatRgba=t.parseHexa=t.createPathForQuad=t.hatchFillPath=t.applyMatrixToPoint=t.emptyBounds=t.buildPath=t.fillPathWithBoxStyle=t.drawPathWithLineStyle=void 0;var s=a(n(1580)),l=n(3703);function c(e,t,n){var r=0;function o(o){for(var i=[],a=0;a<o;++a){var s=Math.round(e[r++]*n);t.maxX=Math.max(t.maxX,s),t.minX=Math.min(t.minX,s);var l=Math.round(e[r++]*n);t.maxY=Math.max(t.maxY,l),t.minY=Math.min(t.minY,l),t.leftmostXForY[l]=Math.min(t.leftmostXForY[l]||Number.MAX_VALUE,s),t.rightmostXForY[l]=Math.max(t.rightmostXForY[l]||Number.MIN_VALUE,s),t.topmostYForX[s]=Math.min(t.topmostYForX[s]||Number.MAX_VALUE,l),t.bottommostYForX[s]=Math.max(t.bottommostYForX[s]||Number.MIN_VALUE,l),t.allPoints.push({x:s,y:l}),i.push(s,l)}return i}for(var i=e.length,a=new Path2D;r<i;)switch(e[r++]){case"M":a.moveTo.apply(a,o(1));break;case"L":a.lineTo.apply(a,o(1));break;case"C":a.bezierCurveTo.apply(a,o(3));break;case"Q":a.quadraticCurveTo.apply(a,o(2));break;case"Z":a.closePath()}return a}t.drawPathWithLineStyle=function(e,t,n,r){void 0===r&&(r=1),n&&n.color&&(e.save(),e.translate(.5,.5),e.lineWidth=r,"dashed"===n.pattern&&e.setLineDash([3,3]),"dotted"===n.pattern&&e.setLineDash([2,2]),e.strokeStyle=n.color,e.stroke(t),e.restore())},t.fillPathWithBoxStyle=function(e,t,n,r,o){o&&(e.save(),o.fillColor&&(e.fillStyle=o.fillColor,e.fill(t)),o.hatchColor&&p(e,t,n,10,o.hatchColor,r,!1),e.restore())},t.buildPath=c,t.emptyBounds=function(){return{minX:Number.MAX_VALUE,minY:Number.MAX_VALUE,maxX:-Number.MAX_VALUE,maxY:-Number.MAX_VALUE,leftmostXForY:{},rightmostXForY:{},topmostYForX:{},bottommostYForX:{},allPoints:[]}},t.applyMatrixToPoint=function(e,t){var n=new DOMPoint(e.x,e.y);return{x:(n=n.matrixTransform(t)).x,y:n.y}};var u,d=5,h=3,f="";function p(e,t,n,r,o,i,a){if((e.canvas.width<n.maxX-n.minX||e.canvas.height<n.maxY-n.minY)&&(n={minX:0,maxX:e.canvas.width,minY:0,maxY:e.canvas.height,allPoints:[]}),!u||o!==f){f=o;var s=document.createElement("canvas");s.width=r,s.height=d+h;var l=s.getContext("2d");l.clearRect(0,0,s.width,s.height),l.rect(0,0,1,d),l.fillStyle=o,l.fill(),u=e.createPattern(s,"repeat")}e.save();var c=new DOMMatrix;u.setTransform(c.scale(a?-1:1,1).rotate(0,0,-45+i)),e.fillStyle=u,e.fill(t),e.restore()}function m(e){return(e.match(/#(\w\w)(\w\w)(\w\w)(\w\w)/)||[]).slice(1).map(function(e){return parseInt(e,16)/255})}function g(e,t){if("rgb"===t){var n=o(e,4),r=n[0],i=n[1],a=n[2],s=n[3];return"rgb(".concat((255*r).toFixed()," ").concat((255*i).toFixed()," ").concat((255*a).toFixed()).concat(1===s?"":" / "+Math.round(100*s)/100,")")}if("hsl"===t){var c=o((0,l.rgbaToHsla)(e),4),u=c[0],d=c[1],h=c[2];return s=c[3],"hsl(".concat(Math.round(360*u),"deg ").concat(Math.round(100*d)," ").concat(Math.round(100*h)).concat(1===s?"":" / "+Math.round(100*s)/100,")")}throw new Error("NOT_REACHED")}t.hatchFillPath=p,t.createPathForQuad=function(e,t,n,a){var s,l,u=["M",e.p1.x,e.p1.y,"L",e.p2.x,e.p2.y,"L",e.p3.x,e.p3.y,"L",e.p4.x,e.p4.y];try{for(var d=r(t),h=d.next();!h.done;h=d.next()){var f=h.value;u=i(i([],o(u),!1),["L",f.p4.x,f.p4.y,"L",f.p3.x,f.p3.y,"L",f.p2.x,f.p2.y,"L",f.p1.x,f.p1.y,"L",f.p4.x,f.p4.y,"L",e.p4.x,e.p4.y],!1)}}catch(e){s={error:e}}finally{try{h&&!h.done&&(l=d.return)&&l.call(d)}finally{if(s)throw s.error}}return u.push("Z"),c(u,n,a)},t.parseHexa=m,t.formatRgba=g,t.formatColor=function(e,t){return"rgb"===t||"hsl"===t?g(m(e),t):(0,s.default)(e,"FF")?e.substr(0,7):e},t.drawPath=function(e,t,n,r,o,i,a){e.save();var s=c(t,i,a);return n&&(e.fillStyle=n,e.fill(s)),r&&("dashed"===o&&e.setLineDash([3,3]),"dotted"===o&&e.setLineDash([2,2]),e.lineWidth=2,e.strokeStyle=r,e.stroke(s)),e.restore(),s}},3981:function(e,t){t=Date.now?Date.now:function(){return(new Date).getTime()},e.exports=t},4069:function(e,t,n){var r=n(769);t=function(){for(var e=r(arguments),t=[],n=0,o=e.length;n<o;n++)t=t.concat(r(e[n]));return t},e.exports=t},4095:function(e,t,n){var r=n(1023),o=n(5241),i=n(3793),a=n(6866),s=n(3249),l=n(8105),c=n(5169);t=c.ResizeObserver?r.extend({initialize:function(e){var t=this;if(e._resizeSensor)return e._resizeSensor;this.callSuper(r,"initialize");var n=new c.ResizeObserver(function(){return t.emit()});n.observe(e),e._resizeSensor=this,this._resizeObserver=n,this._el=e},destroy:function(){var e=this._el;e._resizeSensor&&(this.rmAllListeners(),delete e._resizeSensor,this._resizeObserver.unobserve(e))}}):r.extend({initialize:function(e){if(e._resizeSensor)return e._resizeSensor;this.callSuper(r,"initialize"),this._el=e,e._resizeSensor=this,s(["absolute","relative","fixed","sticky"],a(e,"position"))||a(e,"position","relative"),this._appendResizeSensor(),this._bindEvent()},destroy:function(){var e=this._el;e._resizeSensor&&(this.rmAllListeners(),delete e._resizeSensor,e.removeChild(this._resizeSensorEl))},_appendResizeSensor:function(){var e=this._el,t={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},n={position:"absolute",left:"0px",top:"0px",transition:"0s"},r=o("div",{style:n}),i=o("div.resize-sensor-expand",{style:t},r),a=o("div.resize-sensor-shrink",{style:t},o("div",{style:l({width:"200%",height:"200%"},n)})),s=o("div.resize-sensor",{dir:"ltr",style:t},i,a);this._expandEl=i,this._expandChildEl=r,this._shrinkEl=a,this._resizeSensorEl=s,e.appendChild(s),this._resetExpandShrink()},_bindEvent:function(){var e=this;i.on(this._expandEl,"scroll",function(){return e._onScroll()}),i.on(this._shrinkEl,"scroll",function(){return e._onScroll()})},_onScroll:function(){this.emit(),this._resetExpandShrink()},_resetExpandShrink:function(){var e=this._el,t=e.offsetWidth,n=e.offsetHeight;a(this._expandChildEl,{width:t+10,height:n+10}),l(this._expandEl,{scrollLeft:t+10,scrollTop:n+10}),l(this._shrinkEl,{scrollLeft:t+10,scrollTop:n+10})}}),e.exports=t},4151:function(e,t,n){var r=n(6949),o=n(1738),i=n(9760),a=n(9100);function s(e,t,n){for(var o=r(t,e),i=o.pop();t=o.shift();)e[t]||(e[t]={}),e=e[t];Object.defineProperty(e,i,n)}t=function(e,t,n){return o(t)?s(e,t,n):i(t)&&a(t,function(t,n){s(e,n,t)}),e},e.exports=t},4209:function(e,t,n){"use strict";n.d(t,{A:function(){return io}});var r=n(3029),o=n(2901),i=n(388),a=n(3954),s=n(5361),l=n(4467),c=n(2263),u=n.n(c),d=new(u());d.ADD="ADD",d.SHOW="SHOW",d.SCALE="SCALE";var h=d,f=n(991),p=n(2717),m=n.n(p)()({init:function(e){this._$el=e},show:function(){return this._$el.show(),this},hide:function(){return this._$el.hide(),this},destroy:function(){this._$el.remove()}}),g=n(3693),v=n.n(g),y=n(5021),b=n.n(y),x=n(5630),w=n.n(x),_=n(9100),k=n.n(_),A=n(2571),S=n.n(A),N=n(1738),C=n.n(N),j=n(3249),E=n.n(j),T=n(8420),I=n.n(T),P=n(2561),O=n.n(P),M=n(3145),L=n.n(M),R=n(7604),D=n.n(R),F=n(5651),z=n.n(F),B=n(8105),U=n.n(B),q=n(6214),V=n.n(q),H=["background","foreground","selectForeground","accent","highlight","border","primary","contrast","varColor","stringColor","keywordColor","numberColor","operatorColor","linkColor","textColor","tagNameColor","functionColor","attributeNameColor","commentColor"],G=H.length;function K(e){for(var t={},n=0;n<G;n++)t[H[n]]=e[n];return t}function W(e){return V()(e)&&(e=K(e)),e.darkerBackground||(e.darkerBackground=e.contrast),U()({consoleWarnBackground:"#332a00",consoleWarnForeground:"#ffcb6b",consoleWarnBorder:"#650",consoleErrorBackground:"#290000",consoleErrorForeground:"#ff8080",consoleErrorBorder:"#5c0000",light:"#ccc",dark:"#aaa"},e)}function Q(e){return V()(e)&&(e=K(e)),e.darkerBackground||(e.darkerBackground=e.contrast),U()({consoleWarnBackground:"#fffbe5",consoleWarnForeground:"#5c5c00",consoleWarnBorder:"#fff5c2",consoleErrorBackground:"#fff0f0",consoleErrorForeground:"#f00",consoleErrorBorder:"#ffd6d6",light:"#fff",dark:"#eee"},e)}var Z=["Dark","Material Oceanic","Material Darker","Material Palenight","Material Deep Ocean","Monokai Pro","Dracula","Arc Dark","Atom One Dark","Solarized Dark","Night Owl","AMOLED"];function Y(e){return E()(Z,e)}var J={Light:Q({darkerBackground:"#f3f3f3",background:"#fff",foreground:"#333",selectForeground:"#333",accent:"#1a73e8",highlight:"#eaeaea",border:"#ccc",primary:"#333",contrast:"#f2f7fd",varColor:"#c80000",stringColor:"#1a1aa6",keywordColor:"#881280",numberColor:"#1c00cf",operatorColor:"#808080",linkColor:"#1155cc",textColor:"#8097bd",tagNameColor:"#881280",functionColor:"#222",attributeNameColor:"#994500",commentColor:"#236e25",cssProperty:"#c80000"}),Dark:W({darkerBackground:"#333",background:"#242424",foreground:"#a5a5a5",selectForeground:"#eaeaea",accent:"#7cacf8",highlight:"#000",border:"#3d3d3d",primary:"#ccc",contrast:"#0b2544",varColor:"#e36eec",stringColor:"#f29766",keywordColor:"#9980ff",numberColor:"#9980ff",operatorColor:"#7f7f7f",linkColor:"#ababab",textColor:"#42597f",tagNameColor:"#5db0d7",functionColor:"#d5d5d5",attributeNameColor:"#9bbbdc",commentColor:"#747474"}),"Material Oceanic":W(["#263238","#B0BEC5","#FFFFFF","#009688","#425B67","#2A373E","#607D8B","#1E272C","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#B0BEC5","#f07178","#82aaff","#ffcb6b","#546e7a"]),"Material Darker":W(["#212121","#B0BEC5","#FFFFFF","#FF9800","#3F3F3F","#292929","#727272","#1A1A1A","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#B0BEC5","#f07178","#82aaff","#ffcb6b","#616161"]),"Material Lighter":Q(["#FAFAFA","#546E7A","#546e7a","#00BCD4","#E7E7E8","#d3e1e8","#94A7B0","#F4F4F4","#272727","#91B859","#7C4DFF","#F76D47","#39ADB5","#39ADB5","#546E7A","#E53935","#6182B8","#F6A434","#AABFC9"]),"Material Palenight":W(["#292D3E","#A6ACCD","#FFFFFF","#ab47bc","#444267","#2b2a3e","#676E95","#202331","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#A6ACCD","#f07178","#82aaff","#ffcb6b","#676E95"]),"Material Deep Ocean":W(["#0F111A","#8F93A2","#FFFFFF","#84ffff","#1F2233","#41465b","#4B526D","#090B10","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#8F93A2","#f07178","#82aaff","#ffcb6b","#717CB4"]),"Monokai Pro":W(["#2D2A2E","#fcfcfa","#FFFFFF","#ffd866","#5b595c","#423f43","#939293","#221F22","#FCFCFA","#FFD866","#FF6188","#AB9DF2","#FF6188","#78DCE8","#fcfcfa","#FF6188","#A9DC76","#78DCE8","#727072"]),Dracula:W(["#282A36","#F8F8F2","#8BE9FD","#FF79C5","#6272A4","#21222C","#6272A4","#191A21","#F8F8F2","#F1FA8C","#FF79C6","#BD93F9","#FF79C6","#F1FA8C","#F8F8F2","#FF79C6","#50FA78","#50FA7B","#6272A4"]),"Arc Dark":W(["#2f343f","#D3DAE3","#FFFFFF","#42A5F5","#3F3F46","#404552","#8b9eb5","#262b33","#CF6A4C","#8F9D6A","#9B859D","#CDA869","#A7A7A7","#7587A6","#D3DAE3","#CF6A4C","#7587A6","#F9EE98","#747C84"]),"Atom One Dark":W(["#282C34","#979FAD","#FFFFFF","#2979ff","#383D48","#2e3239","#979FAD","#21252B","#D19A66","#98C379","#C679DD","#D19A66","#61AFEF","#56B6C2","#979FAD","#F07178","#61AEEF","#E5C17C","#59626F"]),"Atom One Light":Q(["#FAFAFA","#232324","#232324","#2979ff","#EAEAEB","#DBDBDC","#9D9D9F","#FFFFFF","#986801","#50A14E","#A626A4","#986801","#4078F2","#0184BC","#232324","#E4564A","#4078F2","#C18401","#A0A1A7"]),"Solarized Dark":W(["#002B36","#839496","#FFFFFF","#d33682","#11353F","#0D3640","#586e75","#00252E","#268BD2","#2AA198","#859900","#D33682","#93A1A1","#268BD2","#839496","#268BD2","#B58900","#B58900","#657B83"]),"Solarized Light":Q(["#fdf6e3","#586e75","#002b36","#d33682","#F6F0DE","#f7f2e2","#93a1a1","#eee8d5","#268BD2","#2AA198","#859900","#D33682","#657B83","#268BD2","#586e75","#268BD2","#B58900","#657B83","#93A1A1"]),Github:Q(["#F7F8FA","#5B6168","#FFFFFF","#79CB60","#CCE5FF","#DFE1E4","#292D31","#FFFFFF","#24292E","#032F62","#D73A49","#005CC5","#D73A49","#005CC5","#5B6168","#22863A","#6F42C1","#6F42C1","#6A737D"]),"Night Owl":W(["#011627","#b0bec5","#ffffff","#7e57c2","#152C3B","#2a373e","#607d8b","#001424","#addb67","#ecc48d","#c792ea","#f78c6c","#c792ea","#80CBC4","#b0bec5","#7fdbca","#82AAFF","#FAD430","#637777"]),"Light Owl":Q(["#FAFAFA","#546e7a","#403f53","#269386","#E0E7EA","#efefef","#403F53","#FAFAFA","#0C969B","#c96765","#994cc3","#aa0982","#7d818b","#994cc3","#546e7a","#994cc3","#4876d6","#4876d6","#637777"]),AMOLED:W(["#000000","#8F93A2","#FFFFFF","#68FFAE","#000000","#41465b","#4B526D","#000000","#DEFDF7","#38ff9f","#ab2eff","#A76DF7","#38ff9f","#86F3C7","#8F93A2","#ab2eff","#8293FF","#38ff9f","#6575c7"])},$=[],X=1,ee=J.Light,te=function(e,t){e=O()(e);for(var n=0,r=$.length;n<r;n++)if($[n].css===e)return;t=t||te.container||document.head;var o=document.createElement("style");o.type="text/css",t.appendChild(o);var i={css:e,el:o,container:t};return re(i),$.push(i),i};function ne(){k()($,function(e){return re(e)})}function re(e){var t=e.css,n=e.el;t=(t=t.replace(/(\d+)px/g,function(e,t){return+t*X+"px"})).replace(/_/g,"eruda-");var r=L()(J.Light);k()(r,function(e){t=t.replace(new RegExp("var\\(--".concat(D()(e),"\\)"),"g"),ee[e])}),n.innerText=t}te.setScale=function(e){X=e,ne()},te.setTheme=function(e){ee=C()(e)?J[e]||J.Light:z()(e,J.Light),ne()},te.getCurTheme=function(){return ee},te.getThemes=function(){return J},te.clear=function(){k()($,function(e){var t=e.container,n=e.el;return t.removeChild(n)}),$=[]},te.remove=function(e){$=S()($,function(t){return t!==e}),e.container.removeChild(e.el)};var oe=te,ie=n(1162);function ae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ae=function(){return!!e})()}function se(e,t,n,r){var o=(0,f.A)((0,a.A)(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}var le=function(e){function t(){var e,o,s,l;return(0,r.A)(this,t),o=this,s=t,s=(0,a.A)(s),(e=(0,i.A)(o,ae()?Reflect.construct(s,[],(0,a.A)(o).constructor):s.apply(o,l)))._style=oe(n(4279)),e.name="settings",e._settings=[],e}return(0,s.A)(t,e),(0,o.A)(t,[{key:"init",value:function(e){se(t,"init",this,3)([e]),this._setting=new ie.Ay(e.get(0)),this._bindEvent()}},{key:"remove",value:function(e,t){var n=this;if(C()(e)){var r=this;this._$el.find(".luna-setting-item-title").each(function(){v()(this).text()===e&&r._setting.remove(this.settingItem)})}else this._settings=S()(this._settings,function(r){return r.config!==e||r.key!==t||(n._setting.remove(r.item),!1)});return this._cleanSeparator(),this}},{key:"destroy",value:function(){this._setting.destroy(),se(t,"destroy",this,3)([]),oe.remove(this._style)}},{key:"clear",value:function(){this._settings=[],this._setting.clear()}},{key:"switch",value:function(e,t,n){var r=this._genId(),o=this._setting.appendCheckbox(r,!!e.get(t),n);return this._settings.push({config:e,key:t,id:r,item:o}),this}},{key:"select",value:function(e,t,n,r){var o=this._genId(),i={};k()(r,function(e){return i[e]=e});var a=this._setting.appendSelect(o,e.get(t),"",n,i);return this._settings.push({config:e,key:t,id:o,item:a}),this}},{key:"range",value:function(e,t,n,r){var o=r.min,i=void 0===o?0:o,a=r.max,s=void 0===a?1:a,l=r.step,c=void 0===l?.1:l,u=this._genId(),d=this._setting.appendNumber(u,e.get(t),n,{max:s,min:i,step:c,range:!0});return this._settings.push({config:e,key:t,min:i,max:s,step:c,id:u,item:d}),this}},{key:"button",value:function(e,t){return this._setting.appendButton(e,t),this}},{key:"separator",value:function(){return this._setting.appendSeparator(),this}},{key:"text",value:function(e){return this._setting.appendTitle(e),this}},{key:"_cleanSeparator",value:function(){var e=I()(this._$el.get(0).children);function t(e){return E()(e.getAttribute("class"),"luna-setting-item-separator")}for(var n=0,r=e.length;n<r-1;n++)t(e[n])&&t(e[n+1])&&v()(e[n]).remove()}},{key:"_genId",value:function(){return w()("eruda-settings")}},{key:"_getSetting",value:function(e){var t;return k()(this._settings,function(n){n.id===e&&(t=n)}),t}},{key:"_bindEvent",value:function(){var e=this;this._setting.on("change",function(t,n){var r=e._getSetting(t);r.config.set(r.key,n)})}}],[{key:"createCfg",value:function(e,t){return new(b())("eruda-"+e,t)}}])}(m),ce=n(9041),ue=n.n(ce),de=n(7571),he=n.n(de),fe=n(5546),pe=n.n(fe),me=n(6032),ge=n.n(me),ve=(n(4950),n(8971)),ye=n.n(ve),be=n(3497),xe=n.n(be),we=n(3915),_e=n.n(we),ke=n(1947),Ae=n.n(ke),Se=n(6030),Ne=n.n(Se),Ce=n(9405),je=n.n(Ce),Ee=n(9548),Te=n.n(Ee);function Ie(e,t){var n;switch(ye()(t)&&(t=!0),e){case"local":n=window.localStorage;break;case"session":n=window.sessionStorage}try{var r="test-localStorage-"+Date.now();n.setItem(r,r);var o=n.getItem(r);if(n.removeItem(r),o!==r)throw new Error}catch(e){return t?Ae():void 0}return n}function Pe(e){return Ne()(e.replace("px",""))}function Oe(e){for(;e;){if("eruda"===e.id)return!0;e=e.parentNode}return!1}function Me(e){if(/<[^>]*>/g.test(e))try{var t=Te().parse(e);return Le(t,function(e){e.attrs&&e.attrs.class&&(e.attrs.class=Re(e.attrs.class))}),Te().stringify(t)}catch(t){return Re(e)}return Re(e)}function Le(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];t(o),o.content&&Le(o.content,t)}}function Re(e){var t="eruda-";return _e()(je()(e).split(/\s+/),function(e){return E()(e,t)?e:e.replace(/[\w-]+/,function(e){return"".concat(t).concat(e)})}).join(" ")}function De(e,t){var n="x"===e?"clientX":"clientY";return t[n]?t[n]:t.changedTouches?t.changedTouches[0][n]:0}function Fe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Fe=function(){return!!e})()}var ze,Be=v()(document),Ue=function(e){function t(e){var o,s,c,u;return(0,r.A)(this,t),s=this,c=t,c=(0,a.A)(c),o=(0,i.A)(s,Fe()?Reflect.construct(c,[],(0,a.A)(s).constructor):c.apply(s,u)),(0,l.A)(o,"_onDragStart",function(e){var t=o._$el;t.addClass(Me("active")),o._isClick=!0,e=e.origEvent,o._startX=De("x",e),o._oldX=Pe(t.css("left")),o._oldY=Pe(t.css("top")),o._startY=De("y",e),Be.on(pe()("move"),o._onDragMove),Be.on(pe()("up"),o._onDragEnd)}),(0,l.A)(o,"_onDragMove",function(e){var t=o._$el.get(0).offsetWidth,n=o._$container.get(0).offsetWidth,r=o._$container.get(0).offsetHeight,i=De("x",e=e.origEvent)-o._startX,a=De("y",e)-o._startY;(Math.abs(i)>3||Math.abs(a)>3)&&(o._isClick=!1);var s=o._oldX+i,l=o._oldY+a;s<0?s=0:s>n-t&&(s=n-t),l<0?l=0:l>r-t&&(l=r-t),o._$el.css({left:s,top:l})}),(0,l.A)(o,"_onDragEnd",function(e){var t=o._$el;o._isClick&&o.emit("click"),o._onDragMove(e),Be.off(pe()("move"),o._onDragMove),Be.off(pe()("up"),o._onDragEnd);var n=o.config;n.get("rememberPos")&&n.set("pos",{x:Pe(t.css("left")),y:Pe(t.css("top"))}),t.rmClass("eruda-active")}),o._style=oe(n(6717)),o._$container=e,o._initTpl(),o._bindEvent(),o._registerListener(),o}return(0,s.A)(t,e),(0,o.A)(t,[{key:"hide",value:function(){this._$el.hide()}},{key:"show",value:function(){this._$el.show()}},{key:"setPos",value:function(e){this._isOutOfRange(e)&&(e=this._getDefPos()),this._$el.css({left:e.x,top:e.y}),this.config.set("pos",e)}},{key:"getPos",value:function(){return this.config.get("pos")}},{key:"destroy",value:function(){oe.remove(this._style),this._unregisterListener(),this._$el.remove()}},{key:"_isOutOfRange",value:function(e){e=e||this.config.get("pos");var t=this._getDefPos();return e.x>t.x+10||e.x<0||e.y<0||e.y>t.y+10}},{key:"_registerListener",value:function(){var e=this;this._scaleListener=function(){return ue()(function(){e._isOutOfRange()&&e._resetPos()})},h.on(h.SCALE,this._scaleListener)}},{key:"_unregisterListener",value:function(){h.off(h.SCALE,this._scaleListener)}},{key:"_initTpl",value:function(){var e=this._$container;e.append(Me('<div class="entry-btn"><span class="icon-tool"></span></div>')),this._$el=e.find(".eruda-entry-btn")}},{key:"_resetPos",value:function(e){var t=this.config,n=t.get("pos"),r=this._getDefPos();t.get("rememberPos")&&!e||(n=r),this.setPos(n)}},{key:"_bindEvent",value:function(){var e=this;this._$el.on(pe()("down"),this._onDragStart),he().on("change",function(){return e._resetPos(!0)}),window.addEventListener("resize",function(){return e._resetPos()})}},{key:"initCfg",value:function(e){var t=this.config=le.createCfg("entry-button",{rememberPos:!0,pos:this._getDefPos()});e.switch(t,"rememberPos","Remember Entry Button Position"),this._resetPos()}},{key:"_getDefPos",value:function(){var e=this._$el.get(0).offsetWidth+10;return{x:window.innerWidth-e,y:window.innerHeight-e}}}])}(u()),qe=n(5458),Ve=n(7622),He=ze=new(n.n(Ve)())("[Eruda]","warn");ze.formatter=function(e,t){return t.unshift(this.name),t};var Ge=n(6097),Ke=n.n(Ge),We=n(7e3),Qe=n.n(We),Ze=n(9931),Ye=n.n(Ze),Je=n(1009),$e=n.n(Je),Xe=n(5570),et=n.n(Xe),tt=n(2556),nt=n(1944),rt=n(8052);function ot(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ot=function(){return!!e})()}var it=function(e){function t(e){var o,s,c,u,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=d.defaults,f=void 0===h?{}:h,p=d.inline,m=void 0!==p&&p;return(0,r.A)(this,t),s=this,c=t,c=(0,a.A)(c),o=(0,i.A)(s,ot()?Reflect.construct(c,[],(0,a.A)(s).constructor):c.apply(s,u)),(0,l.A)(o,"_checkSafeArea",function(){var e=o.$container;!function(){var e=!1,t=document.createElement("div");if(CSS.supports("padding-bottom: env(safe-area-inset-bottom)")?(t.style.paddingBottom="env(safe-area-inset-bottom)",e=!0):CSS.supports("padding-bottom: constant(safe-area-inset-bottom)")&&(t.style.paddingBottom="constant(safe-area-inset-bottom)",e=!0),e){document.body.appendChild(t);var n=parseInt(window.getComputedStyle(t).paddingBottom);if(document.body.removeChild(t),n>0)return!0}return!1}()?e.rmClass(Me("safe-area")):e.addClass(Me("safe-area"))}),(0,l.A)(o,"_updateTabHeight",function(e){o._tab.setOption("height",40*e),ue()(function(){o._tab.updateSlider()})}),o._defCfg=U()({transparency:1,displaySize:80,theme:"System preference"},f),o._style=oe(n(541)),o.$container=e,o._isShow=!1,o._opacity=1,o._tools={},o._isResizing=!1,o._resizeTimer=null,o._resizeStartY=0,o._resizeStartSize=0,o._inline=m,o._initTpl(),o._initTab(),o._initNotification(),o._initModal(),et()(function(){return o._checkSafeArea()}),o._bindEvent(),o}return(0,s.A)(t,e),(0,o.A)(t,[{key:"show",value:function(){var e=this;return this._isShow=!0,this._$el.show(),this._tab.updateSlider(),setTimeout(function(){e._$el.css("opacity",e._opacity)},50),this.emit("show"),this}},{key:"hide",value:function(){var e=this;if(!this._inline)return this._isShow=!1,this.emit("hide"),this._$el.css({opacity:0}),setTimeout(function(){return e._$el.hide()},300),this}},{key:"toggle",value:function(){return this._isShow?this.hide():this.show()}},{key:"add",value:function(e){var t=this._tab;if(!(e instanceof m)){var n=new m,r=n.init,o=n.show,i=n.hide,a=n.destroy;z()(e,{init:r,show:o,hide:i,destroy:a})}var s=e.name;if(!s)return He.error("You must specify a name for a tool");if(this._tools[s])return He.warn("Tool ".concat(s," already exists"));var l=s.replace(/\s+/g,"-");return this._$tools.prepend('<div id="'.concat(Me(l),'" class="').concat(Me(l+" tool"),'"></div>')),e.init(this._$tools.find(".".concat(Me(l),".").concat(Me("tool"))),this),e.active=!1,this._tools[s]=e,"settings"===s?t.append({id:s,title:s}):t.insert(t.length-1,{id:s,title:s}),this}},{key:"remove",value:function(e){var t=this._tools;if(!t[e])return He.warn("Tool ".concat(e," doesn't exist"));this._tab.remove(e);var n=t[e];if(delete t[e],n.active){var r=L()(t);r.length>0&&this.showTool(t[xe()(r)].name)}return n.destroy(),this}},{key:"removeAll",value:function(){var e=this;return k()(this._tools,function(t){return e.remove(t.name)}),this}},{key:"get",value:function(e){var t=this._tools[e];if(t)return t}},{key:"showTool",value:function(e){if(this._curTool===e)return this;this._curTool=e;var t=this._tools,n=t[e];if(n){var r={};return k()(t,function(e){e.active&&(r=e,e.active=!1,e.hide())}),n.active=!0,n.show(),this._tab.select(e),this.emit("showTool",e,r),this}}},{key:"initCfg",value:function(e){var t=this,n=this.config=le.createCfg("dev-tools",this._defCfg);this._setTransparency(n.get("transparency")),this._setDisplaySize(n.get("displaySize")),this._setTheme(n.get("theme")),n.on("change",function(e,n){switch(e){case"transparency":return t._setTransparency(n);case"displaySize":return t._setDisplaySize(n);case"theme":return t._setTheme(n)}}),e.separator().select(n,"theme","Theme",["System preference"].concat((0,qe.A)(L()(oe.getThemes())))),this._inline||e.range(n,"transparency","Transparency",{min:.2,max:1,step:.01}).range(n,"displaySize","Display Size",{min:40,max:100,step:1}),e.button("Restore defaults and reload",function(){var e=Ie("local"),t=JSON.parse(JSON.stringify(e));k()(t,function(t,n){C()(t)&&$e()(n,"eruda")&&e.removeItem(n)}),window.location.reload()}).separator()}},{key:"notify",value:function(e,t){this._notification.notify(e,t)}},{key:"destroy",value:function(){oe.remove(this._style),this.removeAll(),this._tab.destroy(),this._$el.remove(),window.removeEventListener("resize",this._checkSafeArea),h.off(h.SCALE,this._updateTabHeight)}},{key:"_setTheme",value:function(e){var t=this.$container;"System preference"===e&&(e=Ye()(Qe().get())),Y(e)?t.addClass(Me("dark")):t.rmClass(Me("dark")),oe.setTheme(e)}},{key:"_setTransparency",value:function(e){Ke()(e)&&(this._opacity=e,this._isShow&&this._$el.css({opacity:e}))}},{key:"_setDisplaySize",value:function(e){this._inline&&(e=100),Ke()(e)&&this._$el.css({height:e+"%"})}},{key:"_initTpl",value:function(){var e=this.$container;e.append(Me('\n      <div class="dev-tools">\n        <div class="resizer"></div>\n        <div class="tab"></div>\n        <div class="tools"></div>\n        <div class="notification"></div>\n        <div class="modal"></div>\n      </div>\n      ')),this._$el=e.find(Me(".dev-tools")),this._$tools=this._$el.find(Me(".tools"))}},{key:"_initTab",value:function(){var e=this;this._tab=new rt.A(this._$el.find(Me(".tab")).get(0),{height:40}),this._tab.on("select",function(t){return e.showTool(t)})}},{key:"_initNotification",value:function(){this._notification=new tt.A(this._$el.find(Me(".notification")).get(0),{position:{x:"center",y:"top"}})}},{key:"_initModal",value:function(){nt.A.setContainer(this._$el.find(Me(".modal")).get(0))}},{key:"_bindEvent",value:function(){var e=this,t=this._$el.find(Me(".resizer")),n=this._$el.find(Me(".nav-bar")),r=v()(document);this._inline&&t.hide();var o=function(t){if(e._isResizing){t.preventDefault(),t.stopPropagation(),t=t.origEvent;var n=(e._resizeStartY-De("y",t))/window.innerHeight*100,r=e._resizeStartSize+n;r<40?r=40:r>100&&(r=100),e.config.set("displaySize",Ne()(r.toFixed(2)))}},i=function(){clearTimeout(e._resizeTimer),e._isResizing=!1,t.css("height",10),r.off(pe()("move"),o),r.off(pe()("up"),i)};t.css("height",10),t.on(pe()("down"),function(n){n.preventDefault(),n.stopPropagation(),n=n.origEvent,e._isResizing=!0,e._resizeStartSize=e.config.get("displaySize"),e._resizeStartY=De("y",n),t.css("height","100%"),r.on(pe()("move"),o),r.on(pe()("up"),i)}),n.on("contextmenu",function(e){return e.preventDefault()}),this.$container.on("click",function(e){return e.stopPropagation()}),window.addEventListener("resize",this._checkSafeArea),h.on(h.SCALE,this._updateTabHeight),Qe().on("change",function(){var t=e.config.get("theme");"System preference"===t&&e._setTheme(t)})}}])}(u()),at=n(9993),st=n.n(at),lt=n(3957),ct=n.n(lt),ut=n(1976),dt=n.n(ut),ht=n(6962),ft=n.n(ht),pt=n(8609),mt=n.n(pt),gt=n(4236),vt=n.n(gt),yt=n(3578);function bt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(bt=function(){return!!e})()}function xt(e,t,n,r){var o=(0,f.A)((0,a.A)(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}ft().start();var wt=function(e){function t(){var e,n,o,s,c=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).name,d=void 0===c?"console":c;return(0,r.A)(this,t),n=this,o=t,o=(0,a.A)(o),e=(0,i.A)(n,bt()?Reflect.construct(o,[],(0,a.A)(n).constructor):o.apply(n,s)),(0,l.A)(e,"_handleShow",function(){mt()(e._$el.get(0))||e._logger.renderViewport()}),(0,l.A)(e,"_handleErr",function(t){e._logger.error(t)}),u().mixin(e),e.name=d,e._selectedLog=null,e}return(0,s.A)(t,e),(0,o.A)(t,[{key:"init",value:function(e,n){xt(t,"init",this,3)([e]),this._container=n,this._appendTpl(),this._initCfg(),this._initLogger(),this._exposeLogger(),this._bindEvent()}},{key:"show",value:function(){xt(t,"show",this,3)([]),this._handleShow()}},{key:"overrideConsole",value:function(){var e=this,t=this._origConsole={},n=window.console;return _t.forEach(function(r){var o=t[r]=st();n[r]&&(o=t[r]=n[r].bind(n)),n[r]=function(){e[r].apply(e,arguments),o.apply(void 0,arguments)}}),this}},{key:"setGlobal",value:function(e,t){this._logger.setGlobal(e,t)}},{key:"restoreConsole",value:function(){var e=this;return this._origConsole?(_t.forEach(function(t){return window.console[t]=e._origConsole[t]}),delete this._origConsole,this):this}},{key:"catchGlobalErr",value:function(){return ft().addListener(this._handleErr),this}},{key:"ignoreGlobalErr",value:function(){return ft().rmListener(this._handleErr),this}},{key:"filter",value:function(e){var t=this._$filterText,n=this._logger;C()(e)?(t.text(e),n.setOption("filter",je()(e))):dt()(e)?(t.text(O()(e)),n.setOption("filter",e)):ct()(e)&&(t.text("\u0192"),n.setOption("filter",e))}},{key:"destroy",value:function(){this._logger.destroy(),xt(t,"destroy",this,3)([]),this._container.off("show",this._handleShow),this._style&&oe.remove(this._style),this.ignoreGlobalErr(),this.restoreConsole(),this._rmCfg()}},{key:"_enableJsExecution",value:function(e){var t=this._$el,n=t.find(Me(".js-input"));e?(n.show(),t.rmClass(Me("js-input-hidden"))):(n.hide(),t.addClass(Me("js-input-hidden")))}},{key:"_appendTpl",value:function(){var e=this._$el;this._style=oe(n(6567)),e.append(Me('\n      <div class="control">\n        <span class="icon-clear clear-console"></span>\n        <span class="level active" data-level="all">All</span>\n        <span class="level" data-level="info">Info</span>\n        <span class="level" data-level="warning">Warning</span>\n        <span class="level" data-level="error">Error</span>\n        <span class="filter-text"></span>\n        <span class="icon-filter filter"></span>\n        <span class="icon-copy icon-disabled copy"></span>\n      </div>\n      <div class="logs-container"></div>\n      <div class="js-input">\n        <div class="buttons">\n          <div class="button cancel">Cancel</div>\n          <div class="button execute">Execute</div>\n        </div>\n        <span class="icon-arrow-right"></span>\n        <textarea></textarea>\n      </div>\n    '));var t=e.find(Me(".js-input")),r=t.find("textarea"),o=t.find(Me(".buttons"));U()(this,{_$control:e.find(Me(".control")),_$logs:e.find(Me(".logs-container")),_$inputContainer:t,_$input:r,_$inputBtns:o,_$filterText:e.find(Me(".filter-text"))})}},{key:"_initLogger",value:function(){var e=this.config,t=e.get("maxLogNum");t="infinite"===t?0:+t;var n=this._$control.find(Me(".level")),r=new yt.A(this._$logs.get(0),{asyncRender:e.get("asyncRender"),maxNum:t,showHeader:e.get("displayExtraInfo"),unenumerable:e.get("displayUnenumerable"),accessGetter:e.get("displayGetterVal"),lazyEvaluation:e.get("lazyEvaluation")});r.on("optionChange",function(e,t){"level"===e&&n.each(function(){var e=v()(this),n=e.data("level");e[n===t||"all"===n&&V()(t)?"addClass":"rmClass"](Me("active"))})}),e.get("overrideConsole")&&this.overrideConsole(),this._logger=r}},{key:"_exposeLogger",value:function(){var e=this,t=this._logger;["html"].concat(_t).forEach(function(n){return e[n]=function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t[n].apply(t,o),e.emit.apply(e,[n].concat(o)),e}})}},{key:"_bindEvent",value:function(){var e=this,t=this._container,n=this._$input,r=this._$inputBtns,o=this._$control,i=this._logger,a=this.config;o.on("click",Me(".clear-console"),function(){return i.clear(!0)}).on("click",Me(".level"),function(){var e=v()(this).data("level");"all"===e&&(e=["verbose","info","warning","error"]),i.setOption("level",e)}).on("click",Me(".filter"),function(){nt.A.prompt("Filter").then(function(t){vt()(t)||e.filter(t)})}).on("click",Me(".copy"),function(){e._selectedLog.copy(),t.notify("Copied",{icon:"success"})}),r.on("click",Me(".cancel"),function(){return e._hideInput()}).on("click",Me(".execute"),function(){var t=n.val().trim();""!==t&&(i.evaluate(t),n.val("").get(0).blur(),e._hideInput())}),n.on("focusin",function(){return e._showInput()}),i.on("insert",function(e){"error"===e.type&&a.get("displayIfErr")&&t.showTool("console").show()}),i.on("select",function(t){e._selectedLog=t,o.find(Me(".icon-copy")).rmClass(Me("icon-disabled"))}),i.on("deselect",function(){e._selectedLog=null,o.find(Me(".icon-copy")).addClass(Me("icon-disabled"))}),t.on("show",this._handleShow)}},{key:"_hideInput",value:function(){this._$inputContainer.rmClass(Me("active")),this._$inputBtns.css("display","none")}},{key:"_showInput",value:function(){this._$inputContainer.addClass(Me("active")),this._$inputBtns.css("display","flex")}},{key:"_rmCfg",value:function(){var e=this.config,t=this._container.get("settings");t&&t.remove(e,"asyncRender").remove(e,"jsExecution").remove(e,"catchGlobalErr").remove(e,"overrideConsole").remove(e,"displayExtraInfo").remove(e,"displayUnenumerable").remove(e,"displayGetterVal").remove(e,"lazyEvaluation").remove(e,"displayIfErr").remove(e,"maxLogNum").remove(Ye()(this.name))}},{key:"_initCfg",value:function(){var e=this,t=this._container,n=this.config=le.createCfg(this.name,{asyncRender:!0,catchGlobalErr:!0,jsExecution:!0,overrideConsole:!0,displayExtraInfo:!1,displayUnenumerable:!0,displayGetterVal:!0,lazyEvaluation:!0,displayIfErr:!1,maxLogNum:"infinite"});this._enableJsExecution(n.get("jsExecution")),n.get("catchGlobalErr")&&this.catchGlobalErr(),n.on("change",function(t,n){var r=e._logger;switch(t){case"asyncRender":return r.setOption("asyncRender",n);case"jsExecution":return e._enableJsExecution(n);case"catchGlobalErr":return n?e.catchGlobalErr():e.ignoreGlobalErr();case"overrideConsole":return n?e.overrideConsole():e.restoreConsole();case"maxLogNum":return r.setOption("maxNum","infinite"===n?0:+n);case"displayExtraInfo":return r.setOption("showHeader",n);case"displayUnenumerable":return r.setOption("unenumerable",n);case"displayGetterVal":return r.setOption("accessGetter",n);case"lazyEvaluation":return r.setOption("lazyEvaluation",n)}});var r=t.get("settings");r&&r.text(Ye()(this.name)).switch(n,"asyncRender","Asynchronous Rendering").switch(n,"jsExecution","Enable JavaScript Execution").switch(n,"catchGlobalErr","Catch Global Errors").switch(n,"overrideConsole","Override Console").switch(n,"displayIfErr","Auto Display If Error Occurs").switch(n,"displayExtraInfo","Display Extra Information").switch(n,"displayUnenumerable","Display Unenumerable Properties").switch(n,"displayGetterVal","Access Getter Value").switch(n,"lazyEvaluation","Lazy Evaluation").select(n,"maxLogNum","Max Log Number",["infinite","250","125","100","50","10"]).separator()}}])}(m),_t=["log","error","info","warn","dir","time","timeLog","timeEnd","clear","table","assert","count","countReset","debug","group","groupCollapsed","groupEnd"],kt=n(9117),At=n.n(kt),St=n(9464),Nt=n.n(St),Ct=n(5902),jt=n.n(Ct),Et=n(4844),Tt=n.n(Et),It=n(4983),Pt=n.n(It),Ot=n(15),Mt=n.n(Ot);function Lt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Lt=function(){return!!e})()}var Rt=function(e){function t(e,n){var o,s,c,u;return(0,r.A)(this,t),s=this,c=t,c=(0,a.A)(c),o=(0,i.A)(s,Lt()?Reflect.construct(c,[],(0,a.A)(s).constructor):c.apply(s,u)),(0,l.A)(o,"_copyRes",function(){var e=o._detailData,t="".concat(e.method," ").concat(e.url," ").concat(e.status,"\n");Nt()(e.data)||(t+="\nRequest Data\n\n",t+="".concat(e.data,"\n")),Nt()(e.reqHeaders)||(t+="\nRequest Headers\n\n",k()(e.reqHeaders,function(e,n){return t+="".concat(n,": ").concat(e,"\n")})),Nt()(e.resHeaders)||(t+="\nResponse Headers\n\n",k()(e.resHeaders,function(e,n){return t+="".concat(n,": ").concat(e,"\n")})),e.resTxt&&(t+="\n".concat(e.resTxt,"\n")),Tt()(t),o._devtools.notify("Copied",{icon:"success"})}),o._$container=e,o._devtools=n,o._detailData={},o._bindEvent(),o}return(0,s.A)(t,e),(0,o.A)(t,[{key:"show",value:function(e){e.resTxt&&""===je()(e.resTxt)&&delete e.resTxt,Nt()(e.resHeaders)&&delete e.resHeaders,Nt()(e.reqHeaders)&&delete e.reqHeaders;var t="";e.data&&(t='<pre class="'.concat(Me("data"),'">').concat(jt()(e.data),"</pre>"));var n="<tr><td>Empty</td></tr>";e.reqHeaders&&(n=_e()(e.reqHeaders,function(e,t){return'<tr>\n          <td class="'.concat(Me("key"),'">').concat(jt()(t),"</td>\n          <td>").concat(jt()(e),"</td>\n        </tr>")}).join(""));var r="<tr><td>Empty</td></tr>";e.resHeaders&&(r=_e()(e.resHeaders,function(e,t){return'<tr>\n          <td class="'.concat(Me("key"),'">').concat(jt()(t),"</td>\n          <td>").concat(jt()(e),"</td>\n        </tr>")}).join(""));var o="";if(e.resTxt){var i=e.resTxt;i.length>Dt&&(i=Mt()(i,Dt)),o='<pre class="'.concat(Me("response"),'">').concat(jt()(i),"</pre>")}var a='<div class="'.concat(Me("control"),'">\n      <span class="').concat(Me("icon-arrow-left back"),'"></span>\n      <span class="').concat(Me("icon-delete back"),'"></span>\n      <span class="').concat(Me("url"),'">').concat(jt()(e.url),'</span>\n      <span class="').concat(Me("icon-copy copy-res"),'"></span>\n    </div>\n    <div class="').concat(Me("http"),'">\n      ').concat(t,'\n      <div class="').concat(Me("section"),'">\n        <h2>Response Headers</h2>\n        <table class="').concat(Me("headers"),'">\n          <tbody>\n            ').concat(r,'\n          </tbody>\n        </table>\n      </div>\n      <div class="').concat(Me("section"),'">\n        <h2>Request Headers</h2>\n        <table class="').concat(Me("headers"),'">\n          <tbody>\n            ').concat(n,"\n          </tbody>\n        </table>\n      </div>\n      ").concat(o,"\n    </div>");this._$container.html(a).show(),this._detailData=e}},{key:"hide",value:function(){this._$container.hide(),this.emit("hide")}},{key:"_bindEvent",value:function(){var e=this,t=this._devtools;this._$container.on("click",Me(".back"),function(){return e.hide()}).on("click",Me(".copy-res"),this._copyRes).on("click",Me(".http .response"),function(){var t=e._detailData,r=t.resTxt;if(Pt()(r))return n("object",r);switch(t.subType){case"css":return n("css",r);case"html":return n("html",r);case"javascript":return n("js",r);case"json":return n("object",r)}return"image"===t.type?n("img",t.url):void 0});var n=function(e,n){var r=t.get("sources");r&&(r.set(e,n),t.showTool("sources"))}}}])}(u()),Dt=1e5,Ft=n(5865),zt=n.n(Ft),Bt=n(6476),Ut=n.n(Bt),qt=n(5334),Vt=n(2480),Ht=n(6192),Gt=n(5689);function Kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(n),!0).forEach(function(t){(0,l.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Qt=new(Ut());Qt.register("Network",qt),Qt.register("Overlay",Vt),Qt.register("DOM",Wt(Wt({},Ht),{},{getNodeId:Ht.getDOMNodeId,getNode:Ht.getDOMNode})),Qt.register("Storage",Gt);var Zt=Qt,Yt=n(2388),Jt=n(4095),$t=n.n(Jt),Xt=n(3737),en=n.n(Xt),tn=n(5004),nn=n.n(tn),rn=n(1849),on=n.n(rn);function an(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(an=function(){return!!e})()}function sn(e,t,n,r){var o=(0,f.A)((0,a.A)(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}var ln=function(e){function t(){var e,o,s,c;return(0,r.A)(this,t),o=this,s=t,s=(0,a.A)(s),e=(0,i.A)(o,an()?Reflect.construct(s,[],(0,a.A)(o).constructor):s.apply(o,c)),(0,l.A)(e,"_reqWillBeSent",function(t){if(e._isRecording){var n,r,o,i={name:(n=t.request.url,r=xe()(n.split("/")),""===r&&(r=(n=new(ge())(n)).hostname),r),url:t.request.url,status:"pending",type:"unknown",subType:"unknown",size:0,data:t.request.postData,method:t.request.method,startTime:1e3*t.timestamp,time:0,resTxt:"",done:!1,reqHeaders:t.request.headers||{},resHeaders:{},render:function(){var n={name:i.name,method:i.method,status:i.status,type:i.subType,size:i.size,time:i.displayTime};o?(o.data=n,o.render()):(o=e._requestDataGrid.append(n,{selectable:!0}),v()(o.container).data("id",t.requestId)),i.hasErr&&v()(o.container).addClass(Me("request-error"))}};i.render(),e._requests[t.requestId]=i}}),(0,l.A)(e,"_resReceivedExtraInfo",function(t){var n=e._requests[t.requestId];e._isRecording&&n&&(n.resHeaders=t.headers,e._updateType(n),n.render())}),(0,l.A)(e,"_resReceived",function(t){var n=e._requests[t.requestId];if(e._isRecording&&n){var r=t.response,o=r.status,i=r.headers;n.status=o,(o<200||o>=300)&&(n.hasErr=!0),i&&(n.resHeaders=i,e._updateType(n)),n.render()}}),(0,l.A)(e,"_loadingFinished",function(t){var n=e._requests[t.requestId];if(e._isRecording&&n){var r=1e3*t.timestamp;n.time=r-n.startTime,n.displayTime=At()(n.time),n.size=t.encodedDataLength,n.done=!0,n.resTxt=Zt.domain("Network").getResponseBody({requestId:t.requestId}).body,n.render()}}),(0,l.A)(e,"_loadingFailed",function(t){var n=e._requests[t.requestId];if(e._isRecording&&n){var r=1e3*t.timestamp;n.time=r-n.startTime,n.displayTime=At()(n.time),n.hasErr=!0,n.status=0,n.done=!0,n.render()}}),(0,l.A)(e,"_copyCurl",function(){var t=e._selectedRequest;Tt()(function(e){var t=nn()();"windows"===t&&(t="win");var n=[],r=on()(["accept-encoding","host","method","path","scheme","version"]),o="win"===t?function(e){var t=/[\r\n]/.test(e)?'^"':'"';return t+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/[^a-zA-Z0-9\s_\-:=+~'/.',?;()*`&]/g,"^$&").replace(/%(?=[a-zA-Z0-9_])/g,"%^").replace(/\r?\n/g,"^\n\n")+t}:function(e){return/[\0-\x1F\x7F-\x9F!]|'/.test(e)?"$'"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\0-\x1F\x7F-\x9F!]/g,function(e){for(var t=e.charCodeAt(0).toString(16);t.length<4;)t="0"+t;return"\\u"+t})+"'":"'"+e+"'"};n.push(o(e.url()).replace(/[[{}\]]/g,"\\$&"));var i="GET",a=[],s=e.requestFormData();s&&(a.push("--data-raw "+o(s)),r["content-length"]=!0,i="POST"),e.requestMethod!==i&&n.push("-X "+o(e.requestMethod));for(var l=e.requestHeaders(),c=0;c<l.length;c++){var u=l[c],d=u.name.replace(/^:/,"");r[d.toLowerCase()]||n.push("-H "+o(d+": "+u.value))}return(n=n.concat(a)).push("--compressed"),"curl "+n.join(n.length>=3?"win"===t?" ^\n  ":" \\\n  ":" ")}({requestMethod:t.method,url:function(){return t.url},requestFormData:function(){return t.data},requestHeaders:function(){var e=t.reqHeaders||{};return U()(e,{"User-Agent":navigator.userAgent,Referer:location.href}),_e()(e,function(e,t){return{name:t,value:e}})}})),e._container.notify("Copied",{icon:"success"})}),(0,l.A)(e,"_toggleRecording",function(){e._$control.find(Me(".record")).toggleClass(Me("recording")),e._isRecording=!e._isRecording}),(0,l.A)(e,"_showDetail",function(){e._selectedRequest&&(e._splitMode&&e._$network.css("width","50%"),e._detail.show(e._selectedRequest))}),(0,l.A)(e,"_updateScale",function(t){e._splitMediaQuery.setQuery("screen and (min-width: ".concat(680*t,"px)"))}),e._style=oe(n(8239)),e.name="network",e._requests={},e._selectedRequest=null,e._isRecording=!0,e}return(0,s.A)(t,e),(0,o.A)(t,[{key:"init",value:function(e,n){sn(t,"init",this,3)([e]),this._container=n,this._initTpl(),this._detail=new Rt(this._$detail,n),this._splitMediaQuery=new(en())("screen and (min-width: 680px)"),this._splitMode=this._splitMediaQuery.isMatch(),this._requestDataGrid=new Yt.A(this._$requests.get(0),{columns:[{id:"name",title:"Name",sortable:!0,weight:30},{id:"method",title:"Method",sortable:!0,weight:14},{id:"status",title:"Status",sortable:!0,weight:14},{id:"type",title:"Type",sortable:!0,weight:14},{id:"size",title:"Size",sortable:!0,weight:14},{id:"time",title:"Time",sortable:!0,weight:14}]}),this._resizeSensor=new($t())(e.get(0)),this._bindEvent()}},{key:"show",value:function(){sn(t,"show",this,3)([]),this._updateDataGridHeight()}},{key:"clear",value:function(){this._requests={},this._requestDataGrid.clear()}},{key:"requests",value:function(){var e=[];return k()(this._requests,function(t){e.push(t)}),e}},{key:"_updateDataGridHeight",value:function(){this._requestDataGrid.fit()}},{key:"_updateType",value:function(e){var t=function(e){if(!e)return"unknown";var t=e.split(";")[0].split("/");return{type:t[0],subType:xe()(t)}}(e.resHeaders["content-type"]||""),n=t.type,r=t.subType;e.type=n,e.subType=r}},{key:"_updateButtons",value:function(){var e=this._$control,t=e.find(Me(".show-detail")),n=e.find(Me(".copy-curl")),r=Me("icon-disabled");t.addClass(r),n.addClass(r),this._selectedRequest&&(t.rmClass(r),n.rmClass(r))}},{key:"_bindEvent",value:function(){var e=this,t=this._$control,n=this._$filterText,r=this._requestDataGrid,o=this;t.on("click",Me(".clear-request"),function(){return e.clear()}).on("click",Me(".show-detail"),this._showDetail).on("click",Me(".copy-curl"),this._copyCurl).on("click",Me(".record"),this._toggleRecording).on("click",Me(".filter"),function(){nt.A.prompt("Filter").then(function(e){vt()(e)||(n.text(e),r.setOption("filter",je()(e)))})}),r.on("select",function(t){var n=v()(t.container).data("id"),r=o._requests[n];e._selectedRequest=r,e._updateButtons(),e._splitMode&&e._showDetail()}),r.on("deselect",function(){e._selectedRequest=null,e._updateButtons(),e._detail.hide()}),this._resizeSensor.addListener(zt()(function(){return e._updateDataGridHeight()},15)),this._splitMediaQuery.on("match",function(){e._detail.hide(),e._splitMode=!0}),this._splitMediaQuery.on("unmatch",function(){e._detail.hide(),e._splitMode=!1}),this._detail.on("hide",function(){e._splitMode&&e._$network.css("width","100%")}),Zt.domain("Network").enable();var i=Zt.domain("Network");i.on("requestWillBeSent",this._reqWillBeSent),i.on("responseReceivedExtraInfo",this._resReceivedExtraInfo),i.on("responseReceived",this._resReceived),i.on("loadingFinished",this._loadingFinished),i.on("loadingFailed",this._loadingFailed),h.on(h.SCALE,this._updateScale)}},{key:"destroy",value:function(){sn(t,"destroy",this,3)([]),this._resizeSensor.destroy(),oe.remove(this._style),this._splitMediaQuery.removeAllListeners();var e=Zt.domain("Network");e.off("requestWillBeSent",this._reqWillBeSent),e.off("responseReceivedExtraInfo",this._resReceivedExtraInfo),e.off("responseReceived",this._resReceived),e.off("loadingFinished",this._loadingFinished),h.off(h.SCALE,this._updateScale)}},{key:"_initTpl",value:function(){var e=this._$el;e.html(Me('<div class="network">\n        <div class="control">\n          <span class="icon-record record recording"></span>\n          <span class="icon-clear clear-request"></span>\n          <span class="icon-eye icon-disabled show-detail"></span>\n          <span class="icon-copy icon-disabled copy-curl"></span>\n          <span class="filter-text"></span>\n          <span class="icon-filter filter"></span>\n        </div>\n        <div class="requests"></div>\n      </div>\n      <div class="detail"></div>')),this._$network=e.find(Me(".network")),this._$detail=e.find(Me(".detail")),this._$requests=e.find(Me(".requests")),this._$control=e.find(Me(".control")),this._$filterText=e.find(Me(".filter-text"))}}])}(m),cn=n(2708),un=n.n(cn),dn=n(1167),hn=n.n(dn),fn=n(7181),pn=n.n(fn),mn=n(5784),gn=n(96),vn=n.n(gn),yn=n(896),bn=n.n(yn),xn=n(438),wn=n.n(xn),_n=n(6493),kn=n.n(_n),An=n(6186),Sn=n.n(An),Nn=n(5241),Cn=n.n(Nn),jn=n(2208),En=n.n(jn),Tn=n(5145),In=n.n(Tn);function Pn(e){for(var t={},n=0,r=e.length;n<r;n++){var o=e[n];"initial"!==e[o]&&(t[o]=e[o])}return function(e){return In()(e,{comparator:function(e,t){for(var n=e.length,r=t.length,o=n>r?r:n,i=0;i<o;i++){var a=Rn(e.charCodeAt(i),t.charCodeAt(i));if(0!==a)return a}return n>r?1:n<r?-1:0}})}(t)}var On=Element.prototype,Mn=function(){return!1};On.webkitMatchesSelector?Mn=function(e,t){return e.webkitMatchesSelector(t)}:On.mozMatchesSelector&&(Mn=function(e,t){return e.mozMatchesSelector(t)});var Ln=(0,o.A)(function e(t){(0,r.A)(this,e),this._el=t},[{key:"getComputedStyle",value:function(){return Pn(window.getComputedStyle(this._el))}},{key:"getMatchedCSSRules",value:function(){var e=this,t=[];return k()(document.styleSheets,function(n){try{if(!n.cssRules)return}catch(e){return}k()(n.cssRules,function(n){var r=!1;try{r=e._elMatchesSel(n.selectorText)}catch(e){}r&&t.push({selectorText:n.selectorText,style:Pn(n.style)})})}),t}},{key:"_elMatchesSel",value:function(e){return Mn(this._el,e)}}]);function Rn(e,t){return(e=Dn(e))>(t=Dn(t))?1:e<t?-1:0}function Dn(e){return 45===e?123:e}var Fn=n(128);function zn(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).noAttr,n=void 0!==t&&t;if(e.nodeType===Node.TEXT_NODE)return'<span class="'.concat(Me("tag-name-color"),'">(text)</span>');if(e.nodeType===Node.COMMENT_NODE)return'<span class="'.concat(Me("tag-name-color"),'">\x3c!--\x3e</span>');if(pn()(e))return'<span class="'.concat(Me("tag-name-color"),'">#shadow-root</span>');var r=e.id,o=e.className,i=e.attributes,a='<span class="eruda-tag-name-color">'.concat(e.tagName.toLowerCase(),"</span>");if(""!==r&&(a+='<span class="eruda-function-color">#'.concat(r,"</span>")),C()(o)){var s="";k()(o.split(/\s+/g),function(e){""!==e.trim()&&(s+=".".concat(e))}),a+='<span class="eruda-attribute-name-color">'.concat(s,"</span>")}return n||k()(i,function(e){var t=e.name;"id"!==t&&"class"!==t&&"style"!==t&&(a+=' <span class="eruda-attribute-name-color">'.concat(t,'</span><span class="eruda-operator-color">="</span><span class="eruda-string-color">').concat(e.value,'</span><span class="eruda-operator-color">"</span>'))}),a}var Bn=(0,o.A)(function e(t,n){var o=this;(0,r.A)(this,e),(0,l.A)(this,"hide",function(){o._$container.hide(),o._disableObserver(),Zt.domain("Overlay").hideHighlight()}),(0,l.A)(this,"_highlight",function(e){var t=o._curEl,n={showInfo:!1};e&&"all"!==e?"margin"===e?n.marginColor="rgba(246, 178, 107, .66)":"border"===e?n.borderColor="rgba(255, 229, 153, .66)":"padding"===e?n.paddingColor="rgba(147, 196, 125, .55)":"content"===e&&(n.contentColor="rgba(111, 168, 220, .66)"):U()(n,{showInfo:!0,contentColor:"rgba(111, 168, 220, .66)",paddingColor:"rgba(147, 196, 125, .55)",borderColor:"rgba(255, 229, 153, .66)",marginColor:"rgba(246, 178, 107, .66)"});var r=Zt.domain("DOM").getNodeId({node:t}).nodeId;Zt.domain("Overlay").highlightNode({nodeId:r,highlightConfig:n})}),this._$container=t,this._devtools=n,this._curEl=document.documentElement,this._initObserver(),this._initCfg(),this._initTpl(),this._bindEvent()},[{key:"show",value:function(e){this._curEl=e,this._rmDefComputedStyle=!0,this._computedStyleSearchKeyword="",this._enableObserver(),this._render(),this._highlight()}},{key:"destroy",value:function(){this._disableObserver(),this.restoreEventTarget(),this._rmCfg()}},{key:"overrideEventTarget",value:function(){var e=Zn(),t=this._origAddEvent=e.addEventListener,n=this._origRmEvent=e.removeEventListener;e.addEventListener=function(e,n,r){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(un()(e)&&ct()(n)&&kn()(r)){var o=e.erudaEvents=e.erudaEvents||{};o[t]=o[t]||[],o[t].push({listener:n,listenerStr:n.toString(),useCapture:r})}}(this,e,n,r),t.apply(this,arguments)},e.removeEventListener=function(e,t,r){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(un()(e)&&ct()(n)&&kn()(r)){var o=e.erudaEvents;if(o&&o[t]){for(var i=o[t],a=0,s=i.length;a<s;a++)if(i[a].listener===n){i.splice(a,1);break}0===i.length&&delete o[t],0===L()(o).length&&delete e.erudaEvents}}}(this,e,t,r),n.apply(this,arguments)}}},{key:"restoreEventTarget",value:function(){var e=Zn();this._origAddEvent&&(e.addEventListener=this._origAddEvent),this._origRmEvent&&(e.removeEventListener=this._origRmEvent)}},{key:"_initTpl",value:function(){var e=this._$container,t='<div class="'.concat(Me("control"),'">\n      <span class="').concat(Me("icon-arrow-left back"),'"></span>\n      <span class="').concat(Me("element-name"),'"></span>\n      <span class="').concat(Me("icon-refresh refresh"),'"></span>\n    </div>\n    <div class="').concat(Me("element"),'">\n      <div class="').concat(Me("attributes section"),'"></div>\n      <div class="').concat(Me("styles section"),'"></div>\n      <div class="').concat(Me("computed-style section"),'"></div>\n      <div class="').concat(Me("listeners section"),'"></div>\n    </div>');e.html(t),this._$elementName=e.find(Me(".element-name")),this._$attributes=e.find(Me(".attributes")),this._$styles=e.find(Me(".styles")),this._$listeners=e.find(Me(".listeners")),this._$computedStyle=e.find(Me(".computed-style"));var n=Cn()("div");this._$boxModel=v()(n),this._boxModel=new Fn.A(n)}},{key:"_toggleAllComputedStyle",value:function(){this._rmDefComputedStyle=!this._rmDefComputedStyle,this._render()}},{key:"_render",value:function(){var e=this._getData(this._curEl),t=this._$attributes,n=this._$elementName,r=this._$styles,o=this._$computedStyle,i=this._$listeners;n.html(e.name);var a="<tr><td>Empty</td></tr>";Nt()(e.attributes)||(a=_e()(e.attributes,function(e){var t=e.name,n=e.value;return'<tr>\n          <td class="'.concat(Me("attribute-name-color"),'">').concat(jt()(t),'</td>\n          <td class="').concat(Me("string-color"),'">').concat(n,"</td>\n        </tr>")}).join("")),a='<h2>Attributes</h2>\n    <div class="'.concat(Me("table-wrapper"),'">\n      <table>\n        <tbody>\n          ').concat(a," \n        </tbody>\n      </table>\n    </div>"),t.html(a);var s="";if(Nt()(e.styles))r.hide();else{var l=_e()(e.styles,function(e){var t=e.selectorText,n=e.style;return n=_e()(n,function(e,t){return'<div class="'.concat(Me("rule"),'"><span>').concat(jt()(t),"</span>: ").concat(e,";</div>")}).join(""),'<div class="'.concat(Me("style-rules"),'">\n          <div>').concat(jt()(t)," {</div>\n            ").concat(n,"\n          <div>}</div>\n        </div>")}).join("");s='<h2>Styles</h2>\n      <div class="'.concat(Me("style-wrapper"),'">\n        ').concat(l,"\n      </div>"),r.html(s).show()}var c="";if(e.computedStyle){var u=Me('<div class="btn toggle-all-computed-style">\n        <span class="icon-expand"></span>\n      </div>');e.rmDefComputedStyle&&(u=Me('<div class="btn toggle-all-computed-style">\n          <span class="icon-compress"></span>\n        </div>')),c="<h2>\n        Computed Style\n        ".concat(u,'\n        <div class="').concat(Me("btn computed-style-search"),'">\n          <span class="').concat(Me("icon-filter"),'"></span>\n        </div>\n        ').concat(e.computedStyleSearchKeyword?'<div class="'.concat(Me("btn filter-text"),'">').concat(jt()(e.computedStyleSearchKeyword),"</div>"):"",'\n      </h2>\n      <div class="').concat(Me("box-model"),'"></div>\n      <div class="').concat(Me("table-wrapper"),'">\n        <table>\n          <tbody>\n          ').concat(_e()(e.computedStyle,function(e,t){return'<tr>\n              <td class="'.concat(Me("key"),'">').concat(jt()(t),"</td>\n              <td>").concat(e,"</td>\n            </tr>")}).join(""),"\n          </tbody>\n        </table>\n      </div>"),o.html(c).show(),this._boxModel.setOption("element",this._curEl),o.find(Me(".box-model")).append(this._$boxModel.get(0))}else o.text("").hide();var d="";e.listeners?(d=_e()(e.listeners,function(e,t){return e=_e()(e,function(e){var t=e.useCapture,n=e.listenerStr;return"<li ".concat(t?'class="'.concat(Me("capture"),'"'):"",">").concat(jt()(n),"</li>")}).join(""),'<div class="'.concat(Me("listener"),'">\n          <div class="').concat(Me("listener-type"),'">').concat(jt()(t),'</div>\n          <ul class="').concat(Me("listener-content"),'">\n            ').concat(e,"\n          </ul>\n        </div>")}).join(""),d='<h2>Event Listeners</h2>\n      <div class="'.concat(Me("listener-wrapper"),'">\n        ').concat(d," \n      </div>"),i.html(d).show()):i.hide(),this._$container.show()}},{key:"_getData",value:function(e){var t={},n=new Ln(e),r=e.className,o=e.id,i=e.attributes,a=e.tagName;t.computedStyleSearchKeyword=this._computedStyleSearchKeyword,t.attributes=qn(i),t.name=zn({tagName:a,id:o,className:r,attributes:i});var s=e.erudaEvents;if(s&&0!==L()(s).length&&(t.listeners=s),Wn(a))return t;var l=n.getComputedStyle(),c=n.getMatchedCSSRules();c.unshift(function(e){for(var t={selectorText:"element.style",style:{}},n=0,r=e.length;n<r;n++){var o=e[n];t.style[o]=e[o]}return t}(e.style)),c.forEach(function(e){return Un(e.style)}),t.styles=c,this._rmDefComputedStyle&&(l=function(e,t){var n={},r=["display","width","height"];return k()(t,function(e){r=r.concat(L()(e.style))}),r=wn()(r),k()(e,function(e,t){E()(r,t)&&(n[t]=e)}),n}(l,c)),t.rmDefComputedStyle=this._rmDefComputedStyle;var u=vn()(t.computedStyleSearchKeyword);return u&&(l=bn()(l,function(e,t){return E()(t,u)||E()(e,u)})),Un(l),t.computedStyle=l,t}},{key:"_bindEvent",value:function(){var e=this,t=this._devtools;this._$container.on("click",Me(".toggle-all-computed-style"),function(){return e._toggleAllComputedStyle()}).on("click",Me(".computed-style-search"),function(){nt.A.prompt("Filter").then(function(t){vt()(t)||(t=je()(t),e._computedStyleSearchKeyword=t,e._render())})}).on("click",".eruda-listener-content",function(){var e=v()(this).text(),n=t.get("sources");n&&(n.set("js",e),t.showTool("sources"))}).on("click",Me(".element-name"),function(){var n=t.get("sources");n&&(n.set("object",e._curEl),t.showTool("sources"))}).on("click",Me(".back"),this.hide).on("click",Me(".refresh"),function(){e._render(),t.notify("Refreshed",{icon:"success"})}),this._boxModel.on("highlight",this._highlight)}},{key:"_initObserver",value:function(){var e=this;this._observer=new(En())(function(t){k()(t,function(t){return e._handleMutation(t)})})}},{key:"_enableObserver",value:function(){this._observer.observe(document.documentElement,{attributes:!0,childList:!0,subtree:!0})}},{key:"_disableObserver",value:function(){this._observer.disconnect()}},{key:"_handleMutation",value:function(e){if(!Oe(e.target)&&"attributes"===e.type){if(e.target!==this._curEl)return;this._render()}}},{key:"_rmCfg",value:function(){var e=this.config,t=this._devtools.get("settings");t&&t.remove(e,"overrideEventTarget").remove(e,"observeElement").remove("Elements")}},{key:"_initCfg",value:function(){var e=this,t=this.config=le.createCfg("elements",{overrideEventTarget:!0});t.get("overrideEventTarget")&&this.overrideEventTarget(),t.on("change",function(t,n){if("overrideEventTarget"===t)return n?e.overrideEventTarget():e.restoreEventTarget()});var n=this._devtools.get("settings");n&&(n.text("Elements").switch(t,"overrideEventTarget","Catch Event Listeners"),n.separator())}}]);function Un(e){k()(e,function(t,n){return e[n]=Gn(t)})}var qn=function(e){return _e()(e,function(e){var t=e.value,n=e.name;return t=jt()(t),("src"===n||"href"===n)&&!$e()(t,"data")&&(t=Qn(t)),"style"===n&&(t=Gn(t)),{name:n,value:t}})},Vn=/rgba?\((.*?)\)/g,Hn=/url\("?(.*?)"?\)/g;function Gn(e){return(e=O()(e)).replace(Vn,'<span class="eruda-style-color" style="background-color: $&"></span>$&').replace(Hn,function(e,t){return'url("'.concat(Qn(t),'")')})}var Kn=["script","style","meta","title","link","head"],Wn=function(e){Kn.indexOf(e.toLowerCase())},Qn=function(e){return'<a href="'.concat(e,'" target="_blank">').concat(e,"</a>")},Zn=function(){return Sn()(window,"EventTarget.prototype")||window.Node.prototype};function Yn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Yn=function(){return!!e})()}function Jn(e,t,n,r){var o=(0,f.A)((0,a.A)(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}var $n=function(e){function t(){var e,o,s,c;return(0,r.A)(this,t),o=this,s=t,s=(0,a.A)(s),e=(0,i.A)(o,Yn()?Reflect.construct(s,[],(0,a.A)(o).constructor):s.apply(o,c)),(0,l.A)(e,"_showDetail",function(){e._isShow&&e._curNode&&(e._curNode.nodeType===Node.ELEMENT_NODE?e._detail.show(e._curNode):e._detail.show(e._curNode.parentNode||e._curNode.host))}),(0,l.A)(e,"_back",function(){if(e._curNode!==e._htmlEl){for(var t=e._curParentQueue,n=t.shift();!Xn(n);)n=t.shift();e.set(n)}}),(0,l.A)(e,"_updateScale",function(t){e._splitMediaQuery.setQuery("screen and (min-width: ".concat(680*t,"px)"))}),(0,l.A)(e,"_deleteNode",function(){var t=e._curNode;t.parentNode&&t.parentNode.removeChild(t)}),(0,l.A)(e,"_copyNode",function(){var t=e._curNode;t.nodeType===Node.ELEMENT_NODE?Tt()(t.outerHTML):Tt()(t.nodeValue),e._container.notify("Copied",{icon:"success"})}),(0,l.A)(e,"_toggleSelect",function(){e._$el.find(Me(".select")).toggleClass(Me("active")),e._selectElement=!e._selectElement,e._selectElement?(Zt.domain("Overlay").setInspectMode({mode:"searchForNode",highlightConfig:{showInfo:!hn()(),showRulers:!1,showAccessibilityInfo:!hn()(),showExtensionLines:!1,contrastAlgorithm:"aa",contentColor:"rgba(111, 168, 220, .66)",paddingColor:"rgba(147, 196, 125, .55)",borderColor:"rgba(255, 229, 153, .66)",marginColor:"rgba(246, 178, 107, .66)"}}),e._container.hide()):(Zt.domain("Overlay").setInspectMode({mode:"none"}),Zt.domain("Overlay").hideHighlight())}),(0,l.A)(e,"_inspectNodeRequested",function(t){var n=t.backendNodeId;e._container.show(),e._toggleSelect();try{var r=Zt.domain("DOM").getNode({nodeId:n}).node;e.select(r)}catch(e){}}),(0,l.A)(e,"_setNode",function(t){if(t!==e._curNode){e._curNode=t,e._renderCrumbs();for(var n=[],r=t.parentNode;r;)n.push(r),r=r.parentNode;e._curParentQueue=n,e._splitMode&&e._showDetail(),e._updateButtons(),e._updateHistory()}}),e._style=oe(n(9111)),e.name="elements",e._selectElement=!1,e._observeElement=!0,e._history=[],u().mixin(e),e}return(0,s.A)(t,e),(0,o.A)(t,[{key:"init",value:function(e,n){var r=this;Jn(t,"init",this,3)([e]),this._container=n,this._initTpl(),this._htmlEl=document.documentElement,this._detail=new Bn(this._$detail,n),this.config=this._detail.config,this._splitMediaQuery=new(en())("screen and (min-width: 680px)"),this._splitMode=this._splitMediaQuery.isMatch(),this._domViewer=new mn.A(this._$domViewer.get(0),{node:this._htmlEl,ignore:function(e){return Oe(e)||function(e){for(;e;){var t="";if(e.getAttribute&&(t=e.getAttribute("class")||""),E()(t,"__chobitsu-hide__"))return!0;e=e.parentNode}return!1}(e)}}),this._domViewer.expand(),this._bindEvent(),Zt.domain("Overlay").enable(),ue()(function(){return r._updateHistory()})}},{key:"show",value:function(){Jn(t,"show",this,3)([]),this._isShow=!0,this._curNode?this._splitMode&&this._showDetail():this.select(document.body)}},{key:"hide",value:function(){Jn(t,"hide",this,3)([]),this._isShow=!1,Zt.domain("Overlay").hideHighlight()}},{key:"select",value:function(e){return this._domViewer.select(e),this._setNode(e),this.emit("change",e),this}},{key:"destroy",value:function(){Jn(t,"destroy",this,3)([]),h.off(h.SCALE,this._updateScale),oe.remove(this._style),this._detail.destroy(),Zt.domain("Overlay").off("inspectNodeRequested",this._inspectNodeRequested),Zt.domain("Overlay").disable(),this._splitMediaQuery.removeAllListeners()}},{key:"_updateButtons",value:function(){var e=this._$control,t=e.find(Me(".show-detail")),n=e.find(Me(".copy-node")),r=e.find(Me(".delete-node")),o=Me("icon-disabled");t.addClass(o),n.addClass(o),r.addClass(o);var i=this._curNode;i&&!pn()(i)&&(i!==document.documentElement&&i!==document.body&&r.rmClass(o),n.rmClass(o),i.nodeType===Node.ELEMENT_NODE&&t.rmClass(o))}},{key:"_initTpl",value:function(){var e=this._$el;e.html(Me('<div class="elements">\n        <div class="control">\n          <span class="icon icon-select select"></span>\n          <span class="icon icon-eye show-detail"></span>\n          <span class="icon icon-copy copy-node"></span>\n          <span class="icon icon-delete delete-node"></span>\n        </div>\n        <div class="dom-viewer-container">\n          <div class="dom-viewer"></div>\n        </div>\n        <div class="crumbs"></div>\n      </div>\n      <div class="detail"></div>')),this._$detail=e.find(Me(".detail")),this._$domViewer=e.find(Me(".dom-viewer")),this._$control=e.find(Me(".control")),this._$crumbs=e.find(Me(".crumbs"))}},{key:"_renderCrumbs",value:function(){var e=function(e){for(var t=[],n=0;e;)t.push({text:zn(e,{noAttr:!0}),idx:n++}),pn()(e)&&(e=e.host),e=!e.parentElement&&pn()(e.parentNode)?e.parentNode:e.parentElement;return t.reverse()}(this._curNode),t="";Nt()(e)||(t=_e()(e,function(e){var t=e.text,n=e.idx;return'<li class="'.concat(Me("crumb"),'" data-idx="').concat(n,'">').concat(t,"</div></li>")}).join("")),this._$crumbs.html(t)}},{key:"_bindEvent",value:function(){var e=this,t=this;this._$el.on("click",Me(".crumb"),function(){for(var e=Ne()(v()(this).data("idx")),n=t._curNode;e--&&n.parentElement;)n=n.parentElement;Xn(n)&&t.select(n)}),this._$control.on("click",Me(".select"),this._toggleSelect).on("click",Me(".show-detail"),this._showDetail).on("click",Me(".copy-node"),this._copyNode).on("click",Me(".delete-node"),this._deleteNode),this._domViewer.on("select",this._setNode).on("deselect",this._back),Zt.domain("Overlay").on("inspectNodeRequested",this._inspectNodeRequested),this._splitMediaQuery.on("match",function(){e._splitMode=!0,e._showDetail()}),this._splitMediaQuery.on("unmatch",function(){e._splitMode=!1,e._detail.hide()}),h.on(h.SCALE,this._updateScale)}},{key:"_updateHistory",value:function(){var e=this._container.get("console");if(e){var t=this._history;t.unshift(this._curNode),t.length>5&&t.pop();for(var n=0;n<5;n++)e.setGlobal("$".concat(n),t[n])}}}])}(m),Xn=function(e){return un()(e)&&e.parentNode},er=n(3981),tr=n.n(er),nr=n(4866),rr=n.n(nr),or=null,ir=[{name:"Border All",fn:function(){if(or)return oe.remove(or),void(or=null);or=oe("* { outline: 2px dashed #707d8b; outline-offset: -3px; }",document.head)},desc:"Add color borders to all elements"},{name:"Refresh Page",fn:function(){var e=new(ge());e.setQuery("timestamp",tr()()),window.location.replace(e.toString())},desc:"Add timestamp to url and refresh"},{name:"Search Text",fn:function(){nt.A.prompt("Enter the text").then(function(e){var t,n,r;e&&""!==je()(e)&&(t=e,n=document.body,r=new RegExp(t,"ig"),ar(n,function(e){var t=v()(e);if(t.hasClass("eruda-search-highlight-block"))return document.createTextNode(t.text())}),ar(n,function(e){if(3===e.nodeType){var t=e.nodeValue;if((t=t.replace(r,function(e){return'<span class="eruda-keyword">'.concat(e,"</span>")}))!==e.nodeValue){var n=v()(document.createElement("div"));return n.html(t),n.addClass("eruda-search-highlight-block"),n.get(0)}}}))})},desc:"Highlight given text on page"},{name:"Edit Page",fn:function(){var e=document.body;e.contentEditable="true"!==e.contentEditable},desc:"Toggle body contentEditable"},{name:"Fit Screen",fn:function(){var e=document.body,t=document.documentElement,n=v()(e);if(n.data("scaled"))window.scrollTo(0,+n.data("scaled")),n.rmAttr("data-scaled"),n.css("transform","none");else{var r=Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight),o=Math.max(document.documentElement.clientHeight,window.innerHeight||0),i=o/r;n.css("transform","scale(".concat(i,")")),n.data("scaled",window.scrollY),window.scrollTo(0,r/2-o/2)}},desc:"Scale down the whole page to fit screen"},{name:"Load Vue Plugin",fn:function(){sr("vue")},desc:"Vue devtools"},{name:"Load Monitor Plugin",fn:function(){sr("monitor")},desc:"Display page fps, memory and dom nodes"},{name:"Load Features Plugin",fn:function(){sr("features")},desc:"Browser feature detections"},{name:"Load Timing Plugin",fn:function(){sr("timing")},desc:"Show performance and resource timing"},{name:"Load Code Plugin",fn:function(){sr("code")},desc:"Edit and run JavaScript"},{name:"Load Benchmark Plugin",fn:function(){sr("benchmark")},desc:"Run JavaScript benchmarks"},{name:"Load Geolocation Plugin",fn:function(){sr("geolocation")},desc:"Test geolocation"},{name:"Load Orientation Plugin",fn:function(){sr("orientation")},desc:"Test orientation api"},{name:"Load Touches Plugin",fn:function(){sr("touches")},desc:"Visualize screen touches"}];function ar(e,t){var n=e.childNodes;if(!Oe(e)){for(var r=0,o=n.length;r<o;r++){var i=ar(n[r],t);i&&e.replaceChild(i,n[r])}return t(e)}}function sr(e){var t="eruda"+Ye()(e);if(!window[t]){var n=location.protocol;$e()(n,"http")||(n="http:"),rr()("".concat(n,"//cdn.jsdelivr.net/npm/eruda-").concat(e,"@").concat(lr[e]),function(n){if(!n||!window[t])return He.error("Fail to load plugin "+e);h.emit(h.ADD,window[t]),h.emit(h.SHOW,e)})}}oe(n(688),document.head);var lr={monitor:"1.1.1",features:"2.1.0",timing:"2.0.1",code:"2.2.0",benchmark:"2.0.1",geolocation:"2.1.0",orientation:"2.1.1",touches:"2.1.0",vue:"1.1.1"},cr=n(961),ur=n.n(cr);function dr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(dr=function(){return!!e})()}function hr(e,t,n,r){var o=(0,f.A)((0,a.A)(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}var fr=function(e){function t(){var e,o,s,l;return(0,r.A)(this,t),o=this,s=t,s=(0,a.A)(s),(e=(0,i.A)(o,dr()?Reflect.construct(s,[],(0,a.A)(o).constructor):s.apply(o,l)))._style=oe(n(9861)),e.name="snippets",e._snippets=[],e}return(0,s.A)(t,e),(0,o.A)(t,[{key:"init",value:function(e){hr(t,"init",this,3)([e]),this._bindEvent(),this._addDefSnippets()}},{key:"destroy",value:function(){hr(t,"destroy",this,3)([]),oe.remove(this._style)}},{key:"add",value:function(e,t,n){return this._snippets.push({name:e,fn:t,desc:n}),this._render(),this}},{key:"remove",value:function(e){return ur()(this._snippets,function(t){return t.name===e}),this._render(),this}},{key:"run",value:function(e){for(var t=this._snippets,n=0,r=t.length;n<r;n++)t[n].name===e&&this._run(n);return this}},{key:"clear",value:function(){return this._snippets=[],this._render(),this}},{key:"_bindEvent",value:function(){var e=this;this._$el.on("click",".eruda-run",function(){var t=v()(this).data("idx");e._run(t)})}},{key:"_run",value:function(e){this._snippets[e].fn.call(null)}},{key:"_addDefSnippets",value:function(){var e=this;k()(ir,function(t){e.add(t.name,t.fn,t.desc)})}},{key:"_render",value:function(){var e=_e()(this._snippets,function(e,t){return'<div class="'.concat(Me("section run"),'" data-idx="').concat(t,'">\n        <h2 class="').concat(Me("name"),'">').concat(jt()(e.name),'\n          <div class="').concat(Me("btn"),'">\n            <span class="').concat(Me("icon-play"),'"></span>\n          </div>\n        </h2>\n        <div class="').concat(Me("description"),'">\n          ').concat(jt()(e.desc),"\n        </div>\n      </div>")}).join("");this._renderHtml(e)}},{key:"_renderHtml",value:function(e){e!==this._lastHtml&&(this._lastHtml=e,this._$el.html(e))}}])}(m),pr=n(4497),mr=n.n(pr),gr=n(311),vr=n.n(gr),yr=n(769),br=n.n(yr),xr=n(4069),wr=n.n(xr),_r=(0,o.A)(function e(t,n,o,i){var a=this;(0,r.A)(this,e),(0,l.A)(this,"_updateGridHeight",function(e){a._dataGrid.setOption({minHeight:60*e,maxHeight:223*e})}),this._type=i,this._$container=t,this._devtools=n,this._resources=o,this._selectedItem=null,this._storeData=[],this._initTpl(),this._dataGrid=new Yt.A(this._$dataGrid.get(0),{columns:[{id:"key",title:"Key",weight:30},{id:"value",title:"Value",weight:90}],minHeight:60,maxHeight:223}),this._bindEvent()},[{key:"destroy",value:function(){h.off(h.SCALE,this._updateGridHeight)}},{key:"refresh",value:function(){var e=this._dataGrid;this._refreshStorage(),e.clear(),k()(this._storeData,function(t){var n=t.key,r=t.val;e.append({key:n,value:r},{selectable:!0})})}},{key:"_refreshStorage",value:function(){var e=this._resources,t=Ie(this._type,!1);if(t){var n=[];t=JSON.parse(JSON.stringify(t)),k()(t,function(t,r){C()(t)&&(e.config.get("hideErudaSetting")&&($e()(r,"eruda")||"active-eruda"===r)||n.push({key:r,val:Mt()(t,200)}))}),this._storeData=n}}},{key:"_updateButtons",value:function(){var e=this._$container,t=e.find(Me(".show-detail")),n=e.find(Me(".delete-storage")),r=e.find(Me(".copy-storage")),o=Me("btn-disabled");t.addClass(o),n.addClass(o),r.addClass(o),this._selectedItem&&(t.rmClass(o),n.rmClass(o),r.rmClass(o))}},{key:"_initTpl",value:function(){var e=this._$container,t=this._type;e.html(Me('<h2 class="title">\n      '.concat("local"===t?"Local":"Session",' Storage\n      <div class="btn refresh-storage">\n        <span class="icon icon-refresh"></span>\n      </div>\n      <div class="btn show-detail btn-disabled">\n        <span class="icon icon-eye"></span>\n      </div>\n      <div class="btn copy-storage btn-disabled">\n        <span class="icon icon-copy"></span>\n      </div>\n      <div class="btn delete-storage btn-disabled">\n        <span class="icon icon-delete"></span>\n      </div>\n      <div class="btn clear-storage">\n        <span class="icon icon-clear"></span>\n      </div>\n      <div class="btn filter">\n        <span class="icon icon-filter"></span>\n      </div>\n      <div class="btn filter-text"></div>\n    </h2>\n    <div class="data-grid"></div>'))),this._$dataGrid=e.find(Me(".data-grid")),this._$filterText=e.find(Me(".filter-text"))}},{key:"_getVal",value:function(e){return"local"===this._type?localStorage.getItem(e):sessionStorage.getItem(e)}},{key:"_bindEvent",value:function(){var e=this,t=this._type,n=this._devtools;function r(e,t){var r=n.get("sources");if(r)return r.set(e,t),n.showTool("sources"),!0}this._$container.on("click",Me(".refresh-storage"),function(){n.notify("Refreshed",{icon:"success"}),e.refresh()}).on("click",Me(".clear-storage"),function(){k()(e._storeData,function(e){"local"===t?localStorage.removeItem(e.key):sessionStorage.removeItem(e.key)}),e.refresh()}).on("click",Me(".show-detail"),function(){var t=e._selectedItem,n=e._getVal(t);try{r("object",JSON.parse(n))}catch(e){r("raw",n)}}).on("click",Me(".copy-storage"),function(){var t=e._selectedItem;Tt()(e._getVal(t)),n.notify("Copied",{icon:"success"})}).on("click",Me(".filter"),function(){nt.A.prompt("Filter").then(function(t){vt()(t)||(t=je()(t),e._$filterText.text(t),e._dataGrid.setOption("filter",t))})}).on("click",Me(".delete-storage"),function(){var n=e._selectedItem;"local"===t?localStorage.removeItem(n):sessionStorage.removeItem(n),e.refresh()}),this._dataGrid.on("select",function(t){e._selectedItem=t.data.key,e._updateButtons()}).on("deselect",function(){e._selectedItem=null,e._updateButtons()}),h.on(h.SCALE,this._updateGridHeight)}}]);function kr(e,t){e.rmClass(Me("ok")).rmClass(Me("danger")).rmClass(Me("warn")).addClass(Me(t))}function Ar(e,t){if(0===t)return"";var n=0,r=0;switch(e){case"cookie":n=30,r=60;break;case"script":n=5,r=10;break;case"stylesheet":n=4,r=8;break;case"image":n=50,r=100}return t>=r?"danger":t>=n?"warn":"ok"}var Sr=(0,o.A)(function e(t,n){(0,r.A)(this,e),this._$container=t,this._devtools=n,this._selectedItem=null,this._initTpl(),this._dataGrid=new Yt.A(this._$dataGrid.get(0),{columns:[{id:"key",title:"Key",weight:30},{id:"value",title:"Value",weight:90}],minHeight:60,maxHeight:223}),this._bindEvent()},[{key:"refresh",value:function(){var e=this._$container,t=this._dataGrid,n=Zt.domain("Network").getCookies().cookies,r=_e()(n,function(e){return{key:e.name,val:e.value}});t.clear(),k()(r,function(e){var n=e.key,r=e.val;t.append({key:n,value:r},{selectable:!0})}),kr(e,Ar("cookie",r.length))}},{key:"_initTpl",value:function(){var e=this._$container;e.html(Me('<h2 class="title">\n      Cookie\n      <div class="btn refresh-cookie">\n        <span class="icon-refresh"></span>\n      </div>\n      <div class="btn show-detail btn-disabled">\n        <span class="icon icon-eye"></span>\n      </div>\n      <div class="btn copy-cookie btn-disabled">\n        <span class="icon icon-copy"></span>\n      </div>\n      <div class="btn delete-cookie btn-disabled">\n        <span class="icon icon-delete"></span>\n      </div>\n      <div class="btn clear-cookie">\n        <span class="icon-clear"></span>\n      </div>\n      <div class="btn filter" data-type="cookie">\n        <span class="icon-filter"></span>\n      </div>\n      <div class="btn filter-text"></div>\n    </h2>\n    <div class="data-grid"></div>')),this._$dataGrid=e.find(Me(".data-grid")),this._$filterText=e.find(Me(".filter-text"))}},{key:"_updateButtons",value:function(){var e=this._$container,t=e.find(Me(".show-detail")),n=e.find(Me(".delete-cookie")),r=e.find(Me(".copy-cookie")),o=Me("btn-disabled");t.addClass(o),n.addClass(o),r.addClass(o),this._selectedItem&&(t.rmClass(o),n.rmClass(o),r.rmClass(o))}},{key:"_getVal",value:function(e){for(var t=Zt.domain("Network").getCookies().cookies,n=0,r=t.length;n<r;n++)if(t[n].name===e)return t[n].value;return""}},{key:"_bindEvent",value:function(){var e=this,t=this._devtools;function n(e,n){var r=t.get("sources");if(r)return r.set(e,n),t.showTool("sources"),!0}this._$container.on("click",Me(".refresh-cookie"),function(){t.notify("Refreshed",{icon:"success"}),e.refresh()}).on("click",Me(".clear-cookie"),function(){Zt.domain("Storage").clearDataForOrigin({storageTypes:"cookies"}),e.refresh()}).on("click",Me(".delete-cookie"),function(){var t=e._selectedItem;Zt.domain("Network").deleteCookies({name:t}),e.refresh()}).on("click",Me(".show-detail"),function(){var t=e._selectedItem,r=e._getVal(t);try{n("object",JSON.parse(r))}catch(e){n("raw",r)}}).on("click",Me(".copy-cookie"),function(){var n=e._selectedItem;Tt()(e._getVal(n)),t.notify("Copied",{icon:"success"})}).on("click",Me(".filter"),function(){nt.A.prompt("Filter").then(function(t){vt()(t)||(t=je()(t),e._filter=t,e._$filterText.text(t),e._dataGrid.setOption("filter",t))})}),this._dataGrid.on("select",function(t){e._selectedItem=t.data.key,e._updateButtons()}).on("deselect",function(){e._selectedItem=null,e._updateButtons()})}}]);function Nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Cr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Cr=function(){return!!e})()}function jr(e,t,n,r){var o=(0,f.A)((0,a.A)(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}var Er=function(e){function t(){var e,o,s,l;return(0,r.A)(this,t),o=this,s=t,s=(0,a.A)(s),(e=(0,i.A)(o,Cr()?Reflect.construct(s,[],(0,a.A)(o).constructor):s.apply(o,l)))._style=oe(n(1443)),e.name="resources",e._hideErudaSetting=!1,e._observeElement=!0,e}return(0,s.A)(t,e),(0,o.A)(t,[{key:"init",value:function(e,n){jr(t,"init",this,3)([e]),this._container=n,this._initTpl(),this._localStorage=new _r(this._$localStorage,n,this,"local"),this._sessionStorage=new _r(this._$sessionStorage,n,this,"session"),this._cookie=new Sr(this._$cookie,n),this._bindEvent(),this._initObserver(),this._initCfg()}},{key:"refresh",value:function(){return this.refreshLocalStorage().refreshSessionStorage().refreshCookie().refreshScript().refreshStylesheet().refreshIframe().refreshImage()}},{key:"destroy",value:function(){jr(t,"destroy",this,3)([]),this._localStorage.destroy(),this._sessionStorage.destroy(),this._disableObserver(),oe.remove(this._style),this._rmCfg()}},{key:"refreshScript",value:function(){var e=[];v()("script").each(function(){var t=this.src;""!==t&&e.push(t)});var t=Ar("script",(e=wn()(e)).length),n="<li>Empty</li>";Nt()(e)||(n=_e()(e,function(e){return e=jt()(e),'<li><a href="'.concat(e,'" target="_blank" class="').concat(Me("js-link"),'">').concat(e,"</a></li>")}).join(""));var r='<h2 class="'.concat(Me("title"),'">\n      Script\n      <div class="').concat(Me("btn refresh-script"),'">\n        <span class="').concat(Me("icon-refresh"),'"></span>\n      </div>\n    </h2>\n    <ul class="').concat(Me("link-list"),'">\n      ').concat(n,"\n    </ul>"),o=this._$script;return kr(o,t),o.html(r),this}},{key:"refreshStylesheet",value:function(){var e=[];v()("link").each(function(){"stylesheet"===this.rel&&e.push(this.href)});var t=Ar("stylesheet",(e=wn()(e)).length),n="<li>Empty</li>";Nt()(e)||(n=_e()(e,function(e){return e=jt()(e),' <li><a href="'.concat(e,'" target="_blank" class="').concat(Me("css-link"),'">').concat(e,"</a></li>")}).join(""));var r='<h2 class="'.concat(Me("title"),'">\n      Stylesheet\n      <div class="').concat(Me("btn refresh-stylesheet"),'">\n        <span class="').concat(Me("icon-refresh"),'"></span>\n      </div>\n    </h2>\n    <ul class="').concat(Me("link-list"),'">\n      ').concat(n,"\n    </ul>"),o=this._$stylesheet;return kr(o,t),o.html(r),this}},{key:"refreshIframe",value:function(){var e=[];v()("iframe").each(function(){var t=v()(this).attr("src");t&&e.push(t)}),e=wn()(e);var t="<li>Empty</li>";Nt()(e)||(t=_e()(e,function(e){return e=jt()(e),'<li><a href="'.concat(e,'" target="_blank" class="').concat(Me("iframe-link"),'">').concat(e,"</a></li>")}).join(""));var n='<h2 class="'.concat(Me("title"),'">\n      Iframe\n      <div class="').concat(Me("btn refresh-iframe"),'">\n        <span class="').concat(Me("icon-refresh"),'"></span>\n      </div>\n    </h2>\n    <ul class="').concat(Me("link-list"),'">\n      ').concat(t,"\n    </ul>");return this._$iframe.html(n),this}},{key:"refreshLocalStorage",value:function(){return this._localStorage.refresh(),this}},{key:"refreshSessionStorage",value:function(){return this._sessionStorage.refresh(),this}},{key:"refreshCookie",value:function(){return this._cookie.refresh(),this}},{key:"refreshImage",value:function(){var e=[],t=this._performance=window.webkitPerformance||window.performance;t&&t.getEntries?this._performance.getEntries().forEach(function(t){if("img"===t.initiatorType||Ir(t.name)){if(E()(t.name,"exclude=true"))return;e.push(t.name)}}):v()("img").each(function(){var t=v()(this),n=t.attr("src");"true"!==t.data("exclude")&&e.push(n)}),(e=wn()(e)).sort();var n=Ar("image",e.length),r="<li>Empty</li>";Nt()(e)||(r=_e()(e,function(e){return'<li class="'.concat(Me("image"),'">\n          <img src="').concat(jt()(e),'" data-exclude="true" class="').concat(Me("img-link"),'"/>\n        </li>')}).join(""));var o='<h2 class="'.concat(Me("title"),'">\n      Image\n      <div class="').concat(Me("btn refresh-image"),'">\n        <span class="').concat(Me("icon-refresh"),'"></span>\n      </div>\n    </h2>\n    <ul class="').concat(Me("image-list"),'">\n      ').concat(r,"\n    </ul>"),i=this._$image;return kr(i,n),i.html(o),this}},{key:"show",value:function(){return jr(t,"show",this,3)([]),this._observeElement&&this._enableObserver(),this.refresh()}},{key:"hide",value:function(){return this._disableObserver(),jr(t,"hide",this,3)([])}},{key:"_initTpl",value:function(){var e=this._$el;e.html(Me('<div class="section local-storage"></div>\n      <div class="section session-storage"></div>\n      <div class="section cookie"></div>\n      <div class="section script"></div>\n      <div class="section stylesheet"></div>\n      <div class="section iframe"></div>\n      <div class="section image"></div>')),this._$localStorage=e.find(Me(".local-storage")),this._$sessionStorage=e.find(Me(".session-storage")),this._$cookie=e.find(Me(".cookie")),this._$script=e.find(Me(".script")),this._$stylesheet=e.find(Me(".stylesheet")),this._$iframe=e.find(Me(".iframe")),this._$image=e.find(Me(".image"))}},{key:"_bindEvent",value:function(){var e=this,t=this._$el,n=this._container;function r(e,t){var r=n.get("sources");if(r)return r.set(e,t),n.showTool("sources"),!0}function o(e){return function(t){if(n.get("sources")){t.preventDefault();var o=v()(this).attr("href");"iframe"!==e&&mr()(location.href,o)?vr()({url:o,success:function(t){r(e,t)},dataType:"raw"}):r("iframe",o)}}}t.on("click",".eruda-refresh-script",function(){n.notify("Refreshed",{icon:"success"}),e.refreshScript()}).on("click",".eruda-refresh-stylesheet",function(){n.notify("Refreshed",{icon:"success"}),e.refreshStylesheet()}).on("click",".eruda-refresh-iframe",function(){n.notify("Refreshed",{icon:"success"}),e.refreshIframe()}).on("click",".eruda-refresh-image",function(){n.notify("Refreshed",{icon:"success"}),e.refreshImage()}).on("click",".eruda-img-link",function(){r("img",v()(this).attr("src"))}).on("click",".eruda-css-link",o("css")).on("click",".eruda-js-link",o("js")).on("click",".eruda-iframe-link",o("iframe"))}},{key:"_rmCfg",value:function(){var e=this.config,t=this._container.get("settings");t&&t.remove(e,"hideErudaSetting").remove(e,"observeElement").remove("Resources")}},{key:"_initCfg",value:function(){var e=this,t=this.config=le.createCfg("resources",{hideErudaSetting:!0,observeElement:!0});t.get("hideErudaSetting")&&(this._hideErudaSetting=!0),t.get("observeElement")||(this._observeElement=!1),t.on("change",function(t,n){switch(t){case"hideErudaSetting":return void(e._hideErudaSetting=n);case"observeElement":return e._observeElement=n,n?e._enableObserver():e._disableObserver()}}),this._container.get("settings").text("Resources").switch(t,"hideErudaSetting","Hide Eruda Setting").switch(t,"observeElement","Auto Refresh Elements").separator()}},{key:"_initObserver",value:function(){var e=this;this._observer=new(En())(function(t){k()(t,function(t){e._handleMutation(t)})})}},{key:"_handleMutation",value:function(e){var t=this;if(!Oe(e.target)){var n=function(e){var n=function(e){return e.tagName?e.tagName.toLowerCase():""}(e);switch(n){case"script":t.refreshScript();break;case"img":t.refreshImage();break;case"link":t.refreshStylesheet()}};if("attributes"===e.type)n(e.target);else if("childList"===e.type){n(e.target);var r,o=br()(e.addedNodes),i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Nr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(o=wr()(o,br()(e.removedNodes)));try{for(i.s();!(r=i.n()).done;)n(r.value)}catch(e){i.e(e)}finally{i.f()}}}}},{key:"_enableObserver",value:function(){this._observer.observe(document.documentElement,{attributes:!0,childList:!0,subtree:!0})}},{key:"_disableObserver",value:function(){this._observer.disconnect()}}])}(m),Tr=/\.(jpeg|jpg|gif|png)$/,Ir=function(e){return Tr.test(e)},Pr=n(6620),Or=n.n(Pr),Mr=Or()(),Lr=[{name:"Location",val:function(){return jt()(location.href)}},{name:"User Agent",val:navigator.userAgent},{name:"Device",val:["<table><tbody>",'<tr><td class="eruda-device-key">screen</td><td>'.concat(screen.width," * ").concat(screen.height,"</td></tr>"),"<tr><td>viewport</td><td>".concat(window.innerWidth," * ").concat(window.innerHeight,"</td></tr>"),"<tr><td>pixel ratio</td><td>".concat(window.devicePixelRatio,"</td></tr>"),"</tbody></table>"].join("")},{name:"System",val:["<table><tbody>",'<tr><td class="eruda-system-key">os</td><td>'.concat(nn()(),"</td></tr>"),"<tr><td>browser</td><td>".concat(Mr.name+" "+Mr.version,"</td></tr>"),"</tbody></table>"].join("")},{name:"Sponsor this Project",val:function(){return"<table><tbody>"+_e()([{name:"Open Collective",link:"https://opencollective.com/eruda"},{name:"Ko-fi",link:"https://ko-fi.com/surunzi"},{name:"Wechat Pay",link:"https://surunzi.com/wechatpay.html"}],function(e){return"<tr><td>".concat(e.name,'</td><td><a rel="noreferrer noopener" href="').concat(e.link,'" target="_blank">').concat(e.link.replace("https://",""),"</a></td></tr>")}).join(" ")+"</tbody></table>"}},{name:"About",val:'<a href="https://eruda.liriliri.io" target="_blank">Eruda v3.4.3</a>'}],Rr=n(1034),Dr=n.n(Rr);function Fr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Fr=function(){return!!e})()}function zr(e,t,n,r){var o=(0,f.A)((0,a.A)(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}var Br=function(e){function t(){var e,o,s,l;return(0,r.A)(this,t),o=this,s=t,s=(0,a.A)(s),(e=(0,i.A)(o,Fr()?Reflect.construct(s,[],(0,a.A)(o).constructor):s.apply(o,l)))._style=oe(n(4657)),e.name="info",e._infos=[],e}return(0,s.A)(t,e),(0,o.A)(t,[{key:"init",value:function(e,n){zr(t,"init",this,3)([e]),this._container=n,this._addDefInfo(),this._bindEvent()}},{key:"destroy",value:function(){zr(t,"destroy",this,3)([]),oe.remove(this._style)}},{key:"add",value:function(e,t){var n=this._infos,r=!1;return k()(n,function(n){e===n.name&&(n.val=t,r=!0)}),r||n.push({name:e,val:t}),this._render(),this}},{key:"get",value:function(e){var t,n=this._infos;return ye()(e)?Dr()(n):(k()(n,function(n){e===n.name&&(t=n.val)}),t)}},{key:"remove",value:function(e){for(var t=this._infos,n=t.length-1;n>=0;n--)t[n].name===e&&t.splice(n,1);return this._render(),this}},{key:"clear",value:function(){return this._infos=[],this._render(),this}},{key:"_addDefInfo",value:function(){var e=this;k()(Lr,function(t){return e.add(t.name,t.val)})}},{key:"_render",value:function(){var e=[];k()(this._infos,function(t){var n=t.name,r=t.val;ct()(r)&&(r=r()),e.push({name:n,val:r})});var t="<ul>".concat(_e()(e,function(e){return'<li><h2 class="'.concat(Me("title"),'">').concat(jt()(e.name),'<span class="').concat(Me("icon-copy copy"),'"></span></h2><div class="').concat(Me("content"),'">').concat(e.val,"</div></li>")}).join(""),"</ul>");this._renderHtml(t)}},{key:"_bindEvent",value:function(){var e=this._container;this._$el.on("click",Me(".copy"),function(){var t=v()(this).parent().parent(),n=t.find(Me(".title")).text(),r=t.find(Me(".content")).text();Tt()("".concat(n,": ").concat(r)),e.notify("Copied",{icon:"success"})})}},{key:"_renderHtml",value:function(e){e!==this._lastHtml&&(this._lastHtml=e,this._$el.html(e))}}])}(m),Ur=n(6911),qr=n(894),Vr=n.n(qr),Hr=n(4249),Gr=n.n(Hr),Kr=n(1714);function Wr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Wr=function(){return!!e})()}function Qr(e,t,n,r){var o=(0,f.A)((0,a.A)(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}var Zr=function(e){function t(){var e,o,s,l;return(0,r.A)(this,t),o=this,s=t,s=(0,a.A)(s),(e=(0,i.A)(o,Wr()?Reflect.construct(s,[],(0,a.A)(o).constructor):s.apply(o,l)))._style=oe(n(4831)),e.name="sources",e._showLineNum=!0,e}return(0,s.A)(t,e),(0,o.A)(t,[{key:"init",value:function(e,n){Qr(t,"init",this,3)([e]),this._container=n,this._bindEvent(),this._initCfg()}},{key:"destroy",value:function(){Qr(t,"destroy",this,3)([]),oe.remove(this._style),this._rmCfg()}},{key:"set",value:function(e,t){if("img"===e){this._isFetchingData=!0;var n=new Image,r=this;return n.onload=function(){r._isFetchingData=!1,r._data={type:"img",val:{width:this.width,height:this.height,src:t}},r._render()},n.onerror=function(){r._isFetchingData=!1},void(n.src=t)}return this._data={type:e,val:t},this._render(),this}},{key:"show",value:function(){return Qr(t,"show",this,3)([]),this._data||this._isFetchingData||this._renderDef(),this}},{key:"_renderDef",value:function(){var e=this;if(this._html)return this._data={type:"html",val:this._html},this._render();this._isGettingHtml||(this._isGettingHtml=!0,vr()({url:location.href,success:function(t){return e._html=t},error:function(){return e._html="Sorry, unable to fetch source code:("},complete:function(){e._isGettingHtml=!1,e._renderDef()},dataType:"raw"}))}},{key:"_bindEvent",value:function(){var e=this;this._container.on("showTool",function(t,n){t!==e.name&&n.name===e.name&&delete e._data})}},{key:"_rmCfg",value:function(){var e=this.config,t=this._container.get("settings");t&&t.remove(e,"showLineNum").remove("Sources")}},{key:"_initCfg",value:function(){var e=this,t=this.config=le.createCfg("sources",{showLineNum:!0});t.get("showLineNum")||(this._showLineNum=!1),t.on("change",function(t,n){"showLineNum"!==t||(e._showLineNum=n)}),this._container.get("settings").text("Sources").switch(t,"showLineNum","Show Line Numbers").separator()}},{key:"_render",value:function(){switch(this._isInit=!0,this._data.type){case"html":case"js":case"css":return this._renderCode();case"img":return this._renderImg();case"object":return this._renderObj();case"raw":return this._renderRaw();case"iframe":return this._renderIframe()}}},{key:"_renderImg",value:function(){var e=this._data.val,t=e.width,n=e.height,r=e.src;this._renderHtml('<div class="'.concat(Me("image"),'">\n      <div class="').concat(Me("breadcrumb"),'">').concat(jt()(r),'</div>\n      <div class="').concat(Me("img-container"),'" data-exclude="true">\n        <img src="').concat(jt()(r),'">\n      </div>\n      <div class="').concat(Me("img-info"),'">').concat(jt()(t)," \xd7 ").concat(jt()(n),"</div>\n    </div>"))}},{key:"_renderCode",value:function(){var e=this._data;this._renderHtml('<div class="'.concat(Me("code"),'" data-type="').concat(e.type,'"></div>'),!1);var t=e.val,n=e.val.length;n>$r&&(t=Mt()(t,$r)),n<Yr?(t=Gr()(t,e.type,{comment:"",string:"",number:"",keyword:"",operator:""}),k()(["comment","string","number","keyword","operator"],function(e){t=Vr()(t,'class="'.concat(e,'"'),'class="'.concat(Me(e),'"'))})):t=jt()(t);var r=this._$el.find(Me(".code")).get(0);new Kr.A(r,{text:t,escape:!1,wrapLongLines:!0,showLineNumbers:e.val.length<Jr&&this._showLineNum})}},{key:"_renderObj",value:function(){this._renderHtml('<ul class="'.concat(Me("json"),'"></ul>'),!1);var e=this._data.val;try{C()(e)&&(e=JSON.parse(e))}catch(e){}new Ur.A(this._$el.find(".eruda-json").get(0),{unenumerable:!0,accessGetter:!0,prototype:!1}).set(e)}},{key:"_renderRaw",value:function(){var e=this._data;this._renderHtml('<div class="'.concat(Me("raw-wrapper"),'">\n      <div class="').concat(Me("raw"),'"></div>\n    </div>'));var t=e.val,n=this._$el.find(Me(".raw")).get(0);t.length>$r&&(t=Mt()(t,$r)),new Kr.A(n,{text:t,wrapLongLines:!0,showLineNumbers:t.length<Jr&&this._showLineNum})}},{key:"_renderIframe",value:function(){this._renderHtml('<iframe src="'.concat(jt()(this._data.val),'"></iframe>'))}},{key:"_renderHtml",value:function(e){var t=this;(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&e===this._lastHtml||(this._lastHtml=e,this._$el.html(e),setTimeout(function(){return t._$el.get(0).scrollTop=0},0))}}])}(m),Yr=3e4,Jr=8e4,$r=1e5,Xr=n(9760),eo=n.n(Xr),to=n(1505),no=n.n(to),ro=n(5701),oo=n.n(ro),io={init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.container,n=e.tool,r=e.autoScale,o=void 0===r||r,i=e.useShadowDom,a=void 0===i||i,s=e.inline,l=void 0!==s&&s,c=e.defaults,u=void 0===c?{}:c;this._isInit||(this._isInit=!0,this._scale=1,this._initContainer(t,a),this._initStyle(),this._initDevTools(u,l),this._initEntryBtn(),this._initSettings(),this._initTools(n),this._registerListener(),o&&this._autoScale(),l&&(this._entryBtn.hide(),this._$el.addClass("eruda-inline"),this.show()))},_isInit:!1,version:"3.4.3",util:{isErudaEl:Oe,evalCss:oe,isDarkTheme:function(e){return e||(e=this.getTheme()),Y(e)},getTheme:function(){var e=oe.getCurTheme(),t="Light";return k()(J,function(n,r){oo()(n,e)&&(t=r)}),t}},chobitsu:Zt,Tool:m,Console:wt,Elements:$n,Network:ln,Sources:Zr,Resources:Er,Info:Br,Snippets:fr,Settings:le,get:function(e){if(this._checkInit()){if("entryBtn"===e)return this._entryBtn;var t=this._devTools;return e?t.get(e):t}},add:function(e){if(this._checkInit())return ct()(e)&&(e=e(this)),this._devTools.add(e),this},remove:function(e){return this._devTools.remove(e),this},show:function(e){if(this._checkInit()){var t=this._devTools;return e?t.showTool(e):t.show(),this}},hide:function(){if(this._checkInit())return this._devTools.hide(),this},destroy:function(){this._devTools.destroy(),delete this._devTools,this._entryBtn.destroy(),delete this._entryBtn,this._unregisterListener(),v()(this._container).remove(),oe.clear(),this._isInit=!1,this._container=null,this._shadowRoot=null},scale:function(e){return Ke()(e)?(this._scale=e,h.emit(h.SCALE,e),this):this._scale},position:function(e){var t=this._entryBtn;return eo()(e)?(t.setPos(e),this):t.getPos()},_autoScale:function(){hn()()&&this.scale(1/no()())},_registerListener:function(){var e=this;this._addListener=function(){return e.add.apply(e,arguments)},this._showListener=function(){return e.show.apply(e,arguments)},h.on(h.ADD,this._addListener),h.on(h.SHOW,this._showListener),h.on(h.SCALE,oe.setScale)},_unregisterListener:function(){h.off(h.ADD,this._addListener),h.off(h.SHOW,this._showListener),h.off(h.SCALE,oe.setScale)},_checkInit:function(){return this._isInit||He.error('Please call "eruda.init()" first'),this._isInit},_initContainer:function(e,t){var r,o;e||(e=document.createElement("div"),document.documentElement.appendChild(e)),e.id="eruda",e.style.all="initial",this._container=e,t&&(e.attachShadow?r=e.attachShadow({mode:"open"}):e.createShadowRoot&&(r=e.createShadowRoot()),r&&(oe.container=document.head,oe(n(6793)+n(7853)+n(9907)+n(879)+n(1107)+n(5259)),o=document.createElement("div"),r.appendChild(o),this._shadowRoot=r)),this._shadowRoot||(o=document.createElement("div"),e.appendChild(o)),U()(o,{className:"eruda-container __chobitsu-hide__",contentEditable:!1}),"ios"===Or()().name&&o.setAttribute("ontouchstart",""),this._$el=v()(o)},_initDevTools:function(e,t){this._devTools=new it(this._$el,{defaults:e,inline:t})},_initStyle:function(){var e="eruda-style-container",t=this._$el;this._shadowRoot?(oe.container=this._shadowRoot,oe(":host { all: initial }")):(t.append('<div class="'.concat(e,'"></div>')),oe.container=t.find(".".concat(e)).get(0)),oe(n(2693)+n(9907)+n(7853)+n(5259)+n(3277)+n(879)+n(4393)+n(7253)+n(1107)+n(187)+n(1277)+n(8687)+n(6793))},_initEntryBtn:function(){var e=this;this._entryBtn=new Ue(this._$el),this._entryBtn.on("click",function(){return e._devTools.toggle()})},_initSettings:function(){var e=this._devTools,t=new le;e.add(t),this._entryBtn.initCfg(t),e.initCfg(t)},_initTools:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["console","elements","network","resources","sources","info","snippets"];t=br()(t);var n=this._devTools;t.forEach(function(t){var r=e[Ye()(t)];try{r&&n.add(new r)}catch(e){ue()(function(){He.error("Something wrong when initializing tool ".concat(t,":"),e.message)})}}),n.showTool(t[0]||"settings")}}},4236:function(e,t){t=function(e){return null===e},e.exports=t},4249:function(e,t,n){var r=n(9100),o=n(5651);t=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"js",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o(s,i),e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),n=a[n];var l=0,c=[];r(n,function(n){n.language&&(e=e.replace(n.re,function(e,r){return r?(c[l++]=t(r,n.language,s),e.replace(r,"___subtmpl"+(l-1)+"___")):e}))}),r(n,function(t,n){a[t.language]||(e=e.replace(t.re,"___"+n+"___$1___end"+n+"___"))});var u=[];return e=e.replace(/___(?!subtmpl)\w+?___/g,function(e){var t="end"===e.substr(3,3),r=(t?e.substr(6):e.substr(3)).replace(/_/g,""),o=u.length>0?u[u.length-1]:null;return!t&&(null==o||r==o||null!=o&&n[o]&&null!=n[o].embed&&n[o].embed.indexOf(r)>-1)?(u.push(r),e):t&&r==o?(u.pop(),e):""}),r(n,function(t,n){var r=s[t.style]?' style="'.concat(s[t.style],'"'):"";e=e.replace(new RegExp("___end"+n+"___","g"),"</span>").replace(new RegExp("___"+n+"___","g"),'<span class="'.concat(t.style,'"').concat(r,">"))}),r(n,function(t){t.language&&(e=e.replace(/___subtmpl\d+___/g,function(e){var t=parseInt(e.replace(/___subtmpl(\d+)___/,"$1"),10);return c[t]}))}),e};var i={comment:"color:#63a35c;",string:"color:#183691;",number:"color:#0086b3;",keyword:"color:#a71d5d;",operator:"color:#994500;"},a={js:{comment:{re:/(\/\/.*|\/\*([\s\S]*?)\*\/)/g,style:"comment"},string:{re:/(('.*?')|(".*?"))/g,style:"string"},numbers:{re:/(-?(\d+|\d+\.\d+|\.\d+))/g,style:"number"},keywords:{re:/(?:\b)(function|for|foreach|while|if|else|elseif|switch|break|as|return|this|class|self|default|var|const|let|false|true|null|undefined)(?:\b)/gi,style:"keyword"},operator:{re:/(\+|-|\/|\*|%|=|&lt;|&gt;|\||\?|\.)/g,style:"operator"}}};a.html={comment:{re:/(&lt;!--([\s\S]*?)--&gt;)/g,style:"comment"},tag:{re:/(&lt;\/?\w(.|\n)*?\/?&gt;)/g,style:"keyword",embed:["string"]},string:a.js.string,css:{re:/(?:&lt;style.*?&gt;)([\s\S]*)?(?:&lt;\/style&gt;)/gi,language:"css"},script:{re:/(?:&lt;script.*?&gt;)([\s\S]*?)(?:&lt;\/script&gt;)/gi,language:"js"}},a.css={comment:a.js.comment,string:a.js.string,numbers:{re:/((-?(\d+|\d+\.\d+|\.\d+)(%|px|em|pt|in)?)|#[0-9a-fA-F]{3}[0-9a-fA-F]{3})/g,style:"number"},keywords:{re:/(@\w+|:?:\w+|[a-z-]+:)/g,style:"keyword"}},e.exports=t},4279:function(e,t,n){(t=n(6314)(!1)).push([e.id,"#_settings{overflow-y:auto;-webkit-overflow-scrolling:touch}._safe-area #_settings{padding-bottom:calc(0px + env(safe-area-inset-bottom))}",""]),e.exports=t},4307:function(e,t,n){var r=n(2263),o=n(2767),i=n(9100),a=n(438),s=n(9405),l=n(3915),c=n(3957);t={on:function(e,t,n){c(t)&&(n=t,t={}),e=e.split(f),i(e,function(e){if(e=h(e),t.element){var r=t.element,o=r._hotkeyListeners||{};r._hotkeyListeners=o,o[e]=o[e]||[];var i=function(t){e===d(t)&&n(t)};o[e].push({listener:i,origin:n}),r.addEventListener("keydown",i)}else u.on(e,n)})},off:function(e,t,n){c(t)&&(n=t,t={}),e=e.split(f),i(e,function(e){if(e=h(e),t.element){var r=t.element,o=r._hotkeyListeners;if(o&&o[e]){for(var i,a=o[e],s=0,l=a.length;s<l;s++)a[s].origin===n&&(i=a[s].listener,a.splice(s,1));i&&r.removeEventListener("keydown",i)}}else u.off(e,n)})}};var u=new r;function d(e){var t=[];return e.ctrlKey&&t.push("ctrl"),e.shiftKey&&t.push("shift"),t.push(o(e.keyCode)),h(t.join("+"))}function h(e){var t=e.split(p);return t=l(t,function(e){return s(e)}),(t=a(t)).sort(),t.join("+")}document.addEventListener("keydown",function(e){u.emit(d(e),e)});var f=/,/g,p=/\+/g;e.exports=t},4393:function(e,t,n){(t=n(6314)(!1)).push([e.id,'@font-face{font-family:luna-modal-icon;src:url(\'data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAQwAAsAAAAABpQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAEkAAABoILgliE9TLzIAAAFUAAAAPQAAAFZL+0kZY21hcAAAAZQAAACBAAAB3sqmCy5nbHlmAAACGAAAAC0AAAA0Ftcaz2hlYWQAAAJIAAAALgAAADZzhL4YaGhlYQAAAngAAAAYAAAAJAFoANBobXR4AAACkAAAAA8AAAAcAMgAAGxvY2EAAAKgAAAADgAAABAATgBObWF4cAAAArAAAAAfAAAAIAESABhuYW1lAAAC0AAAASkAAAIWm5e+CnBvc3QAAAP8AAAAMQAAAEOplauDeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiCWgNIsQMzKwAykWRnYgGxGBiYAk+wFgwAAAHicY2BkkGWcwMDKwMBQx9ADJGWgdAIDJ4MxAwMTAyszA1YQkOaawnCAIfkjI8MJIFcITDIwMIIIAGAqCKIAAAB4nM2RQQqDQAxFXxyVUsST9DhduBd3ggsv0JX39QT6kwYED1D6hzeQD0nmM0ADFPESNdiG4frItfALz/Br3qp7HlS0jEzMLKy7HYf8e33J1HMdortoWuPzreUX8p2hEikj9f+oi3vIyl86JpWYEvfnxH9sSTzPmijXbl+wE7urE5sAAAB4nGNgZACB+UDIzcBgrs6uzi7OLm4ubq4+j1tfn1tPD0xOhjGAJAMDAKekBtMAAAB4nGNgZGBgAGLPuE0l8fw2Xxm4GU4ABaI4H+9rQNBAMB8IGRg4GJhAHAA5KgqUAAB4nGNgZGBgOMHAACfnMzAyoAJ2ADfsAjl4nGNgAIITDFgBABIUAMkAeJxjYAACKQQEAAO4AJ0AAHicY2BkYGBgZ+BhANEMDExAzAWEDAz/wXwGAApKASsAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxjYGKAABiNDtgZmRiZGVkYWRnZGNkZORhYk3Pyi1MZkxlzGPMZixlTGRgANIEEbAAAAA==\') format(\'woff\')}[class*=\' luna-modal-icon-\'],[class^=luna-modal-icon-]{display:inline-block;font-family:luna-modal-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-modal-icon-close:before{content:\'\\f101\'}.luna-modal{position:fixed;top:0;left:0;right:0;bottom:0;display:flex;justify-content:center;align-items:center;color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));background-color:#fff;background-color:var(--luna-color-bg-container,#fff);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-family:var(--luna-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px}.luna-modal .luna-modal-hidden,.luna-modal.luna-modal-hidden{display:none}.luna-modal .luna-modal-invisible,.luna-modal.luna-modal-invisible{visibility:hidden}.luna-modal *{box-sizing:border-box}.luna-modal.luna-modal-theme-dark{color-scheme:dark;color:hsla(0,0%,100%,.85);color:var(--luna-color-text-dark,rgba(255,255,255,.85));background-color:#141414;background-color:var(--luna-color-bg-container-dark,#141414)}.luna-modal{background:rgba(0,0,0,.5)}.luna-modal-icon-close{position:absolute;right:16px;top:18px;cursor:pointer;font-size:20px}.luna-modal-body{position:relative;max-height:100%;display:flex;flex-direction:column;border-radius:4px;border:1px solid}.luna-modal-body.luna-modal-no-title{position:static}.luna-modal-body.luna-modal-no-title .luna-modal-title{display:none}.luna-modal-body.luna-modal-no-title .luna-modal-icon-close{color:#fff}.luna-modal-body.luna-modal-no-footer .luna-modal-footer{display:none}.luna-modal-hidden{display:none}.luna-modal-title{padding:16px;padding-right:36px;padding-bottom:0;font-size:18px;height:46px;box-sizing:border-box;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex-shrink:0}.luna-modal-content{padding:16px;overflow-y:auto}.luna-modal-footer{flex-shrink:0;padding:12px}.luna-modal-button-group{display:flex;justify-content:flex-end}.luna-modal-button{padding:0 12px;cursor:default;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin:0 4px;font-size:12px;border-radius:4px;overflow:hidden;height:28px;line-height:28px}.luna-modal-button:active::before{content:"";opacity:.4;position:absolute;top:0;left:0;width:100%;height:100%;z-index:2}.luna-modal-button.luna-modal-secondary{border:1px solid}.luna-modal-button.luna-modal-primary{color:#fff}.luna-modal-input{box-sizing:border-box;outline:0;width:100%;font-size:16px;padding:6px 12px;border:1px solid;-webkit-appearance:none;-moz-appearance:none}.luna-modal-theme-light .luna-modal-body{background-color:#fff;background-color:var(--luna-color-bg-container,#fff);border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9)}.luna-modal-theme-light .luna-modal-button{background-color:#fff;background-color:var(--luna-color-bg-container,#fff)}.luna-modal-theme-light .luna-modal-button:active::before{background-color:#1a73e8;background-color:var(--luna-color-primary,#1a73e8)}.luna-modal-theme-light .luna-modal-button.luna-modal-secondary{color:#1a73e8;color:var(--luna-color-primary,#1a73e8);border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9);background-color:#fff;background-color:var(--luna-color-bg-container,#fff)}.luna-modal-theme-light .luna-modal-button.luna-modal-primary{background-color:#1a73e8;background-color:var(--luna-color-primary,#1a73e8)}.luna-modal-theme-light .luna-modal-input{background-color:#fff;background-color:var(--luna-color-bg-container,#fff);color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9)}.luna-modal-theme-dark .luna-modal-body{background-color:#141414;background-color:var(--luna-color-bg-container,#141414);border-color:#424242;border-color:var(--luna-color-border,#424242)}.luna-modal-theme-dark .luna-modal-button{background-color:#141414;background-color:var(--luna-color-bg-container,#141414)}.luna-modal-theme-dark .luna-modal-button:active::before{background-color:#1965c8;background-color:var(--luna-color-primary,#1965c8)}.luna-modal-theme-dark .luna-modal-button.luna-modal-secondary{color:#1965c8;color:var(--luna-color-primary,#1965c8);border-color:#424242;border-color:var(--luna-color-border,#424242);background-color:#141414;background-color:var(--luna-color-bg-container,#141414)}.luna-modal-theme-dark .luna-modal-button.luna-modal-primary{background-color:#1965c8;background-color:var(--luna-color-primary,#1965c8)}.luna-modal-theme-dark .luna-modal-input{background-color:#141414;background-color:var(--luna-color-bg-container,#141414);color:hsla(0,0%,100%,.85);color:var(--luna-color-text,rgba(255,255,255,.85));border-color:#424242;border-color:var(--luna-color-border,#424242)}',""]),e.exports=t},4433:function(e,t){var n=document;if(t=function(e){var t=n.createElement("body");return t.innerHTML=e,t.childNodes[0]},n.createRange&&n.body){var r=n.createRange();r.selectNode(n.body),r.createContextualFragment&&(t=function(e){return r.createContextualFragment(e).childNodes[0]})}e.exports=t},4460:function(e,t,n){var r=n(3957);t="undefined"!=typeof wx&&r(wx.openLocation),e.exports=t},4467:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var r=n(816);function o(e,t,n){return(t=(0,r.A)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},4497:function(e,t,n){var r=n(6032);t=function(e,t){return e=new r(e),t=new r(t),e.port=0|e.port||("https"===e.protocol?443:80),t.port=0|t.port||("https"===t.protocol?443:80),e.protocol===t.protocol&&e.hostname===t.hostname&&e.port===t.port},e.exports=t},4534:function(e,t){t=function(e,t,n){var r;return function(){var o=this,i=arguments;n||clearTimeout(r),n&&r||(r=setTimeout(function(){r=null,e.apply(o,i)},t))}},e.exports=t},4657:function(e,t,n){(t=n(6314)(!1)).push([e.id,"#_info{overflow-y:auto;-webkit-overflow-scrolling:touch}#_info li{margin:10px;border:1px solid var(--border)}#_info li ._content,#_info li ._title{padding:10px}#_info li ._title{position:relative;padding-bottom:0;color:var(--accent)}#_info li ._title ._icon-copy{position:absolute;right:10px;top:14px;color:var(--primary);cursor:pointer;transition:color .3s}#_info li ._title ._icon-copy:active{color:var(--accent)}#_info li ._content{margin:0;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;color:var(--foreground);font-size:12px;word-break:break-all}#_info li ._content table{width:100%;border-collapse:collapse}#_info li ._content table td,#_info li ._content table th{border:1px solid var(--border);padding:10px}#_info li ._content *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}#_info li ._content a{color:var(--link-color)}#_info li ._device-key,#_info li ._system-key{width:100px}._safe-area #_info{padding-bottom:calc(10px + env(safe-area-inset-bottom))}",""]),e.exports=t},4725:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.resetCanvasSize=t.getPlatform=t.pxToNum=t.executeAfterTransition=t.hasVerticalScrollbar=t.measuredScrollbarWidth=t.eventPage=t.eventClient=t.drag=t.classPrefix=void 0;var o=r(n(3915)),i=r(n(9405)),a=r(n(5169)),s=r(n(9548)),l=r(n(6097)),c=r(n(3249)),u=r(n(6030)),d=r(n(5004)),h=r(n(8609));function f(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];t(o),o.content&&f(o.content,t)}}t.classPrefix=function(e){var t="luna-".concat(e,"-");function n(e){return(0,o.default)((0,i.default)(e).split(/\s+/),function(e){return(0,c.default)(e,t)?e:e.replace(/[\w-]+/,function(e){return"".concat(t).concat(e)})}).join(" ")}return function(e){if(/<[^>]*>/g.test(e))try{var t=s.default.parse(e);return f(t,function(e){e.attrs&&e.attrs.class&&(e.attrs.class=n(e.attrs.class))}),s.default.stringify(t)}catch(t){return n(e)}return n(e)}};var p,m="ontouchstart"in a.default,g={start:"touchstart",move:"touchmove",end:"touchend"},v={start:"mousedown",move:"mousemove",end:"mouseup"};t.drag=function(e){return m?g[e]:v[e]},t.eventClient=function(e,t){var n="x"===e?"clientX":"clientY";return t[n]?t[n]:t.changedTouches?t.changedTouches[0][n]:0},t.eventPage=function(e,t){var n="x"===e?"pageX":"pageY";return t[n]?t[n]:t.changedTouches?t.changedTouches[0][n]:0},t.measuredScrollbarWidth=function(){if((0,l.default)(p))return p;if(!document)return 16;var e=document.createElement("div"),t=document.createElement("div");return e.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),t.setAttribute("style","height: 200px"),e.appendChild(t),document.body.appendChild(e),p=e.offsetWidth-e.clientWidth,document.body.removeChild(e),p},t.hasVerticalScrollbar=function(e){return e.scrollHeight>e.offsetHeight},t.executeAfterTransition=function(e,t){if((0,h.default)(e))return t();var n=function(r){r.target===e&&(e.removeEventListener("transitionend",n),t())};e.addEventListener("transitionend",n)},t.pxToNum=function(e){return(0,u.default)(e.replace("px",""))},t.getPlatform=function(){var e=(0,d.default)();return"os x"===e?"mac":e},t.resetCanvasSize=function(e){e.width=Math.round(e.offsetWidth*window.devicePixelRatio),e.height=Math.round(e.offsetHeight*window.devicePixelRatio)}},4801:function(e,t,n){var r=n(4950),o=n(2989),i=n(2561),a=n(1580),s=n(1168),l=n(3145),c=n(9100),u=n(2717),d=n(5427),h=n(466),f=n(8105),p=n(8796),m=n(2571),g=n(3981),v=n(7514),y=n(3249),b=n(9760),x=n(4460),w=n(6513),_=n(1009),k=n(2806),A=n(4151),S=n(896),N=n(5793);function C(e,n,r,o){var a=[];return c(n,function(e){var n,s=Object.getOwnPropertyDescriptor(r,e),l=s&&s.get,c=s&&s.set;if(!o.accessGetter&&l)n="(...)";else try{if(n=r[e],y(o.ignore,n))return;p(n)&&n.catch(function(){})}catch(e){n=e.message}a.push("".concat(j(e),":").concat(t(n,o))),l&&a.push("".concat(j("get "+i(e)),":").concat(t(s.get,o))),c&&a.push("".concat(j("set "+i(e)),":").concat(t(s.set,o)))}),'"'.concat(e,'":{')+a.join(",")+"}"}function j(e){return'"'.concat(T(e),'"')}function E(e){return'"'.concat(T(i(e)),'"')}function T(e){return r(e).replace(/\\'/g,"'").replace(/\t/g,"\\t")}t=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.self,c=n.startTime,u=void 0===c?g():c,p=n.timeout,b=void 0===p?0:p,x=n.depth,w=void 0===x?0:x,_=n.curDepth,k=void 0===_?1:_,A=n.visitor,S=void 0===A?new I:A,N=n.unenumerable,j=void 0!==N&&N,T=n.symbol,P=void 0!==T&&T,O=n.accessGetter,M=void 0!==O&&O,L=n.ignore,R=void 0===L?[]:L,D="",F={visitor:S,unenumerable:j,symbol:P,accessGetter:M,depth:w,curDepth:k+1,timeout:b,startTime:u,ignore:R},z=o(e,!1);if("String"===z)D=E(e);else if("Number"===z)D=i(e),a(D,"Infinity")&&(D='{"value":"'.concat(D,'","type":"Number"}'));else if("NaN"===z)D='{"value":"NaN","type":"Number"}';else if("Boolean"===z)D=e?"true":"false";else if("Null"===z)D="null";else if("Undefined"===z)D='{"type":"Undefined"}';else if("Symbol"===z){var B="Symbol";try{B=i(e)}catch(e){}D='{"value":'.concat(E(B),',"type":"Symbol"}')}else{if(b&&g()-u>b)return E("Timeout");if(w&&k>w)return E("{...}");D="{";var U,q=[],V=S.get(e);if(V?(U=V.id,q.push('"reference":'.concat(U))):(U=S.set(e),q.push('"id":'.concat(U))),q.push('"type":"'.concat(z,'"')),a(z,"Function")?q.push('"value":'.concat(E(s(e)))):"RegExp"===z&&q.push('"value":'.concat(E(e))),!V){var H=l(e);if(H.length&&q.push(C("enumerable",H,r||e,F)),j){var G=h(v(e,{prototype:!1,unenumerable:!0}),H);G.length&&q.push(C("unenumerable",G,r||e,F))}if(P){var K=m(v(e,{prototype:!1,symbol:!0}),function(e){return"symbol"==typeof e});K.length&&q.push(C("symbol",K,r||e,F))}var W=d(e);if(W&&!y(R,W)){var Q='"proto":'.concat(t(W,f(F,{self:r||e})));q.push(Q)}}D+=q.join(",")+"}"}return D};var I=u({initialize:function(){this.id=1,this.visited=[]},set:function(e){var t=this.visited,n=this.id,r={id:n,val:e};return t.push(r),this.id++,n},get:function(e){for(var t=this.visited,n=0,r=t.length;n<r;n++){var o=t[n];if(e===o.val)return o}return!1}});function P(e,t){var n=t.map;if(!b(e))return e;var r=e.id,o=e.type,a=e.value,s=e.proto,l=e.reference,u=e.enumerable,d=e.unenumerable;if(l)return e;if("Number"===o)return"Infinity"===a?Number.POSITIVE_INFINITY:"-Infinity"===a?Number.NEGATIVE_INFINITY:NaN;if("Undefined"!==o){var h,f,p;if("Function"===o)(h=function(){}).toString=function(){return a},s&&Object.setPrototypeOf(h,P(s,t));else if("RegExp"===o)p=(f=a).lastIndexOf("/"),h=new RegExp(f.slice(1,p),f.slice(p+1));else{var m;"Object"!==o?(m=x?function(){}:new Function(o,""),s&&(m.prototype=P(s,t)),h=new m):h=w(s?P(s,t):null)}var g,v={};return u&&(N(u)&&(g=u.length,delete u.length),u=S(u,function(e,t){return!y(u,e,t)}),c(u,function(e,n){(v[n]||{}).get||(h[n]=P(e,t))}),g&&(h.length=g)),d&&(d=S(d,function(e,t){return!y(d,e,t)}),c(d,function(e,r){var o=v[r]||{};if(!o.get)if(e=P(e,t),b(e)&&e.reference){var i=e.reference;e=function(){return n[i]},o.get=e}else o.value=e;o.enumerable=!1,v[r]=o})),A(h,v),n[r]=h,h}function y(e,n,r){r=i(r);var o=!1;return c(["get","set"],function(i){if(_(r,i+" ")){var a=r.replace(i+" ","");e[a]&&("Timeout"===(n=P(n,t))&&(n=O),k(v,[a,i],n),o=!0)}}),o}}function O(){return"Timeout"}t.parse=function(e){var t={},n=P(JSON.parse(e),{map:t});return function(e){c(e,function(t){for(var n=l(t),r=0,o=n.length;r<o;r++){var i=n[r];if(b(t[i])){var a=t[i].reference;a&&e[a]&&(t[i]=e[a])}}var s=d(t);s&&s.reference&&e[s.reference]&&Object.setPrototypeOf(t,e[s.reference])})}(t),n},e.exports=t},4831:function(e,t,n){(t=n(6314)(!1)).push([e.id,"#_sources{font-size:0;overflow-y:auto;-webkit-overflow-scrolling:touch;color:var(--foreground)}#_sources ._code-wrapper,#_sources ._raw-wrapper{overflow-x:auto;-webkit-overflow-scrolling:touch;width:100%;min-height:100%}#_sources ._code,#_sources ._raw{height:100%}#_sources ._code ._keyword,#_sources ._raw ._keyword{color:var(--keyword-color)}#_sources ._code ._comment,#_sources ._raw ._comment{color:var(--comment-color)}#_sources ._code ._number,#_sources ._raw ._number{color:var(--number-color)}#_sources ._code ._string,#_sources ._raw ._string{color:var(--string-color)}#_sources ._code ._operator,#_sources ._raw ._operator{color:var(--operator-color)}#_sources ._code[data-type=html] ._keyword,#_sources ._raw[data-type=html] ._keyword{color:var(--tag-name-color)}#_sources ._image{font-size:12px}#_sources ._image ._breadcrumb{background:var(--darker-background);color:var(--primary);-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;margin-bottom:10px;word-break:break-all;padding:10px;font-size:16px;min-height:40px;border-bottom:1px solid var(--border)}#_sources ._image ._img-container{text-align:center}#_sources ._image ._img-container img{max-width:100%}#_sources ._image ._img-info{text-align:center;margin:20px 0;color:var(--foreground)}#_sources ._json{padding:0 10px}#_sources ._json *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}#_sources iframe{width:100%;height:100%}",""]),e.exports=t},4844:function(e,t,n){var r=n(8105),o=n(9993);t=function(e,t){t=t||o;var n=document.createElement("textarea"),i=document.body;r(n.style,{fontSize:"12pt",border:"0",padding:"0",margin:"0",position:"absolute",left:"-9999px"}),n.value=e,i.appendChild(n),n.setAttribute("readonly",""),n.select(),n.setSelectionRange(0,e.length);try{document.execCommand("copy"),t()}catch(e){t(e)}finally{i.removeChild(n)}},e.exports=t},4866:function(e,t){t=function(e,t){var n=document.createElement("script");n.src=e,n.onload=function(){var e=n.readyState&&"complete"!=n.readyState&&"loaded"!=n.readyState;t&&t(!e)},n.onerror=function(){t(!1)},document.body.appendChild(n)},e.exports=t},4950:function(e,t,n){var r=n(2561);t=function(e){return r(e).replace(o,function(e){switch(e){case'"':case"'":case"\\":return"\\"+e;case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}})};var o=/["'\\\n\r\u2028\u2029]/g;e.exports=t},4951:function(e,t){t=function(e,t,n){var r=e.length;t=null==t?0:t<0?Math.max(r+t,0):Math.min(t,r),n=null==n?r:n<0?Math.max(r+n,0):Math.min(n,r);for(var o=[];t<n;)o.push(e[t++]);return o},e.exports=t},4966:function(e,t,n){var r=n(5224);t={encode:function(e){for(var t=r.decode(e),n="",o=0,i=t.length;o<i;o++)n+=f(t[o]);return n},decode:function(e,t){o=r.decode(e),i=0,a=o.length,s=0,l=0,c=0,u=128,d=191;for(var n,h=[];!1!==(n=p(t));)h.push(n);return r.encode(h)}};var o,i,a,s,l,c,u,d,h=String.fromCharCode;function f(e){if(!(4294967168&e))return h(e);var t,n,r="";for(4294965248&e?4294901760&e?4292870144&e||(t=3,n=240):(t=2,n=224):(t=1,n=192),r+=h((e>>6*t)+n);t>0;)r+=h(128|63&e>>6*(t-1)),t--;return r}function p(e){for(;;){if(i>=a&&c){if(e)return m();throw new Error("Invalid byte index")}if(i===a)return!1;var t=o[i];if(i++,c){if(t<u||t>d){if(e)return i--,m();throw new Error("Invalid continuation byte")}if(u=128,d=191,s=s<<6|63&t,++l===c){var n=s;return s=0,c=0,l=0,n}}else{if(!(128&t))return t;if(192==(224&t))c=1,s=31&t;else if(224==(240&t))224===t&&(u=160),237===t&&(d=159),c=2,s=15&t;else{if(240!=(248&t)){if(e)return m();throw new Error("Invalid UTF-8 detected")}240===t&&(u=144),244===t&&(d=143),c=3,s=7&t}}}}function m(){var e=i-l-1;return i=e+1,s=0,c=0,l=0,u=128,d=191,o[e]}e.exports=t},4983:function(e,t){t=function(e){try{return JSON.parse(e),!0}catch(e){return!1}},e.exports=t},4992:function(e,t,n){var r=n(3974);t=function(e){return"[object ArrayBuffer]"===r(e)},e.exports=t},4994:function(e,t,n){var r=n(2510);t=r(function(e,t,n){return r(function(r){return e.apply(t,n.concat(r))})}),e.exports=t},5004:function(e,t,n){var r=n(1909),o=n(621);t=function(e){function t(t){return e.indexOf(t)>-1}if(!e&&r&&(e=navigator.userAgent),e){if(e=e.toLowerCase(),t("windows phone"))return"windows phone";if(t("win"))return"windows";if(t("android"))return"android";if(t("ipad")||t("iphone")||t("ipod"))return"ios";if(t("mac"))return"os x";if(t("linux"))return"linux"}else if(o){var n=process.platform,i={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyArvQzOJTrtsekOK9Wpgi3PezPcM9KmXyY",REACT_APP_FIREBASE_APP_ID:"1:614868886377:web:3c020075969956ef1813f8",REACT_APP_FIREBASE_AUTH_DOMAIN:"geoquest2-7e45c.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-L45RHX7MCN",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"614868886377",REACT_APP_FIREBASE_PROJECT_ID:"geoquest2-7e45c",REACT_APP_FIREBASE_STORAGE_BUCKET:"geoquest2-7e45c.firebasestorage.app",REACT_APP_OPENROUTE_API_KEY:"eyJvcmciOiI1YjNjZTM1OTc4NTExMTAwMDFjZjYyNDgiLCJpZCI6ImEzN2RiYzM2MjdlZDRjMzVhNjE4MTI3ZTU2MTcwMjVjIiwiaCI6Im11cm11cjY0In0=",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_live_51SCkJSCO02VZleLGS20eWjUQl0cAhGoZaQA5wfxS9ShhQJZmTm8Os02jPlP9c2fehToeLz369r0pjAixP98N6FAy00DFPn5jNh"};if("win32"===n||"cygwin"===i.OSTYPE||"msys"===i.OSTYPE)return"windows";if("darwin"===n)return"os x";if("linux"===n)return"linux"}return"unknown"},e.exports=t},5021:function(e,t,n){var r=n(7744),o=n(1931),i=n(9464),a=n(8032),s=n(5651),l=n(9760),c=o("local");t=r.extend({initialize:function(e,t){this._name=e,t=t||{};var n=c.getItem(e);try{n=JSON.parse(n)}catch(e){n={}}l(n)||(n={}),t=s(n,t),this.callSuper(r,"initialize",[t])},save:function(e){if(i(e))return c.removeItem(this._name);c.setItem(this._name,a(e))}}),e.exports=t},5119:function(e,t,n){var r=n(9100);t=function(e){var t=[];return r(e,function(e){t.push(e)}),t},e.exports=t},5132:function(e,t,n){var r=n(3974);t=function(e){return"[object Arguments]"===r(e)},e.exports=t},5145:function(e,t,n){var r=n(9756),o=n(5651),i=n(3145),a=n(6214),s=n(9760);t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(t,l);var n=t.deep,r=t.comparator,c=[],u=[];return function e(t){var o,l=c.indexOf(t);if(l>-1)return u[l];if(a(t)){o=[],c.push(t),u.push(o);for(var d=0,h=t.length;d<h;d++){var f=t[d];n&&s(f)?o[d]=e(f):o[d]=f}}else{o={},c.push(t),u.push(o);for(var p=i(t).sort(r),m=0,g=p.length;m<g;m++){var v=p[m],y=t[v];n&&s(y)?o[v]=e(y):o[v]=y}}return o}(e)};var l={deep:!1,comparator:r.defComparator};e.exports=t},5154:function(e,t,n){var r=n(5693),o=n(3145);t=function(e,t,n){t=r(t,n);for(var i=o(e),a=i.length,s={},l=0;l<a;l++){var c=i[l];s[c]=t(e[c],c,e)}return s},e.exports=t},5169:function(e,t,n){t=n(1909)?window:n.g,e.exports=t},5207:function(e,t){t=function(e){return e.replace(/\W/g,"\\$&")},e.exports=t},5224:function(e,t,n){var r=n(7140),o=n(3915);t={encode:function(e){return e.length<32768?String.fromCodePoint.apply(String,e):o(r(e,32767),function(e){return String.fromCodePoint.apply(String,e)}).join("")},decode:function(e){for(var t=[],n=0,r=e.length;n<r;){var o=e.charCodeAt(n++);if(o>=55296&&o<=56319&&n<r){var i=e.charCodeAt(n++);56320==(64512&i)?t.push(((1023&o)<<10)+(1023&i)+65536):(t.push(o),n--)}else t.push(o)}return t}},e.exports=t},5241:function(e,t,n){var r=n(2708),o=n(1738),i=n(1009),a=n(7661),s=n(6866),l=n(9100),c=n(3957);t=function(e,t){for(var n=arguments.length,u=new Array(n>2?n-2:0),d=2;d<n;d++)u[d-2]=arguments[d];(r(t)||o(t))&&(u.unshift(t),t=null),t||(t={});var h=function(e){for(var t="div",n="",r=[],o=[],a="",s=0,l=e.length;s<l;s++){var c=e[s];"#"===c||"."===c?(o.push(a),a=c):a+=c}o.push(a);for(var u=0,d=o.length;u<d;u++)(a=o[u])&&(i(a,"#")?n=a.slice(1):i(a,".")?r.push(a.slice(1)):t=a);return{tagName:t,id:n,classes:r}}(e),f=h.tagName,p=h.id,m=h.classes,g=document.createElement(f);return p&&g.setAttribute("id",p),a.add(g,m),l(u,function(e){o(e)?g.appendChild(document.createTextNode(e)):r(e)&&g.appendChild(e)}),l(t,function(e,t){o(e)?g.setAttribute(t,e):c(e)&&i(t,"on")?g.addEventListener(t.slice(2),e,!1):"style"===t&&s(g,e)}),g},e.exports=t},5259:function(e,t,n){(t=n(6314)(!1)).push([e.id,'@font-face{font-family:luna-notification-icon;src:url(\'data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAZUAAsAAAAACdAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAG0AAACgIZAmVU9TLzIAAAF4AAAAPgAAAFZWzlGlY21hcAAAAbgAAADTAAACdAF1q7JnbHlmAAACjAAAAZ8AAAIw/FBRXGhlYWQAAAQsAAAAMQAAADZ25cSzaGhlYQAABGAAAAAdAAAAJAgCBA9obXR4AAAEgAAAABYAAABEFAH//GxvY2EAAASYAAAAFgAAACQHPAeQbWF4cAAABLAAAAAfAAAAIAEeAFBuYW1lAAAE0AAAASkAAAIWm5e+CnBvc3QAAAX8AAAAVwAAAHunB7sWeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiD2ArL5GGQYdBhswDIgzA6U4QSzmBlYGbgZeIC28YL5rEAoAIScQAwxh4WBH8hmB/PYgOp4GPgAGb8HKAAAAHicY2Bk1GWcwMDKwMDUyXSGgYGhH0IzvmYwYuQAijKwMjNgBQFprikMBxgSP7KwgLgxLExgYUYQAQC/dQkUAAB4nL2SPQ7CMAxGX2ih/LYMCCHOwKUQAoGQqMTSjQMxcQgu1BOUz4knxMCAsPWa5ksTu3aAPpCJjcghPAiY3aWGqGeMo55z03zBXErOlh0HTpypudK0eddp1dQ9R6mXqIaovlvQKeZLVvJ1dKgUZ8qQCQNmFIwUqdS3PUVTlmHw4aRfW8xBKVgGFCOUgqz8Q+TvbBqfT59VWMUT9r5z1C91IWE7Ds5QHJ2JODlW2bOj/1bvEoWoHdVCHU1YURpHtWlDwu5L20tgY5awe9U69F8TTSO0AHiclVC9ThtBEJ6ZXdY4UXwc7O0mWBzxmdsDG9nExmdFKAQUpaClRCa4ihIsGiR+0kWip0A8AQVtKsRDpKGgI8+Qkip3ZtciSpQuq9E33/zvDBDYR1fsGkJoAGAgRbUSmTe4nK5gp/qbtVTgt1uK2XAd/zjpSnn5D08pb27O4Z2nrN5Q3pmzLCBsOGbhzmEQePm1opM953QA6OZzYF+hAFBEjckr7OI+LX3I9mV+0cc1Wutn/QA/bv9XLhtmNpdxghJMQxUgxgaKAooQ25XWKtoF3E5SRKajI+MsKdjPvCfTVFospnW2VE+L2fewFlppl+M4jeNztmjKZfPrNlk3Zp22gjAM8kuH93HHmE48OudwaGcjB6jBO3tT4aFIGpiYt9i0v0jVLFrppkorj7QqlLAgmmiaGEsdolat7qqNLo9KolEU7ycqK89nnk0SlwfRpk8vF/zPxNkX9VrwYPfpkX7CVemFHBCnLJ9PTns7Nzu902T+L4rfbI/HvMPKpl+bJX+XxsaO9VQ4LQfjx3qm5PoPSPD3n/6tHlGAB9G/ZawAeJxjYGRgYADibSbTeeL5bb4ycLOABKI4H+9rgNH//zIwsDCzMAElOBhAJAMAKPIKWwAAAHicY2BkYGBhAAEWhv9///9lYWZgZEAFggBbKAQbAAAAeJxjYGBgYEHB//8C8X8GEgAAwYQEDwAAeJxjYAACB4YwhhyGVYwS2CEAO7wC2QAAeJxjYGRgYBBkcGFgZgABJiDmAkIGhv9gPgMAEP4BbwB4nGWQPW7CQBSEx2BIAlKCFCkps1UKIpmfkgNAT0GXwpi1MbK91npBossJcoQcIaeIcoIcKGPzaGAtP38zb97uygAG+IWHenm4bWq9WrihOnGb9CDsk5+FO+jjRbhLfyjcwxumwn084p07eP4dnQFK4Rbu8SHcpv8p7JO/hDt4wrdwl/6PcA8r/An38eoN08gUsSncUif7LLRnef6utK1SU6hJMD5bC11oGzq9Ueujqg7J1LlYxdbkas6uzjKjSmt2OnLB1rlyNhrF4geRyZEigkGBuKkOS2gk2CNDCHvVvdQrpi0q+rVWmCDA+Cq1YKpokiGVxobJNY6sFQ48bUrXMa34Ws7kpLnMat4kIyv+77q3oxPRD7BtpkrMMOITX+SD5g75Pz0RXqgAAAB4nG3EOwqAMBBAwX2a+P/fw8IjSYgoQgLb5PqCtk4xksmnkX8zGTkGS0FJRU1DS0fPwMjEzCLmCke07vTuLt/XzaRdg/WqUbkIHEQcJ56bxI6KPP4cD3YA\') format(\'woff\')}[class*=\' luna-notification-icon-\'],[class^=luna-notification-icon-]{display:inline-block;font-family:luna-notification-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-notification-icon-info:before{content:\'\\f101\'}.luna-notification-icon-check:before{content:\'\\f102\'}.luna-notification-icon-warn:before{content:\'\\f103\'}.luna-notification-icon-error:before{content:\'\\f104\'}.luna-notification{position:relative;padding:20px;pointer-events:none;display:flex;flex-direction:column;overflow:hidden;color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));background-color:rgba(0,0,0,0);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-family:var(--luna-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px}.luna-notification .luna-notification-hidden,.luna-notification.luna-notification-hidden{display:none}.luna-notification .luna-notification-invisible,.luna-notification.luna-notification-invisible{visibility:hidden}.luna-notification *{box-sizing:border-box}.luna-notification.luna-notification-theme-dark{color-scheme:dark;color:hsla(0,0%,100%,.85);color:var(--luna-color-text-dark,rgba(255,255,255,.85));background-color:rgba(0,0,0,0)}.luna-notification.luna-notification-full{position:fixed;top:0;left:0;width:100%;height:100%}.luna-notification-item{display:flex;border:1px solid;padding:10px 16px;align-items:center}.luna-notification-lower{margin-top:16px}.luna-notification-upper{margin-bottom:16px}.luna-notification-icon-container{margin-right:8px;color:#fff;border-radius:50%;width:16px;height:16px;text-align:center;line-height:16px}.luna-notification-icon-container.luna-notification-info .luna-notification-icon{position:relative;top:-2px;font-size:12px}.luna-notification-icon-container.luna-notification-success .luna-notification-icon{position:relative;top:-1px;font-size:12px}.luna-notification-icon-container.luna-notification-warning{position:relative;top:-2px}.luna-notification-icon-container.luna-notification-warning .luna-notification-icon{font-size:14px}.luna-notification-icon-container.luna-notification-error{position:relative;top:-1px}.luna-notification-icon-container.luna-notification-error .luna-notification-icon{font-size:14px}.luna-notification-theme-light .luna-notification-item{border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9);box-shadow:0 6px 16px 0 rgba(0,0,0,.08),0 3px 6px -4px rgba(0,0,0,.12),0 9px 28px 8px rgba(0,0,0,.05);box-shadow:var(--luna-box-shadow,0 6px 16px 0 rgba(0,0,0,.08),0 3px 6px -4px rgba(0,0,0,.12),0 9px 28px 8px rgba(0,0,0,.05));color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));background-color:#fff;background-color:var(--luna-color-bg-container,#fff)}.luna-notification-theme-light .luna-notification-icon-container.luna-notification-info{background-color:#1677ff;background-color:var(--luna-color-info,#1677ff)}.luna-notification-theme-light .luna-notification-icon-container.luna-notification-success{background-color:#52c41a;background-color:var(--luna-color-success,#52c41a)}.luna-notification-theme-light .luna-notification-icon-container.luna-notification-warning{color:#faad14;color:var(--luna-color-warning,#faad14)}.luna-notification-theme-light .luna-notification-icon-container.luna-notification-error{color:#ff4d4f;color:var(--luna-color-error,#ff4d4f)}.luna-notification-theme-dark .luna-notification-item{border-color:#424242;border-color:var(--luna-color-border,#424242);box-shadow:0 6px 16px 0 rgba(0,0,0,.08),0 3px 6px -4px rgba(0,0,0,.12),0 9px 28px 8px rgba(0,0,0,.05);box-shadow:var(--luna-box-shadow,0 6px 16px 0 rgba(0,0,0,.08),0 3px 6px -4px rgba(0,0,0,.12),0 9px 28px 8px rgba(0,0,0,.05));color:hsla(0,0%,100%,.85);color:var(--luna-color-text,rgba(255,255,255,.85));background-color:#141414;background-color:var(--luna-color-bg-container,#141414)}.luna-notification-theme-dark .luna-notification-icon-container.luna-notification-info{background-color:#1668dc;background-color:var(--luna-color-info,#1668dc)}.luna-notification-theme-dark .luna-notification-icon-container.luna-notification-success{background-color:#49aa19;background-color:var(--luna-color-success,#49aa19)}.luna-notification-theme-dark .luna-notification-icon-container.luna-notification-warning{color:#d89614;color:var(--luna-color-warning,#d89614)}.luna-notification-theme-dark .luna-notification-icon-container.luna-notification-error{color:#dc4446;color:var(--luna-color-error,#dc4446)}',""]),e.exports=t},5282:function(e,t,n){var r=n(9100);t=function(e){var t={};return r(e,function(e,n){t[e]=n}),t},e.exports=t},5333:function(e,t){var n=/^\s+/;t=function(e,t){if(null==t)return e.trimLeft?e.trimLeft():e.replace(n,"");for(var r,o,i=0,a=e.length,s=t.length,l=!0;l&&i<a;)for(l=!1,r=-1,o=e.charAt(i);++r<s;)if(o===t[r]){l=!0,i++;break}return i>=a?"":e.substr(i,a)},e.exports=t},5334:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.enable=void 0,t.deleteCookies=function(e){(0,u.default)(e.name)},t.getCookies=function(){var e=[],t=document.cookie;return""!==(0,s.default)(t)&&(0,l.default)(t.split(";"),function(t){t=t.split("=");var n=(0,s.default)(t.shift());t=(0,c.default)(t.join("=")),e.push({name:n,value:t})}),{cookies:e}},t.getResponseBody=function(e){return{base64Encoded:!1,body:w.get(e.requestId)}};var s=a(n(9405)),l=a(n(9100)),c=a(n(6334)),u=a(n(3290)),d=a(n(9122)),h=a(n(3249)),f=a(n(3981)),p=a(n(1738)),m=a(n(3750)),g=a(n(8971)),v=a(n(5957)),y=n(3411),b=a(n(8665)),x=n(916),w=new Map,_=!1;function k(e,t){e.on("send",function(e,n){var r={method:n.method,url:n.url,headers:n.reqHeaders};n.data&&(r.postData=n.data),T("Network.requestWillBeSent",{requestId:e,type:t,request:r,timestamp:n.time/1e3})}),e.on("headersReceived",function(e,t){T("Network.responseReceivedExtraInfo",{requestId:e,blockedCookies:[],headers:t.resHeaders})}),e.on("done",function(e,n){var r={status:n.status};n.resHeaders&&(r.headers=n.resHeaders),T("Network.responseReceived",{requestId:e,type:t,response:r,timestamp:n.time/1e3}),w.set(e,n.resTxt),T("Network.loadingFinished",{requestId:e,encodedDataLength:n.size,timestamp:n.time/1e3})}),e.on("error",function(e,n){T("Network.loadingFailed",{requestId:e,errorText:n.errorText,timestamp:n.time/1e3,type:t})})}function A(e){return!(0,h.default)(e,"__chobitsu-hide__=true")}t.enable=function(){_=!0,(0,l.default)(E,function(e){return e()}),E=[]};var S,N,C,j,E=[];function T(e,t){_?b.default.trigger(e,t):E.push(function(){return b.default.trigger(e,t)})}S=window.XMLHttpRequest.prototype,N=S.send,C=S.open,j=S.setRequestHeader,S.open=function(e,t){if(!A(t))return C.apply(this,arguments);k(this.chobitsuRequest=new y.XhrRequest(this,e,t),"XHR"),C.apply(this,arguments)},S.send=function(e){var t=this.chobitsuRequest;t&&t.handleSend(e),N.apply(this,arguments)},S.setRequestHeader=function(e,t){var n=this.chobitsuRequest;n&&n.handleReqHeadersSet(e,t),j.apply(this,arguments)},function(){var e=!1;if(window.fetch&&((e=(0,d.default)(window.fetch))||(navigator.serviceWorker&&(e=!0),window.Request&&(0,d.default)(window.Request)&&(e=!0))),e){var t=window.fetch;window.fetch=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=new(y.FetchRequest.bind.apply(y.FetchRequest,i([void 0],e,!1)));k(r,"Fetch");var o=t.apply(void 0,e);return r.send(o),o}}}(),function(){var e=window.WebSocket;function t(t,n){var i=new e(t,n);if(!A(t))return i;var a=(0,x.createId)();T("Network.webSocketCreated",{requestId:a,url:t}),i.addEventListener("open",function(){T("Network.webSocketWillSendHandshakeRequest",{requestId:a,timestamp:(0,f.default)()/1e3,request:{headers:{}}}),T("Network.webSocketHandshakeResponseReceived",{requestId:a,timeStamp:(0,f.default)()/1e3,response:{status:101,statusText:"Switching Protocols"}})}),i.addEventListener("message",function(e){return r(this,void 0,void 0,function(){var t,n;return o(this,function(r){switch(r.label){case 0:return t=e.data,(0,g.default)(t)?[2]:(n=1,(0,p.default)(t)?[3,3]:(n=2,(0,m.default)(t)?[4,v.default.blobToArrBuffer(t)]:[3,2]));case 1:t=r.sent(),r.label=2;case 2:t=(0,v.default)(t,"base64"),r.label=3;case 3:return T("Network.webSocketFrameReceived",{requestId:a,timestamp:(0,f.default)()/1e3,response:{opcode:n,payloadData:t}}),[2]}})})});var s=i.send;return i.send=function(e){return(0,g.default)(e)||function(e){r(this,void 0,void 0,function(){var t,n;return o(this,function(r){switch(r.label){case 0:return t=1,n=e,(0,p.default)(e)?[3,3]:(t=2,(0,m.default)(n)?[4,v.default.blobToArrBuffer(n)]:[3,2]);case 1:n=r.sent(),r.label=2;case 2:n=(0,v.default)(e,"base64"),r.label=3;case 3:return T("Network.webSocketFrameSent",{requestId:a,timestamp:(0,f.default)()/1e3,response:{opcode:t,payloadData:n}}),[2]}})})}(e),s.call(this,e)},i.addEventListener("close",function(){T("Network.webSocketClosed",{requestId:a,timestamp:(0,f.default)()/1e3})}),i.addEventListener("error",function(){T("Network.webSocketFrameError",{requestId:a,timestamp:(0,f.default)()/1e3,errorMessage:"WebSocket error"})}),i}t.prototype=e.prototype,t.CLOSED=e.CLOSED,t.CLOSING=e.CLOSING,t.CONNECTING=e.CONNECTING,t.OPEN=e.OPEN,window.WebSocket=t}()},5360:function(e,t,n){var r=n(9100),o=n(3612),i=n(1738);function a(e){return function(t,n){t=o(t),r(t,function(t){if(i(n))t.insertAdjacentHTML(e,n);else{var r=t.parentNode;switch(e){case"beforebegin":r&&r.insertBefore(n,t);break;case"afterend":r&&r.insertBefore(n,t.nextSibling);break;case"beforeend":t.appendChild(n);break;case"afterbegin":t.prepend(n)}}})}}t={before:a("beforebegin"),after:a("afterend"),append:a("beforeend"),prepend:a("afterbegin")},e.exports=t},5361:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}n.d(t,{A:function(){return o}})},5395:function(e,t){t=function(e){var t=e.length,n=Array(t);t--;for(var r=0;r<=t;r++)n[t-r]=e[r];return n},e.exports=t},5427:function(e,t,n){var r=n(9760),o=n(3957),i=Object.getPrototypeOf,a={}.constructor;t=function(e){if(r(e)){if(i)return i(e);var t=e.__proto__;return t||null===t?t:o(e.constructor)?e.constructor.prototype:e instanceof a?a.prototype:void 0}},e.exports=t},5458:function(e,t,n){"use strict";n.d(t,{A:function(){return i}});var r=n(5526),o=n(7800);function i(e){return function(e){if(Array.isArray(e))return(0,r.A)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,o.A)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},5526:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{A:function(){return r}})},5546:function(e,t,n){var r=n(5169),o={down:"touchstart",move:"touchmove",up:"touchend"},i={down:"mousedown",move:"mousemove",up:"mouseup"},a={down:"pointerdown",move:"pointermove",up:"pointerup"},s="PointerEvent"in r,l="ontouchstart"in r;t=function(e){return s?a[e]:l?o[e]:i[e]},e.exports=t},5570:function(e,t){var n,r=[],o=document,i=o.documentElement.doScroll,a="DOMContentLoaded",s=(i?/^loaded|^c/:/^loaded|^i|^c/).test(o.readyState);s||o.addEventListener(a,n=function(){for(o.removeEventListener(a,n),s=1;n=r.shift();)n()}),t=function(e){s?setTimeout(e,0):r.push(e)},e.exports=t},5630:function(e,t){var n=0;t=function(e){var t=++n+"";return e?e+t:t},e.exports=t},5651:function(e,t,n){t=n(6307)(n(7514),!0),e.exports=t},5689:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getUsageAndQuota=function(){return{quota:0,usage:0,overrideActive:!1,usageBreakdown:[]}},t.clearDataForOrigin=function(e){var t=e.storageTypes.split(",");(0,o.default)(t,function(e){if("cookies"===e){var t=(0,l.getCookies)().cookies;(0,o.default)(t,function(e){var t=e.name;return(0,i.default)(t)})}else"local_storage"===e&&(c.clear(),u.clear())})},t.getTrustTokens=function(){return{tokens:[]}},t.getStorageKeyForFrame=function(){return{storageKey:location.origin}},t.getSharedStorageMetadata=function(){return{metadata:{creationTime:0,length:0,remainingBudget:0,bytesUsed:0}}},t.setStorageBucketTracking=function(){s.default.trigger("Storage.storageBucketCreatedOrUpdated",{bucketInfo:{bucket:{storageKey:location.origin},durability:"relaxed",expiration:0,id:"0",persistent:!1,quota:0}})};var o=r(n(9100)),i=r(n(3290)),a=r(n(1931)),s=r(n(8665)),l=n(5334),c=(0,a.default)("local"),u=(0,a.default)("session")},5693:function(e,t,n){var r=n(3957),o=n(9760),i=n(6214),a=n(6459),s=n(199),l=n(2455),c=n(500);t=function(e,t,n){return null==e?l:r(e)?a(e,t,n):o(e)&&!i(e)?s(e):c(e)},e.exports=t},5701:function(e,t,n){var r=n(3957),o=n(365),i=n(3145);function a(e,t,n,s){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;if(e!=e)return t!=t;var l=typeof e;return("function"===l||"object"===l||"object"==typeof t)&&function(e,t,n,s){var l=toString.call(e);if(l!==toString.call(t))return!1;switch(l){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0===+e?1/+e==1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var c="[object Array]"===l;if(!c){if("object"!=typeof e||"object"!=typeof t)return!1;var u=e.constructor,d=t.constructor;if(u!==d&&!(r(u)&&u instanceof u&&r(d)&&d instanceof d)&&"constructor"in e&&"constructor"in t)return!1}s=s||[];for(var h=(n=n||[]).length;h--;)if(n[h]===e)return s[h]===t;if(n.push(e),s.push(t),c){if((h=e.length)!==t.length)return!1;for(;h--;)if(!a(e[h],t[h],n,s))return!1}else{var f,p=i(e);if(h=p.length,i(t).length!==h)return!1;for(;h--;)if(f=p[h],!o(t,f)||!a(e[f],t[f],n,s))return!1}return n.pop(),s.pop(),!0}(e,t,n,s)}t=function(e,t){return a(e,t)},e.exports=t},5773:function(e,t,n){var r=n(1738),o=n(769),i=n(8785),a=n(3915),s=n(9405);t=function(e){r(e)&&(e=o(e));for(var t="",n=arguments.length,c=new Array(n>1?n-1:0),u=1;u<n;u++)c[u-1]=arguments[u];for(var d=0,h=e.length;d<h;d++)t+=e[d],c[d]&&(t+=c[d]);for(var f=t.split("\n"),p=[],m=0,g=f.length;m<g;m++){var v=f[m].match(l);v&&p.push(v[1].length)}var y=p.length>0?i.apply(null,p):0;return s(a(f,function(e){return" "===e[0]?e.slice(y):e}).join("\n"))};var l=/^(\s+)\S+/;e.exports=t},5784:function(e,t,n){"use strict";n.d(t,{A:function(){return _e}});var r=n(7528),o=n(4467),i=n(3029),a=n(2901),s=n(388),l=n(3954),c=n(5361),u=n(2263),d=n.n(u),h=n(3693),f=n.n(h),p=n(3915),m=n.n(p),g=n(9405),v=n.n(g),y=n(5169),b=n.n(y),x=n(9548),w=n.n(x),_=(n(6097),n(3249)),k=n.n(_),A=(n(6030),n(5004)),S=n.n(A);function N(e){var t="luna-".concat(e,"-");function n(e){return m()(v()(e).split(/\s+/),function(e){return k()(e,t)?e:e.replace(/[\w-]+/,function(e){return"".concat(t).concat(e)})}).join(" ")}return function(e){if(/<[^>]*>/g.test(e))try{var t=w().parse(e);return C(t,function(e){e.attrs&&e.attrs.class&&(e.attrs.class=n(e.attrs.class))}),w().stringify(t)}catch(t){return n(e)}return n(e)}}function C(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];t(o),o.content&&C(o.content,t)}}n(9410),n(8609);var j="ontouchstart"in b();function E(){var e=S()();return"os x"===e?"mac":e}var T=n(9100),I=n.n(T),P=n(8105),O=n.n(P),M=n(5651),L=n.n(M),R=n(961),D=n.n(R),F=n(7e3),z=n.n(F),B=n(1009),U=n.n(B);function q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(q=function(){return!!e})()}var V,H,G=function(e){function t(e,n){var r,o=n.compName,a=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).theme,c=void 0===a?"light":a;return(0,i.A)(this,t),r=function(e,t,n){return t=(0,l.A)(t),(0,s.A)(e,q()?Reflect.construct(t,[],(0,l.A)(e).constructor):t.apply(e,n))}(this,t),r.subComponents=[],r.theme="",r.onThemeChange=function(e){"auto"===r.options.theme&&r.setTheme(e)},r.compName=o,r.c=N(o),r.options={},r.container=e,r.$container=f()(e),r.$container.addClass(["luna-".concat(o),r.c("platform-".concat(E()))]),r.on("changeOption",function(e,t){if("theme"===e&&t){var n=t;"auto"===t&&(n=z().get()),r.setTheme(n),I()(r.subComponents,function(e){return e.setOption("theme",t)})}}),z().on("change",r.onThemeChange),r.setOption("theme",c),r}return(0,c.A)(t,e),(0,a.A)(t,[{key:"destroy",value:function(){var e=this;this.destroySubComponents();var t=this.$container,n=t.attr("class");I()(n.split(/\s+/),function(n){U()(n,"luna-".concat(e.compName))&&t.rmClass(n)}),t.html(""),this.emit("destroy"),this.removeAllListeners(),z().off("change",this.onThemeChange)}},{key:"setOption",value:function(e,t){var n=this,r=this.options,o={};"string"==typeof e?o[e]=t:o=e,I()(o,function(e,t){var o=r[t];r[t]=e,e!==o&&n.emit("changeOption",t,e,o)})}},{key:"getOption",value:function(e){return this.options[e]}},{key:"addSubComponent",value:function(e){e.setOption("theme",this.options.theme),this.subComponents.push(e)}},{key:"removeSubComponent",value:function(e){D()(this.subComponents,function(t){return t===e})}},{key:"destroySubComponents",value:function(){I()(this.subComponents,function(e){return e.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};L()(e,t),O()(this.options,e)}},{key:"find",value:function(e){return this.$container.find(this.c(e))}},{key:"setTheme",value:function(e){var t=this.c,n=this.$container;this.theme&&n.rmClass(t("theme-".concat(this.theme))),n.addClass(t("theme-".concat(e))),this.theme=e}}])}(d()),K=n(5241),W=n.n(K),Q=n(2571),Z=n.n(Q),Y=n(7181),J=n.n(Y),$=n(5773),X=n.n($),ee=n(769),te=n.n(ee),ne=n(2208),re=n.n(ne),oe=n(4249),ie=n.n(oe),ae=n(15),se=n.n(ae),le=n(3497),ce=n.n(le),ue=n(5902),de=n.n(ue),he=n(8098),fe=n.n(he),pe=n(4307),me=n.n(pe),ge=n(96),ve=n.n(ge);function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function xe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(xe=function(){return!!e})()}e=n.hmd(e);var we={comment:"",string:"",number:"",keyword:"",operator:""},_e=function(e){function t(e){var n,r,o,a,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.A)(this,t),r=this,o=t,a=[e,{compName:"dom-viewer"},c],o=(0,l.A)(o),(n=(0,s.A)(r,xe()?Reflect.construct(o,a||[],(0,l.A)(r).constructor):o.apply(r,a))).isExpanded=!1,n.childNodes=[],n.childNodeDomViewers=[],n.expand=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.isExpandable()&&(n.isExpanded||(n.isExpanded=!0,n.renderExpandTag(),n.renderChildNodes()),e&&I()(n.childNodeDomViewers,function(e){e.expand(!0)}))},n.collapse=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.isExpandable()&&(n.isExpanded&&(n.isExpanded=!1,n.renderCollapseTag()),e&&I()(n.childNodeDomViewers,function(e){e.collapse(!0)}))},n.toggle=function(){n.isExpanded?n.collapse():n.expand()},n.onKeyRight=function(){n.isExpanded?n.childNodeDomViewers[0].select():n.expand()},n.onKeyLeft=function(){var e;n.isExpanded?n.collapse():null===(e=n.options.parent)||void 0===e||e.select()},n.onKeyDown=function(){var e=n.options;if(n.isExpanded)n.childNodeDomViewers[0].select();else{var t=e.parent;if(t)if(e.isEndTag){if(!(t=t.getOption("parent")))return;var r=t,o=r.childNodes,i=r.childNodeDomViewers,a=r.endTagDomViewer,s=o.indexOf(e.node);o[s+1]?i[s+1].select():a&&a.select()}else{var l=t,c=l.childNodeDomViewers,u=l.endTagDomViewer,d=c.indexOf(n);c[d+1]?c[d+1].select():u&&u.select()}}},n.onKeyUp=function(){var e=n.options,t=e.parent;if(t){var r,o;if(e.isEndTag)r=ce()(t.childNodeDomViewers);else{var i=t.childNodeDomViewers.indexOf(n);i<1?t.select():r=t.childNodeDomViewers[i-1]}r&&(r.isExpanded?null===(o=r.endTagDomViewer)||void 0===o||o.select():r.select())}},n.initOptions(c,{node:document.documentElement,parent:null,isEndTag:!1,observe:!0,rootContainer:e,rootDomViewer:n,ignore:function(){return!1},ignoreAttr:function(){return!1},lowerCaseTagName:!0,hotkey:!0}),n.isShadowRoot=J()(n.options.node),n.initTpl(),n.bindEvent(),!n.options.isEndTag&&n.options.observe&&n.initObserver(),n}return(0,c.A)(t,e),(0,a.A)(t,[{key:"select",value:function(e){var t=this.c,n=this.options;if(!e||e&&n.node===e){if(this.$tag.hasClass(t("selected")))return;return f()(this.options.rootContainer).find(t(".selected")).rmClass(t("selected")).rmAttr("tabindex"),this.$tag.attr("tabindex","0").get(0).focus(),this.$tag.addClass(t("selected")),void n.rootDomViewer.emit("select",n.node)}if(e.nodeType===Node.ELEMENT_NODE)for(var r=e,o=e.parentElement;o;){if(o===n.node){this.expand(),this.childNodeDomViewers[this.childNodes.indexOf(r)].select(e);break}r=o,o=o.parentElement}}},{key:"attach",value:function(){this.container.appendChild(this.$tag.get(0)),this.$children&&this.container.appendChild(this.$children.get(0))}},{key:"isAttached",value:function(){return!!this.$tag.get(0).parentNode}},{key:"detach",value:function(){this.$tag.remove(),this.$children&&this.$children.remove()}},{key:"destroy",value:function(){var e=this.c;this.$tag.hasClass(e("selected"))&&this.options.rootDomViewer.emit("deselect"),this.detach(),this.observer&&this.observer.disconnect(),this.destroySubComponents(),this.options.rootDomViewer===this&&this.$container.rmClass("luna-dom-viewer").rmClass(e("platform-".concat(E()))).rmClass(e("theme-".concat(this.options.theme))),this.emit("destroy"),this.removeAllListeners()}},{key:"renderExpandTag",value:function(){var e=this.$tag,t=this.c,n=this.options.node;this.isShadowRoot||e.html(this.renderHtmlTag(be(be({},ke(n)),{},{hasTail:!1,hasToggleButton:!0}))),e.addClass(t("expanded")),this.$children.rmClass(t("hidden"))}},{key:"renderCollapseTag",value:function(){var e=this.$tag,t=this.c,n=this.options.node;this.$children.addClass(t("hidden")),this.isShadowRoot||this.$tag.html(this.renderHtmlTag(be(be({},ke(n)),{},{hasTail:!0,hasToggleButton:!0}))),e.rmClass(t("expanded"))}},{key:"initObserver",value:function(){var e=this;this.observer=new(re())(function(t){I()(t,function(t){e.handleMutation(t)})}),this.observer.observe(this.options.node,{attributes:!0,childList:!0,characterData:!0})}},{key:"handleMutation",value:function(e){var t=this.$tag,n=this.c,r=this.options,o=r.node,i=r.ignore;if(k()(["attributes","childList"],e.type)){if("childList"===e.type){if(fe()(e.addedNodes,i)&&fe()(e.removedNodes,i))return;this.renderChildNodes()}this.isExpandable()?this.isExpanded?this.renderExpandTag():this.renderCollapseTag():(this.$children.addClass(n("hidden")),this.isExpanded=!1,this.isShadowRoot?t.html(this.renderShadowRoot(!1)):t.html(this.renderHtmlTag(be(be({},ke(o)),{},{hasTail:!1}))))}else"characterData"===e.type&&(o.nodeType===Node.TEXT_NODE?t.html(this.renderTextNode(o)):o.nodeType===Node.COMMENT_NODE&&t.html(this.renderHtmlComment(o.nodeValue)))}},{key:"bindEvent",value:function(){var e=this,t=this.c,n=this.$tag;if((this.options.node.nodeType===Node.ELEMENT_NODE||this.isShadowRoot)&&n.on("click",t(".toggle"),function(t){t.stopPropagation(),e.toggle()}),j?n.on("click",function(){return e.select()}):n.on("mousedown",function(){return e.select()}),this.options.hotkey){var r={element:n.get(0)};me().on("right",r,this.onKeyRight),me().on("left",r,this.onKeyLeft),me().on("down",r,this.onKeyDown),me().on("up",r,this.onKeyUp)}}},{key:"isExpandable",value:function(){return!(this.options.node.nodeType!==Node.ELEMENT_NODE&&!this.isShadowRoot)&&this.getChildNodes().length>0}},{key:"getChildNodes",value:function(){var e=this.options,t=e.rootContainer,n=e.ignore,r=this.options.node,o=te()(r.childNodes);return o=Z()(o,function(e){if(e.nodeType===Node.TEXT_NODE||e.nodeType===Node.COMMENT_NODE){var r=e.nodeValue;if(""===v()(r))return!1}return e!==t&&!n(e)}),r.shadowRoot?o.unshift(r.shadowRoot):r.chobitsuShadowRoot&&o.unshift(r.chobitsuShadowRoot),o}},{key:"initTpl",value:function(){var e=this.container,t=this.c,n=this.options,r=n.node,o=n.isEndTag,i=n.lowerCaseTagName,a=f()(W()("li"));if(a.addClass(t("tree-item")),this.$tag=a,o){var s=r.tagName;i&&(s=ve()(s)),a.html(t('<span class="html-tag" style="margin-left: -15px;">&lt;<span class="tag-name">/'.concat(s,'</span>&gt;</span><span class="selection"></span>')))}else if(r.nodeType===Node.ELEMENT_NODE){var l=this.isExpandable(),c=be(be({},ke(r)),{},{hasTail:l,hasToggleButton:l});a.html(this.renderHtmlTag(c))}else if(J()(r)){var u=this.isExpandable();a.html(this.renderShadowRoot(u))}else if(r.nodeType===Node.TEXT_NODE)a.html(this.renderTextNode(r));else{if(r.nodeType!==Node.COMMENT_NODE)return;var d=r.nodeValue;if(""===d.trim())return;a.html(this.renderHtmlComment(d))}if(e.appendChild(a.get(0)),r.nodeType===r.ELEMENT_NODE||this.isShadowRoot){var h=f()(W()("ul"));h.addClass([t("children"),t("hidden")]),e.appendChild(h.get(0)),this.$children=h}}},{key:"renderChildNodes",value:function(){var e=this,n=this.options.node,r=this.options,o=r.rootContainer,i=r.ignore,a=r.ignoreAttr,s=r.rootDomViewer,l=r.observe,c=r.lowerCaseTagName,u=this.$children.get(0),d=this.childNodes,h=this.childNodeDomViewers;I()(h,function(t){t.detach(),e.removeSubComponent(t)}),this.endTagDomViewer&&this.endTagDomViewer.detach();var f=this.getChildNodes();this.childNodes=f;var p=[];this.childNodeDomViewers=p,I()(f,function(n,r){var f,m=d.indexOf(n);(f=m>-1?h[m]:new t(u,{node:n,observe:l,parent:e,rootContainer:o,rootDomViewer:s,ignore:i,ignoreAttr:a,lowerCaseTagName:c})).attach(),p[r]=f,e.addSubComponent(f)}),I()(h,function(e){e.isAttached()||e.destroy()}),n&&!this.isShadowRoot&&(this.endTagDomViewer?this.endTagDomViewer.attach():(this.endTagDomViewer=new t(u,{node:n,parent:this,isEndTag:!0,lowerCaseTagName:c,rootContainer:o,rootDomViewer:s,ignore:i}),this.addSubComponent(this.endTagDomViewer)))}},{key:"renderHtmlTag",value:function(e){var t=this,n=this.options.lowerCaseTagName;e.attributes=Z()(e.attributes,function(n){return!t.options.ignoreAttr(e.el,n.name,n.value)});var o=m()(e.attributes,function(e){var t=e.name,n=e.value,r=e.isLink;return'<span class="attribute">\n          <span class="attribute-name">'.concat(de()(t),"</span>").concat(n?'="<span class="attribute-value'.concat(r?" attribute-underline":"",'">').concat(de()(n),'</span>"'):"","</span>")}).join(""),i="",a=e.tagName;return n&&(a=ve()(a)),e.hasTail?i="".concat(e.hasTail?"\u2026":"",'<span class="html-tag">&lt;<span class="tag-name">/').concat(a,"</span>&gt;</span>"):this.isExpandable()||(i='<span class="html-tag">&lt;<span class="tag-name">/'.concat(a,"</span>&gt;</span>")),this.c(X()(V||(V=(0,r.A)(["\n      ",'\n      <span class="html-tag">&lt;<span class="tag-name">',"</span>","&gt;</span>",'\n      <span class="selection"></span>'])),e.hasToggleButton?this.renderToggle():"",a,o,i))}},{key:"renderTextNode",value:function(e){var t=this.c,n=e.nodeValue,r=e.parentElement,o='<span class="text-node">',i='</span><span class="selection"></span>';if(r&&n.length<1e4){if("STYLE"===r.tagName)return t("".concat(o).concat(ie()(n,"css",we)).concat(i));if("SCRIPT"===r.tagName)return t("".concat(o).concat(ie()(n,"js",we)).concat(i))}return t('"'.concat(o).concat(de()(se()(n,1e4,{separator:" ",ellipsis:"\u2026"}))).concat(i,'"'))}},{key:"renderHtmlComment",value:function(e){return this.c('<span class="html-comment">&lt;!-- '.concat(de()(e),' --&gt;</span><span class="selection"></span>'))}},{key:"renderShadowRoot",value:function(e){var t=this.options.node;return this.c(X()(H||(H=(0,r.A)(["\n      ",'\n      <span class="shadow-root">#shadow-root (',')</span>\n      <span class="selection"></span>'])),e?this.renderToggle():"",t.mode))}},{key:"renderToggle",value:function(){return'<div class="toggle "><span class="icon icon-caret-right"></span><span class="icon icon-caret-down"></span></div>'}}])}(G);function ke(e){var t={el:e,tagName:"",attributes:[]};t.tagName=e.tagName;var n=[];return I()(e.attributes,function(t){var r=t.name,o=t.value;n.push({name:r,value:o,isLink:Ae(e,r)})}),t.attributes=n,t}function Ae(e,t){var n=e.tagName;return("SCRIPT"===n||"IMAGE"===n||"VIDEO"===n||"AUDIO"===n)&&"src"===t||"LINK"===n&&"href"===t}!function(e,t){try{e.exports=t,e.exports.default=t}catch(e){}}(e,_e)},5793:function(e,t,n){var r=n(6097),o=n(3957),i=Math.pow(2,53)-1;t=function(e){if(!e)return!1;var t=e.length;return r(t)&&t>=0&&t<=i&&!o(e)},e.exports=t},5820:function(e,t,n){var r,o=n(3981),i=n(5169),a=i.performance,s=i.process;if(a&&a.now)t=function(){return a.now()};else if(s&&s.hrtime){var l=function(){var e=s.hrtime();return 1e9*e[0]+e[1]};r=l()-1e9*s.uptime(),t=function(){return(l()-r)/1e6}}else r=o(),t=function(){return o()-r};e.exports=t},5865:function(e,t,n){var r=n(4534);t=function(e,t){return r(e,t,!0)},e.exports=t},5869:function(e,t,n){var r=n(365);t=function(e,t){var n=function(o){var i=n.cache,a=""+(t?t.apply(this,arguments):o);return r(i,a)||(i[a]=e.apply(this,arguments)),i[a]};return n.cache={},n},e.exports=t},5902:function(e,t,n){var r=n(3145),o=(t=function(e){return a.test(e)?e.replace(s,l):e}).map={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i="(?:"+r(o).join("|")+")",a=new RegExp(i),s=new RegExp(i,"g"),l=function(e){return o[e]};e.exports=t},5945:function(e,t,n){var r=n(3974);t=function(e){return"[object Set]"===r(e)},e.exports=t},5957:function(e,t,n){var r=n(1738),o=n(2990),i=n(4992),a=n(6214),s=n(3159),l=n(2989),c=n(96);(t=function(e,t){var n;if(t=c(t),r(e))n=new Uint8Array(o.decode(e));else if(i(e))e=e.slice(0),n=new Uint8Array(e);else if(a(e))n=new Uint8Array(e);else if("uint8array"===l(e))n=e.slice(0);else if(s(e)){n=new Uint8Array(e.length);for(var u=0;u<e.length;u++)n[u]=e[u]}if(n)switch(t){case"base64":n=o.encode(n);break;case"arraybuffer":n=n.buffer;break;case"array":n=[].slice.call(n);break;case"buffer":n=Buffer.from(n);break;case"blob":n=new Blob([n.buffer])}return n}).blobToArrBuffer=function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e)},r.readAsArrayBuffer(e)})},e.exports=t},6024:function(e,t,n){var r=n(2884);t=function(e){return!!r(e)&&e%2!=0},e.exports=t},6026:function(e,t,n){var r=n(8971);t=function(e,t,n){return r(n)&&(n=t,t=void 0),!r(t)&&e<t?t:e>n?n:e},e.exports=t},6030:function(e,t,n){var r=n(6097),o=n(9760),i=n(3957),a=n(1738);t=function(e){if(r(e))return e;if(o(e)){var t=i(e.valueOf)?e.valueOf():e;e=o(t)?t+"":t}return a(e)?+e:0===e?e:+e},e.exports=t},6032:function(e,t,n){var r=n(2717),o=n(8105),i=n(9405),a=n(7257),s=n(9464),l=n(9100),c=n(6214),u=n(769),d=n(1909),h=n(9760),f=n(2561);t=r({className:"Url",initialize:function(e){!e&&d&&(e=window.location.href),o(this,t.parse(e||""))},setQuery:function(e,t){var n=this.query;return h(e)?l(e,function(e,t){n[t]=f(e)}):n[e]=f(t),this},rmQuery:function(e){var t=this.query;return c(e)||(e=u(e)),l(e,function(e){delete t[e]}),this},toString:function(){return t.stringify(this)}},{parse:function(e){var t={protocol:"",auth:"",hostname:"",hash:"",query:{},port:"",pathname:"",slashes:!1},n=i(e),r=!1,o=n.match(p);if(o&&(o=o[0],t.protocol=o.toLowerCase(),n=n.substr(o.length)),o&&(r="//"===n.substr(0,2))&&(n=n.slice(2),t.slashes=!0),r){for(var s=n,l=-1,c=0,u=g.length;c<u;c++){var d=n.indexOf(g[c]);-1!==d&&(-1===l||d<l)&&(l=d)}l>-1&&(s=n.slice(0,l),n=n.slice(l));var h=s.lastIndexOf("@");-1!==h&&(t.auth=decodeURIComponent(s.slice(0,h)),s=s.slice(h+1)),t.hostname=s;var f=s.match(m);f&&(":"!==(f=f[0])&&(t.port=f.substr(1)),t.hostname=s.substr(0,s.length-f.length))}var v=n.indexOf("#");-1!==v&&(t.hash=n.substr(v),n=n.slice(0,v));var y=n.indexOf("?");return-1!==y&&(t.query=a.parse(n.substr(y+1)),n=n.slice(0,y)),t.pathname=n||"/",t},stringify:function(e){var t=e.protocol+(e.slashes?"//":"")+(e.auth?encodeURIComponent(e.auth)+"@":"")+e.hostname+(e.port?":"+e.port:"")+e.pathname;return s(e.query)||(t+="?"+a.stringify(e.query)),e.hash&&(t+=e.hash),t}});var p=/^([a-z0-9.+-]+:)/i,m=/:[0-9]*$/,g=["/","?","#"];e.exports=t},6097:function(e,t,n){var r=n(3974);t=function(e){return"[object Number]"===r(e)},e.exports=t},6167:function(e,t,n){var r=n(5693);t=function(e,t,n,o){o=o||1,t=r(t,n);for(var i=e.length,a=o>0?0:i-1;a>=0&&a<i;){if(t(e[a],a,e))return a;a+=o}return-1},e.exports=t},6186:function(e,t,n){var r=n(8971),o=n(6949);t=function(e,t){var n;for(n=(t=o(t,e)).shift();!r(n);){if(null==(e=e[n]))return;n=t.shift()}return e},e.exports=t},6192:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.collectClassNamesFromSubtree=function(e){var t=(0,u.getNode)(e.nodeId),n=[];return I(t,function(e){if(1===e.nodeType){var t=e.getAttribute("class");if(t)for(var r=0,o=t.split(/\s+/);r<o.length;r++){var i=o[r];n.push(i)}}}),{classNames:(0,y.default)(n)}},t.copyTo=function(e){var t=e.nodeId,n=e.targetNodeId,r=(0,u.getNode)(t),o=(0,u.getNode)(n),i=r.cloneNode(!0);return o.appendChild(i),{nodeId:(0,u.getNodeId)(i)}},t.enable=function(){C=!0,h.default.disconnect(),h.default.observe(document.documentElement),c.clear()},t.getDocument=function(){return{root:c.wrap(document,{depth:2})}},t.getOuterHTML=function(e){var t="";return e.nodeId&&(t=(0,u.getNode)(e.nodeId).outerHTML),{outerHTML:t}},t.moveTo=function(e){var t=e.nodeId,n=e.targetNodeId,r=(0,u.getNode)(t);return(0,u.getNode)(n).appendChild(r),{nodeId:(0,u.getNodeId)(r)}},t.performSearch=function(e){var t=(0,x.default)(e.query),n=[];try{n=(0,A.default)(n,(0,_.default)(document.querySelectorAll(t)))}catch(e){}try{n=(0,A.default)(n,(0,k.default)(t))}catch(e){}I(document,function(e){var r=e.nodeType;if(1===r){var o=e.localName;if((0,b.default)("<".concat(o," "),t)||(0,b.default)("</".concat(o,">"),t))return void n.push(e);var i=[];(0,w.default)(e.attributes,function(e){var t=e.name,n=e.value;return i.push(t,n)});for(var a=0,s=i.length;a<s;a++)if((0,b.default)((0,x.default)(i[a]),t)){n.push(e);break}}else 3===r&&(0,b.default)((0,x.default)(e.nodeValue),t)&&n.push(e)});var r=(0,N.createId)();return j.set(r,n),{searchId:r,resultCount:n.length}},t.getSearchResults=function(e){var t=e.searchId,n=e.fromIndex,r=e.toIndex,o=j.get(t).slice(n,r);return{nodeIds:(0,v.default)(o,function(e){return(0,u.getNodeId)(e)||E(e)})}},t.pushNodesToFrontend=E,t.discardSearchResults=function(e){j.delete(e.searchId)},t.pushNodesByBackendIdsToFrontend=function(e){return{nodeIds:e.backendNodeIds}},t.removeNode=function(e){var t=(0,u.getNode)(e.nodeId);(0,f.default)(t).remove()},t.requestChildNodes=function(e){var t=e.nodeId,n=e.depth,r=void 0===n?1:n,o=(0,u.getNode)(t);l.default.trigger("DOM.setChildNodes",{parentId:t,nodes:c.getChildNodes(o,r)})},t.requestNode=function(e){var t=d.getObj(e.objectId);return{nodeId:(0,u.getNodeId)(t)}},t.resolveNode=function(e){var t=(0,u.getNode)(e.nodeId);return{object:d.wrap(t)}},t.setAttributesAsText=function(e){var t,n=e.name,r=e.text,o=e.nodeId,i=(0,u.getNode)(o);n&&i.removeAttribute(n),(0,f.default)(i).attr((t="<div ".concat(t=r,"></div>"),g.default.parse(t)[0].attrs))},t.setAttributeValue=function(e){var t=e.nodeId,n=e.name,r=e.value;(0,u.getNode)(t).setAttribute(n,r)},t.setInspectedNode=function(e){var t=(0,u.getNode)(e.nodeId);T.unshift(t),T.length>5&&T.pop();for(var n=0;n<5;n++)(0,S.setGlobal)("$".concat(n),T[n])},t.setNodeValue=function(e){var t=e.nodeId,n=e.value;(0,u.getNode)(t).nodeValue=n},t.setOuterHTML=function(e){var t=e.nodeId,n=e.outerHTML;(0,u.getNode)(t).outerHTML=n},t.getDOMNodeId=function(e){var t=e.node;return{nodeId:c.getOrCreateNodeId(t)}},t.getDOMNode=function(e){var t=e.nodeId;return{node:(0,u.getNode)(t)}},t.getTopLayerElements=function(){return{nodeIds:[]}},t.getNodesForSubtreeByStyle=function(){return{nodeIds:[]}};var s,l=a(n(8665)),c=i(n(9893)),u=n(9893),d=i(n(2484)),h=a(n(8757)),f=a(n(3693)),p=a(n(4236)),m=a(n(9464)),g=a(n(9548)),v=a(n(3915)),y=a(n(438)),b=a(n(3249)),x=a(n(96)),w=a(n(9100)),_=a(n(769)),k=a(n(8862)),A=a(n(4069)),S=n(2627),N=n(916),C=!1;(s=Element.prototype.attachShadow)&&(Element.prototype.attachShadow=function(e){var t=s.apply(this,[e]);if(!c.isValidNode(this))return t;if(this.chobitsuShadowRoot=t,C){h.default.observe(t);var n=(0,u.getNodeId)(this);n&&l.default.trigger("DOM.shadowRootPushed",{hostId:n,root:c.wrap(t,{depth:1})})}return t});var j=new Map;function E(e){for(var t=[e],n=e.parentNode;n&&(t.push(n),!(o=(0,u.getNodeId)(n)));)n=n.parentNode;for(;t.length;){var r=t.pop(),o=(0,u.getNodeId)(r);l.default.trigger("DOM.setChildNodes",{parentId:o,nodes:c.getChildNodes(r,1)})}return(0,u.getNodeId)(e)}var T=[];function I(e,t){for(var n=c.filterNodes(e.childNodes),r=0,o=n.length;r<o;r++){var i=n[r];t(i),I(i,t)}}h.default.on("attributes",function(e,t){var n=(0,u.getNodeId)(e);if(n){var r=e.getAttribute(t);(0,p.default)(r)?l.default.trigger("DOM.attributeRemoved",{nodeId:n,name:t}):l.default.trigger("DOM.attributeModified",{nodeId:n,name:t,value:r})}}),h.default.on("childList",function(e,t,n){var r=(0,u.getNodeId)(e);if(r){if(t=c.filterNodes(t),n=c.filterNodes(n),!(0,m.default)(t)){f();for(var o=0,i=t.length;o<i;o++){var a=t[o],s=c.getPreviousNode(a),d=s?(0,u.getNodeId)(s):0,h={node:c.wrap(a,{depth:0}),parentNodeId:r,previousNodeId:d};l.default.trigger("DOM.childNodeInserted",h)}}if(!(0,m.default)(n))for(o=0,i=n.length;o<i;o++){if(a=n[o],!(0,u.getNodeId)(a)){f();break}l.default.trigger("DOM.childNodeRemoved",{nodeId:(0,u.getNodeId)(a),parentNodeId:r})}}function f(){l.default.trigger("DOM.childNodeCountUpdated",{childNodeCount:c.wrap(e,{depth:0}).childNodeCount,nodeId:r})}}),h.default.on("characterData",function(e){var t=(0,u.getNodeId)(e);t&&l.default.trigger("DOM.characterDataModified",{characterData:e.nodeValue,nodeId:t})})},6195:function(e,t,n){var r=n(5693),o=n(3145);t=function(e,t,n){t=r(t,n);for(var i,a=o(e),s=0,l=a.length;s<l;s++)if(t(e[i=a[s]],i,e))return i},e.exports=t},6214:function(e,t,n){var r=n(3974);t=Array.isArray?Array.isArray:function(e){return"[object Array]"===r(e)},e.exports=t},6307:function(e,t,n){var r=n(8971),o=n(9100);t=function(e,t){return function(n){return o(arguments,function(i,a){if(0!==a){var s=e(i);o(s,function(e){t&&!r(n[e])||(n[e]=i[e])})}}),n}},e.exports=t},6314:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n,r,o,i=e[1]||"",a=e[3];if(!a)return i;if(t&&"function"==typeof btoa){var s=(n=a,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(o," */")),l=a.sources.map(function(e){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")});return[i].concat(l).concat([s]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n}).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);r&&o[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},6334:function(e,t,n){var r=n(9100),o=n(5224),i=n(3915),a=n(4966);function s(e){return+("0x"+e)}t=function(e){try{return decodeURIComponent(e)}catch(n){var t=e.match(l);return t?(r(t,function(t){e=e.replace(t,function(e){e=e.split("%").slice(1);var t=i(e,s);return e=o.encode(t),e=a.decode(e,!0)}(t))}),e):e}};var l=/(%[a-f0-9]{2})+/gi;e.exports=t},6392:function(e,t,n){var r=n(1710),o=n(2561);t=function(e,t,n){var i=(e=o(e)).length;return n=n||" ",i<t&&(e=(r(n,t-i)+e).slice(-t)),e},e.exports=t},6459:function(e,t,n){var r=n(8971);t=function(e,t,n){if(r(t))return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,i){return e.call(t,n,r,o,i)}}return function(){return e.apply(t,arguments)}},e.exports=t},6476:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(8665)),s=i(n(9993)),l=i(n(8046)),c=i(n(9100)),u=i(n(2263)),d=n(916),h=function(){function e(){var e=this;this.resolves=new Map,this.domains=new Map,this.onMessage=s.default,a.default.on("message",function(t){var n=JSON.parse(t),r=e.resolves.get(n.id);if(r&&r(n.result),!n.id){var o=n.method.split("."),i=o[0],a=o[1],s=e.domains.get(i);s&&s.emit(a,n.params)}e.onMessage(t)})}return e.prototype.domain=function(e){return this.domains.get(e)},e.prototype.setOnMessage=function(e){this.onMessage=e},e.prototype.sendMessage=function(e,t){var n=this;void 0===t&&(t={});var r=(0,l.default)();return this.sendRawMessage(JSON.stringify({id:r,method:e,params:t})),new Promise(function(e){n.resolves.set(r,e)})},e.prototype.sendRawMessage=function(e){return r(this,void 0,void 0,function(){var t,n,r,i,s,l,c;return o(this,function(o){switch(o.label){case 0:t=JSON.parse(e),n=t.method,r=t.params,i=t.id,s={id:i},o.label=1;case 1:return o.trys.push([1,3,,4]),l=s,[4,this.callMethod(n,r)];case 2:return l.result=o.sent(),[3,4];case 3:return(c=o.sent())instanceof d.ErrorWithCode?s.error={message:c.message,code:c.code}:c instanceof Error&&(s.error={message:c.message}),[3,4];case 4:return a.default.emit("message",JSON.stringify(s)),[2]}})})},e.prototype.register=function(e,t){var n=this.domains,r=n.get(e);r||(r={},u.default.mixin(r)),(0,c.default)(t,function(e,t){r[t]=e}),n.set(e,r)},e.prototype.callMethod=function(e,t){return r(this,void 0,void 0,function(){var n,r,i,a;return o(this,function(o){if(n=e.split("."),r=n[0],i=n[1],(a=this.domain(r))&&a[i])return[2,a[i](t)||{}];throw Error("".concat(e," unimplemented"))})})},e}();t.default=h},6493:function(e,t){t=function(e){return!0===e||!1===e},e.exports=t},6513:function(e,t,n){var r=n(9760);t=function(e){if(!r(e))return{};if(o)return o(e);function t(){}return t.prototype=e,new t};var o=Object.create;e.exports=t},6567:function(e,t,n){(t=n(6314)(!1)).push([e.id,'#_console{padding-top:40px;padding-bottom:24px;width:100%;height:100%}#_console._js-input-hidden{padding-bottom:0}#_console ._control{padding:10px 10px 10px 35px;position:absolute;width:100%;height:40px;left:0;top:0;cursor:default;font-size:0;background:var(--darker-background);color:var(--primary);line-height:20px;border-bottom:1px solid var(--border)}#_console ._control [class*=" _icon-"],#_console ._control [class^=eruda-icon-]{display:inline-block;padding:10px;font-size:16px;position:absolute;top:0;cursor:pointer;transition:color .3s}#_console ._control [class*=" _icon-"]._active,#_console ._control [class*=" _icon-"]:active,#_console ._control [class^=eruda-icon-]._active,#_console ._control [class^=eruda-icon-]:active{color:var(--accent)}#_console ._control ._icon-clear{padding-right:0;left:0}#_console ._control ._icon-copy{right:0}#_console ._control ._icon-filter{right:23px}#_console ._control ._level{cursor:pointer;font-size:12px;height:20px;display:inline-block;margin:0 2px;padding:0 4px;line-height:20px;transition:background-color .3s,color .3s}#_console ._control ._level._active{background:var(--highlight);color:var(--select-foreground)}#_console ._control ._filter-text{white-space:nowrap;position:absolute;line-height:20px;max-width:80px;overflow:hidden;right:55px;font-size:14px;text-overflow:ellipsis}#_console ._js-input{pointer-events:none;position:absolute;z-index:100;left:0;bottom:0;width:100%;border-top:1px solid var(--border);height:24px}#_console ._js-input ._icon-arrow-right{line-height:23px;color:var(--accent);position:absolute;left:10px;top:0;z-index:10}#_console ._js-input._active{height:100%;padding-top:40px;padding-bottom:40px;border-top:none}#_console ._js-input._active ._icon-arrow-right{display:none}#_console ._js-input._active textarea{overflow:auto;padding-left:10px}#_console ._js-input ._buttons{display:none;position:absolute;left:0;bottom:0;width:100%;height:40px;color:var(--primary);background:var(--darker-background);font-size:12px;border-top:1px solid var(--border)}#_console ._js-input ._buttons ._button{pointer-events:all;cursor:pointer;flex:1;text-align:center;border-right:1px solid var(--border);height:40px;line-height:40px;transition:background-color .3s,color .3s}#_console ._js-input ._buttons ._button:last-child{border-right:none}#_console ._js-input ._buttons ._button:active{color:var(--select-foreground);background:var(--highlight)}#_console ._js-input textarea{overflow:hidden;pointer-events:all;padding:3px 10px;padding-left:25px;outline:0;border:none;font-size:14px;width:100%;height:100%;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;resize:none;color:var(--primary);background:var(--background)}._safe-area #_console{padding-bottom:calc(24px + env(safe-area-inset-bottom))}._safe-area #_console._js-input-hidden{padding-bottom:0}._safe-area #_console ._js-input{height:calc(24px + env(safe-area-inset-bottom))}._safe-area #_console ._js-input._active{height:100%;padding-bottom:calc(40px + env(safe-area-inset-bottom))}._safe-area #_console ._js-input ._buttons{height:calc(40px + env(safe-area-inset-bottom))}._safe-area #_console ._js-input ._buttons ._button{height:calc(40px + env(safe-area-inset-bottom))}',""]),e.exports=t},6620:function(e,t,n){var r=n(1909),o=n(6631),i=n(3145);t=function(e){var t=c(e=(e=e||(r?navigator.userAgent:"")).toLowerCase(),"msie ");if(t)return{version:t,name:"ie"};if(s.test(e))return{version:11,name:"ie"};for(var n=0,i=l.length;n<i;n++){var u=l[n],d=e.match(a[u]);if(null!=d){var h=o(d[1].split(".")[0]);return"opera"===u&&(h=c(e,"version/")||h),{name:u,version:h}}}return{name:"unknown",version:-1}};var a={edge:/edge\/([0-9._]+)/,firefox:/firefox\/([0-9.]+)(?:\s|$)/,opera:/opera\/([0-9.]+)(?:\s|$)/,android:/android\s([0-9.]+)/,ios:/version\/([0-9._]+).*mobile.*safari.*/,safari:/version\/([0-9._]+).*safari/,chrome:/(?!chrom.*opr)chrom(?:e|ium)\/([0-9.]+)(:?\s|$)/},s=/trident\/7\./,l=i(a);function c(e,t){var n=e.indexOf(t);if(n>-1)return o(e.substring(n+t.length,e.indexOf(".",n)))}e.exports=t},6631:function(e,t,n){var r=n(6030);t=function(e){return e?(e=r(e))-e%1:0===e?e:0},e.exports=t},6717:function(e,t,n){(t=n(6314)(!1)).push([e.id,"._container ._entry-btn{touch-action:none;width:40px;height:40px;display:flex;background:#000;opacity:.3;border-radius:10px;position:relative;z-index:1000;transition:opacity .3s;color:#fff;font-size:25px;align-items:center;justify-content:center}._container ._entry-btn._active,._container ._entry-btn:active{opacity:.8}",""]),e.exports=t},6741:function(e,t,n){var r=n(2717),o=n(6186),i=n(8105),a=n(2508),s=n(1738),l=n(3957);t=r({initialize:function(e,t){this._locale=e,this._langs=t},set:function(e,t){this._langs[e]?i(this._langs[e],t):this._langs[e]=t},t:function(e,t){var n="",r=this._langs[this._locale];return r?(n=o(r,e),t&&(s(n)?n=a(n,t):l(n)&&(n=n(t))),n||""):""},locale:function(e){this._locale=e}}),e.exports=t},6774:function(e,t){t=function(e,t,n){null==t&&(t=e,e=0);var r=Math.random();return n||e%1||t%1?Math.min(e+r*(t-e+parseFloat("1e-"+((r+"").length-1))),t):e+Math.floor(r*(t-e+1))},e.exports=t},6793:function(e,t,n){(t=n(6314)(!1)).push([e.id,"@font-face{font-family:eruda-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAA6UAAsAAAAAGvAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAARoAAAHeLjoycE9TLzIAAAIkAAAAPwAAAFZWm1KoY21hcAAAAmQAAAFdAAADwhPu1O9nbHlmAAADxAAAB+wAAA9I7RPQpGhlYWQAAAuwAAAAMQAAADZ26MSyaGhlYQAAC+QAAAAdAAAAJAgEBC9obXR4AAAMBAAAAB0AAACwXAv//GxvY2EAAAwkAAAAOwAAAFpuVmoybWF4cAAADGAAAAAfAAAAIAE9AQ1uYW1lAAAMgAAAASkAAAIWm5e+CnBvc3QAAA2sAAAA5QAAAU4VMmUJeJxNkD1Ow0AQhb9NHGISCH9RiB0cErCNHRrqFFSIyqKiQHSpEFJERUnBCTgPZ+AEHIe34wDe1f69efPezOKAHldc07q5re4ZrFevL8QE1MPHm3e3fn5aEf6+FAvsDHHuTUoxd7zzwSdffLulq9wjLbaYau8TacZMONE554xzZsrtNfBEzFOhbSmOyTmga0ikvRR/37RSsSMyDukYPjWdgGOtsSK55Y/k0Bf/ksK0MrbFr70idsVZKNPnDcSay3umd2TISCvWTJSxI78lFQ/C+qbv/Zo9tNXDP55ZL7k0Q90u5F5XX0qrYx16btccCtXg/ULrKzGFuqY9rUTMhf3fkCNj+MxUnsM/frr5Qx+ZbH4vVQ0F5Q/ZQBvxAAB4nGNgZJJgnMDAysDA1Mt0hoGBoR9CM75mMGLkAIoysDIzYAUBaa4pDAcYdD+KsIC4MSxMDIxAGoQZALgnCOUAeJy1011SGlEQhuF3BFHxD5UUyr8gIJIsiiKJsSqJlrHKsJssKFeuxF6Bfj3dF96aqhzqoZnDzJyG8w2wCVTko1SheKLAx1/NFuV8hXo5X+WPjht6+fmfWHLDHQ+srfnykjMrvnPPoxXlzNtRlFc26HLBZblal1N9ntBnwIgx5/SYMaWt78+YM6TDgitduaEVq+q0xhbb7KifPQ441N2OOOaEJh9oaYka7xvdd57vQz1P+oPR+Bx6s2lbrc6H0Flc/cO9/sfY87fiOY8u8X0J/muX6VRW6UI+p4l8SX35mgZynUbyLY3lJukf0e6HnvxIM/mZpnKb2nKXvM/7dCa/0lwe0lAeU0d+p4Wsk3bBiuDptY2A10rw9Fo1eOJtM/iTYLWA162A1+2A152A13rwJ8R2g++AJaUU2w/KK3YQlFzsMCjDWCMozdhRUK6x46CEYydBWceagdYraihRngAAAHic7RdbbBxX9Z57Z2d2d2ZndryzM7ve9ax3NztjO/bann0lTuW16zoBJSWJ7Zg83NiUJCQ1Ik2ikKQJNC9FFQqVEG0RVLQoSpEKH2klqgpEIyWAUMRTNBJC/PUDhETgiwhQd8y5s1s7oqr624/srO6ce89zzjn3nHsJEPwxyn5GVEJKBTcCdc80pAiYhkjfNWL+NnhLdTKqfxVOqJlxFX6E84wb86/6X4+5GRLw0/vsOgkREoFGBFx62P/uFviBP78FWrC02d/r79vcpmMl+k2uBwwJxIILTrVeyXsmK8krRLb5YGqUaCb9ksYnMuBqMtnRcY6V1nidml6texaY9CxSRm3TtKNIjcxrUjhEWKD3OnuNJEgPKSG/I6nUpo06fxwXH8lmEoyDFQIVyrROs7254z990rj0u2PLez47WqG1yu69V7ZdfDxU9He4C6P+v+HN+vlnD9Uou0Zp+NnfvveT/XL0kbGFxT/u37tx7CTdeuGlKfiibcMr/gt9qfyu05e4+YEdb7A3iEVG0ArdEAvDIPHBqTbB7bgCDA0sdH0x3/nEHDT4YFJi9siz74iaOBkK3ZyRTRXwE+FGG15BeA0Pf14hqinP3AyFJnHhnVm5xzThmNSBNFjDdvwzw75GFJIlvWhZ1UHlYlI3zIputa3CSduiRF7P09e9on+jODpanPOKsJMDOPV2wU7/BqsVPcQ2ix41X/8ARKpbfhPVtHNgik1hXAhIlmQ1rIbbcCVIzN/7+65794KRTc13IBwJXVkhRACBkAEyhVyiBqJbRn81YRjKUDfRN9xHpoVBt0xJRZ+iS4ehZFg2utJrjCO2GrAUAizcj+c3pXpiXVQwThZmdNrbrx+hAjtjbhSF5FPyKSsqmGraWKYCbfl97vMLi79fXHje7XsAhBsoo0P35fyMPpCj+lM0FDptJexuYzl82upRufxlKgrTh/+fOwBXc+Jt9jZJBTnxUbH/yGT5j4jRT2pB9O1oO/oi3FyD2/ggU14LY/j5RuHTJIZf5LR/WVmbaB2CT6xdQa4KwJZIHPfyMFoWRNSmQZDLlJVpdRw8GwwVWEGlScOGijdOq2VKyfHDB7/d1/+d37zXeT/dXG42l7/Kh2a20pd0JpxsxTVNt8KWyuu/94Ujr+7uvFpvQXP5PCfEAU4l+6pZZ9Ix3eqGqmsGrvok28V+zi6TKEYyi/Udt0MNavkkJC1e+vQA1tGqil6EV93j/UBbY0AXm/2Vku+z53x/8MDT5879U9Nb4Cqq/yf/WEjReiECfS9+C2f/6umFS/77q3t7kp0nGu8DTrFTQrwG1KtsoHVXlnXL0qMKHTRpGbaJlt7aoVsSbO3aQFb5L7MTJElIwrBMvnWxQteCEl2QREn8Ci/Ef9i7u1IT6tX5Pb/ePV+rUXKEL3DMkUPzc6OeNzo3/6C8K2QdrzVlKAYyHhBcxGgUyoCRqXimJZXYwYO1y1tWxQWKLkyfunpqevrU5vJs4SQ02JUDw94qMlC6maORJpc9AR/Sm7C4cK7S4MoL/FNqFYy+Nw5VbpIoWaWXP0atf+fj1Lb36w12h6SxShIouuNQw+TCVDNsWvHqDStpNUoFnobUs6mhUvpmn+r2VxaeuXjmCc974vSjm44OxfytrXeH5iaKxYm5fXMThcLEHLwcGzq66dHTnObMxWcWKv2u2tfa1ipMzu7rEM5OFshqLfsFu4R9thszrVjAUoHFgH98DxRreb3CK74rMTh/bWmJTq9Pd0nCZOvsbfrYrVsTty9cOPc5Or2U6spq8rXbrbNAL9yeuHWLYuEnEiErK0JIAPIN8kNyl9wn/yUt7mioN6GGTi1jDQrypNPRxQ+8zREatnUsVtgbcDHAaZA0rc6TxOIWLPFVXLDbvYRT45CDSnBOqFhee4aTcWw8gapGnS+Z+EYrOuqh825jrY5WSVwPDSewh/OWqYueCJQFEjhELTdgcdEODjUCo5yge7lcAlJxRSgceyZyu5LFfqnaeldKlsyunnK6N6LEaUSqTSndgpZK7jC7NZaR7LGcGhXwgMNC+WFt0MxEomZcECQ9EY4JkgAQDilSNKnGuxXJ0u2hdG9YUZkiZcfWpaOWkUv0G6IaCseVVH81o0dEEClKGokassX0hKSk44PxBGOS4E8cmNk+OMSY5+2cXfz8zI4hrG4jI9tnFpW/hqKx7PCnH1O7wpFkqeANT4IUVhopPTUwnNJxzSlUzLASV+4YfUIkpoQFTYvoMUFkJgtJ/Z6VEIyymx4usdCW5CuDc9s+dZDm6GeiejTl1jN6VFKUdMHMlUIWzaQEOdyrKHIsL0VZJB0TE1rUlLvCo71yPKya3dW+ONBQRBajUdPuKoXFsBAOiYoUdx7JtSXlU3ZJNAW1O+4ktBCFqBjLJhMW97JgyonISE5kVIJQJJ6tO6nueCJj1TV/D6uMzu06tH/H44NlRr3RnbNPLu7cXh75sWOklURzi5ZI9dgqG6tuEAf0bkWX0/0j6S6+RjfaYiQsbkKHhuNdms6kUExWZNGSlJgzkjIGjPK61KjLxOvGc/1/27r9KOQe7omHe+LhnvjQnmArLTyHMYHiPbGbFLEL4Q1BxOsiHrfy2HIBz67BXQbPsVbB4TNDZP/wF4x63cAxUl/PRtbXI61f2QM2/iuZUqleKr3ABp1Mxnn/rjvpOJN0b9K2k/73+Xi/VHOcGl4qyf8AzjWNo3icY2BkYGAA4uhnXafj+W2+MnCzgASiOB/va4DR///+/8/CysIElOBgAJEMAHS2DWQAAAB4nGNgZGBgYQABFtb/f///ZWFlYGRABToAW+YEPQAAAHicY2BgYGAhiP//J6wGCbNCMcP/vwxUBgDl4QRhAAAAeJxjYAACBQYThiCGAoYtjAyMZowBjPuYuJjCmBYxvWNWYXZhzmFewfyIRYUliPUOexr7EmIhAF3rF0sAeJxjYGRgYNBhZGRgZwABJiDmAkIGhv9gPgMADcIBTAB4nGWQPW7CQBSEx2BIAlKCFCkps1UKIpmfkgNAT0GXwpi1MbK91npBossJcoQcIaeIcoIcKGPzaGAtP38zb97uygAG+IWHenm4bWq9WrihOnGb9CDsk5+FO+jjRbhLfyjcwxumwn084p07eP4dnQFK4Rbu8SHcpv8p7JO/hDt4wrdwl/6PcA8r/An38eoN08gUsSncUif7LLRnef6utK1SU6hJMD5bC11oGzq9Ueujqg7J1LlYxdbkas6uzjKjSmt2OnLB1rlyNhrF4geRyZEigkGBuKkOS2gk2CNDCHvVvdQrpi0q+rVWmCDA+Cq1YKpokiGVxobJNY6sFQ48bUrXMa34Ws7kpLnMat4kIyv+77q3oxPRD7BtpkrMMOITX+SD5g75Pz0RXqgAAAB4nG2MyW6DQBiD+RKYpKT7vqf7Gg55pNHwEyJNGDSMRHj70nKtD7Zly45G0YA0+h8LRoyJSVBMmLJDyoxd9tjngEOOOOaEU84454JLrrjmhlvuuGfOA4888cwLr7zxzgeffPHNgixKtfeuzawUYTZYv16VITXaS8hy11azwf7FibGi/dS4Te2laWLj6k7lYiVIIv3aK9nWusqng2TLsXR900m2VMXaBvFxbXWnvBjn84mXor8pk54kqKa/NmUvVkyIg3NW/VK2jFvtKzQeR0uGRSgIrFlRYsip2FDT0LGNoh/MCkh9AAAA') format('woff')}[class*=' _icon-'],[class^='_icon-']{display:inline-block;font-family:eruda-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}._icon-arrow-left:before{content:'\\f101'}._icon-arrow-right:before{content:'\\f102'}._icon-caret-down:before{content:'\\f103'}._icon-caret-right:before{content:'\\f104'}._icon-clear:before{content:'\\f105'}._icon-compress:before{content:'\\f106'}._icon-copy:before{content:'\\f107'}._icon-delete:before{content:'\\f108'}._icon-error:before{content:'\\f109'}._icon-expand:before{content:'\\f10a'}._icon-eye:before{content:'\\f10b'}._icon-filter:before{content:'\\f10c'}._icon-play:before{content:'\\f10d'}._icon-record:before{content:'\\f10e'}._icon-refresh:before{content:'\\f10f'}._icon-reset:before{content:'\\f110'}._icon-search:before{content:'\\f111'}._icon-select:before{content:'\\f112'}._icon-tool:before{content:'\\f113'}._icon-warn:before{content:'\\f114'}",""]),e.exports=t},6833:function(e,t){var n=/([A-Z])/g,r=/[_.\- ]+/g,o=/(^-)|(-$)/g;t=function(e){return(e=e.replace(n,"-$1").toLowerCase().replace(r,"-").replace(o,"")).split("-")},e.exports=t},6866:function(e,t,n){var r=n(1738),o=n(9760),i=n(7604),a=n(8971),s=n(3249),l=n(6097),c=n(3612),u=n(6969),d=n(9100);t=function(e,t,n){if(e=c(e),a(n)&&r(t))return function(e,t){return e.style[u(t)]||getComputedStyle(e,"").getPropertyValue(t)}(e[0],t);var f=t;o(f)||((f={})[t]=n),function(e,t){d(e,function(e){var n=";";d(t,function(e,t){t=u.dash(t),n+=t+":"+function(e,t){return l(t)&&!s(h,i(e))?t+"px":t}(t,e)+";"}),e.style.cssText+=n})}(e,f)};var h=["column-count","columns","font-weight","line-weight","opacity","z-index","zoom"];e.exports=t},6911:function(e,t,n){"use strict";n.d(t,{j:function(){return Ue},A:function(){return He}});var r=n(2284),o=n(3029),i=n(2901),a=n(388),s=n(3954),l=n(991),c=n(5361),u=n(5427),d=n.n(u),h=n(6097),f=n.n(h),p=n(6493),m=n.n(p),g=n(96),v=n.n(g),y=n(9760),b=n.n(y),x=n(6214),w=n.n(x),_=n(9931),k=n.n(_),A=n(3145),S=n.n(A),N=n(9100),C=n.n(N),j=n(1168),E=n.n(j),T=n(8796),I=n.n(T),P=n(2989),O=n.n(P),M=n(3693),L=n.n(M),R=n(466),D=n.n(R),F=n(15),z=n.n(F),B=n(1738),U=n.n(B),q=n(7514),V=n.n(q),H=n(2571),G=n.n(H),K=n(7140),W=n.n(K),Q=n(2561),Z=n.n(Q),Y=n(9993),J=n.n(Y),$=n(1532),X=n.n($),ee=n(8105),te=n.n(ee),ne=(0,i.A)(function e(){(0,o.A)(this,e),this.id=0,this.visited=[]},[{key:"set",value:function(e,t){var n=this.visited,r=this.id,o={id:r,val:e};return te()(o,t),n.push(o),this.id++,r}},{key:"get",value:function(e){for(var t=this.visited,n=0,r=t.length;n<r;n++){var o=t[n];if(e===o.val)return o}return!1}}]),re=n(9405),oe=n.n(re),ie=n(5902),ae=n.n(ie),se=function(e){return ae()(Z()(e)).replace(/\n/g,"\u21b5").replace(/\f|\r|\t/g,"")};function le(e){return e.length>500&&(e=e.slice(0,500)+"..."),"\u0192 "+oe()(function(e){var t=e.match(ce);return t?t[0]:e}(e).replace("function",""))}var ce=/function(.*?)\((.*?)\)/,ue=n(1009),de=n.n(ue),he=n(5630),fe=n.n(he),pe=n(6030),me=n.n(pe),ge=n(1932),ve=n.n(ge),ye=n(2263),be=n.n(ye),xe=n(3915),we=n.n(xe),_e=n(5169),ke=n.n(_e),Ae=n(9548),Se=n.n(Ae),Ne=n(3249),Ce=n.n(Ne),je=n(5004),Ee=n.n(je);function Te(e){var t="luna-".concat(e,"-");function n(e){return we()(oe()(e).split(/\s+/),function(e){return Ce()(e,t)?e:e.replace(/[\w-]+/,function(e){return"".concat(t).concat(e)})}).join(" ")}return function(e){if(/<[^>]*>/g.test(e))try{var t=Se().parse(e);return Ie(t,function(e){e.attrs&&e.attrs.class&&(e.attrs.class=n(e.attrs.class))}),Se().stringify(t)}catch(t){return n(e)}return n(e)}}function Ie(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];t(o),o.content&&Ie(o.content,t)}}n(9410),n(8609),ke();var Pe=n(5651),Oe=n.n(Pe),Me=n(961),Le=n.n(Me),Re=n(7e3),De=n.n(Re);function Fe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Fe=function(){return!!e})()}var ze=function(e){function t(e,n){var r,i,l=n.compName,c=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).theme,u=void 0===c?"light":c;return(0,o.A)(this,t),r=function(e,t,n){return t=(0,s.A)(t),(0,a.A)(e,Fe()?Reflect.construct(t,[],(0,s.A)(e).constructor):t.apply(e,n))}(this,t),r.subComponents=[],r.theme="",r.onThemeChange=function(e){"auto"===r.options.theme&&r.setTheme(e)},r.compName=l,r.c=Te(l),r.options={},r.container=e,r.$container=L()(e),r.$container.addClass(["luna-".concat(l),r.c("platform-".concat((i=Ee()(),"os x"===i?"mac":i)))]),r.on("changeOption",function(e,t){if("theme"===e&&t){var n=t;"auto"===t&&(n=De().get()),r.setTheme(n),C()(r.subComponents,function(e){return e.setOption("theme",t)})}}),De().on("change",r.onThemeChange),r.setOption("theme",u),r}return(0,c.A)(t,e),(0,i.A)(t,[{key:"destroy",value:function(){var e=this;this.destroySubComponents();var t=this.$container,n=t.attr("class");C()(n.split(/\s+/),function(n){de()(n,"luna-".concat(e.compName))&&t.rmClass(n)}),t.html(""),this.emit("destroy"),this.removeAllListeners(),De().off("change",this.onThemeChange)}},{key:"setOption",value:function(e,t){var n=this,r=this.options,o={};"string"==typeof e?o[e]=t:o=e,C()(o,function(e,t){var o=r[t];r[t]=e,e!==o&&n.emit("changeOption",t,e,o)})}},{key:"getOption",value:function(e){return this.options[e]}},{key:"addSubComponent",value:function(e){e.setOption("theme",this.options.theme),this.subComponents.push(e)}},{key:"removeSubComponent",value:function(e){Le()(this.subComponents,function(t){return t===e})}},{key:"destroySubComponents",value:function(){C()(this.subComponents,function(e){return e.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Oe()(e,t),te()(this.options,e)}},{key:"find",value:function(e){return this.$container.find(this.c(e))}},{key:"setTheme",value:function(e){var t=this.c,n=this.$container;this.theme&&n.rmClass(t("theme-".concat(this.theme))),n.addClass(t("theme-".concat(e))),this.theme=e}}])}(be());function Be(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Be=function(){return!!e})()}var Ue=function(e){function t(e){var n,r,i,l;return(0,o.A)(this,t),r=this,i=t,l=[e,{compName:"object-viewer"}],i=(0,s.A)(i),(n=(0,a.A)(r,Be()?Reflect.construct(i,l||[],(0,s.A)(r).constructor):i.apply(r,l))).onItemClick=function(e){var t=n,r=t.map,o=t.c,i=L()(e.curTarget),a=i.data("object-id"),s=i.find("span").eq(0);if(!i.data("first-level")&&(a&&(i.find("ul").html(n.objToHtml(r[a],!1)),i.rmAttr("data-object-id")),e.stopImmediatePropagation(),s.hasClass(o("expanded")))){var l=i.find("ul").eq(0);s.hasClass(o("collapsed"))?(s.rmClass(o("collapsed")),l.show()):(s.addClass(o("collapsed")),l.hide()),n.emit("change")}},n.bindEvent(),n}return(0,c.A)(t,e),(0,i.A)(t,[{key:"set",value:function(e){U()(e)&&(e=JSON.parse(e)),this.data={id:fe()("json"),enumerable:{0:e}},this.map={},qe(this.map,this.data),this.render()}},{key:"destroy",value:function(){var e,n,r;(e=t,n=this,"function"==typeof(r=(0,l.A)((0,s.A)(e.prototype),"destroy",n))?function(e){return r.apply(n,e)}:r)([]),this.$container.off("click","li",this.onItemClick)}},{key:"objToHtml",value:function(e,t){var n=this,r="";return C()(["enumerable","unenumerable","symbol"],function(o){if(e[o]){var i=S()(e[o]);X()(i);for(var a=0,s=i.length;a<s;a++){var l=i[a];r+=n.createEl(l,e[o][l],o,t)}}}),e.proto&&(""===r?r=this.objToHtml(e.proto):r+=this.createEl("[[Prototype]]",e.proto,"proto")),r}},{key:"createEl",value:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.c,a=(0,r.A)(t);if(null===t)return"<li>".concat(h(e),'<span class="').concat(i("null"),'">null</span></li>');if(f()(t)||m()(t))return"<li>".concat(h(e),'<span class="').concat(i(a),'">').concat(se(t),"</span></li>");if("RegExp"===t.type&&(a="regexp"),"Number"===t.type&&(a="number"),"Number"===t.type||"RegExp"===t.type)return"<li>".concat(h(e),'<span class="').concat(i(a),'">').concat(se(t.value),"</span></li>");if("Undefined"===t.type||"Symbol"===t.type)return"<li>".concat(h(e),'<span class="').concat(i("special"),'">').concat(v()(t.type),"</span></li>");if("(...)"===t)return"<li>".concat(h(e),'<span class="').concat(i("special"),'">').concat(t,"</span></li>");if(b()(t)){var s=t.id,l=t.reference,c=function(e){var t=e.type,n=e.value;if(t)return"Function"===t?le(n):"Array"===t&&e.unenumerable?"Array(".concat(e.unenumerable.length,")"):e.type}(t)||k()(a),u=o?"":'<span class="'.concat(i("expanded collapsed"),'"><span class="').concat(i("icon icon-caret-right"),'"></span><span class="').concat(i("icon icon-caret-down"),'"></span></span>'),d="<li ".concat(o?'data-first-level="true"':""," ").concat('data-object-id="'+(l||s)+'"',">").concat(u).concat(h(e),'<span class="').concat(i("open"),'">').concat(o?"":c,'</span><ul class="').concat(i(a),'" ').concat(o?"":'style="display:none"',">");return o&&(d+=this.objToHtml(this.map[s])),d+'</ul><span class="'.concat(i("close"),'"></span></li>')}function h(e){if(o)return"";if(b()(t)&&t.jsonSplitArr)return"";var r=i("key");return"unenumerable"===n||"symbol"===n?r=i("key-lighter"):"proto"===n&&(r=i("key-special")),'<span class="'.concat(r,'">').concat(se(e),"</span>: ")}return U()(t)&&t.length>1e4&&(t=z()(t,50,{separator:" ",ellipsis:"\u2026"})),"<li>".concat(h(e),'<span class="').concat(i((0,r.A)(t)),'">"').concat(se(t),'"</span></li>')}},{key:"render",value:function(){var e=this.map[this.data.id];this.$container.html(this.objToHtml(e,!0))}},{key:"bindEvent",value:function(){this.$container.on("click","li",this.onItemClick)}}])}(ze);function qe(e,t){var n=t.id;if(n||0===n){if(t.type&&de()(t.type,"Array")&&t.enumerable){var r=function(e,t,n){var r=[],o={};return C()(e.enumerable,function(e,t){var n=me()(t);ve()(n)?o[t]=e:r[n]=e}),r.enumerable=o,r.type=n,r.id=t,e.unenumerable&&(r.unenumerable=e.unenumerable),e.symbol&&(r.symbol=e.symbol),e.proto&&(r.proto=e.proto),r}(t,n,t.type);r.length>100&&(t=function(e){var t=0,n={};C()(W()(e,100),function(e){var r={},o=t;r.type="["+o,r.enumerable={},C()(e,function(e){r.enumerable[t]=e,t+=1});var i=t-1;r.type+=(i-o>0?" \u2026 "+i:"")+"]",r.id=fe()("json"),r.jsonSplitArr=!0,n[t]=r});var r={};return r.enumerable=n,r.id=e.id,r.type=e.type,e.unenumerable&&(r.unenumerable=e.unenumerable),e.symbol&&(r.symbol=e.symbol),e.proto&&(r.proto=e.proto),r}(r))}e[n]=t;var o=[];C()(["enumerable","unenumerable","symbol"],function(e){if(t[e])for(var n in t[e])o.push(t[e][n])}),t.proto&&o.push(t.proto);for(var i=0,a=o.length;i<a;i++){var s=o[i];b()(s)&&qe(e,s)}}}function Ve(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ve=function(){return!!e})()}e=n.hmd(e);var He=function(e){function t(e){var n,r,i,l,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o.A)(this,t),r=this,i=t,l=[e,{compName:"object-viewer"}],i=(0,s.A)(i),(n=(0,a.A)(r,Ve()?Reflect.construct(i,l||[],(0,s.A)(r).constructor):i.apply(r,l))).onItemClick=function(e){var t=n,r=t.map,o=t.c;if(!function(e){var t=window.getSelection();if(!t||"Range"!==t.type||""===t.toString())return!1;var n=t.anchorNode,r=t.focusNode;return t.containsNode(e,!0)||n&&e.contains(n)||r&&e.contains(r)}(e.curTarget)){var i=L()(e.curTarget),a=i.data("object-id"),s=i.find("span").eq(0);if(!i.data("first-level")&&(a&&(i.find("ul").html(n.objToHtml(r[a],!1)),i.rmAttr("data-object-id")),e.stopImmediatePropagation(),s.hasClass(o("expanded")))){var l=i.find("ul").eq(0);s.hasClass(o("collapsed"))?(s.rmClass(o("collapsed")),l.show()):(s.addClass(o("collapsed")),l.hide()),n.emit("change")}}},n.initOptions(c,{prototype:!0,unenumerable:!1,accessGetter:!1}),n.bindEvent(),n.options.object&&n.set(n.options.object),n}return(0,c.A)(t,e),(0,i.A)(t,[{key:"set",value:function(e){this.data=[e],this.visitor=new ne,this.map={},this.render()}},{key:"destroy",value:function(){var e,n,r;(e=t,n=this,"function"==typeof(r=(0,l.A)((0,s.A)(e.prototype),"destroy",n))?function(e){return r.apply(n,e)}:r)([]),this.$container.off("click","li",this.onItemClick)}},{key:"objToHtml",value:function(e,t){var n=this,o=this.visitor,i=e,a=!1,s=o.get(e);s&&s.self&&(i=s.self);var l="",c=["enumerable"],u=S()(e),h=[],f=[],p=[],m={};if(this.options.unenumerable&&!t&&(c.push("unenumerable"),c.push("symbol"),h=D()(V()(e,{prototype:!1,unenumerable:!0}),u),f=G()(V()(e,{prototype:!1,symbol:!0}),function(e){return"symbol"===(0,r.A)(e)})),w()(e)&&e.length>100){c.unshift("virtual"),a=!0;var g=0,v={};C()(W()(e,100),function(e){var t=Object.create(null),n=g,r="["+n;C()(e,function(e){t[g]=e,v[g]=!0,g++});var o=g-1;m[r+=(o-n>0?" \u2026 "+o:"")+"]"]=t}),p=S()(m),u=G()(u,function(e){return!v[e]})}if(C()(c,function(r){var o;o="symbol"===r?f:"unenumerable"===r?h:"virtual"===r?p:u,a||X()(o);for(var s=0,c=o.length;s<c;s++){var d=Z()(o[s]),g="",v=Object.getOwnPropertyDescriptor(e,d),y=v&&v.get,b=v&&v.set;if(y&&!n.options.accessGetter)g="(...)";else try{g="virtual"===r?m[d]:i[d],I()(g)&&g.catch(J())}catch(e){g=e instanceof Error?e.message:Z()(e)}l+=n.createEl(d,e,g,r,t),y&&(l+=n.createEl("get ".concat(d),e,v.get,r,t)),b&&(l+=n.createEl("set ".concat(d),e,v.set,r,t))}}),this.options.prototype){var y=d()(e);if(!t&&y)if(""===l){var b=o.set(y,{self:e});this.map[b]=y,l=this.objToHtml(y)}else l+=this.createEl("[[Prototype]]",i||e,y,"proto")}return l}},{key:"createEl",value:function(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=this.visitor,s=this.c,l=(0,r.A)(n),c=O()(n,!1);if("virtual"===o&&(c=e),null===n)return"<li>".concat(x(e),'<span class="').concat(s("null"),'">null</span></li>');if(f()(n)||m()(n))return"<li>".concat(x(e),'<span class="').concat(s(l),'">').concat(se(n),"</span></li>");if("RegExp"===c&&(l="regexp"),"Number"===c&&(l="number"),"Undefined"===c||"Symbol"===c)return"<li>".concat(x(e),'<span class="').concat(s("special"),'">').concat(v()(c),"</span></li>");if("(...)"===n)return"<li>".concat(x(e),'<span class="').concat(s("special"),'">').concat(n,"</span></li>");if(b()(n)){var u,d,h=a.get(n);if(h)u=h.id;else{var p={};"proto"===o&&(p.self=t),u=a.set(n,p),this.map[u]=n}d="regexp"===l?'<span class="'.concat(s(l),'">').concat(se(n)):se(function(e,t){if(t)return"Function"===t?le(E()(e)):"Array"===t?"Array(".concat(e.length,")"):t}(n,c)||k()(l));var g=i?"":'<span class="'.concat(s("expanded collapsed"),'"><span class="').concat(s("icon icon-caret-right"),'"></span><span class="').concat(s("icon icon-caret-down"),'"></span></span>'),y="<li ".concat(i?'data-first-level="true"':""," ").concat('data-object-id="'+u+'"',">").concat(g).concat(x(e),'<span class="').concat(s("open"),'">').concat(i?"":d,'</span><ul class="').concat(s(l),'" ').concat(i?"":'style="display:none"',">");return i&&(y+=this.objToHtml(n)),y+'</ul><span class="'.concat(s("close"),'"></span></li>')}function x(e){if(i)return"";if(b()(n)&&"virtual"===o)return"";var t=s("key");return"unenumerable"===o||"symbol"===o?t=s("key-lighter"):"proto"===o&&(t=s("key-special")),'<span class="'.concat(t,'">').concat(se(e),"</span>: ")}return U()(n)&&n.length>1e4&&(n=z()(n,50,{separator:" ",ellipsis:"\u2026"})),"<li>".concat(x(e),'<span class="').concat(s((0,r.A)(n)),'">"').concat(se(n),'"</span></li>')}},{key:"render",value:function(){this.$container.html(this.objToHtml(this.data,!0))}},{key:"bindEvent",value:function(){var e=this;this.$container.on("click","li",this.onItemClick),this.on("changeOption",function(t,n){switch(t){case"object":e.set(n);break;case"unenumerable":case"prototype":case"accessGetter":e.render()}})}}])}(ze);He.Static=Ue,function(e,t){try{e.exports=t,e.exports.default=t}catch(e){}}(e,He)},6948:function(e,t){var n=/<[^>]*>/g;t=function(e){return e.replace(n,"")},e.exports=t},6949:function(e,t,n){var r=n(365),o=n(6214);t=function(e,t){if(o(e))return e;if(t&&r(t,e))return[e];var n=[];return e.replace(i,function(e,t,r,o){n.push(r?o.replace(a,"$1"):t||e)}),n};var i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g;e.exports=t},6962:function(e,t,n){var r=n(1909),o=n(1023),i=!1;function a(e){i&&t.emit(e)}t={start:function(){i=!0},stop:function(){i=!1}},o.mixin(t),r?(window.addEventListener("error",function(e){if(e.error)a(e.error);else if(e.message){var t=new Error(e.message);t.stack="Error: ".concat(e.message," \n at ").concat(e.filename,":").concat(e.lineno,":").concat(e.colno),a(t)}}),window.addEventListener("unhandledrejection",function(e){a(e.reason)})):(process.on("uncaughtException",a),process.on("unhandledRejection",a)),e.exports=t},6969:function(e,t,n){var r=n(5869),o=n(387),i=n(9931),a=n(365),s=n(7604);(t=r(function(e){if(e=e.replace(c,""),e=o(e),a(u,e))return e;for(var t=l.length;t--;){var n=l[t]+i(e);if(a(u,n))return n}return e})).dash=r(function(e){var n=t(e);return(c.test(n)?"-":"")+s(n)});var l=["O","ms","Moz","Webkit"],c=/^(O)|(ms)|(Moz)|(Webkit)|(-o-)|(-ms-)|(-moz-)|(-webkit-)/g,u=document.createElement("p").style;e.exports=t},7e3:function(e,t,n){var r=n(2263),o=new(n(3737))("(prefers-color-scheme: dark)");t={get:function(){return o.isMatch()?"dark":"light"}},r.mixin(t),o.on("match",function(){return t.emit("change","dark")}),o.on("unmatch",function(){return t.emit("change","light")}),e.exports=t},7005:function(e,t,n){var r=n(2717),o=n(5395);t=r({initialize:function(){this.clear()},clear:function(){this._items=[],this.size=0},push:function(e){return this._items.push(e),++this.size},pop:function(){if(this.size)return this.size--,this._items.pop()},peek:function(){return this._items[this.size-1]},forEach:function(e,t){t=arguments.length>1?t:this;for(var n=this._items,r=this.size-1,o=0;r>=0;r--,o++)e.call(t,n[r],o,this)},toArr:function(){return o(this._items)}}),e.exports=t},7030:function(e,t,n){var r=n(1738),o=n(2517),i=n(2561),a=n(6392);t=function(e,n,a,h){1===arguments.length&&r(e)&&!u.test(e)&&(n=e,e=void 0),e=e||new Date,o(e)||(e=new Date(e));var f=(n=i(t.masks[n]||n||t.masks.default)).slice(0,4);"UTC:"!==f&&"GMT:"!==f||(n=n.slice(4),a=!0,"GMT:"===f&&(h=!0));var p=a?"getUTC":"get",m=e[p+"Date"](),g=e[p+"Day"](),v=e[p+"Month"](),y=e[p+"FullYear"](),b=e[p+"Hours"](),x=e[p+"Minutes"](),w=e[p+"Seconds"](),_=e[p+"Milliseconds"](),k=a?0:e.getTimezoneOffset(),A={d:m,dd:s(m),ddd:t.i18n.dayNames[g],dddd:t.i18n.dayNames[g+7],m:v+1,mm:s(v+1),mmm:t.i18n.monthNames[v],mmmm:t.i18n.monthNames[v+12],yy:i(y).slice(2),yyyy:y,h:b%12||12,hh:s(b%12||12),H:b,HH:s(b),M:x,MM:s(x),s:w,ss:s(w),l:s(_,3),L:s(Math.round(_/10)),t:b<12?"a":"p",tt:b<12?"am":"pm",T:b<12?"A":"P",TT:b<12?"AM":"PM",Z:h?"GMT":a?"UTC":(i(e).match(c)||[""]).pop().replace(d,""),o:(k>0?"-":"+")+s(100*Math.floor(Math.abs(k)/60)+Math.abs(k)%60,4),S:["th","st","nd","rd"][m%10>3?0:(m%100-m%10!=10)*m%10]};return n.replace(l,function(e){return e in A?A[e]:e.slice(1,e.length-1)})};var s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return a(i(e),t,"0")},l=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,c=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,u=/\d/,d=/[^-+\dA-Z]/g;t.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},t.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},e.exports=t},7119:function(e){e.exports='.luna-dom-highlighter{position:fixed;left:0;top:0;width:100%;height:100%;z-index:100000;pointer-events:none;font-size:13px}.luna-dom-highlighter-fill{position:absolute;top:0;right:0;bottom:0;left:0}.luna-dom-highlighter-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-dom-highlighter-platform-mac{color:#303942;font-family:\'.SFNSDisplay-Regular\',\'Helvetica Neue\',\'Lucida Grande\',sans-serif}.luna-dom-highlighter-platform-windows{font-family:\'Segoe UI\',Tahoma,sans-serif}.luna-dom-highlighter-px{color:gray}#luna-dom-highlighter-element-title{position:absolute;z-index:10}.luna-dom-highlighter-tooltip-content{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;background-color:#fff;padding:5px 8px;border:1px solid #fff;border-radius:3px;box-sizing:border-box;min-width:100px;max-width:min(300px,100% - 4px);z-index:2;background-clip:padding-box;will-change:transform;text-rendering:optimizeLegibility;pointer-events:none;filter:drop-shadow(0 2px 4px rgba(0,0,0,.35))}.luna-dom-highlighter-tooltip-content .luna-dom-highlighter-tooltip-arrow{background:#fff;width:15px;height:8px;position:absolute}.luna-dom-highlighter-element-info-section{margin-top:12px;margin-bottom:6px}.luna-dom-highlighter-section-name{color:#333;font-weight:500;font-size:10px;text-transform:uppercase;letter-spacing:.05em;line-height:12px}.luna-dom-highlighter-element-info{display:flex;flex-direction:column}.luna-dom-highlighter-element-info-header{display:flex;align-items:center}.luna-dom-highlighter-element-info-body{display:flex;flex-direction:column;padding-top:2px;margin-top:2px}.luna-dom-highlighter-element-info-row{display:flex;line-height:19px}.luna-dom-highlighter-separator-container{display:flex;align-items:center;flex:auto;margin-left:7px}.luna-dom-highlighter-separator{border-top:1px solid #ddd;width:100%}.luna-dom-highlighter-element-info-name{flex-shrink:0;color:#666}.luna-dom-highlighter-element-info-gap{flex:auto}.luna-dom-highlighter-element-info-value-color{display:flex;color:#303942;margin-left:10px;align-items:baseline}.luna-dom-highlighter-a11y-icon{width:16px;height:16px;background-repeat:no-repeat;display:inline-block}.luna-dom-highlighter-element-info-value-contrast{display:flex;align-items:center;text-align:right;color:#303942;margin-left:10px}.luna-dom-highlighter-element-info-value-contrast .luna-dom-highlighter-a11y-icon{margin-left:8px}.luna-dom-highlighter-element-info-value-icon{display:flex;align-items:center}.luna-dom-highlighter-element-info-value-text{text-align:right;color:#303942;margin-left:10px;align-items:baseline;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.luna-dom-highlighter-color-swatch{display:flex;margin-right:2px;width:10px;height:10px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==);line-height:10px}.luna-dom-highlighter-color-swatch-inner{flex:auto;border:1px solid #808002}.luna-dom-highlighter-element-layout-type{margin-right:10px;width:16px;height:16px}.luna-dom-highlighter-element-layout-type.luna-dom-highlighter-grid{background-image:url(\'data:image/svg+xml,<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="2.5" y="2.5" width="4" height="4" stroke="%231A73E8"/><rect x="9.5" y="2.5" width="4" height="4" stroke="%231A73E8"/><rect x="9.5" y="9.5" width="4" height="4" stroke="%231A73E8"/><rect x="2.5" y="9.5" width="4" height="4" stroke="%231A73E8"/></svg>\')}.luna-dom-highlighter-element-layout-type.luna-dom-highlighter-flex{background-image:url(\'data:image/svg+xml,<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 3.5h8v3H1v-3zm-1 0a1 1 0 011-1h8a1 1 0 011 1v3a1 1 0 01-1 1H1a1 1 0 01-1-1v-3zm12 0h3v3h-3v-3zm-1 0a1 1 0 011-1h3a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-3zm-7 6H1v3h3v-3zm-3-1a1 1 0 00-1 1v3a1 1 0 001 1h3a1 1 0 001-1v-3a1 1 0 00-1-1H1zm6 4v-3h8v3H7zm-1-3a1 1 0 011-1h8a1 1 0 011 1v3a1 1 0 01-1 1H7a1 1 0 01-1-1v-3z" fill="%231A73E8"/></svg>\')}.luna-dom-highlighter-element-description{flex:1 1;font-weight:700;word-wrap:break-word;word-break:break-all}.luna-dom-highlighter-dimensions{color:#737373;text-align:right;margin-left:10px}.luna-dom-highlighter-material-node-width{margin-right:2px}.luna-dom-highlighter-material-node-height{margin-left:2px}.luna-dom-highlighter-material-tag-name{color:#881280}.luna-dom-highlighter-material-class-name,.luna-dom-highlighter-material-node-id{color:#1a1aa6}.luna-dom-highlighter-contrast-text{width:16px;height:16px;text-align:center;line-height:16px;margin-right:8px;border:1px solid #000;padding:0 1px}.luna-dom-highlighter-a11y-icon-not-ok{background-image:url(\'data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m9 1.5c-4.14 0-7.5 3.36-7.5 7.5s3.36 7.5 7.5 7.5 7.5-3.36 7.5-7.5-3.36-7.5-7.5-7.5zm0 13.5c-3.315 0-6-2.685-6-6 0-1.3875.4725-2.6625 1.2675-3.675l8.4075 8.4075c-1.0125.795-2.2875 1.2675-3.675 1.2675zm4.7325-2.325-8.4075-8.4075c1.0125-.795 2.2875-1.2675 3.675-1.2675 3.315 0 6 2.685 6 6 0 1.3875-.4725 2.6625-1.2675 3.675z" fill="%239e9e9e"/></svg>\')}.luna-dom-highlighter-a11y-icon-warning{background-image:url(\'data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m8.25 11.25h1.5v1.5h-1.5zm0-6h1.5v4.5h-1.5zm.7425-3.75c-4.14 0-7.4925 3.36-7.4925 7.5s3.3525 7.5 7.4925 7.5c4.1475 0 7.5075-3.36 7.5075-7.5s-3.36-7.5-7.5075-7.5zm.0075 13.5c-3.315 0-6-2.685-6-6s2.685-6 6-6 6 2.685 6 6-2.685 6-6 6z" fill="%23e37400"/></svg>\')}.luna-dom-highlighter-a11y-icon-ok{background-image:url(\'data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m9 1.5c-4.14 0-7.5 3.36-7.5 7.5s3.36 7.5 7.5 7.5 7.5-3.36 7.5-7.5-3.36-7.5-7.5-7.5zm0 13.5c-3.3075 0-6-2.6925-6-6s2.6925-6 6-6 6 2.6925 6 6-2.6925 6-6 6zm-1.5-4.35-1.95-1.95-1.05 1.05 3 3 6-6-1.05-1.05z" fill="%230ca40c"/></svg>\')}@media (forced-colors:active){:root,body{background-color:transparent;forced-color-adjust:none}.luna-dom-highlighter-tooltip-content{border-color:Highlight;background-color:canvas;color:text;forced-color-adjust:none}.luna-dom-highlighter-tooltip-content::after{background-color:Highlight}.luna-dom-highlighter-color-swatch-inner,.luna-dom-highlighter-contrast-text,.luna-dom-highlighter-separator{border-color:Highlight}.luna-dom-highlighter-section-name{color:Highlight}.luna-dom-highlighter-dimensions,.luna-dom-highlighter-element-info-name,.luna-dom-highlighter-element-info-value-color,.luna-dom-highlighter-element-info-value-contrast,.luna-dom-highlighter-element-info-value-icon,.luna-dom-highlighter-element-info-value-text,.luna-dom-highlighter-material-class-name,.luna-dom-highlighter-material-node-id,.luna-dom-highlighter-material-tag-name{color:canvastext}}\n\n/*# sourceMappingURL=luna-dom-highlighter.css.map*/'},7140:function(e,t){t=function(e,t){var n=[];t=t||1;for(var r=0,o=Math.ceil(e.length/t);r<o;r++){var i=r*t,a=i+t;n.push(e.slice(i,a))}return n},e.exports=t},7181:function(e,t){t=function(e){return!!window.ShadowRoot&&e instanceof ShadowRoot},e.exports=t},7214:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(2263)),s=i(n(3693)),l=n(4725),c=i(n(9100)),u=i(n(8105)),d=i(n(5651)),h=i(n(961)),f=function(e){function t(t,n,r){var o=n.compName,i=(void 0===r?{}:r).theme,a=void 0===i?"light":i,u=e.call(this)||this;return u.subComponents=[],u.compName=o,u.c=(0,l.classPrefix)(o),u.options={},u.container=t,u.$container=(0,s.default)(t),u.$container.addClass(["luna-".concat(o),u.c("platform-".concat((0,l.getPlatform)()))]),u.on("optionChange",function(e,t,n){var r=u.c;"theme"===e&&(u.$container.rmClass(r("theme-".concat(n))).addClass(r("theme-".concat(t))),(0,c.default)(u.subComponents,function(e){return e.setOption("theme",t)}))}),u.setOption("theme",a),u}return o(t,e),t.prototype.destroy=function(){this.destroySubComponents();var e=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(e("platform-".concat((0,l.getPlatform)()))).rmClass(e("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},t.prototype.setOption=function(e,t){var n=this,r=this.options,o={};"string"==typeof e?o[e]=t:o=e,(0,c.default)(o,function(e,t){var o=r[t];r[t]=e,n.emit("optionChange",t,e,o)})},t.prototype.getOption=function(e){return this.options[e]},t.prototype.addSubComponent=function(e){e.setOption("theme",this.options.theme),this.subComponents.push(e)},t.prototype.removeSubComponent=function(e){(0,h.default)(this.subComponents,function(t){return t===e})},t.prototype.destroySubComponents=function(){(0,c.default)(this.subComponents,function(e){return e.destroy()}),this.subComponents=[]},t.prototype.initOptions=function(e,t){void 0===t&&(t={}),(0,d.default)(e,t),(0,u.default)(this.options,e)},t.prototype.find=function(e){return this.$container.find(this.c(e))},t}(a.default);t.default=f},7236:function(e,t,n){var r=n(8971),o=n(9100),i=n(3612);function a(e){return function(t,n){var a=(t=i(t))[0];if(r(n))return a?a[e]:"";a&&o(t,function(t){t[e]=n})}}t={html:a("innerHTML"),text:a("textContent"),val:a("value")},e.exports=t},7253:function(e,t,n){(t=n(6314)(!1)).push([e.id,'@font-face{font-family:luna-tab-icon;src:url(\'data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAQwAAsAAAAABpQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAEkAAABoILgliE9TLzIAAAFUAAAAPQAAAFZL+0kZY21hcAAAAZQAAACBAAAB3sqmCy5nbHlmAAACGAAAAC0AAAA0Ftcaz2hlYWQAAAJIAAAALgAAADZzhL4YaGhlYQAAAngAAAAYAAAAJAFoANBobXR4AAACkAAAAA8AAAAcAMgAAGxvY2EAAAKgAAAADgAAABAATgBObWF4cAAAArAAAAAfAAAAIAESABhuYW1lAAAC0AAAASkAAAIWm5e+CnBvc3QAAAP8AAAAMQAAAEOplauDeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiCWgNIsQMzKwAykWRnYgGxGBiYAk+wFgwAAAHicY2BkkGWcwMDKwMBQx9ADJGWgdAIDJ4MxAwMTAyszA1YQkOaawnCAIfkjI8MJIFcITDIwMIIIAGAqCKIAAAB4nM2RQQqDQAxFXxyVUsST9DhduBd3ggsv0JX39QT6kwYED1D6hzeQD0nmM0ADFPESNdiG4frItfALz/Br3qp7HlS0jEzMLKy7HYf8e33J1HMdortoWuPzreUX8p2hEikj9f+oi3vIyl86JpWYEvfnxH9sSTzPmijXbl+wE7urE5sAAAB4nGNgZACB+UDIzcBgrs6uzi7OLm4ubq4+j1tfn1tPD0xOhjGAJAMDAKekBtMAAAB4nGNgZGBgAGLPuE0l8fw2Xxm4GU4ABaI4H+9rQNBAMB8IGRg4GJhAHAA5KgqUAAB4nGNgZGBgOMHAACfnMzAyoAJ2ADfsAjl4nGNgAIITDFgBABIUAMkAeJxjYAACKQQEAAO4AJ0AAHicY2BkYGBgZ+BhANEMDExAzAWEDAz/wXwGAApKASsAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxjYGKAABiNDtgZmRiZGVkYWRnZGNkZORhYk3Pyi1MZkxlzGPMZixlTGRgANIEEbAAAAA==\') format(\'woff\')}[class*=\' luna-tab-icon-\'],[class^=luna-tab-icon-]{display:inline-block;font-family:luna-tab-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-tab-icon-close:before{content:\'\\f101\'}.luna-tab{position:relative;overflow:hidden;width:100%;color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));background-color:#fff;background-color:var(--luna-color-bg-container,#fff);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-family:var(--luna-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px}.luna-tab .luna-tab-hidden,.luna-tab.luna-tab-hidden{display:none}.luna-tab .luna-tab-invisible,.luna-tab.luna-tab-invisible{visibility:hidden}.luna-tab *{box-sizing:border-box}.luna-tab.luna-tab-theme-dark{color-scheme:dark;color:hsla(0,0%,100%,.85);color:var(--luna-color-text-dark,rgba(255,255,255,.85));background-color:#141414;background-color:var(--luna-color-bg-container-dark,#141414)}.luna-tab-tabs-container{border-bottom:1px solid}.luna-tab-tabs{overflow-x:auto;-webkit-overflow-scrolling:touch;overflow-y:hidden;width:100%;height:100%;font-size:0;white-space:nowrap}.luna-tab-tabs::-webkit-scrollbar{display:none;width:0;height:0}.luna-tab-item{display:inline-flex;cursor:pointer;padding:0 10px;font-size:12px;text-align:center;text-transform:capitalize}.luna-tab-item.luna-tab-selected .luna-tab-close-container,.luna-tab-item:hover .luna-tab-close-container{opacity:1}.luna-tab-close-container{display:flex;height:100%;width:12px;align-items:center;justify-content:center;opacity:0}.luna-tab-close{position:relative;left:4px;border-radius:2px;width:14px;height:14px;cursor:pointer;line-height:14px}.luna-tab-icon-close{font-size:14px}.luna-tab-slider{transition:left .3s,width .3s;height:1px;position:absolute;bottom:0;left:0}.luna-tab-theme-light .luna-tab-tabs-container{border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9)}.luna-tab-theme-light .luna-tab-item.luna-tab-selected{color:#1a73e8;color:var(--luna-color-primary,#1a73e8)}.luna-tab-theme-light .luna-tab-item:hover{color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));background-color:rgba(0,0,0,.06);background-color:var(--luna-color-fill-secondary,rgba(0,0,0,.06))}.luna-tab-theme-light .luna-tab-close{color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88))}.luna-tab-theme-light .luna-tab-close:hover{background-color:rgba(0,0,0,.06);background-color:var(--luna-color-fill-secondary,rgba(0,0,0,.06))}.luna-tab-theme-light .luna-tab-slider{background-color:#1a73e8;background-color:var(--luna-color-primary,#1a73e8)}.luna-tab-theme-dark .luna-tab-tabs-container{border-color:#424242;border-color:var(--luna-color-border,#424242)}.luna-tab-theme-dark .luna-tab-item.luna-tab-selected{color:#1965c8;color:var(--luna-color-primary,#1965c8)}.luna-tab-theme-dark .luna-tab-item:hover{color:hsla(0,0%,100%,.85);color:var(--luna-color-text,rgba(255,255,255,.85));background-color:hsla(0,0%,100%,.12);background-color:var(--luna-color-fill-secondary,rgba(255,255,255,.12))}.luna-tab-theme-dark .luna-tab-close{color:hsla(0,0%,100%,.85);color:var(--luna-color-text,rgba(255,255,255,.85))}.luna-tab-theme-dark .luna-tab-close:hover{background-color:hsla(0,0%,100%,.12);background-color:var(--luna-color-fill-secondary,rgba(255,255,255,.12))}.luna-tab-theme-dark .luna-tab-slider{background-color:#1965c8;background-color:var(--luna-color-primary,#1965c8)}',""]),e.exports=t},7257:function(e,t,n){var r=n(9405),o=n(9100),i=n(8971),a=n(6214),s=n(3915),l=n(9464),c=n(2571),u=n(9760);t={parse:function(e){var t={};return e=r(e).replace(d,""),o(e.split("&"),function(e){var n=e.split("="),r=n.shift(),o=n.length>0?n.join("="):null;r=decodeURIComponent(r),o=decodeURIComponent(o),i(t[r])?t[r]=o:a(t[r])?t[r].push(o):t[r]=[t[r],o]}),t},stringify:function(e,n){return c(s(e,function(e,r){return u(e)&&l(e)?"":a(e)?t.stringify(e,r):(n?encodeURIComponent(n):encodeURIComponent(r))+"="+encodeURIComponent(e)}),function(e){return e.length>0}).join("&")}};var d=/^(\?|#|&)/g;e.exports=t},7308:function(e,t,n){var r=n(9100),o=n(1738),i=n(8971),a=n(3249),s=n(6214),l=n(9760),c=n(769);(t=function(e,t){if(i(e))return n={},d(function(e,t){n[e]=t}),n;var n;if(o(e)&&i(t)||s(e))return function(e){if(!o(e)){var t={};return d(function(n,r){a(e,n)&&(t[n]=r)}),t}var n=h(e);if(n)return n.getAttribute("content")}(e);var c=e;l(c)||((c={})[e]=t),function(e){r(e,function(e,t){var n=h(t);if(n)return n.setAttribute("content",e);(n=u.createElement("meta")).setAttribute("name",t),n.setAttribute("content",e),u.head.appendChild(n)})}(c)}).remove=function(e){e=c(e),r(e,function(e){var t=h(e);t&&u.head.removeChild(t)})};var u=document;function d(e){var t=u.querySelectorAll("meta");r(t,function(t){var n=t.getAttribute("name"),r=t.getAttribute("content");n&&r&&e(n,r)})}function h(e){return u.querySelector('meta[name="'+e+'"]')}e.exports=t},7375:function(e,t){t=function(e,t,n){return Array.prototype.indexOf.call(e,t,n)},e.exports=t},7468:function(e,t,n){var r=n(3145);t=function(e,t){var n=r(t),o=n.length;if(null==e)return!o;e=Object(e);for(var i=0;i<o;i++){var a=n[i];if(t[a]!==e[a]||!(a in e))return!1}return!0},e.exports=t},7514:function(e,t,n){var r=n(3145),o=n(5427),i=n(438),a=Object.getOwnPropertyNames,s=Object.getOwnPropertySymbols;t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.prototype,l=void 0===n||n,c=t.unenumerable,u=void 0!==c&&c,d=t.symbol,h=void 0!==d&&d,f=[];if((u||h)&&a){var p=r;u&&a&&(p=a);do{f=f.concat(p(e)),h&&s&&(f=f.concat(s(e)))}while(l&&(e=o(e))&&e!==Object.prototype);f=i(f)}else if(l)for(var m in e)f.push(m);else f=r(e);return f},e.exports=t},7528:function(e,t,n){"use strict";function r(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,{A:function(){return r}})},7542:function(e,t){t=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},e.exports=t},7571:function(e,t,n){var r=n(2263),o=n(6186),i=window.screen;t={get:function(){if(i){var e=o(i,"orientation.type");if(e)return e.split("-").shift()}return window.innerWidth>window.innerHeight?"landscape":"portrait"}},r.mixin(t),window.addEventListener("orientationchange",function(){setTimeout(function(){t.emit("change",t.get())},200)},!1),e.exports=t},7604:function(e,t,n){var r=n(6833);t=function(e){return r(e).join("-")},e.exports=t},7622:function(e,t,n){var r=n(2263),o=n(2192),i=n(769),a=n(8971),s=n(8420),l=n(1738),c=n(6097);t=r.extend({initialize:function(e,n){this.name=e,this.setLevel(a(n)?t.level.DEBUG:n),this.callSuper(r,"initialize",arguments)},setLevel:function(e){return l(e)?((e=t.level[e.toUpperCase()])&&(this._level=e),this):(c(e)&&(this._level=e),this)},getLevel:function(){return this._level},formatter:function(e,t){return t},trace:function(){return this._log("trace",arguments)},debug:function(){return this._log("debug",arguments)},info:function(){return this._log("info",arguments)},warn:function(){return this._log("warn",arguments)},error:function(){return this._log("error",arguments)},_log:function(e,n){return 0===(n=i(n)).length||(this.emit("all",e,s(n)),t.level[e.toUpperCase()]<this._level||(this.emit(e,s(n)),("debug"===e?console.log:console[e]).apply(console,this.formatter(e,n)))),this}},{level:new o({TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5})}),e.exports=t},7661:function(e,t,n){var r=n(769),o=n(2797),i=n(3612),a=n(1738),s=n(9100);function l(e){return a(e)?e.split(/\s+/):r(e)}t={add:function(e,n){e=i(e);var r=l(n);s(e,function(e){var n=[];s(r,function(r){t.has(e,r)||n.push(r)}),0!==n.length&&(e.className+=(e.className?" ":"")+n.join(" "))})},has:function(e,t){e=i(e);var n=new RegExp("(^|\\s)"+t+"(\\s|$)");return o(e,function(e){return n.test(e.className)})},toggle:function(e,n){e=i(e),s(e,function(e){if(!t.has(e,n))return t.add(e,n);t.remove(e,n)})},remove:function(e,t){e=i(e);var n=l(t);s(e,function(e){s(n,function(t){e.classList.remove(t)})})}},e.exports=t},7696:function(e,t){t=function(e){var t=typeof e;return null==e||"function"!==t&&"object"!==t},e.exports=t},7731:function(module,exports,__nested_webpack_require_714003__){var random=__nested_webpack_require_714003__(6774),isBrowser=__nested_webpack_require_714003__(1909),isNode=__nested_webpack_require_714003__(621),crypto;exports=function(e){for(var t=new Uint8Array(e),n=0;n<e;n++)t[n]=random(0,255);return t},isBrowser?(crypto=window.crypto||window.msCrypto,crypto&&(exports=function(e){var t=new Uint8Array(e);return crypto.getRandomValues(t),t})):isNode&&(crypto=eval("require")("crypto"),exports=function(e){return crypto.randomBytes(e)}),module.exports=exports},7744:function(e,t,n){var r=n(2263),o=n(1738),i=n(9760),a=n(9100),s=n(769);t=r.extend({initialize:function(e){this.callSuper(r,"initialize",arguments),this._data=e||{},this.save(this._data)},set:function(e,t){var n;o(e)?(n={})[e]=t:i(e)&&(n=e);var r=this;a(n,function(e,t){var n=r._data[t];r._data[t]=e,r.emit("change",t,e,n)}),this.save(this._data)},get:function(e){var t=this._data;if(o(e))return t[e];var n={};return a(e,function(e){n[e]=t[e]}),n},remove:function(e){e=s(e);var t=this._data;a(e,function(e){delete t[e]}),this.save(t)},clear:function(){this._data={},this.save(this._data)},each:function(e){a(this._data,e)},save:function(e){this._data=e}}),e.exports=t},7800:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var r=n(5526);function o(e,t){if(e){if("string"==typeof e)return(0,r.A)(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.A)(e,t):void 0}}},7853:function(e,t,n){(t=n(6314)(!1)).push([e.id,"@font-face{font-family:luna-console-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAaoAAsAAAAACnAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAIsAAADcIw4ngk9TLzIAAAGUAAAAPgAAAFZWmlGRY21hcAAAAdQAAAD4AAACyDWnbdFnbHlmAAACzAAAAZsAAAH8Lq6nDGhlYWQAAARoAAAAMQAAADZ25cSzaGhlYQAABJwAAAAdAAAAJAgCBBRobXR4AAAEvAAAABcAAABYGAH//GxvY2EAAATUAAAAGAAAAC4JNAjUbWF4cAAABOwAAAAfAAAAIAEjAFBuYW1lAAAFDAAAASkAAAIWm5e+CnBvc3QAAAY4AAAAcAAAAJ7p9v7ZeJxNjT0OgkAQhb9FFllBFMHGwjN4AipiZckFaDAmxIojeHDf7oboTObvvZk3GGDHjY6kvz8Gqnlc3lxIieb5/97Mr+dIvk7i0lBzxQfLkZ6BiYWEjKtyIc7pR0GpWnOiUW+E/PA9FQfdRj0r3AlxYc7kZ221IXtko/C3cd+Grytr2UrTq9VfrRAJ0wB4nGNgZBRnnMDAysDA1Ml0hoGBoR9CM75mMGLkAIoysDIzYAUBaa4pDAcYdD+ysYC4MSxMYGFGEAEAtDUIzAAAeJzN0s1OwkAUhuF36A8gtBYKiQsXxrVeFEGibJAQCPfgBbnypuYK8Dszx40xJu48kyekH+3M6XSACijkQUoIHwSs3pWGlBdcpbzkTdcLOiUlj6zYsGXPgRPnWF8u+tfSNc/slB6VhpR+r6BZbNxwy53GvQZMGTGk0WpzemZap9U9YyYsudYzg7RuRa0J6h9m/a2mf7zfSt006qWf2UXXplask/9S6Z3C15stsd3PLFu5kazdUJ5cIxun76tvls3lxfWydbYLO9fJq2tl7xZycGM5uomcnPV5dtrLGDI7a3GQYb9FZmczlpmdz1hldm5jnVF/Akk1KvR4nF1RTW8TMRCdZ3udBsSWBcdLG9UlG623pKihaeIIIZVUiHOknlAVNQgu0Jx6oB9/olz4BUXiyv+AAxz4BT1wRIJDT+wG7woQwhqN3vi9Nx6NCeQPf8oDYkRogU/z5xhzUbz2ZcmxD3xccRHwBId8nD/D2FvmOZHgglFIy9QmSrEBWYM02Gr1toG+6+lGpGRiB3Fiy0pJ/q2YKOeUz3W3zu+tu3r+0XSMj61mmro0fcPv2mbT/vyS7Vi7w/YaxjSKd2W+TAfWDtJqpPncvw1B1KFHfjK5CJltILMP0fVTOL0KH0OnY73IYl0LUZNd2C5SFRvEujfc9my/siQVi8vrrQe3Vq7dYEK9SnYjdvtO9JIJfqrvS9E4uHocXxE6XFIzJlherGVnk+nn6eQsW/sH4r3v8Vt31NqNOqssOmBBcBLfNMtqtnASr4Rl/xmT4vGL/90VpD87/8T3KfA7zeoYAocjmOJihP1zD2BGxTmVP+LT90oXeuWwjgyB0j3Xt4nEj1FxUSrf4muy2W5vJn+tbCkpb7z7FwBKXUkAeJxjYGRgYADikOXX2uP5bb4ycLOABKI4H+9rgNH//zIwsDCzMAElOBhAJAMASwoLJgAAAHicY2BkYGBhAAEWhv9///9lYWZgZEAFYgBbLQQgAAAAeJxjYGBgYIHj/3+B+D+MTwkAACOnBBMAeJxjYAACPgYZhiiGEwx3GP7hhwBJdRIJeJxjYGRgYBBjcGFgZgABJiDmAkIGhv9gPgMAEYUBdAB4nGWQPW7CQBSEx2BIAlKCFCkps1UKIpmfkgNAT0GXwpi1MbK91npBossJcoQcIaeIcoIcKGPzaGAtP38zb97uygAG+IWHenm4bWq9WrihOnGb9CDsk5+FO+jjRbhLfyjcwxumwn084p07eP4dnQFK4Rbu8SHcpv8p7JO/hDt4wrdwl/6PcA8r/An38eoN08gUsSncUif7LLRnef6utK1SU6hJMD5bC11oGzq9Ueujqg7J1LlYxdbkas6uzjKjSmt2OnLB1rlyNhrF4geRyZEigkGBuKkOS2gk2CNDCHvVvdQrpi0q+rVWmCDA+Cq1YKpokiGVxobJNY6sFQ48bUrXMa34Ws7kpLnMat4kIyv+77q3oxPRD7BtpkrMMOITX+SD5g75Pz0RXqgAAAB4nG3GSw6CMBRA0XeRohb/H1wFi2qAQCcteWnT7WvC1DO5VyrZWPmvo2JHjaFhz4EjlpYTZy5cuXHnwZMXbzo+YgenU+rHWEK7rfp5SXVxGsykGtX4sObUxJx+YcChTCR6RiKFgGdmYSWLfAGgdBim') format('woff')}[class*=' luna-console-icon-'],[class^=luna-console-icon-]{display:inline-block;font-family:luna-console-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-console-icon-caret-down:before{content:'\\f101'}.luna-console-icon-caret-right:before{content:'\\f102'}.luna-console-icon-warn:before{content:'\\f103'}.luna-console-icon-error:before{content:'\\f104'}.luna-console-icon-input:before{content:'\\f105'}.luna-console-icon-output:before{content:'\\f106'}.luna-console{background:#fff;overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%;position:relative;will-change:scroll-position;cursor:default;font-size:12px;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace}.luna-console.luna-console-theme-dark{background-color:#141414}.luna-console-hidden{display:none}.luna-console-fake-logs{position:absolute;left:0;top:0;pointer-events:none;visibility:hidden;width:100%}.luna-console-logs{padding-top:1px;position:absolute;width:100%}.luna-console-log-container{box-sizing:content-box}.luna-console-log-container.luna-console-selected .luna-console-log-item{background:#ecf1f8}.luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:#ccdef5}.luna-console-header{white-space:nowrap;display:flex;font-size:11px;color:#545454;border-top:1px solid transparent;border-bottom:1px solid #ccc}.luna-console-header .luna-console-time-from-container{overflow-x:auto;-webkit-overflow-scrolling:touch;padding:3px 10px}.luna-console-nesting-level{width:14px;flex-shrink:0;margin-top:-1px;margin-bottom:-1px;position:relative;border-right:1px solid #ccc}.luna-console-nesting-level.luna-console-group-closed::before{content:\"\"}.luna-console-nesting-level::before{border-bottom:1px solid #ccc;position:absolute;top:0;left:0;margin-left:100%;width:5px;height:100%;box-sizing:border-box}.luna-console-log-item{position:relative;display:flex;border-top:1px solid transparent;border-bottom:1px solid #ccc;margin-top:-1px;color:#333}.luna-console-log-item:after{content:\"\";display:block;clear:both}.luna-console-log-item .luna-console-code{display:inline;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace}.luna-console-log-item .luna-console-code .luna-console-keyword{color:#881280}.luna-console-log-item .luna-console-code .luna-console-number{color:#1c00cf}.luna-console-log-item .luna-console-code .luna-console-operator{color:gray}.luna-console-log-item .luna-console-code .luna-console-comment{color:#236e25}.luna-console-log-item .luna-console-code .luna-console-string{color:#1a1aa6}.luna-console-log-item a{color:#15c!important}.luna-console-log-item .luna-console-icon-container{margin:0 -6px 0 10px}.luna-console-log-item .luna-console-icon-container .luna-console-icon{line-height:20px;font-size:12px;color:#333;position:relative}.luna-console-log-item .luna-console-icon-container .luna-console-icon-caret-down,.luna-console-log-item .luna-console-icon-container .luna-console-icon-caret-right{top:0;left:-2px}.luna-console-log-item .luna-console-icon-container .luna-console-icon-error{top:0;color:#ef3842}.luna-console-log-item .luna-console-icon-container .luna-console-icon-warn{top:0;color:#e8a400}.luna-console-log-item .luna-console-count{background:#8097bd;color:#fff;padding:2px 4px;border-radius:10px;font-size:12px;float:left;margin:1px -6px 0 10px}.luna-console-log-item .luna-console-log-content-wrapper{flex:1;overflow:hidden}.luna-console-log-item .luna-console-log-content{padding:3px 0;margin:0 10px;overflow-x:auto;-webkit-overflow-scrolling:touch;white-space:pre-wrap;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-console-log-item .luna-console-log-content *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-console-log-item .luna-console-log-content>*{vertical-align:top}.luna-console-log-item .luna-console-log-content .luna-console-null,.luna-console-log-item .luna-console-log-content .luna-console-undefined{color:#5e5e5e}.luna-console-log-item .luna-console-log-content .luna-console-number{color:#1c00cf}.luna-console-log-item .luna-console-log-content .luna-console-boolean{color:#0d22aa}.luna-console-log-item .luna-console-log-content .luna-console-regexp,.luna-console-log-item .luna-console-log-content .luna-console-symbol{color:#881391}.luna-console-log-item .luna-console-data-grid,.luna-console-log-item .luna-console-dom-viewer{white-space:initial}.luna-console-log-item.luna-console-error{z-index:50;background:#fff0f0;color:red;border-top:1px solid #ffd6d6;border-bottom:1px solid #ffd6d6}.luna-console-log-item.luna-console-error .luna-console-stack{padding-left:1.2em;white-space:nowrap}.luna-console-log-item.luna-console-error .luna-console-count{background:red}.luna-console-log-item.luna-console-debug{z-index:20}.luna-console-log-item.luna-console-input{border-bottom-color:transparent}.luna-console-log-item.luna-console-warn{z-index:40;color:#5c5c00;background:#fffbe5;border-top:1px solid #fff5c2;border-bottom:1px solid #fff5c2}.luna-console-log-item.luna-console-warn .luna-console-count{background:#e8a400}.luna-console-log-item.luna-console-info{z-index:30}.luna-console-log-item.luna-console-group,.luna-console-log-item.luna-console-groupCollapsed{font-weight:700}.luna-console-preview{display:inline-block}.luna-console-preview .luna-console-preview-container{display:flex;align-items:center}.luna-console-preview .luna-console-json{overflow-x:auto;-webkit-overflow-scrolling:touch;padding-left:12px}.luna-console-preview .luna-console-preview-icon-container{display:block}.luna-console-preview .luna-console-preview-icon-container .luna-console-icon{position:relative;font-size:12px}.luna-console-preview .luna-console-preview-icon-container .luna-console-icon-caret-down{top:2px}.luna-console-preview .luna-console-preview-icon-container .luna-console-icon-caret-right{top:1px}.luna-console-preview .luna-console-preview-content-container{word-break:break-all}.luna-console-preview .luna-console-descriptor,.luna-console-preview .luna-console-object-preview{font-style:italic}.luna-console-preview .luna-console-key{color:#881391}.luna-console-preview .luna-console-number{color:#1c00cf}.luna-console-preview .luna-console-null{color:#5e5e5e}.luna-console-preview .luna-console-string{color:#c41a16}.luna-console-preview .luna-console-boolean{color:#0d22aa}.luna-console-preview .luna-console-special{color:#5e5e5e}.luna-console-theme-dark{color-scheme:dark}.luna-console-theme-dark .luna-console-log-container.luna-console-selected .luna-console-log-item{background:#29323d}.luna-console-theme-dark .luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:#4173b4}.luna-console-theme-dark .luna-console-log-item{color:#a5a5a5;border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-keyword{color:#e36eec}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-number{color:#9980ff}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-operator{color:#7f7f7f}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-comment{color:#747474}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-string{color:#f29766}.luna-console-theme-dark .luna-console-log-item.luna-console-error{background:#290000;color:#ff8080;border-top-color:#5c0000;border-bottom-color:#5c0000}.luna-console-theme-dark .luna-console-log-item.luna-console-error .luna-console-count{background:#ff8080}.luna-console-theme-dark .luna-console-log-item.luna-console-warn{color:#ffcb6b;background:#332a00;border-top-color:#650;border-bottom-color:#650}.luna-console-theme-dark .luna-console-log-item .luna-console-count{background:#42597f;color:#949494}.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-null,.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-undefined{color:#7f7f7f}.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-boolean,.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-number{color:#9980ff}.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-regexp,.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-symbol{color:#e36eec}.luna-console-theme-dark .luna-console-icon-container .luna-console-icon-caret-down,.luna-console-theme-dark .luna-console-icon-container .luna-console-icon-caret-right{color:#9aa0a6}.luna-console-theme-dark .luna-console-header{border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-nesting-level{border-right-color:#3d3d3d}.luna-console-theme-dark .luna-console-nesting-level::before{border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-preview .luna-console-key{color:#e36eec}.luna-console-theme-dark .luna-console-preview .luna-console-number{color:#9980ff}.luna-console-theme-dark .luna-console-preview .luna-console-null{color:#7f7f7f}.luna-console-theme-dark .luna-console-preview .luna-console-string{color:#f29766}.luna-console-theme-dark .luna-console-preview .luna-console-boolean{color:#9980ff}.luna-console-theme-dark .luna-console-preview .luna-console-special{color:#7f7f7f}",""]),e.exports=t},8009:function(e,t,n){var r=n(6513);t=function(e,t){e.prototype=r(t.prototype)},e.exports=t},8032:function(e,t,n){var r=n(2989),o=n(9931),i=n(2561),a=n(8971),s=n(3957),l=n(1976);t=function(e,t){return JSON.stringify(e,(n=[],c=[],function(e,t){if(n.length>0){var u=n.indexOf(this);u>-1?(n.splice(u+1),c.splice(u,1/0,e)):(n.push(this),c.push(e));var d=n.indexOf(t);d>-1&&(t=n[0]===t?"[Circular ~]":"[Circular ~."+c.slice(0,d).join(".")+"]")}else n.push(t);return l(t)||s(t)?t="["+o(r(t))+" "+i(t)+"]":a(t)&&(t=null),t}),t);var n,c},e.exports=t},8046:function(e,t,n){var r=n(7731);t=function(){var e=r(16);return e[6]=15&e[6]|64,e[8]=63&e[8]|128,o[e[0]]+o[e[1]]+o[e[2]]+o[e[3]]+"-"+o[e[4]]+o[e[5]]+"-"+o[e[6]]+o[e[7]]+"-"+o[e[8]]+o[e[9]]+"-"+o[e[10]]+o[e[11]]+o[e[12]]+o[e[13]]+o[e[14]]+o[e[15]]};for(var o=[],i=0;i<256;i++)o[i]=(i+256).toString(16).substr(1);e.exports=t},8052:function(e,t,n){"use strict";n.d(t,{A:function(){return Y}});var r,o=n(7528),i=n(3029),a=n(2901),s=n(388),l=n(3954),c=n(5361),u=n(2263),d=n.n(u),h=n(3693),f=n.n(h),p=n(3915),m=n.n(p),g=n(9405),v=n.n(g),y=n(5169),b=n.n(y),x=n(9548),w=n.n(x),_=n(6097),k=n.n(_),A=n(3249),S=n.n(A),N=(n(6030),n(5004)),C=n.n(N);function j(e){var t="luna-".concat(e,"-");function n(e){return m()(v()(e).split(/\s+/),function(e){return S()(e,t)?e:e.replace(/[\w-]+/,function(e){return"".concat(t).concat(e)})}).join(" ")}return function(e){if(/<[^>]*>/g.test(e))try{var t=w().parse(e);return E(t,function(e){e.attrs&&e.attrs.class&&(e.attrs.class=n(e.attrs.class))}),w().stringify(t)}catch(t){return n(e)}return n(e)}}function E(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];t(o),o.content&&E(o.content,t)}}n(9410),n(8609),b();var T=n(9100),I=n.n(T),P=n(8105),O=n.n(P),M=n(5651),L=n.n(M),R=n(961),D=n.n(R),F=n(7e3),z=n.n(F),B=n(1009),U=n.n(B);function q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(q=function(){return!!e})()}var V,H=function(e){function t(e,n){var r,o,a=n.compName,c=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).theme,u=void 0===c?"light":c;return(0,i.A)(this,t),r=function(e,t,n){return t=(0,l.A)(t),(0,s.A)(e,q()?Reflect.construct(t,[],(0,l.A)(e).constructor):t.apply(e,n))}(this,t),r.subComponents=[],r.theme="",r.onThemeChange=function(e){"auto"===r.options.theme&&r.setTheme(e)},r.compName=a,r.c=j(a),r.options={},r.container=e,r.$container=f()(e),r.$container.addClass(["luna-".concat(a),r.c("platform-".concat((o=C()(),"os x"===o?"mac":o)))]),r.on("changeOption",function(e,t){if("theme"===e&&t){var n=t;"auto"===t&&(n=z().get()),r.setTheme(n),I()(r.subComponents,function(e){return e.setOption("theme",t)})}}),z().on("change",r.onThemeChange),r.setOption("theme",u),r}return(0,c.A)(t,e),(0,a.A)(t,[{key:"destroy",value:function(){var e=this;this.destroySubComponents();var t=this.$container,n=t.attr("class");I()(n.split(/\s+/),function(n){U()(n,"luna-".concat(e.compName))&&t.rmClass(n)}),t.html(""),this.emit("destroy"),this.removeAllListeners(),z().off("change",this.onThemeChange)}},{key:"setOption",value:function(e,t){var n=this,r=this.options,o={};"string"==typeof e?o[e]=t:o=e,I()(o,function(e,t){var o=r[t];r[t]=e,e!==o&&n.emit("changeOption",t,e,o)})}},{key:"getOption",value:function(e){return this.options[e]}},{key:"addSubComponent",value:function(e){e.setOption("theme",this.options.theme),this.subComponents.push(e)}},{key:"removeSubComponent",value:function(e){D()(this.subComponents,function(t){return t===e})}},{key:"destroySubComponents",value:function(){I()(this.subComponents,function(e){return e.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};L()(e,t),O()(this.options,e)}},{key:"find",value:function(e){return this.$container.find(this.c(e))}},{key:"setTheme",value:function(e){var t=this.c,n=this.$container;this.theme&&n.rmClass(t("theme-".concat(this.theme))),n.addClass(t("theme-".concat(e))),this.theme=e}}])}(d()),G=n(5773),K=n.n(G),W=n(5902),Q=n.n(W);function Z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Z=function(){return!!e})()}e=n.hmd(e);var Y=function(e){function t(e){var n,r,o,a,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.A)(this,t),r=this,o=t,a=[e,{compName:"tab"},c],o=(0,l.A)(o),(n=(0,s.A)(r,Z()?Reflect.construct(o,a||[],(0,l.A)(r).constructor):o.apply(r,a))).initOptions(c,{height:30}),n.initTpl(),n.$tabs=n.find(".tabs"),n.tabs=n.$tabs.get(0),n.$slider=n.find(".slider"),n.bindEvent(),n.updateHeight(),n}return(0,c.A)(t,e),(0,a.A)(t,[{key:"length",get:function(){return this.$tabs.find(this.c(".item")).length}},{key:"insert",value:function(e,t){var n=this.c,r=this.$tabs,o=this.options.height-1,i=r.find(n(".item")),a=i.length,s='<div class="'.concat(n("item"),'" data-id="').concat(Q()(t.id),'" ').concat(t.closeable?'data-closeable="true"':"",' style="height: ').concat(o,"px; line-height: ").concat(o,'px;"><span class="').concat(n("title"),'">').concat(Q()(t.title),"</span>").concat(t.closeable?'<div class="'.concat(n("close-container"),'"><div class="').concat(n("close"),'"><span class="').concat(n("icon-close"),'"></span></div></div>'):"","</div>");e>a-1?r.append(s):i.eq(e).before(s),this.updateSlider()}},{key:"append",value:function(e){this.insert(this.length,e)}},{key:"remove",value:function(e){var t=this.c;if(1!==this.length){var n=this;this.$tabs.find(t(".item")).each(function(r){var o=f()(this);if(o.data("id")===e){if(o.remove(),o.hasClass(t("selected")))if(n.length>0){var i=r===n.length?r-1:r,a=n.$tabs.find(t(".item")).eq(i).data("id");n.select(a)}else n.emit("deselect");o.data("closeable")&&n.emit("close",e)}}),this.updateSlider()}}},{key:"select",value:function(e){var t=this.c,n=this;this.$tabs.find(t(".item")).each(function(){var r=f()(this);r.data("id")===e?(r.addClass(t("selected")),n.updateSlider(),n.scrollToSelected(),n.emit("select",e)):r.rmClass(t("selected"))})}},{key:"deselect",value:function(){var e=this.c;this.$tabs.find(e(".item")).each(function(){f()(this).rmClass(e("selected"))}),this.emit("deselect"),this.updateSlider()}},{key:"scrollToSelected",value:function(){var e,t=this.$tabs,n=this.tabs,r=this.c,o=t.find(r(".selected")).get(0),i=o.offsetLeft,a=o.offsetWidth,s=n.offsetWidth,l=n.scrollLeft;i<l?e=i:i+a>s+l&&(e=i+a-s),k()(e)&&(n.scrollLeft=e)}},{key:"hideScrollbar",value:function(){var e=this.$tabs;if("none"!==getComputedStyle(this.tabs,"::-webkit-scrollbar").display){var t=function(){if(k()(r))return r;if(!document)return 16;var e=document.createElement("div"),t=document.createElement("div");e.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),t.setAttribute("style","height: 200px"),e.appendChild(t);var n=document.body||document.documentElement;return n.appendChild(e),r=e.offsetWidth-e.clientWidth,n.removeChild(e),r}();e.css("height",this.options.height-1+t+"px")}}},{key:"updateSlider",value:function(){var e=this.$slider,t=this.$tabs,n=this.c,r=t.find(n(".selected")).get(0);r?e.css({width:r.offsetWidth,left:r.offsetLeft-t.get(0).scrollLeft}):e.css({width:0})}},{key:"updateHeight",value:function(){var e=this.options.height,t=e-1;this.find(".tabs-container").css("height",e+"px"),this.find(".item").css({height:t,lineHeight:t}),this.hideScrollbar()}},{key:"bindEvent",value:function(){var e=this,t=this.tabs,n=this.c;this.on("changeOption",function(t){"height"===t&&e.updateHeight()});var r=this;this.$tabs.on("wheel",function(e){e.preventDefault(),t.scrollLeft+=e.origEvent.deltaY}).on("click",n(".item"),function(){var e=f()(this);r.select(e.data("id"))}).on("click",n(".close"),function(e){e.stopPropagation();var t=f()(this).parent().parent();r.remove(t.data("id"))}).on("scroll",function(){e.updateSlider()})}},{key:"initTpl",value:function(){this.$container.html(this.c(K()(V||(V=(0,o.A)(['\n        <div class="tabs-container">\n          <div class="tabs"></div>\n        </div>\n        <div class="slider"></div>\n      '])))))}}])}(H);!function(e,t){try{e.exports=t,e.exports.default=t}catch(e){}}(e,Y)},8091:function(e,t,n){var r=n(282),o=n(9100),i=n(5207);function a(e){return'<a href="'+e+'">'+e+"</a>"}t=function(e,t){t=t||a;var n=r(e);return o(n,function(n){e=e.replace(new RegExp(i(n),"g"),t)}),e},e.exports=t},8098:function(e,t,n){var r=n(5693),o=n(5793),i=n(3145);t=function(e,t,n){t=r(t,n);for(var a=!o(e)&&i(e),s=(a||e).length,l=0;l<s;l++){var c=a?a[l]:l;if(!t(e[c],c,e))return!1}return!0},e.exports=t},8105:function(e,t,n){t=n(6307)(n(7514)),e.exports=t},8178:function(e,t,n){t=n(2510)(function(e,t){for(var n=e.length,r=0,o=t.length;r<o;r++)for(var i=t[r],a=0,s=i.length;a<s;a++)e[n++]=i[a];return e.length=n,e}),e.exports=t},8239:function(e,t,n){(t=n(6314)(!1)).push([e.id,'#_network ._network{position:absolute;width:100%;height:100%;left:0;top:0;padding-top:39px}#_network ._control{padding:10px;border-bottom:none;position:absolute;width:100%;height:40px;left:0;top:0;cursor:default;font-size:0;background:var(--darker-background);color:var(--primary);line-height:20px;border-bottom:1px solid var(--border)}#_network ._control [class*=" _icon-"],#_network ._control [class^=eruda-icon-]{display:inline-block;padding:10px;font-size:16px;position:absolute;top:0;cursor:pointer;transition:color .3s}#_network ._control [class*=" _icon-"]._active,#_network ._control [class*=" _icon-"]:active,#_network ._control [class^=eruda-icon-]._active,#_network ._control [class^=eruda-icon-]:active{color:var(--accent)}#_network ._control ._title{font-size:14px}#_network ._control ._icon-clear{left:23px}#_network ._control ._icon-eye{right:0}#_network ._control ._icon-copy{right:23px}#_network ._control ._icon-filter{right:46px}#_network ._control ._filter-text{white-space:nowrap;position:absolute;line-height:20px;max-width:80px;overflow:hidden;right:88px;font-size:14px;text-overflow:ellipsis}#_network ._control ._icon-record{left:0}#_network ._control ._icon-record._recording{color:var(--console-error-foreground);text-shadow:0 0 4px var(--console-error-foreground)}#_network ._request-error{color:var(--console-error-foreground)}#_network .luna-data-grid:focus .luna-data-grid-data-container ._request-error.luna-data-grid-selected{background:var(--console-error-background)}#_network .luna-data-grid{border-left:none;border-right:none}#_network ._detail{position:absolute;width:100%;height:100%;left:0;top:0;z-index:10;display:none;padding-top:40px;background:var(--background)}#_network ._detail ._control{padding:10px 35px;border-bottom:1px solid var(--border)}#_network ._detail ._control ._url{font-size:12px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:100%;display:inline-block}#_network ._detail ._control ._icon-arrow-left{left:0}#_network ._detail ._control ._icon-delete{left:0;display:none}#_network ._detail ._control ._icon-copy{right:0}#_network ._detail ._http{overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%}#_network ._detail ._http ._section{border-top:1px solid var(--border);border-bottom:1px solid var(--border);margin-top:10px;margin-bottom:10px}#_network ._detail ._http ._section h2{background:var(--darker-background);color:var(--primary);padding:10px;line-height:18px;font-size:14px}#_network ._detail ._http ._section table{color:var(--foreground)}#_network ._detail ._http ._section table *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}#_network ._detail ._http ._section table td{font-size:12px;padding:5px 10px;word-break:break-all}#_network ._detail ._http ._section table ._key{white-space:nowrap;font-weight:700;color:var(--accent)}#_network ._detail ._http ._data,#_network ._detail ._http ._response{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;overflow-x:auto;-webkit-overflow-scrolling:touch;padding:10px;font-size:12px;margin:10px 0;white-space:pre-wrap;border-top:1px solid var(--border);color:var(--foreground);border-bottom:1px solid var(--border)}._safe-area #_network ._http{padding-bottom:calc(0px + env(safe-area-inset-bottom))}@media screen and (min-width:680px){#_network ._network ._control ._icon-eye{display:none}#_network ._network ._control ._icon-copy{right:0}#_network ._network ._control ._icon-filter{right:23px}#_network ._network ._control ._filter-text{right:55px}#_network ._detail{width:50%;left:initial;right:0;border-left:1px solid var(--border)}#_network ._detail ._control ._icon-arrow-left{display:none}#_network ._detail ._control ._icon-delete{display:block}}',""]),e.exports=t},8420:function(e,t,n){var r=n(9760),o=n(6214),i=n(8105);t=function(e){return r(e)?o(e)?e.slice():i({},e):e},e.exports=t},8438:function(e,t,n){var r=n(6195),o=n(6167),i=n(5793),a=n(8971);t=function(e,t,n){var s=(i(e)?o:r)(e,t,n);if(!a(s)&&-1!==s)return e[s]},e.exports=t},8534:function(e,t,n){var r=n(5869),o=n(8971),i=n(387);t=r(function(e,t){return o(t)?(e=i(e),!o(a[e])):(a.cssText="",a.cssText=e+":"+t,!!a.length)},function(e,t){return e+" "+t});var a=document.createElement("p").style;e.exports=t},8604:function(e,t,n){var r=n(9100),o=n(3612);t=function(e){e=o(e),r(e,function(e){(function(e){return"none"==getComputedStyle(e,"").getPropertyValue("display")})(e)&&(e.style.display=function(e){var t,n;return i[e]||(t=document.createElement(e),document.documentElement.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),i[e]=n),i[e]}(e.nodeName))})};var i={};e.exports=t},8609:function(e,t,n){var r=n(5169),o=r.getComputedStyle,i=r.document;function a(e,t){return e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom}t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.display,r=void 0===n||n,s=t.visibility,l=void 0!==s&&s,c=t.opacity,u=void 0!==c&&c,d=t.size,h=void 0!==d&&d,f=t.viewport,p=void 0!==f&&f,m=t.overflow,g=void 0!==m&&m,v=o(e);if(r){var y=e.tagName;if("BODY"===y||"HTML"===y||"fixed"===v.position){if("none"===v.display)return!0;for(var b=e;b=b.parentElement;)if("none"===o(b).display)return!0}else if(null===e.offsetParent)return!0}if(l&&"hidden"===v.visibility)return!0;if(u){if("0"===v.opacity)return!0;for(var x=e;x=x.parentElement;)if("0"===o(x).opacity)return!0}var w=e.getBoundingClientRect();if(h&&(0===w.width||0===w.height))return!0;if(p)return a(w,{top:0,left:0,right:i.documentElement.clientWidth,bottom:i.documentElement.clientHeight});if(g)for(var _=e;_=_.parentElement;){var k=o(_).overflow;if(("scroll"===k||"hidden"===k)&&a(w,_.getBoundingClientRect()))return!0}return!1},e.exports=t},8665:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.trigger=function(e,t){this.emit("message",JSON.stringify({method:e,params:t}))},t}(i(n(2263)).default);t.default=new a},8687:function(e,t,n){(t=n(6314)(!1)).push([e.id,'._container .luna-console{background:var(--background)}._container .luna-console-header{color:var(--link-color);border-bottom-color:var(--border)}._container .luna-console-nesting-level{border-right-color:var(--border)}._container .luna-console-nesting-level::before{border-bottom-color:var(--border)}._container .luna-console-log-container.luna-console-selected .luna-console-log-item{background:var(--contrast)}._container .luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:var(--border)}._container .luna-console-log-item{border-bottom-color:var(--border);color:var(--foreground)}._container .luna-console-log-item a{color:var(--link-color)!important}._container .luna-console-log-item .luna-console-icon-container .luna-console-icon{color:var(--foreground)}._container .luna-console-log-item .luna-console-icon-container .luna-console-icon-error{color:#ef3842}._container .luna-console-log-item .luna-console-icon-container .luna-console-icon-warn{color:#e8a400}._container .luna-console-log-item .luna-console-count{color:var(--select-foreground);background:var(--highlight)}._container .luna-console-log-item.luna-console-warn{color:var(--console-warn-foreground);background:var(--console-warn-background);border-color:var(--console-warn-border)}._container .luna-console-log-item.luna-console-error{background:var(--console-error-background);color:var(--console-error-foreground);border-color:var(--console-error-border)}._container .luna-console-log-item.luna-console-error .luna-console-count{background:var(--console-error-foreground)}._container .luna-console-log-item .luna-console-code .luna-console-key{color:var(--var-color)}._container .luna-console-log-item .luna-console-code .luna-console-number{color:var(--number-color)}._container .luna-console-log-item .luna-console-code .luna-console-null{color:var(--operator-color)}._container .luna-console-log-item .luna-console-code .luna-console-string{color:var(--string-color)}._container .luna-console-log-item .luna-console-code .luna-console-boolean{color:var(--keyword-color)}._container .luna-console-log-item .luna-console-code .luna-console-special{color:var(--operator-color)}._container .luna-console-log-item .luna-console-code .luna-console-keyword{color:var(--keyword-color)}._container .luna-console-log-item .luna-console-code .luna-console-operator{color:var(--operator-color)}._container .luna-console-log-item .luna-console-code .luna-console-comment{color:var(--comment-color)}._container .luna-console-log-item .luna-console-log-content .luna-console-null,._container .luna-console-log-item .luna-console-log-content .luna-console-undefined{color:var(--operator-color)}._container .luna-console-log-item .luna-console-log-content .luna-console-number{color:var(--number-color)}._container .luna-console-log-item .luna-console-log-content .luna-console-boolean{color:var(--keyword-color)}._container .luna-console-log-item .luna-console-log-content .luna-console-regexp,._container .luna-console-log-item .luna-console-log-content .luna-console-symbol{color:var(--var-color)}._container .luna-console-preview .luna-console-key{color:var(--var-color)}._container .luna-console-preview .luna-console-number{color:var(--number-color)}._container .luna-console-preview .luna-console-null{color:var(--operator-color)}._container .luna-console-preview .luna-console-string{color:var(--string-color)}._container .luna-console-preview .luna-console-boolean{color:var(--keyword-color)}._container .luna-console-preview .luna-console-special{color:var(--operator-color)}._container .luna-console-preview .luna-console-keyword{color:var(--keyword-color)}._container .luna-console-preview .luna-console-operator{color:var(--operator-color)}._container .luna-console-preview .luna-console-comment{color:var(--comment-color)}._container .luna-object-viewer{color:var(--primary);font-size:12px!important}._container .luna-object-viewer-null{color:var(--operator-color)}._container .luna-object-viewer-regexp,._container .luna-object-viewer-string{color:var(--string-color)}._container .luna-object-viewer-number{color:var(--number-color)}._container .luna-object-viewer-boolean{color:var(--keyword-color)}._container .luna-object-viewer-special{color:var(--operator-color)}._container .luna-object-viewer-key,._container .luna-object-viewer-key-lighter{color:var(--var-color)}._container .luna-object-viewer-expanded:before{border-color:transparent;border-top-color:var(--foreground)}._container .luna-object-viewer-collapsed:before{border-top-color:transparent;border-left-color:var(--foreground)}._container .luna-notification{pointer-events:none!important;padding:10px;z-index:1000}._container .luna-notification-item{z-index:500;color:var(--foreground);background:var(--background);box-shadow:none;padding:5px 10px;border:1px solid var(--border)}._container .luna-notification-upper{margin-bottom:10px}._container .luna-notification-lower{margin-top:10px}._container .luna-data-grid{color:var(--foreground);background:var(--background);border-color:var(--border)}._container .luna-data-grid td,._container .luna-data-grid th{border-color:var(--border)}._container .luna-data-grid th{background:var(--darker-background)}._container .luna-data-grid th.luna-data-grid-sortable:active,._container .luna-data-grid th.luna-data-grid-sortable:hover{color:var(--select-foreground);background:var(--highlight)}._container .luna-data-grid .luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selectable:hover,._container .luna-data-grid .luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selected{background:var(--highlight)}._container .luna-data-grid .luna-data-grid-data-container tr:nth-child(even){background:var(--contrast)}._container .luna-data-grid:focus .luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selected{background:var(--accent)}._container .luna-dom-viewer{color:var(--foreground)}._container .luna-dom-viewer .luna-dom-viewer-html-tag,._container .luna-dom-viewer .luna-dom-viewer-tag-name{color:var(--tag-name-color)}._container .luna-dom-viewer .luna-dom-viewer-attribute-name{color:var(--attribute-name-color)}._container .luna-dom-viewer .luna-dom-viewer-attribute-value{color:var(--string-color)}._container .luna-dom-viewer .luna-dom-viewer-html-comment{color:var(--comment-color)}._container .luna-dom-viewer .luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{background:var(--contrast)}._container .luna-dom-viewer .luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection{background:var(--highlight)}._container .luna-dom-viewer .luna-dom-viewer-tree-item.luna-dom-viewer-selected:focus .luna-dom-viewer-selection{background:var(--accent);opacity:.2}._container .luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-key{color:var(--var-color)}._container .luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-number{color:var(--number-color)}._container .luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-null{color:var(--operator-color)}._container .luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-string{color:var(--string-color)}._container .luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-boolean{color:var(--keyword-color)}._container .luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-special{color:var(--operator-color)}._container .luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-keyword{color:var(--keyword-color)}._container .luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-operator{color:var(--operator-color)}._container .luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-comment{color:var(--comment-color)}._container .luna-dom-viewer-children{margin:0;padding-left:15px!important}._container ._inline .luna-modal,._container ._inline .luna-notification{position:absolute}._container .luna-modal{z-index:9999999}._container .luna-modal-body,._container .luna-modal-input{color:var(--foreground);background:var(--background)}._container .luna-modal-body{border-color:var(--border)}._container .luna-modal-input{-webkit-user-select:text!important;-moz-user-select:text!important;-ms-user-select:text!important;user-select:text!important;border-color:var(--border)}._container .luna-modal-button-group .luna-modal-secondary{border-color:var(--border);color:var(--foreground);background:var(--background)}._container .luna-modal-button-group .luna-modal-primary{background:var(--accent)}._container .luna-modal-button-group .luna-modal-button:active::before{background:var(--accent)}._container .luna-tab{position:absolute;left:0;top:0;color:var(--foreground);background:var(--darker-background)}._container .luna-tab-tabs-container{border-color:var(--border)}._container .luna-tab-item.luna-tab-selected,._container .luna-tab-item:hover{background:var(--highlight);color:var(--select-foreground)}._container .luna-tab-slider{background:var(--accent)}._container .luna-text-viewer{color:var(--foreground);border:none;border-bottom:1px solid var(--border);background:var(--background);font-size:12px}._container .luna-text-viewer .luna-text-viewer-line-text{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}._container .luna-text-viewer .luna-text-viewer-line-text *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}._container .luna-text-viewer .luna-text-viewer-copy,._container .luna-text-viewer .luna-text-viewer-line-number{border-color:var(--border)}._container .luna-text-viewer .luna-text-viewer-copy .luna-text-viewer-icon-check{color:var(--accent)}._container .luna-text-viewer .luna-text-viewer-copy{background-color:var(--background)}._container .luna-setting{color:var(--foreground);background:var(--background)}._container .luna-setting-item.luna-setting-selected,._container .luna-setting-item:hover{background:var(--darker-background)}._container .luna-setting-item.luna-setting-selected:focus{outline:0}._container .luna-setting-item-title{font-size:14px}._container .luna-setting-item-separator{border-color:var(--border)}._container .luna-setting-item-checkbox input{border-color:var(--border)}._container .luna-setting-item-checkbox input:checked{background-color:var(--accent);border-color:var(--accent)}._container .luna-setting-item-select .luna-setting-select select{color:var(--foreground);border-color:var(--border);background:var(--background)}._container .luna-setting-item-select .luna-setting-select:after{border-top-color:var(--foreground)}._container .luna-setting-item-button button{color:var(--accent);background:var(--background);border-color:var(--border)}._container .luna-setting-item-button button:active,._container .luna-setting-item-button button:hover{background:var(--darker-background)}._container .luna-setting-item-button button:active{border:1px solid var(--accent)}._container .luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar{background:var(--border)}._container .luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar .luna-setting-range-track-progress{background:var(--accent)}._container .luna-setting-item-number .luna-setting-range-container input::-webkit-slider-thumb{border-color:var(--border);background:radial-gradient(circle at center,var(--dark) 0,var(--dark) 15%,var(--light) 22%,var(--light) 100%)}._container .luna-box-model{background:var(--background)}._container .luna-box-model-border,._container .luna-box-model-content,._container .luna-box-model-margin,._container .luna-box-model-padding,._container .luna-box-model-position{color:var(--foreground);background:var(--background)}._container{min-width:320px;pointer-events:none;position:fixed;left:0;top:0;width:100%;height:100%;z-index:9999999;color:var(--foreground);font-family:-apple-system,system-ui,BlinkMacSystemFont,".SFNSDisplay-Regular","Helvetica Neue","Lucida Grande","Segoe UI",Tahoma,sans-serif;font-size:14px;direction:ltr}._container._dark{color-scheme:dark}._container *{box-sizing:border-box;pointer-events:all;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;-webkit-text-size-adjust:none}._container ul{list-style:none;padding:0;margin:0}._container h1,._container h2,._container h3,._container h4{margin:0}._container h2{font-size:14px}._container h2 [class*=" _icon-"],._container h2 [class^=icon-]{font-weight:400}._container._inline{position:static}._hidden{display:none}._icon-disabled{opacity:.5;pointer-events:none;cursor:default!important}._icon-disabled:active{color:inherit!important}._tag-name-color{color:var(--tag-name-color)}._function-color{color:var(--function-color)}._attribute-name-color{color:var(--attribute-name-color)}._operator-color{color:var(--operator-color)}._string-color{color:var(--string-color)}',""]),e.exports=t},8734:function(e,t,n){var r=n(2717),o=n(1738),i=n(6026),a=n(8),s=n(928),l=n(9848);t=r({initialize:function(e){o(e)&&(e=t.parse(e)),this.model=e.model,this.val=e.val},toRgb:function(){var e=this.val;"hsl"===this.model&&(e=s(e));var t="rgba";return 1===e[3]&&(t="rgb",e=e.slice(0,3)),t+"("+e.join(", ")+")"},toHex:function(){var e=this.val;"hsl"===this.model&&(e=s(e));var t=l.encode(e.slice(0,3));return t[0]===t[1]&&t[2]===t[3]&&t[4]===t[5]&&(t=t[0]+t[2]+t[5]),"#"+t},toHsl:function(){var e=this.val;"rgb"===this.model&&(e=a(e));var t="hsla";return 1===e[3]&&(t="hsl",e=e.slice(0,3)),e[1]=e[1]+"%",e[2]=e[2]+"%",t+"("+e.join(", ")+")"}},{parse:function(e){var t,n,r=[0,0,0,1],o="rgb";if(n=e.match(c))for(n=n[1],t=0;t<3;t++)r[t]=parseInt(n[t]+n[t],16);else if(n=e.match(u))for(n=n[1],t=0;t<3;t++){var a=2*t;r[t]=parseInt(n.slice(a,a+2),16)}else if(n=e.match(d)){for(t=0;t<3;t++)r[t]=parseInt(n[t+1],0);n[4]&&(r[3]=parseFloat(n[4]))}else if(n=e.match(h)){for(t=0;t<3;t++)r[t]=Math.round(2.55*parseFloat(n[t+1]));n[4]&&(r[3]=parseFloat(n[4]))}else(n=e.match(f))&&(o="hsl",r=[(parseFloat(n[1])%360+360)%360,i(parseFloat(n[2]),0,100),i(parseFloat(n[3]),0,100),i(parseFloat(n[4]),0,1)]);return{val:r,model:o}}});var c=/^#([a-fA-F0-9]{3})$/,u=/^#([a-fA-F0-9]{6})$/,d=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/,h=/^rgba?\(\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/,f=/^hsla?\(\s*([+-]?\d*[.]?\d+)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/;e.exports=t},8757:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(2263)),s=i(n(9100)),l=function(e){function t(){var t=e.call(this)||this;return t.observer=new MutationObserver(function(e){(0,s.default)(e,function(e){return t.handleMutation(e)})}),t}return o(t,e),t.prototype.observe=function(e){this.observer.observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0})},t.prototype.disconnect=function(){this.observer.disconnect()},t.prototype.handleMutation=function(e){"attributes"===e.type?this.emit("attributes",e.target,e.attributeName):"childList"===e.type?this.emit("childList",e.target,e.addedNodes,e.removedNodes):"characterData"===e.type&&this.emit("characterData",e.target)},t}(a.default);t.default=new l},8785:function(e,t){t=function(){for(var e=arguments,t=e[0],n=1,r=e.length;n<r;n++)e[n]<t&&(t=e[n]);return t},e.exports=t},8796:function(e,t,n){var r=n(9760),o=n(3957);t=function(e){return r(e)&&o(e.then)&&o(e.catch)},e.exports=t},8862:function(e,t,n){var r=n(1738);function o(e,t){var n,r=function(e){function t(e,t){return e===t||(e.nodeType===Node.ELEMENT_NODE&&t.nodeType===Node.ELEMENT_NODE?e.localName===t.localName:e.nodeType===t.nodeType||(e.nodeType===Node.CDATA_SECTION_NODE?Node.TEXT_NODE:e.nodeType)===(t.nodeType===Node.CDATA_SECTION_NODE?Node.TEXT_NODE:t.nodeType))}var n,r=e.parentNode?e.parentNode.children:null;if(!r)return 0;for(var o=0;o<r.length;++o)if(t(e,r[o])&&r[o]!==e){n=!0;break}if(!n)return 0;for(var i=1,a=0;a<r.length;++a)if(t(e,r[a])){if(r[a]===e)return i;++i}return-1}(e);if(-1===r)return null;switch(e.nodeType){case Node.ELEMENT_NODE:if(t&&e.getAttribute("id"))return new i('//*[@id="'+e.getAttribute("id")+'"]',!0);n=e.localName;break;case Node.ATTRIBUTE_NODE:n="@"+e.nodeName();break;case Node.TEXT_NODE:case Node.CDATA_SECTION_NODE:n="text()";break;case Node.PROCESSING_INSTRUCTION_NODE:n="processing-instruction()";break;case Node.COMMENT_NODE:n="comment()";break;case Node.DOCUMENT_NODE:default:n=""}return r>0&&(n+="["+r+"]"),new i(n,e.nodeType===Node.DOCUMENT_NODE)}t=function(e,t){return r(e)?function(e){for(var t=[],n=document.evaluate(e,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),r=0;r<n.snapshotLength;r++)t.push(n.snapshotItem(r));return t}(e):function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.nodeType===Node.DOCUMENT_NODE)return"/";for(var n=[],r=e;r;){var i=o(r,t);if(!i)break;if(n.push(i),i.optimized)break;r=r.parentNode}return n.reverse(),(n.length&&n[0].optimized?"":"/")+n.join("/")}(e,t)};var i=n(2717)({initialize:function(e,t){this.value=e,this.optimized=t||!1},toString:function(){return this.value}});e.exports=t},8966:function(e,t,n){var r=n(2717),o=n(3249);function i(){return!0}function a(){return!1}function s(e){var n,r=this.events[e.type],o=l.call(this,e,r);e=new t.Event(e);for(var i,a,s=0;(a=o[s++])&&!e.isPropagationStopped();)for(e.curTarget=a.el,i=0;(n=a.handlers[i++])&&!e.isImmediatePropagationStopped();)!1===n.handler.apply(a.el,[e])&&(e.preventDefault(),e.stopPropagation())}function l(e,t){var n,r,i,a,s=e.target,l=[],c=t.delegateCount;if(s.nodeType)for(;s!==this;s=s.parentNode||this){for(r=[],a=0;a<c;a++)void 0===r[n=(i=t[a]).selector+" "]&&(r[n]=o(this.querySelectorAll(n),s)),r[n]&&r.push(i);r.length&&l.push({el:s,handlers:r})}return c<t.length&&l.push({el:this,handlers:t.slice(c)}),l}t={add:function(e,t,n,r){var o,i={selector:n,handler:r};e.events||(e.events={}),(o=e.events[t])||((o=e.events[t]=[]).delegateCount=0,e.addEventListener(t,function(){s.apply(e,arguments)},!1)),n?o.splice(o.delegateCount++,0,i):o.push(i)},remove:function(e,t,n,r){var o=e.events;if(o&&o[t])for(var i,a=o[t],s=a.length;s--;)i=a[s],n&&i.selector!=n||i.handler!=r||(a.splice(s,1),i.selector&&a.delegateCount--)},Event:r({className:"Event",initialize:function(e){this.origEvent=e},isDefaultPrevented:a,isPropagationStopped:a,isImmediatePropagationStopped:a,preventDefault:function(){var e=this.origEvent;this.isDefaultPrevented=i,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.origEvent;this.isPropagationStopped=i,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.origEvent;this.isImmediatePropagationStopped=i,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}})},e.exports=t},8971:function(e,t){t=function(e){return void 0===e},e.exports=t},8996:function(e,t,n){t=n(3752)(n(7542),2),e.exports=t},9e3:function(e,t,n){var r=n(1738);t=function(e){return r(e)?"0"!==(e=e.toLowerCase())&&""!==e&&"false"!==e:!!e},e.exports=t},9041:function(e,t){function n(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}t="object"==typeof process&&process.nextTick?process.nextTick:"function"==typeof setImmediate?function(e){setImmediate(n(e))}:function(e){setTimeout(n(e),0)},e.exports=t},9100:function(e,t,n){var r=n(5793),o=n(3145),i=n(6459);t=function(e,t,n){var a,s;if(t=i(t,n),r(e))for(a=0,s=e.length;a<s;a++)t(e[a],a,e);else{var l=o(e);for(a=0,s=l.length;a<s;a++)t(e[l[a]],l[a],e)}return e},e.exports=t},9111:function(e,t,n){(t=n(6314)(!1)).push([e.id,'#_elements ._elements{position:absolute;width:100%;height:100%;left:0;top:0;padding-top:40px;padding-bottom:24px;font-size:14px}#_elements ._control{padding:10px 0;position:absolute;width:100%;height:40px;left:0;top:0;cursor:default;font-size:0;background:var(--darker-background);color:var(--primary);line-height:20px;border-bottom:1px solid var(--border)}#_elements ._control [class*=" _icon-"],#_elements ._control [class^=eruda-icon-]{display:inline-block;padding:10px;font-size:16px;position:absolute;top:0;cursor:pointer;transition:color .3s}#_elements ._control [class*=" _icon-"]._active,#_elements ._control [class*=" _icon-"]:active,#_elements ._control [class^=eruda-icon-]._active,#_elements ._control [class^=eruda-icon-]:active{color:var(--accent)}#_elements ._control ._icon-eye{right:0}#_elements ._control ._icon-copy{right:23px}#_elements ._control ._icon-delete{right:46px}#_elements ._dom-viewer-container{overflow:auto;-webkit-overflow-scrolling:touch;height:100%;padding:5px 0}#_elements ._crumbs{position:absolute;width:100%;height:24px;left:0;top:0;top:initial;line-height:24px;bottom:0;border-top:1px solid var(--border);background:var(--darker-background);color:var(--primary);font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}#_elements ._crumbs li{cursor:pointer;padding:0 7px;display:inline-block}#_elements ._crumbs li:hover,#_elements ._crumbs li:last-child{background:var(--highlight)}#_elements ._crumbs ._icon-arrow-right{font-size:12px;position:relative;top:1px}#_elements ._detail{position:absolute;width:100%;height:100%;left:0;top:0;z-index:10;padding-top:40px;display:none;background:var(--background)}#_elements ._detail ._control{padding:10px 35px}#_elements ._detail ._control ._element-name{font-size:12px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:100%;display:inline-block}#_elements ._detail ._control ._icon-arrow-left{left:0}#_elements ._detail ._control ._icon-refresh{right:0}#_elements ._detail ._element{overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%}#_elements ._section{border-bottom:1px solid var(--border);color:var(--foreground);margin:10px 0}#_elements ._section h2{color:var(--primary);background:var(--darker-background);border-top:1px solid var(--border);padding:10px;line-height:18px;font-size:14px;transition:background-color .3s}#_elements ._section h2 ._btn{margin-left:5px;float:right;color:var(--primary);width:18px;height:18px;font-size:16px;cursor:pointer;transition:color .3s}#_elements ._section h2 ._btn._filter-text{width:auto;max-width:80px;font-size:14px;overflow:hidden;font-weight:400;text-overflow:ellipsis;display:inline-block}#_elements ._section h2 ._btn:active{color:var(--accent)}#_elements ._section h2 ._btn._btn-disabled{color:inherit!important;cursor:default!important;pointer-events:none;opacity:.5}#_elements ._section h2 ._btn._btn-disabled *{pointer-events:none}#_elements ._section h2._active-effect{cursor:pointer}#_elements ._section h2._active-effect:active{background:var(--highlight);color:var(--select-foreground)}#_elements ._attributes{font-size:12px}#_elements ._attributes a{color:var(--link-color)}#_elements ._attributes ._table-wrapper{overflow-x:auto;-webkit-overflow-scrolling:touch}#_elements ._attributes table td{padding:5px 10px}#_elements ._text-content{background:#fff}#_elements ._text-content ._content{overflow-x:auto;-webkit-overflow-scrolling:touch;padding:10px}#_elements ._style-color{position:relative;top:1px;width:10px;height:10px;border-radius:50%;margin-right:2px;border:1px solid var(--border);display:inline-block}#_elements ._box-model{overflow-x:auto;-webkit-overflow-scrolling:touch;padding:10px;text-align:center;border-bottom:1px solid var(--color)}#_elements ._computed-style{font-size:12px}#_elements ._computed-style a{color:var(--link-color)}#_elements ._computed-style ._table-wrapper{overflow-y:auto;-webkit-overflow-scrolling:touch;max-height:200px;border-top:1px solid var(--border)}#_elements ._computed-style table td{padding:5px 10px}#_elements ._computed-style table td._key{white-space:nowrap;color:var(--var-color)}#_elements ._styles{font-size:12px}#_elements ._styles ._style-wrapper{padding:10px}#_elements ._styles ._style-wrapper ._style-rules{border:1px solid var(--border);padding:10px;margin-bottom:10px}#_elements ._styles ._style-wrapper ._style-rules ._rule{padding-left:2em;word-break:break-all}#_elements ._styles ._style-wrapper ._style-rules ._rule a{color:var(--link-color)}#_elements ._styles ._style-wrapper ._style-rules ._rule span{color:var(--var-color)}#_elements ._styles ._style-wrapper ._style-rules:last-child{margin-bottom:0}#_elements ._listeners{font-size:12px}#_elements ._listeners ._listener-wrapper{padding:10px}#_elements ._listeners ._listener-wrapper ._listener{margin-bottom:10px;overflow:hidden;border:1px solid var(--border)}#_elements ._listeners ._listener-wrapper ._listener ._listener-type{padding:10px;background:var(--darker-background);color:var(--primary)}#_elements ._listeners ._listener-wrapper ._listener ._listener-content li{overflow-x:auto;-webkit-overflow-scrolling:touch;padding:10px;border-top:none}._safe-area #_elements ._elements{padding-bottom:calc(24px + env(safe-area-inset-bottom))}._safe-area #_elements ._crumbs{height:calc(24px + env(safe-area-inset-bottom))}._safe-area #_elements ._element{padding-bottom:calc(0px + env(safe-area-inset-bottom))}@media screen and (min-width:680px){#_elements ._elements{width:50%}#_elements ._elements ._control ._icon-eye{display:none}#_elements ._elements ._control ._icon-copy{right:0}#_elements ._elements ._control ._icon-delete{right:23px}#_elements ._detail{width:50%;left:initial;right:0;border-left:1px solid var(--border)}#_elements ._detail ._control{padding-left:10px}#_elements ._detail ._control ._icon-arrow-left{display:none}}',""]),e.exports=t},9117:function(e,t,n){var r=n(6030),o=n(1738);t=function(e){if(o(e)){var t=e.match(s);return t?r(t[1])*i[t[2]||"ms"]:0}for(var n=e,l="ms",c=0,u=a.length;c<u;c++)if(n>=i[a[c]]){l=a[c];break}return+(n/i[l]).toFixed(2)+l};var i={ms:1,s:1e3};i.m=60*i.s,i.h=60*i.m,i.d=24*i.h,i.y=365.25*i.d;var a=["y","d","h","m","s"],s=/^((?:\d+)?\.?\d+) *(s|m|h|d|y)?$/;e.exports=t},9122:function(e,t,n){var r=n(9760),o=n(3957),i=n(1168);t=function(e){return!!r(e)&&(o(e)?s.test(i(e)):l.test(i(e)))};var a=Object.prototype.hasOwnProperty,s=new RegExp("^"+i(a).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),l=/^\[object .+?Constructor\]$/;e.exports=t},9186:function(e,t,n){var r=n(769),o=n(9760),i=n(1738),a=n(9100),s=n(8971),l=n(3612);(t=function(e,t,n){if(e=l(e),s(n)&&i(t))return function(e,t){return e.getAttribute(t)}(e[0],t);var r=t;o(r)||((r={})[t]=n),function(e,t){a(e,function(e){a(t,function(t,n){e.setAttribute(n,t)})})}(e,r)}).remove=function(e,t){e=l(e),t=r(t),a(e,function(e){a(t,function(t){e.removeAttribute(t)})})},e.exports=t},9196:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=s(n(7214)),c=n(926),u=n(4725),d=s(n(4095)),h=s(n(5865)),f=s(n(96)),p=s(n(9100)),m=s(n(8734)),g=s(n(9848)),v=s(n(3805)),y=s(n(8105)),b=s(n(387)),x=s(n(3249)),w=s(n(6030)),_=s(n(3019)),k=s(n(1738));n(3270);var A=function(e){function t(t,n){void 0===n&&(n={});var r=e.call(this,t,{compName:"dom-highlighter"},n)||this;return r.overlay=new c.HighlightOverlay(window),r.reset=function(){var e=document.documentElement.clientWidth,t=document.documentElement.clientHeight;r.overlay.reset({viewportSize:{width:e,height:t},deviceScaleFactor:1,pageScaleFactor:1,pageZoomFactor:1,emulationScaleFactor:1,scrollX:window.scrollX,scrollY:window.scrollY})},r.initOptions(n,{showRulers:!1,showExtensionLines:!1,showInfo:!0,showStyles:!0,showAccessibilityInfo:!0,colorFormat:"hex",contentColor:"rgba(111, 168, 220, .66)",paddingColor:"rgba(147, 196, 125, .55)",borderColor:"rgba(255, 229, 153, .66)",marginColor:"rgba(246, 178, 107, .66)",monitorResize:!0}),r.overlay.setContainer(t),r.overlay.setPlatform("mac"),r.redraw=(0,h.default)(function(){r.reset(),r.draw()},16),r.redraw(),r.bindEvent(),r}return o(t,e),t.prototype.highlight=function(e,t){t&&(0,y.default)(this.options,t),this.target=e,e instanceof HTMLElement&&this.options.monitorResize&&(this.resizeSensor&&this.resizeSensor.destroy(),this.resizeSensor=new d.default(e),this.resizeSensor.addListener(this.redraw)),this.redraw()},t.prototype.hide=function(){this.target=null,this.redraw()},t.prototype.intercept=function(e){this.interceptor=e},t.prototype.destroy=function(){window.removeEventListener("resize",this.redraw),window.removeEventListener("scroll",this.redraw),this.resizeSensor&&this.resizeSensor.destroy(),e.prototype.destroy.call(this)},t.prototype.draw=function(){var e=this.target;e&&(e instanceof Text?this.drawText(e):this.drawElement(e))},t.prototype.drawText=function(e){var t=this.options,n=document.createRange();n.selectNode(e);var r=n.getBoundingClientRect(),o=r.left,i=r.top,a=r.width,s=r.height;n.detach();var l={paths:[{path:this.rectToPath({left:o,top:i,width:a,height:s}),fillColor:C(t.contentColor),name:"content"}],showExtensionLines:t.showExtensionLines,showRulers:t.showRulers};t.showInfo&&(l.elementInfo={tagName:"#text",nodeWidth:a,nodeHeight:s}),this.overlay.drawHighlight(l)},t.prototype.drawElement=function(e){var t={paths:this.getPaths(e),showExtensionLines:this.options.showExtensionLines,showRulers:this.options.showRulers,colorFormat:this.options.colorFormat};if(this.options.showInfo&&(t.elementInfo=this.getElementInfo(e)),this.interceptor){var n=this.interceptor(t);n&&(t=n)}this.overlay.drawHighlight(t)},t.prototype.getPaths=function(e){var t=this.options,n=window.getComputedStyle(e),r=e.getBoundingClientRect(),o=r.left,i=r.top,a=r.width,s=r.height,l=function(e){return(0,u.pxToNum)(n.getPropertyValue(e))},c=l("margin-left"),d=l("margin-right"),h=l("margin-top"),f=l("margin-bottom"),p=l("border-left-width"),m=l("border-right-width"),g=l("border-top-width"),v=l("border-bottom-width"),y=l("padding-left"),b=l("padding-right"),x=l("padding-top"),w=l("padding-bottom");return[{path:this.rectToPath({left:o+p+y,top:i+g+x,width:a-p-y-m-b,height:s-g-x-v-w}),fillColor:C(t.contentColor),name:"content"},{path:this.rectToPath({left:o+p,top:i+g,width:a-p-m,height:s-g-v}),fillColor:C(t.paddingColor),name:"padding"},{path:this.rectToPath({left:o,top:i,width:a,height:s}),fillColor:C(t.borderColor),name:"border"},{path:this.rectToPath({left:o-c,top:i-h,width:a+c+d,height:s+h+f}),fillColor:C(t.marginColor),name:"margin"}]},t.prototype.getElementInfo=function(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height,o=e.getAttribute("class")||"";o=o.split(/\s+/).map(function(e){return"."+e}).join("");var i={tagName:(0,f.default)(e.tagName),className:o,idValue:e.id,nodeWidth:n,nodeHeight:r};return this.options.showStyles&&(i.style=this.getStyles(e)),this.options.showAccessibilityInfo&&(0,y.default)(i,this.getAccessibilityInfo(e)),i},t.prototype.getStyles=function(e){for(var t=window.getComputedStyle(e),n=!1,r=e.childNodes,o=0,i=r.length;o<i;o++)3===r[o].nodeType&&(n=!0);var a=[];return n&&a.push("color","font-family","font-size","line-height"),a.push("padding","margin","background-color"),j(t,a)},t.prototype.getAccessibilityInfo=function(e){var t=window.getComputedStyle(e);return i({showAccessibilityInfo:!0,contrast:i({contrastAlgorithm:"aa",textOpacity:.1},j(t,["font-size","font-weight","background-color","text-opacity"],!0)),isKeyboardFocusable:this.isFocusable(e)},this.getAccessibleNameAndRole(e))},t.prototype.isFocusable=function(e){var t=(0,f.default)(e.tagName);if((0,x.default)(["a","button","input","textarea","select","details"],t))return!0;var n=e.getAttribute("tabindex");return!!(n&&(0,w.default)(n)>-1)},t.prototype.getAccessibleNameAndRole=function(e){var t=e.getAttribute("labelledby")||e.getAttribute("aria-label"),n=e.getAttribute("role"),r=(0,f.default)(e.tagName);return _.default.forEach(function(t){var o,i;if(!n){var s=t[0],l=t[2];if(s===r){if(l)try{for(var c=a(l),u=c.next();!u.done;u=c.next()){var d=u.value;if(e.getAttribute(d[0])!==d[1])return}}catch(e){o={error:e}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(o)throw o.error}}n=t[1]}}}),{accessibleName:t||e.getAttribute("title")||"",accessibleRole:n||"generic"}},t.prototype.bindEvent=function(){var e=this;window.addEventListener("resize",this.redraw),window.addEventListener("scroll",this.redraw),this.on("optionChange",function(){return e.redraw()})},t.prototype.rectToPath=function(e){var t=e.left,n=e.top,r=e.width,o=e.height,i=[];return i.push("M",t,n),i.push("L",t+r,n),i.push("L",t+r,n+o),i.push("L",t,n+o),i.push("Z"),i},t}(l.default);t.default=A,e.exports=A,e.exports.default=A;var S=/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,N=/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d*(?:\.\d+)?)\)$/;function C(e){return(0,k.default)(e)?e:e.a?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(e.a,")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")}function j(e,t,n){void 0===n&&(n=!1);var r={};return(0,p.default)(t,function(t){var o,i=e["text-opacity"===t?"color":t];i&&(o=i,(S.test(o)||N.test(o))&&(i=function(e){var t=m.default.parse(e),n=t.val[3]||1;return t.val=t.val.slice(0,3),t.val.push(Math.round(255*n)),"#"+(0,v.default)(g.default.encode(t.val))}(i),"text-opacity"===t&&(i=i.slice(7),i=g.default.decode(i)[0]/255)),n&&(t=(0,b.default)(t)),r[t]=i)}),r}},9350:function(e,t){t=function(e){return"symbol"==typeof e},e.exports=t},9389:function(e,t,n){var r=n(5902),o=n(3145);t=function(e){return s.test(e)?e.replace(l,c):e};var i=n(5282)(r.map),a="(?:"+o(i).join("|")+")",s=new RegExp(a),l=new RegExp(a,"g");function c(e){return i[e]}e.exports=t},9405:function(e,t,n){var r=n(5333),o=n(9651);t=function(e,t){return null==t&&e.trim?e.trim():r(o(e,t),t)},e.exports=t},9410:function(e,t,n){var r=n(9993);t=function(e,t){t=t||r;var n=new Image;n.onload=function(){t(null,n)},n.onerror=function(e){t(e)},n.src=e},e.exports=t},9464:function(e,t,n){var r=n(5793),o=n(6214),i=n(1738),a=n(5132),s=n(3145);t=function(e){return null==e||(r(e)&&(o(e)||i(e)||a(e))?0===e.length:0===s(e).length)},e.exports=t},9548:function(e,t,n){var r=n(383),o=n(7005),i=n(6214),a=n(9100),s=n(1738),l=n(5154);t={parse:function(e){var t=[],n=new o;return r(e,{start:function(e,t){t=l(t,function(e){return function(e){return e.replace(/&quot;/g,'"')}(e)}),n.push({tag:e,attrs:t})},end:function(){var e=n.pop();if(n.size){var r=n.peek();i(r.content)||(r.content=[]),r.content.push(e)}else t.push(e)},comment:function(e){var r="\x3c!--".concat(e,"--\x3e"),o=n.peek();o?(o.content||(o.content=[]),o.content.push(r)):t.push(r)},text:function(e){var r=n.peek();r?(r.content||(r.content=[]),r.content.push(e)):t.push(e)}}),t},stringify:function e(t){var n="";return i(t)?a(t,function(t){return n+=e(t)}):s(t)?n=t:(n+="<".concat(t.tag),a(t.attrs,function(e,t){return n+=" ".concat(t,'="').concat(function(e){return e.replace(/"/g,"&quot;")}(e),'"')}),n+=">",t.content&&(n+=e(t.content)),n+="</".concat(t.tag,">")),n}},e.exports=t},9651:function(e,t){t=function(e,t){if(null==t){if(e.trimRight)return e.trimRight();t=" \r\n\t\f\v"}for(var n,r,o=e.length-1,i=t.length,a=!0;a&&o>=0;)for(a=!1,n=-1,r=e.charAt(o);++n<i;)if(r===t[n]){a=!0,o--;break}return o>=0?e.substring(0,o+1):""},e.exports=t},9756:function(e,t){t=function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.defComparator,r=0,o=e.length;r<o-1;r++)if(n(e[r],e[r+1])>0)return!1;return!0},t.defComparator=function(e,t){return e<t?-1:e>t?1:0},e.exports=t},9760:function(e,t){t=function(e){var t=typeof e;return!!e&&("function"===t||"object"===t)},e.exports=t},9848:function(e,t,n){var r=n(6024);t={encode:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];t.push((o>>>4).toString(16)),t.push((15&o).toString(16))}return t.join("")},decode:function(e){var t=[],n=e.length;r(n)&&n--;for(var o=0;o<n;o+=2)t.push(parseInt(e.substr(o,2),16));return t}},e.exports=t},9861:function(e,t,n){(t=n(6314)(!1)).push([e.id,"#_snippets{overflow-y:auto;-webkit-overflow-scrolling:touch;padding:10px}#_snippets ._section{margin-bottom:10px;border:1px solid var(--border);overflow:hidden;cursor:pointer}#_snippets ._section:active ._name{background:var(--highlight);color:var(--select-foreground)}#_snippets ._section ._name{padding:10px;line-height:18px;color:var(--primary);background:var(--darker-background);transition:background-color .3s}#_snippets ._section ._name ._btn{margin-left:10px;float:right;text-align:center;width:18px;height:18px;font-size:12px}#_snippets ._section ._description{font-size:12px;color:var(--foreground);padding:10px;transition:background-color .3s}._safe-area #_snippets{padding-bottom:calc(10px + env(safe-area-inset-bottom))}",""]),e.exports=t},9893:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getOrCreateNodeId=p,t.clear=function(){d.clear(),h.clear()},t.getNodeId=function(e){return h.get(e)},t.wrap=m,t.getChildNodes=g,t.getPreviousNode=function(e){var t=e.previousSibling;if(t){for(;!y(t)&&t.previousSibling;)t=t.previousSibling;return t&&y(t)?t:void 0}},t.filterNodes=v,t.isValidNode=y,t.getNode=function(e){var t=d.get(e);if(!t||10===t.nodeType||11===t.nodeType)throw(0,u.createErr)(-32e3,"Could not find node with given id");return t};var o=r(n(3915)),i=r(n(2571)),a=r(n(9100)),s=r(n(9405)),l=r(n(3249)),c=r(n(8105)),u=n(916),d=new Map,h=new Map,f=1;function p(e){var t=h.get(e);return t||(t=f++,h.set(e,t),d.set(t,e),t)}function m(e,t){var n=(void 0===t?{}:t).depth,r=void 0===n?1:n,o=p(e),i={nodeName:e.nodeName,nodeType:e.nodeType,localName:e.localName||"",nodeValue:e.nodeValue||"",nodeId:o,backendNodeId:o};if(e.parentNode&&(i.parentId=p(e.parentNode)),10===e.nodeType)return(0,c.default)(i,{publicId:"",systemId:""});if(e.attributes){var s=[];(0,a.default)(e.attributes,function(e){var t=e.name,n=e.value;return s.push(t,n)}),i.attributes=s}e.shadowRoot?i.shadowRoots=[m(e.shadowRoot,{depth:1})]:e.chobitsuShadowRoot&&(i.shadowRoots=[m(e.chobitsuShadowRoot,{depth:1})]),function(e){return!!window.ShadowRoot&&e instanceof ShadowRoot}(e)&&(i.shadowRootType=e.mode||"user-agent");var l=v(e.childNodes);i.childNodeCount=l.length;var u=1===i.childNodeCount&&3===l[0].nodeType;return(r>0||u)&&(i.children=g(e,r)),i}function g(e,t){var n=v(e.childNodes);return(0,o.default)(n,function(e){return m(e,{depth:t-1})})}function v(e){return i.default(e,function(e){return y(e)})}function y(e){if(1===e.nodeType){var t=e.getAttribute("class")||"";if((0,l.default)(t,"__chobitsu-hide__")||(0,l.default)(t,"html2canvas-container"))return!1}var n=!(3===e.nodeType&&""===(0,s.default)(e.nodeValue||""));return n&&e.parentNode?y(e.parentNode):n}},9907:function(e,t,n){(t=n(6314)(!1)).push([e.id,"@font-face{font-family:luna-object-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAS8AAsAAAAAB7QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAGEAAACMISgl+k9TLzIAAAFsAAAAPQAAAFZLxUkWY21hcAAAAawAAADWAAACdBU42qdnbHlmAAAChAAAAC4AAAAwabU7V2hlYWQAAAK0AAAALwAAADZzjr4faGhlYQAAAuQAAAAYAAAAJAFyANlobXR4AAAC/AAAABAAAABAAZAAAGxvY2EAAAMMAAAAEAAAACIAtACobWF4cAAAAxwAAAAfAAAAIAEbAA9uYW1lAAADPAAAASkAAAIWm5e+CnBvc3QAAARoAAAAUwAAAHZW8MNZeJxNjTsOQFAQRc/z/+sV1mABohKV0gZeJRJR2X9cT4RJZu7nFIMBMjoGvHGaF6rdngcNAc/c/O/Nvq2W5E1igdNE2zv1iGh1c5FQPlYXUlJRyxt9+/pUKadQa/AveGEGZQAAAHicY2BkkGScwMDKwMBQx9ADJGWgdAIDJ4MxAwMTAyszA1YQkOaawnCAQfcjE8MJIFcITDIwMIIIAFqDCGkAAAB4nM2STQ4BQRCFv54ZP8MwFhYW4gQcShBsSERi50BWDuFCcwJedddKRGKnOt8k9aanqudVAy0gF3NRQLgTsLhJDVHP6UW94Kp8zEhKwYIlG/YcOXHm0mTPp96aumLLwdUQ1fcIqmJrwpSZL+iqak5JmyE1Ayr1bdGhr/2ZPmp/qPQtuj/uJzqQl+pfDyypesQD6AT/ElV8PjyrMccT9rdLR3PUFBI227VTio1jbm6dodg5VnPvmAsHxzofHfmi+Sbs/pwdWcXFkWdNSNg9arIE2QufuSCyAAB4nGNgZACBlQzTGZgYGMyVxVc2O073AIpAxHsYloHFRc2dPZY2OTIwAACmEQesAAB4nGNgZGBgAOINe2b6x/PbfGXgZjgBFIjifLyvAUEDwUqGZUCSg4EJxAEAUn4LLAB4nGNgZGBgOMHAACdXMjAyoAIBADizAkx4nGNgAIITUEwGAABZUAGReJxjYAACHgYJ3BAAE94BXXicY2BkYGAQYGBmANEMDExAzAWEDAz/wXwGAApcASsAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxdxjkOgCAUANE/uOOGB+FQBIjaaEJIuL6FsfE1M6Lk9fXPoKioaWjp6BnQjEzMLKwYNtHepZhtuMs1vpvO/ch4HIlIxhK4KVyc7BwiD8nvDlkA') format('woff')}[class*=' luna-object-viewer-icon-'],[class^=luna-object-viewer-icon-]{display:inline-block;font-family:luna-object-viewer-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-object-viewer-icon-caret-down:before{content:'\\f101'}.luna-object-viewer-icon-caret-right:before{content:'\\f102'}.luna-object-viewer{overflow-x:auto;-webkit-overflow-scrolling:touch;overflow-y:hidden;cursor:default;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;font-size:12px;line-height:1.2;min-height:100%;color:#333;list-style:none!important}.luna-object-viewer ul{list-style:none!important;padding:0!important;padding-left:12px!important;margin:0!important}.luna-object-viewer li{position:relative;white-space:nowrap;line-height:16px;min-height:16px}.luna-object-viewer>li>.luna-object-viewer-key{display:none}.luna-object-viewer span{position:static!important}.luna-object-viewer li .luna-object-viewer-collapsed~.luna-object-viewer-close:before{color:#999}.luna-object-viewer-array .luna-object-viewer-object .luna-object-viewer-key{display:inline}.luna-object-viewer-null{color:#5e5e5e}.luna-object-viewer-regexp,.luna-object-viewer-string{color:#c41a16}.luna-object-viewer-number{color:#1c00cf}.luna-object-viewer-boolean{color:#0d22aa}.luna-object-viewer-special{color:#5e5e5e}.luna-object-viewer-key,.luna-object-viewer-key-lighter{color:#881391}.luna-object-viewer-key-lighter{opacity:.6}.luna-object-viewer-key-special{color:#5e5e5e}.luna-object-viewer-collapsed .luna-object-viewer-icon,.luna-object-viewer-expanded .luna-object-viewer-icon{position:absolute!important;left:-12px;color:#727272;font-size:12px}.luna-object-viewer-icon-caret-right{top:0}.luna-object-viewer-icon-caret-down{top:1px}.luna-object-viewer-expanded>.luna-object-viewer-icon-caret-down{display:inline}.luna-object-viewer-expanded>.luna-object-viewer-icon-caret-right{display:none}.luna-object-viewer-collapsed>.luna-object-viewer-icon-caret-down{display:none}.luna-object-viewer-collapsed>.luna-object-viewer-icon-caret-right{display:inline}.luna-object-viewer-hidden~ul{display:none}.luna-object-viewer-theme-dark{color:#fff}.luna-object-viewer-theme-dark .luna-object-viewer-null,.luna-object-viewer-theme-dark .luna-object-viewer-special{color:#a1a1a1}.luna-object-viewer-theme-dark .luna-object-viewer-regexp,.luna-object-viewer-theme-dark .luna-object-viewer-string{color:#f28b54}.luna-object-viewer-theme-dark .luna-object-viewer-boolean,.luna-object-viewer-theme-dark .luna-object-viewer-number{color:#9980ff}.luna-object-viewer-theme-dark .luna-object-viewer-key,.luna-object-viewer-theme-dark .luna-object-viewer-key-lighter{color:#5db0d7}",""]),e.exports=t},9931:function(e,t){t=function(e){return e.length<1?e:e[0].toUpperCase()+e.slice(1)},e.exports=t},9993:function(e,t){t=function(){},e.exports=t}},__webpack_module_cache__={};function __nested_webpack_require_816394__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__nested_webpack_require_816394__),n.loaded=!0,n.exports}__nested_webpack_require_816394__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __nested_webpack_require_816394__.d(t,{a:t}),t},__nested_webpack_require_816394__.d=function(e,t){for(var n in t)__nested_webpack_require_816394__.o(t,n)&&!__nested_webpack_require_816394__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__nested_webpack_require_816394__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__nested_webpack_require_816394__.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},__nested_webpack_require_816394__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__nested_webpack_require_816394__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __nested_webpack_exports__=__nested_webpack_require_816394__(2980);return __nested_webpack_exports__}()},module.exports=t()},1153:(e,t,n)=>{"use strict";var r=n(5043),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:u,props:i,_owner:s.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},1166:(e,t)=>{const n=new Uint8Array(512),r=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)n[t]=e,r[e]=t,e<<=1,256&e&&(e^=285);for(let t=255;t<512;t++)n[t]=n[t-255]}(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return r[e]},t.exp=function(e){return n[e]},t.mul=function(e,t){return 0===e||0===t?0:n[r[e]+r[t]]}},1312:(e,t,n)=>{const r=n(1166);t.mul=function(e,t){const n=new Uint8Array(e.length+t.length-1);for(let o=0;o<e.length;o++)for(let i=0;i<t.length;i++)n[o+i]^=r.mul(e[o],t[i]);return n},t.mod=function(e,t){let n=new Uint8Array(e);for(;n.length-t.length>=0;){const e=n[0];for(let i=0;i<t.length;i++)n[i]^=r.mul(t[i],e);let o=0;for(;o<n.length&&0===n[o];)o++;n=n.slice(o)}return n},t.generateECPolynomial=function(e){let n=new Uint8Array([1]);for(let o=0;o<e;o++)n=t.mul(n,new Uint8Array([1,r.exp(o)]));return n}},1497:(e,t,n)=>{"use strict";var r=n(3218);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},1805:(e,t,n)=>{const r=n(6272),o=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],i=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case r.L:return o[4*(e-1)+0];case r.M:return o[4*(e-1)+1];case r.Q:return o[4*(e-1)+2];case r.H:return o[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case r.L:return i[4*(e-1)+0];case r.M:return i[4*(e-1)+1];case r.Q:return i[4*(e-1)+2];case r.H:return i[4*(e-1)+3];default:return}}},2182:(e,t,n)=>{const r=n(8293);t.render=function(e,t,n){let o=n,i=t;"undefined"!==typeof o||t&&t.getContext||(o=t,t=void 0),t||(i=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),o=r.getOptions(o);const a=r.getImageWidth(e.modules.size,o),s=i.getContext("2d"),l=s.createImageData(a,a);return r.qrToImageData(l.data,e,o),function(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}(s,i,a),s.putImageData(l,0,0),i},t.renderToDataURL=function(e,n,r){let o=r;"undefined"!==typeof o||n&&n.getContext||(o=n,n=void 0),o||(o={});const i=t.render(e,n,o),a=o.type||"image/png",s=o.rendererOpts||{};return i.toDataURL(a,s.quality)}},2555:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function i(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{A:()=>s})},2730:(e,t,n)=>{"use strict";var r=n(5043),o=n(8853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,o,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var o=g.hasOwnProperty(t)?g[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),C=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var R,D=Object.assign;function F(e){if(void 0===R)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var z=!1;function B(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var o=c.stack.split("\n"),i=r.stack.split("\n"),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(1!==a||1!==s)do{if(a--,0>--s||o[a]!==i[s]){var l="\n"+o[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function U(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case _:return"Portal";case S:return"Profiler";case A:return"StrictMode";case E:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case j:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return D({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){J(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return D({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ie(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,ke=null,Ae=null;function Se(e){if(e=xo(e)){if("function"!==typeof _e)throw Error(i(280));var t=e.stateNode;t&&(t=_o(t),_e(e.stateNode,e.type,t))}}function Ne(e){ke?Ae?Ae.push(e):Ae=[e]:ke=e}function Ce(){if(ke){var e=ke,t=Ae;if(Ae=ke=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function je(e,t){return e(t)}function Ee(){}var Te=!1;function Ie(e,t,n){if(Te)return e(t,n);Te=!0;try{return je(e,t,n)}finally{Te=!1,(null!==ke||null!==Ae)&&(Ee(),Ce())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=_o(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Oe=!1;if(u)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(ue){Oe=!1}function Le(e,t,n,r,o,i,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Re=!1,De=null,Fe=!1,ze=null,Be={onError:function(e){Re=!0,De=e}};function Ue(e,t,n,r,o,i,a,s,l){Re=!1,De=null,Le.apply(Be,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(qe(e)!==e)throw Error(i(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(r=o.return)){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return He(o),e;if(a===r)return He(o),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=o,r=a;else{for(var s=!1,l=o.child;l;){if(l===n){s=!0,n=o,r=a;break}if(l===r){s=!0,r=o,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=o;break}if(l===r){s=!0,r=a,n=o;break}l=l.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var We=o.unstable_scheduleCallback,Qe=o.unstable_cancelCallback,Ze=o.unstable_shouldYield,Ye=o.unstable_requestPaint,Je=o.unstable_now,$e=o.unstable_getCurrentPriorityLevel,Xe=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~o;0!==s?r=dt(s):0!==(i&=a)&&(r=dt(i))}else 0!==(a=n&~o)?r=dt(a):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(i=t&-t)||16===o&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-at(t)),r|=e[n],t&=~o;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,kt,At,St,Nt=!1,Ct=[],jt=null,Et=null,Tt=null,It=new Map,Pt=new Map,Ot=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":jt=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Rt(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=xo(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Dt(e){var t=bo(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void St(e.priority,function(){kt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xo(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function Bt(){Nt=!1,null!==jt&&Ft(jt)&&(jt=null),null!==Et&&Ft(Et)&&(Et=null),null!==Tt&&Ft(Tt)&&(Tt=null),It.forEach(zt),Pt.forEach(zt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Bt)))}function qt(e){function t(t){return Ut(t,e)}if(0<Ct.length){Ut(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==jt&&Ut(jt,e),null!==Et&&Ut(Et,e),null!==Tt&&Ut(Tt,e),It.forEach(t),Pt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Dt(n),null===n.blockedOn&&Ot.shift()}var Vt=x.ReactCurrentBatchConfig,Ht=!0;function Gt(e,t,n,r){var o=bt,i=Vt.transition;Vt.transition=null;try{bt=1,Wt(e,t,n,r)}finally{bt=o,Vt.transition=i}}function Kt(e,t,n,r){var o=bt,i=Vt.transition;Vt.transition=null;try{bt=4,Wt(e,t,n,r)}finally{bt=o,Vt.transition=i}}function Wt(e,t,n,r){if(Ht){var o=Zt(e,t,n,r);if(null===o)Hr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return jt=Rt(jt,e,t,n,r,o),!0;case"dragenter":return Et=Rt(Et,e,t,n,r,o),!0;case"mouseover":return Tt=Rt(Tt,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return It.set(i,Rt(It.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Pt.set(i,Rt(Pt.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Mt.indexOf(e)){for(;null!==o;){var i=xo(o);if(null!==i&&wt(i),null===(i=Zt(e,t,n,r))&&Hr(e,t,r,Qt,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Zt(e,t,n,r){if(Qt=null,null!==(e=bo(e=we(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Xe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,$t=null,Xt=null;function en(){if(Xt)return Xt;var e,t,n=$t,r=n.length,o="value"in Jt?Jt.value:Jt.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return Xt=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=D({},cn,{view:0,detail:0}),hn=on(dn),fn=D({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(fn),mn=on(D({},fn,{dataTransfer:0})),gn=on(D({},dn,{relatedTarget:0})),vn=on(D({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=D({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(yn),xn=on(D({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function An(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Sn(){return An}var Nn=D({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=on(Nn),jn=on(D({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=on(D({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Tn=on(D({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=D({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=on(In),On=[9,13,27,32],Mn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Rn=u&&"TextEvent"in window&&!Ln,Dn=u&&(!Mn||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ne(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Wn=null;function Qn(e){Fr(e,0)}function Zn(e){if(W(wo(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(u){var $n;if(u){var Xn="oninput"in document;if(!Xn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Xn="function"===typeof er.oninput}$n=Xn}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Wn=Kn=null)}function nr(e){if("value"===e.propertyName&&Zn(Wn)){var t=[];Gn(t,Wn,e,we(e)),Ie(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zn(Wn)}function ir(e,t){if("click"===e)return Zn(t)}function ar(e,t){if("input"===e||"change"===e)return Zn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!d.call(t,o)||!sr(e[o],t[o]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=void 0===r.end?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=ur(n,i);var a=ur(n,r);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Kr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},Ar={};function Sr(e){if(kr[e])return kr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ar)return kr[e]=n[t];return e}u&&(Ar=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Nr=Sr("animationend"),Cr=Sr("animationiteration"),jr=Sr("animationstart"),Er=Sr("transitionend"),Tr=new Map,Ir="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Tr.set(e,t),l(t,[e])}for(var Or=0;Or<Ir.length;Or++){var Mr=Ir[Or];Pr(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}Pr(Nr,"onAnimationEnd"),Pr(Cr,"onAnimationIteration"),Pr(jr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Er,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Dr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,a,s,l,c){if(Ue.apply(this,arguments),Re){if(!Re)throw Error(i(198));var u=De;Re=!1,De=null,Fe||(Fe=!0,ze=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==i&&o.isPropagationStopped())break e;Dr(o,s,c),i=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==i&&o.isPropagationStopped())break e;Dr(o,s,c),i=l}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function zr(e,t){var n=t[go];void 0===n&&(n=t[go]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Ur]){e[Ur]=!0,a.forEach(function(t){"selectionchange"!==t&&(Rr.has(t)||Br(t,!1,e),Br(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Br("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Yt(t)){case 1:var o=Gt;break;case 4:o=Kt;break;default:o=Wt}n=o.bind(null,t,n,e),o=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,o){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;a=a.return}for(;null!==s;){if(null===(a=bo(s)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}s=s.parentNode}}r=r.return}Ie(function(){var r=i,o=we(n),a=[];e:{var s=Tr.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=En;break;case Nr:case Cr:case jr:l=vn;break;case Er:l=Tn;break;case"scroll":l=hn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=jn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Pe(p,h))&&u.push(Gr(p,m,f)))),d)break;p=p.return}0<u.length&&(s=new l(s,c,null,n,o),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!bo(c)&&!c[mo])&&(l||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?bo(c):null)&&(c!==(d=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=jn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?s:wo(l),f=null==c?s:wo(c),(s=new u(m,p+"leave",l,n,o)).target=d,s.relatedTarget=f,m=null,bo(o)===r&&((u=new u(h,p+"enter",c,n,o)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Wr(f))p++;for(f=0,m=h;m;m=Wr(m))f++;for(;0<p-f;)u=Wr(u),p--;for(;0<f-p;)h=Wr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Wr(u),h=Wr(h)}u=null}else u=null;null!==l&&Qr(a,s,l,u,!1),null!==c&&null!==d&&Qr(a,d,c,u,!0)}if("select"===(l=(s=r?wo(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Yn;else if(Hn(s))if(Jn)g=ar;else{g=or;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ir);switch(g&&(g=g(e,r))?Gn(a,g,n,o):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?wo(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(a,n,o);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(a,n,o)}var y;if(Mn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else qn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Dn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==b?"onCompositionEnd"===b&&qn&&(y=en()):($t="value"in(Jt=o)?Jt.value:Jt.textContent,qn=!0)),0<(v=Kr(r,b)).length&&(b=new xn(b,e,null,n,o),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=Un(n))&&(b.data=y))),(y=Rn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Mn&&Bn(e,t)?(e=en(),Xt=$t=Jt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(o=new xn("onBeforeInput","beforeinput",null,n,o),a.push({event:o,listeners:r}),o.data=y))}Fr(a,t)})}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=Pe(e,n))&&r.unshift(Gr(e,i,o)),null!=(i=Pe(e,t))&&r.push(Gr(e,i,o))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,o?null!=(l=Pe(n,i))&&a.unshift(Gr(n,l,s)):o||null!=(l=Pe(n,i))&&a.push(Gr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Zr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Zr,"\n").replace(Yr,"")}function $r(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(i(425))}function Xr(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,io="function"===typeof Promise?Promise:void 0,ao="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof io?function(e){return io.resolve(null).then(e).catch(so)}:ro;function so(e){setTimeout(function(){throw e})}function lo(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);qt(t)}function co(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ho=Math.random().toString(36).slice(2),fo="__reactFiber$"+ho,po="__reactProps$"+ho,mo="__reactContainer$"+ho,go="__reactEvents$"+ho,vo="__reactListeners$"+ho,yo="__reactHandles$"+ho;function bo(e){var t=e[fo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mo]||n[fo]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=uo(e);null!==e;){if(n=e[fo])return n;e=uo(e)}return t}n=(e=n).parentNode}return null}function xo(e){return!(e=e[fo]||e[mo])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function _o(e){return e[po]||null}var ko=[],Ao=-1;function So(e){return{current:e}}function No(e){0>Ao||(e.current=ko[Ao],ko[Ao]=null,Ao--)}function Co(e,t){Ao++,ko[Ao]=e.current,e.current=t}var jo={},Eo=So(jo),To=So(!1),Io=jo;function Po(e,t){var n=e.type.contextTypes;if(!n)return jo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Oo(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Mo(){No(To),No(Eo)}function Lo(e,t,n){if(Eo.current!==jo)throw Error(i(168));Co(Eo,t),Co(To,n)}function Ro(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(i(108,V(e)||"Unknown",o));return D({},n,r)}function Do(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||jo,Io=Eo.current,Co(Eo,e),Co(To,To.current),!0}function Fo(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Ro(e,t,Io),r.__reactInternalMemoizedMergedChildContext=e,No(To),No(Eo),Co(Eo,e)):No(To),Co(To,n)}var zo=null,Bo=!1,Uo=!1;function qo(e){null===zo?zo=[e]:zo.push(e)}function Vo(){if(!Uo&&null!==zo){Uo=!0;var e=0,t=bt;try{var n=zo;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}zo=null,Bo=!1}catch(o){throw null!==zo&&(zo=zo.slice(e+1)),We(Xe,Vo),o}finally{bt=t,Uo=!1}}return null}var Ho=[],Go=0,Ko=null,Wo=0,Qo=[],Zo=0,Yo=null,Jo=1,$o="";function Xo(e,t){Ho[Go++]=Wo,Ho[Go++]=Ko,Ko=e,Wo=t}function ei(e,t,n){Qo[Zo++]=Jo,Qo[Zo++]=$o,Qo[Zo++]=Yo,Yo=e;var r=Jo;e=$o;var o=32-at(r)-1;r&=~(1<<o),n+=1;var i=32-at(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,Jo=1<<32-at(t)+o|n<<o|r,$o=i+e}else Jo=1<<i|n<<o|r,$o=e}function ti(e){null!==e.return&&(Xo(e,1),ei(e,1,0))}function ni(e){for(;e===Ko;)Ko=Ho[--Go],Ho[Go]=null,Wo=Ho[--Go],Ho[Go]=null;for(;e===Yo;)Yo=Qo[--Zo],Qo[Zo]=null,$o=Qo[--Zo],Qo[Zo]=null,Jo=Qo[--Zo],Qo[Zo]=null}var ri=null,oi=null,ii=!1,ai=null;function si(e,t){var n=Ic(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function li(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ri=e,oi=co(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ri=e,oi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yo?{id:Jo,overflow:$o}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ic(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ri=e,oi=null,!0);default:return!1}}function ci(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ui(e){if(ii){var t=oi;if(t){var n=t;if(!li(e,t)){if(ci(e))throw Error(i(418));t=co(n.nextSibling);var r=ri;t&&li(e,t)?si(r,n):(e.flags=-4097&e.flags|2,ii=!1,ri=e)}}else{if(ci(e))throw Error(i(418));e.flags=-4097&e.flags|2,ii=!1,ri=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ri=e}function hi(e){if(e!==ri)return!1;if(!ii)return di(e),ii=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oi)){if(ci(e))throw fi(),Error(i(418));for(;t;)si(e,t),t=co(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oi=co(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oi=null}}else oi=ri?co(e.stateNode.nextSibling):null;return!0}function fi(){for(var e=oi;e;)e=co(e.nextSibling)}function pi(){oi=ri=null,ii=!1}function mi(e){null===ai?ai=[e]:ai.push(e)}var gi=x.ReactCurrentBatchConfig;function vi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var o=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=o.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bi(e){return(0,e._init)(e._payload)}function xi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Dc(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===k?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===P&&bi(i)===t.type)?((r=o(t,n.props)).ref=vi(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=vi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Dc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=vi(e,null,t),n.return=e,n;case _:return(t=Fc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function f(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===o?c(e,t,n,r):null;case _:return n.key===o?u(e,t,n,r):null;case P:return f(e,t,(o=n._init)(n._payload),r)}if(te(n)||L(n))return null!==o?null:d(e,t,n,r,null);yi(e,n)}return null}function p(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case P:return p(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,o,null);yi(t,r)}return null}function m(o,i,s,l){for(var c=null,u=null,d=i,m=i=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(o,d,s[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(o,d),i=a(v,i,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===s.length)return n(o,d),ii&&Xo(o,m),c;if(null===d){for(;m<s.length;m++)null!==(d=h(o,s[m],l))&&(i=a(d,i,m),null===u?c=d:u.sibling=d,u=d);return ii&&Xo(o,m),c}for(d=r(o,d);m<s.length;m++)null!==(g=p(d,o,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),i=a(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(o,e)}),ii&&Xo(o,m),c}function g(o,s,l,c){var u=L(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=f(o,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(o,m),s=a(b,s,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return n(o,m),ii&&Xo(o,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(o,y.value,c))&&(s=a(y,s,g),null===d?u=y:d.sibling=y,d=y);return ii&&Xo(o,g),u}for(m=r(o,m);!y.done;g++,y=l.next())null!==(y=p(m,o,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=a(y,s,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(o,e)}),ii&&Xo(o,g),u}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===k){if(7===u.tag){n(r,u.sibling),(i=o(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&bi(c)===u.type){n(r,u.sibling),(i=o(u,a.props)).ref=vi(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===k?((i=Lc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Mc(a.type,a.key,a.props,null,r.mode,l)).ref=vi(r,i,a),l.return=r,r=l)}return s(r);case _:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=o(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Fc(a,r.mode,l)).return=r,r=i}return s(r);case P:return e(r,i,(u=a._init)(a._payload),l)}if(te(a))return m(r,i,a,l);if(L(a))return g(r,i,a,l);yi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=o(i,a)).return=r,r=i):(n(r,i),(i=Dc(a,r.mode,l)).return=r,r=i),s(r)):n(r,i)}}var wi=xi(!0),_i=xi(!1),ki=So(null),Ai=null,Si=null,Ni=null;function Ci(){Ni=Si=Ai=null}function ji(e){var t=ki.current;No(ki),e._currentValue=t}function Ei(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ti(e,t){Ai=e,Ni=Si=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ii(e){var t=e._currentValue;if(Ni!==e)if(e={context:e,memoizedValue:t,next:null},null===Si){if(null===Ai)throw Error(i(308));Si=e,Ai.dependencies={lanes:0,firstContext:e}}else Si=Si.next=e;return t}var Pi=null;function Oi(e){null===Pi?Pi=[e]:Pi.push(e)}function Mi(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Oi(t)):(n.next=o.next,o.next=n),t.interleaved=n,Li(e,r)}function Li(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ri=!1;function Di(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&jl)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Li(e,n)}return null===(o=r.interleaved)?(t.next=t,Oi(r)):(t.next=o.next,o.next=t),r.interleaved=t,Li(e,n)}function Ui(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function qi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?o=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vi(e,t,n,r){var o=e.updateQueue;Ri=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=o.baseState;for(a=0,u=c=l=null,s=i;;){var h=s.lane,f=s.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=D({},d,h);break e;case 2:Ri=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=o.effects)?o.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(h=s).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}if(null===u&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,null!==(t=o.shared.interleaved)){o=t;do{a|=o.lane,o=o.next}while(o!==t)}else null===i&&(o.shared.lanes=0);Rl|=a,e.lanes=a,e.memoizedState=d}}function Hi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(i(191,o));o.call(r)}}}var Gi={},Ki=So(Gi),Wi=So(Gi),Qi=So(Gi);function Zi(e){if(e===Gi)throw Error(i(174));return e}function Yi(e,t){switch(Co(Qi,t),Co(Wi,e),Co(Ki,Gi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}No(Ki),Co(Ki,t)}function Ji(){No(Ki),No(Wi),No(Qi)}function $i(e){Zi(Qi.current);var t=Zi(Ki.current),n=le(t,e.type);t!==n&&(Co(Wi,e),Co(Ki,n))}function Xi(e){Wi.current===e&&(No(Ki),No(Wi))}var ea=So(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var oa=x.ReactCurrentDispatcher,ia=x.ReactCurrentBatchConfig,aa=0,sa=null,la=null,ca=null,ua=!1,da=!1,ha=0,fa=0;function pa(){throw Error(i(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ga(e,t,n,r,o,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oa.current=null===e||null===e.memoizedState?Xa:es,e=n(r,o),da){a=0;do{if(da=!1,ha=0,25<=a)throw Error(i(301));a+=1,ca=la=null,t.updateQueue=null,oa.current=ts,e=n(r,o)}while(da)}if(oa.current=$a,t=null!==la&&null!==la.next,aa=0,ca=la=sa=null,ua=!1,t)throw Error(i(300));return e}function va(){var e=0!==ha;return ha=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?sa.memoizedState=ca=e:ca=ca.next=e,ca}function ba(){if(null===la){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?sa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(i(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?sa.memoizedState=ca=e:ca=ca.next=e}return ca}function xa(e,t){return"function"===typeof t?t(e):t}function wa(e){var t=ba(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=la,o=r.baseQueue,a=n.pending;if(null!==a){if(null!==o){var s=o.next;o.next=a.next,a.next=s}r.baseQueue=o=a,n.pending=null}if(null!==o){a=o.next,r=r.baseState;var l=s=null,c=null,u=a;do{var d=u.lane;if((aa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,s=r):c=c.next=h,sa.lanes|=d,Rl|=d}u=u.next}while(null!==u&&u!==a);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{a=o.lane,sa.lanes|=a,Rl|=a,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _a(e){var t=ba(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{a=e(a,s.action),s=s.next}while(s!==o);sr(a,t.memoizedState)||(bs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ka(){}function Aa(e,t){var n=sa,r=ba(),o=t(),a=!sr(r.memoizedState,o);if(a&&(r.memoizedState=o,bs=!0),r=r.queue,Ra(Ca.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Ia(9,Na.bind(null,n,r,o,t),void 0,null),null===El)throw Error(i(349));0!==(30&aa)||Sa(n,t,o)}return o}function Sa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Na(e,t,n,r){t.value=n,t.getSnapshot=r,ja(t)&&Ea(e)}function Ca(e,t,n){return n(function(){ja(t)&&Ea(e)})}function ja(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Ea(e){var t=Li(e,1);null!==t&&nc(t,e,1,-1)}function Ta(e){var t=ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=Qa.bind(null,sa,e),[t.memoizedState,e]}function Ia(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Pa(){return ba().memoizedState}function Oa(e,t,n,r){var o=ya();sa.flags|=e,o.memoizedState=Ia(1|t,n,void 0,void 0===r?null:r)}function Ma(e,t,n,r){var o=ba();r=void 0===r?null:r;var i=void 0;if(null!==la){var a=la.memoizedState;if(i=a.destroy,null!==r&&ma(r,a.deps))return void(o.memoizedState=Ia(t,n,i,r))}sa.flags|=e,o.memoizedState=Ia(1|t,n,i,r)}function La(e,t){return Oa(8390656,8,e,t)}function Ra(e,t){return Ma(2048,8,e,t)}function Da(e,t){return Ma(4,2,e,t)}function Fa(e,t){return Ma(4,4,e,t)}function za(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ba(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ma(4,4,za.bind(null,t,e),n)}function Ua(){}function qa(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Va(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ha(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),sa.lanes|=n,Rl|=n,e.baseState=!0),t)}function Ga(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{bt=n,ia.transition=r}}function Ka(){return ba().memoizedState}function Wa(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Za(e))Ya(t,n);else if(null!==(n=Mi(e,t,n,r))){nc(n,e,r,ec()),Ja(n,t,r)}}function Qa(e,t,n){var r=tc(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Za(e))Ya(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,sr(s,a)){var l=t.interleaved;return null===l?(o.next=o,Oi(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch(c){}null!==(n=Mi(e,t,o,r))&&(nc(n,e,r,o=ec()),Ja(n,t,r))}}function Za(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Ya(e,t){da=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ja(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var $a={readContext:Ii,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Xa={readContext:Ii,useCallback:function(e,t){return ya().memoizedState=[e,void 0===t?null:t],e},useContext:Ii,useEffect:La,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oa(4194308,4,za.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oa(4,2,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ya();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wa.bind(null,sa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:Ta,useDebugValue:Ua,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=Ta(!1),t=e[0];return e=Ga.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sa,o=ya();if(ii){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===El)throw Error(i(349));0!==(30&aa)||Sa(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,La(Ca.bind(null,r,a,e),[e]),r.flags|=2048,Ia(9,Na.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ya(),t=El.identifierPrefix;if(ii){var n=$o;t=":"+t+"R"+(n=(Jo&~(1<<32-at(Jo)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Ii,useCallback:qa,useContext:Ii,useEffect:Ra,useImperativeHandle:Ba,useInsertionEffect:Da,useLayoutEffect:Fa,useMemo:Va,useReducer:wa,useRef:Pa,useState:function(){return wa(xa)},useDebugValue:Ua,useDeferredValue:function(e){return Ha(ba(),la.memoizedState,e)},useTransition:function(){return[wa(xa)[0],ba().memoizedState]},useMutableSource:ka,useSyncExternalStore:Aa,useId:Ka,unstable_isNewReconciler:!1},ts={readContext:Ii,useCallback:qa,useContext:Ii,useEffect:Ra,useImperativeHandle:Ba,useInsertionEffect:Da,useLayoutEffect:Fa,useMemo:Va,useReducer:_a,useRef:Pa,useState:function(){return _a(xa)},useDebugValue:Ua,useDeferredValue:function(e){var t=ba();return null===la?t.memoizedState=e:Ha(t,la.memoizedState,e)},useTransition:function(){return[_a(xa)[0],ba().memoizedState]},useMutableSource:ka,useSyncExternalStore:Aa,useId:Ka,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=D({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:D({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var os={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),o=tc(e),i=zi(r,o);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Bi(e,i,o))&&(nc(t,e,o,r),Ui(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),o=tc(e),i=zi(r,o);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Bi(e,i,o))&&(nc(t,e,o,r),Ui(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),o=zi(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=Bi(e,o,r))&&(nc(t,e,r,n),Ui(t,e,r))}};function is(e,t,n,r,o,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(o,i))}function as(e,t,n){var r=!1,o=jo,i=t.contextType;return"object"===typeof i&&null!==i?i=Ii(i):(o=Oo(t)?Io:Eo.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Po(e,o):jo),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=os,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&os.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Di(e);var i=t.contextType;"object"===typeof i&&null!==i?o.context=Ii(i):(i=Oo(t)?Io:Eo.current,o.context=Po(e,i)),o.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(rs(e,t,i,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&os.enqueueReplaceState(o,o.state,null),Vi(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var o=n}catch(i){o="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:o,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hs="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=zi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Gl=r),ds(0,t)},n}function ps(e,t,n){(n=zi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){ds(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=zi(-1,1)).tag=2,Bi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var ys=x.ReactCurrentOwner,bs=!1;function xs(e,t,n,r){t.child=null===e?_i(t,null,n,r):wi(t,e.child,n,r)}function ws(e,t,n,r,o){n=n.render;var i=t.ref;return Ti(t,o),r=ga(e,t,n,r,i,o),n=va(),null===e||bs?(ii&&n&&ti(t),t.flags|=1,xs(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Hs(e,t,o))}function _s(e,t,n,r,o){if(null===e){var i=n.type;return"function"!==typeof i||Pc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,ks(e,t,i,r,o))}if(i=e.child,0===(e.lanes&o)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Hs(e,t,o)}return t.flags|=1,(e=Oc(i,r)).ref=t.ref,e.return=t,t.child=e}function ks(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=i,0===(e.lanes&o))return t.lanes=e.lanes,Hs(e,t,o);0!==(131072&e.flags)&&(bs=!0)}}return Ns(e,t,n,r,o)}function As(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Co(Ol,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Co(Ol,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Co(Ol,Pl),Pl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Co(Ol,Pl),Pl|=r;return xs(e,t,o,n),t.child}function Ss(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ns(e,t,n,r,o){var i=Oo(n)?Io:Eo.current;return i=Po(t,i),Ti(t,o),n=ga(e,t,n,r,i,o),r=va(),null===e||bs?(ii&&r&&ti(t),t.flags|=1,xs(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Hs(e,t,o))}function Cs(e,t,n,r,o){if(Oo(n)){var i=!0;Do(t)}else i=!1;if(Ti(t,o),null===t.stateNode)Vs(e,t),as(t,n,r),ls(t,n,r,o),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ii(c):c=Po(t,c=Oo(n)?Io:Eo.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==c)&&ss(t,a,r,c),Ri=!1;var h=t.memoizedState;a.state=h,Vi(t,r,a,o),l=t.memoizedState,s!==r||h!==l||To.current||Ri?("function"===typeof u&&(rs(t,n,u,r),l=t.memoizedState),(s=Ri||is(t,n,s,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Fi(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ii(l):l=Po(t,l=Oo(n)?Io:Eo.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==l)&&ss(t,a,r,l),Ri=!1,h=t.memoizedState,a.state=h,Vi(t,r,a,o);var p=t.memoizedState;s!==d||h!==p||To.current||Ri?("function"===typeof f&&(rs(t,n,f,r),p=t.memoizedState),(c=Ri||is(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return js(e,t,n,r,i,o)}function js(e,t,n,r,o,i){Ss(e,t);var a=0!==(128&t.flags);if(!r&&!a)return o&&Fo(t,n,!1),Hs(e,t,i);r=t.stateNode,ys.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=wi(t,e.child,null,i),t.child=wi(t,null,s,i)):xs(e,t,s,i),t.memoizedState=r.state,o&&Fo(t,n,!0),t.child}function Es(e){var t=e.stateNode;t.pendingContext?Lo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Lo(0,t.context,!1),Yi(e,t.containerInfo)}function Ts(e,t,n,r,o){return pi(),mi(o),t.flags|=256,xs(e,t,n,r),t.child}var Is,Ps,Os,Ms,Ls={dehydrated:null,treeContext:null,retryLane:0};function Rs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ds(e,t,n){var r,o=t.pendingProps,a=ea.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Co(ea,1&a),null===e)return ui(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=o.children,e=o.fallback,s?(o=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&o)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Rc(l,o,0,null),e=Lc(e,o,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Rs(n),t.memoizedState=Ls,e):Fs(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,o,a,s){if(n)return 256&t.flags?(t.flags&=-257,zs(e,t,s,r=us(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,o=t.mode,r=Rc({mode:"visible",children:r.children},o,0,null),(a=Lc(a,o,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&wi(t,e.child,null,s),t.child.memoizedState=Rs(s),t.memoizedState=Ls,a);if(0===(1&t.mode))return zs(e,t,s,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var l=r.dgst;return r=l,zs(e,t,s,r=us(a=Error(i(419)),r,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(r=El)){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|s))?0:o)&&o!==a.retryLane&&(a.retryLane=o,Li(e,o),nc(r,e,o,-1))}return mc(),zs(e,t,s,r=us(Error(i(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,oi=co(o.nextSibling),ri=t,ii=!0,ai=null,null!==e&&(Qo[Zo++]=Jo,Qo[Zo++]=$o,Qo[Zo++]=Yo,Jo=e.id,$o=e.overflow,Yo=t),t=Fs(t,r.children),t.flags|=4096,t)}(e,t,l,o,r,a,n);if(s){s=o.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:o.children};return 0===(1&l)&&t.child!==a?((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null):(o=Oc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Oc(r,s):(s=Lc(s,l,n,null)).flags|=2,s.return=t,o.return=t,o.sibling=s,t.child=o,o=s,s=t.child,l=null===(l=e.child.memoizedState)?Rs(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,o}return e=(s=e.child).sibling,o=Oc(s,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Fs(e,t){return(t=Rc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zs(e,t,n,r){return null!==r&&mi(r),wi(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ei(e.return,t,n)}function Us(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function qs(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(xs(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,n,t);else if(19===e.tag)Bs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Co(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Us(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ta(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Us(t,!0,n,null,i);break;case"together":Us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Rl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gs(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ks(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ws(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(t),null;case 1:case 17:return Oo(t.type)&&Mo(),Ks(t),null;case 3:return r=t.stateNode,Ji(),No(To),No(Eo),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ai&&(ac(ai),ai=null))),Ps(e,t),Ks(t),null;case 5:Xi(t);var o=Zi(Qi.current);if(n=t.type,null!==e&&null!=t.stateNode)Os(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Ks(t),null}if(e=Zi(Ki.current),hi(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[fo]=t,r[po]=a,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(o=0;o<Lr.length;o++)zr(Lr[o],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":Y(r,a),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},zr("invalid",r);break;case"textarea":oe(r,a),zr("invalid",r)}for(var l in ye(n,a),o=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,e),o=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,e),o=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":K(r),X(r,a,!0);break;case"textarea":K(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Xr)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[fo]=t,e[po]=r,Is(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),o=r;break;case"iframe":case"object":case"embed":zr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Lr.length;o++)zr(Lr[o],e);o=r;break;case"source":zr("error",e),o=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),o=r;break;case"details":zr("toggle",e),o=r;break;case"input":Y(e,r),o=Z(e,r),zr("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=D({},r,{value:void 0}),zr("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),zr("invalid",e)}for(a in ye(n,o),c=o)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&zr("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":K(e),X(e,r,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Xr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ks(t),null;case 6:if(e&&null!=t.stateNode)Ms(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Zi(Qi.current),Zi(Ki.current),hi(t)){if(r=t.stateNode,n=t.memoizedProps,r[fo]=t,(a=r.nodeValue!==n)&&null!==(e=ri))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fo]=t,t.stateNode=r}return Ks(t),null;case 13:if(No(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ii&&null!==oi&&0!==(1&t.mode)&&0===(128&t.flags))fi(),pi(),t.flags|=98560,a=!1;else if(a=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[fo]=t}else pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ks(t),a=!1}else null!==ai&&(ac(ai),ai=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Ml&&(Ml=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ks(t),null);case 4:return Ji(),Ps(e,t),null===e&&qr(t.stateNode.containerInfo),Ks(t),null;case 10:return ji(t.type._context),Ks(t),null;case 19:if(No(ea),null===(a=t.memoizedState))return Ks(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Gs(a,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Gs(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Co(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Je()>ql&&(t.flags|=128,r=!0,Gs(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ii)return Ks(t),null}else 2*Je()-a.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Gs(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,n=ea.current,Co(ea,r?1&n|2:1&n),t):(Ks(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Ks(t),6&t.subtreeFlags&&(t.flags|=8192)):Ks(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Qs(e,t){switch(ni(t),t.tag){case 1:return Oo(t.type)&&Mo(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ji(),No(To),No(Eo),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xi(t),null;case 13:if(No(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return No(ea),null;case 4:return Ji(),null;case 10:return ji(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Is=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ps=function(){},Os=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Zi(Ki.current);var i,a=null;switch(n){case"input":o=Z(e,o),r=Z(e,r),a=[];break;case"select":o=D({},o,{value:void 0}),r=D({},r,{value:void 0}),a=[];break;case"textarea":o=re(e,o),r=re(e,r),a=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Xr)}for(u in ye(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u){var l=o[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ms=function(e,t,n,r){n!==r&&(t.flags|=4)};var Zs=!1,Ys=!1,Js="function"===typeof WeakSet?WeakSet:Set,$s=null;function Xs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ac(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Ac(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&el(t,n,i)}o=o.next}while(o!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fo],delete t[po],delete t[go],delete t[vo],delete t[yo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(ot,n)}catch(s){}switch(n.tag){case 5:Ys||Xs(n,t);case 6:var r=ul,o=dl;ul=null,hl(e,t,n),dl=o,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?lo(e.parentNode,n):1===e.nodeType&&lo(e,n),qt(e)):lo(ul,n.stateNode));break;case 4:r=ul,o=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=o;break;case 0:case 11:case 14:case 15:if(!Ys&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var i=o,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&el(n,t,a),o=o.next}while(o!==r)}hl(e,t,n);break;case 1:if(!Ys&&(Xs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Ac(n,t,s)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Ys=(r=Ys)||null!==n.memoizedState,hl(e,t,n),Ys=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach(function(t){var r=jc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(i(160));fl(a,s,o),ul=null,dl=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(u){Ac(o,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Ac(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Ac(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Xs(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Xs(n,n.return),32&e.flags){var o=e.stateNode;try{he(o,"")}catch(g){Ac(e,e.return,g)}}if(4&r&&null!=(o=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(o,a),be(l,s);var u=be(l,a);for(s=0;s<c.length;s+=2){var d=c[s],h=c[s+1];"style"===d?ge(o,h):"dangerouslySetInnerHTML"===d?de(o,h):"children"===d?he(o,h):b(o,d,h,u)}switch(l){case"input":$(o,a);break;case"textarea":ie(o,a);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(o,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(o,!!a.multiple,a.defaultValue,!0):ne(o,!!a.multiple,a.multiple?[]:"",!1))}o[po]=a}catch(g){Ac(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(i(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(g){Ac(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(g){Ac(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(o=e.child).flags&&(a=null!==o.memoizedState,o.stateNode.isHidden=a,!a||null!==o.alternate&&null!==o.alternate.memoizedState||(Ul=Je())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ys=(u=Ys)||d,ml(t,e),Ys=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for($s=e,d=e.child;null!==d;){for(h=$s=d;null!==$s;){switch(p=(f=$s).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Xs(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ac(r,n,g)}}break;case 5:Xs(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==p?(p.return=f,$s=p):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{o=h.stateNode,u?"function"===typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(g){Ac(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Ac(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&r&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(he(o,""),r.flags&=-33),cl(e,sl(e),o);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,sl(e),a);break;default:throw Error(i(161))}}catch(s){Ac(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){$s=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==$s;){var o=$s,i=o.child;if(22===o.tag&&r){var a=null!==o.memoizedState||Zs;if(!a){var s=o.alternate,l=null!==s&&null!==s.memoizedState||Ys;s=Zs;var c=Ys;if(Zs=a,(Ys=l)&&!c)for($s=o;null!==$s;)l=(a=$s).child,22===a.tag&&null!==a.memoizedState?_l(o):null!==l?(l.return=a,$s=l):_l(o);for(;null!==i;)$s=i,bl(i,t,n),i=i.sibling;$s=o,Zs=s,Ys=c}xl(e)}else 0!==(8772&o.subtreeFlags)&&null!==i?(i.return=o,$s=i):xl(e)}}function xl(e){for(;null!==$s;){var t=$s;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ys||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ys)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Hi(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Hi(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(i(163))}Ys||512&t.flags&&ol(t)}catch(f){Ac(t,t.return,f)}}if(t===e){$s=null;break}if(null!==(n=t.sibling)){n.return=t.return,$s=n;break}$s=t.return}}function wl(e){for(;null!==$s;){var t=$s;if(t===e){$s=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$s=n;break}$s=t.return}}function _l(e){for(;null!==$s;){var t=$s;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Ac(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(l){Ac(t,o,l)}}var i=t.return;try{ol(t)}catch(l){Ac(t,i,l)}break;case 5:var a=t.return;try{ol(t)}catch(l){Ac(t,a,l)}}}catch(l){Ac(t,t.return,l)}if(t===e){$s=null;break}var s=t.sibling;if(null!==s){s.return=t.return,$s=s;break}$s=t.return}}var kl,Al=Math.ceil,Sl=x.ReactCurrentDispatcher,Nl=x.ReactCurrentOwner,Cl=x.ReactCurrentBatchConfig,jl=0,El=null,Tl=null,Il=0,Pl=0,Ol=So(0),Ml=0,Ll=null,Rl=0,Dl=0,Fl=0,zl=null,Bl=null,Ul=0,ql=1/0,Vl=null,Hl=!1,Gl=null,Kl=null,Wl=!1,Ql=null,Zl=0,Yl=0,Jl=null,$l=-1,Xl=0;function ec(){return 0!==(6&jl)?Je():-1!==$l?$l:$l=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&jl)&&0!==Il?Il&-Il:null!==gi.transition?(0===Xl&&(Xl=mt()),Xl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Yl)throw Yl=0,Jl=null,Error(i(185));vt(e,n,r),0!==(2&jl)&&e===El||(e===El&&(0===(2&jl)&&(Dl|=n),4===Ml&&sc(e,Il)),rc(e,r),1===n&&0===jl&&0===(1&t.mode)&&(ql=Je()+500,Bo&&Vo()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),s=1<<a,l=o[a];-1===l?0!==(s&n)&&0===(s&r)||(o[a]=ft(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=ht(e,e===El?Il:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Bo=!0,qo(e)}(lc.bind(null,e)):qo(lc.bind(null,e)),ao(function(){0===(6&jl)&&Vo()}),n=null;else{switch(xt(r)){case 1:n=Xe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ec(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if($l=-1,Xl=0,0!==(6&jl))throw Error(i(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===El?Il:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var o=jl;jl|=2;var a=pc();for(El===e&&Il===t||(Vl=null,ql=Je()+500,hc(e,t));;)try{yc();break}catch(l){fc(e,l)}Ci(),Sl.current=a,jl=o,null!==Tl?t=0:(El=null,Il=0,t=Ml)}if(0!==t){if(2===t&&(0!==(o=pt(e))&&(r=o,t=ic(e,o))),1===t)throw n=Ll,hc(e,0),sc(e,r),rc(e,Je()),n;if(6===t)sc(e,r);else{if(o=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!sr(i(),o))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=gc(e,r))&&(0!==(a=pt(e))&&(r=a,t=ic(e,a))),1===t))throw n=Ll,hc(e,0),sc(e,r),rc(e,Je()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:wc(e,Bl,Vl);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Ul+500-Je())){if(0!==ht(e,0))break;if(((o=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(wc.bind(null,e,Bl,Vl),t);break}wc(e,Bl,Vl);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>o&&(o=s),r&=~a}if(r=o,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Al(r/1960))-r)){e.timeoutHandle=ro(wc.bind(null,e,Bl,Vl),r);break}wc(e,Bl,Vl);break;default:throw Error(i(329))}}}return rc(e,Je()),e.callbackNode===n?oc.bind(null,e):null}function ic(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Bl,Bl=n,null!==t&&ac(t)),e}function ac(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function sc(e,t){for(t&=~Fl,t&=~Dl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&jl))throw Error(i(327));_c();var t=ht(e,0);if(0===(1&t))return rc(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Ll,hc(e,0),sc(e,t),rc(e,Je()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Bl,Vl),rc(e,Je()),null}function cc(e,t){var n=jl;jl|=1;try{return e(t)}finally{0===(jl=n)&&(ql=Je()+500,Bo&&Vo())}}function uc(e){null!==Ql&&0===Ql.tag&&0===(6&jl)&&_c();var t=jl;jl|=1;var n=Cl.transition,r=bt;try{if(Cl.transition=null,bt=1,e)return e()}finally{bt=r,Cl.transition=n,0===(6&(jl=t))&&Vo()}}function dc(){Pl=Ol.current,No(Ol)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Tl)for(n=Tl.return;null!==n;){var r=n;switch(ni(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Mo();break;case 3:Ji(),No(To),No(Eo),ra();break;case 5:Xi(r);break;case 4:Ji();break;case 13:case 19:No(ea);break;case 10:ji(r.type._context);break;case 22:case 23:dc()}n=n.return}if(El=e,Tl=e=Oc(e.current,null),Il=Pl=t,Ml=0,Ll=null,Fl=Dl=Rl=0,Bl=zl=null,null!==Pi){for(t=0;t<Pi.length;t++)if(null!==(r=(n=Pi[t]).interleaved)){n.interleaved=null;var o=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=o,r.next=a}n.pending=r}Pi=null}return e}function fc(e,t){for(;;){var n=Tl;try{if(Ci(),oa.current=$a,ua){for(var r=sa.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}ua=!1}if(aa=0,ca=la=sa=null,da=!1,ha=0,Nl.current=null,null===n||null===n.return){Ml=1,Ll=t,Tl=null;break}e:{var a=e,s=n.return,l=n,c=t;if(t=Il,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,vs(p,s,l,0,t),1&p.mode&&ms(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ms(a,u,t),mc();break e}c=Error(i(426))}else if(ii&&1&l.mode){var v=gs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vs(v,s,l,0,t),mi(cs(c,l));break e}}a=c=cs(c,l),4!==Ml&&(Ml=2),null===zl?zl=[a]:zl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,qi(a,fs(0,c,t));break e;case 1:l=c;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Kl||!Kl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,qi(a,ps(a,l,t));break e}}a=a.return}while(null!==a)}xc(n)}catch(x){t=x,Tl===n&&null!==n&&(Tl=n=n.return);continue}break}}function pc(){var e=Sl.current;return Sl.current=$a,null===e?$a:e}function mc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===El||0===(268435455&Rl)&&0===(268435455&Dl)||sc(El,Il)}function gc(e,t){var n=jl;jl|=2;var r=pc();for(El===e&&Il===t||(Vl=null,hc(e,t));;)try{vc();break}catch(o){fc(e,o)}if(Ci(),jl=n,Sl.current=r,null!==Tl)throw Error(i(261));return El=null,Il=0,Ml}function vc(){for(;null!==Tl;)bc(Tl)}function yc(){for(;null!==Tl&&!Ze();)bc(Tl)}function bc(e){var t=kl(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?xc(e):Tl=t,Nl.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ws(n,t,Pl)))return void(Tl=n)}else{if(null!==(n=Qs(n,t)))return n.flags&=32767,void(Tl=n);if(null===e)return Ml=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Ml&&(Ml=5)}function wc(e,t,n){var r=bt,o=Cl.transition;try{Cl.transition=null,bt=1,function(e,t,n,r){do{_c()}while(null!==Ql);if(0!==(6&jl))throw Error(i(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-at(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}(e,a),e===El&&(Tl=El=null,Il=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Wl||(Wl=!0,Ec(tt,function(){return _c(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Cl.transition,Cl.transition=null;var s=bt;bt=1;var l=jl;jl|=4,Nl.current=null,function(e,t){if(eo=Ht,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==o&&3!==h.nodeType||(l=s+o),h!==a||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===o&&(l=s),f===a&&++d===r&&(c=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},Ht=!1,$s=t;null!==$s;)if(e=(t=$s).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$s=e;else for(;null!==$s;){t=$s;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(i(163))}}catch(w){Ac(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,$s=e;break}$s=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(to),Ht=!!eo,to=eo=null,e.current=n,yl(n,e,o),Ye(),jl=l,bt=s,Cl.transition=a}else e.current=n;if(Wl&&(Wl=!1,Ql=e,Zl=o),a=e.pendingLanes,0===a&&(Kl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Hl)throw Hl=!1,e=Gl,Gl=null,e;0!==(1&Zl)&&0!==e.tag&&_c(),a=e.pendingLanes,0!==(1&a)?e===Jl?Yl++:(Yl=0,Jl=e):Yl=0,Vo()}(e,t,n,r)}finally{Cl.transition=o,bt=r}return null}function _c(){if(null!==Ql){var e=xt(Zl),t=Cl.transition,n=bt;try{if(Cl.transition=null,bt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Zl=0,0!==(6&jl))throw Error(i(331));var o=jl;for(jl|=4,$s=e.current;null!==$s;){var a=$s,s=a.child;if(0!==(16&$s.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for($s=u;null!==$s;){var d=$s;switch(d.tag){case 0:case 11:case 15:nl(8,d,a)}var h=d.child;if(null!==h)h.return=d,$s=h;else for(;null!==$s;){var f=(d=$s).sibling,p=d.return;if(il(d),d===u){$s=null;break}if(null!==f){f.return=p,$s=f;break}$s=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}$s=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,$s=s;else e:for(;null!==$s;){if(0!==(2048&(a=$s).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,$s=y;break e}$s=a.return}}var b=e.current;for($s=b;null!==$s;){var x=(s=$s).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,$s=x;else e:for(s=b;null!==$s;){if(0!==(2048&(l=$s).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(_){Ac(l,l.return,_)}if(l===s){$s=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,$s=w;break e}$s=l.return}}if(jl=o,Vo(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(ot,e)}catch(_){}r=!0}return r}finally{bt=n,Cl.transition=t}}return!1}function kc(e,t,n){e=Bi(e,t=fs(0,t=cs(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Ac(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Bi(t,e=ps(t,e=cs(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,El===e&&(Il&n)===n&&(4===Ml||3===Ml&&(130023424&Il)===Il&&500>Je()-Ul?hc(e,0):Fl|=n),rc(e,t)}function Nc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Li(e,t))&&(vt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nc(e,n)}function jc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Nc(e,n)}function Ec(e,t){return We(e,t)}function Tc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ic(e,t,n,r){return new Tc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Ic(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,o,a){var s=2;if(r=e,"function"===typeof e)Pc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case k:return Lc(n.children,o,a,t);case A:s=8,o|=8;break;case S:return(e=Ic(12,n,t,2|o)).elementType=S,e.lanes=a,e;case E:return(e=Ic(13,n,t,o)).elementType=E,e.lanes=a,e;case T:return(e=Ic(19,n,t,o)).elementType=T,e.lanes=a,e;case O:return Rc(n,o,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:s=10;break e;case C:s=9;break e;case j:s=11;break e;case I:s=14;break e;case P:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Ic(s,n,t,o)).elementType=e,t.type=r,t.lanes=a,t}function Lc(e,t,n,r){return(e=Ic(7,e,r,t)).lanes=n,e}function Rc(e,t,n,r){return(e=Ic(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Dc(e,t,n){return(e=Ic(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ic(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,o,i,a,s,l){return e=new zc(e,t,n,s,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Ic(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Di(i),e}function Uc(e){if(!e)return jo;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Oo(n))return Ro(e,n,t)}return t}function qc(e,t,n,r,o,i,a,s,l){return(e=Bc(n,r,!0,e,0,i,0,s,l)).context=Uc(null),n=e.current,(i=zi(r=ec(),o=tc(n))).callback=void 0!==t&&null!==t?t:null,Bi(n,i,o),e.current.lanes=o,vt(e,o,r),rc(e,r),e}function Vc(e,t,n,r){var o=t.current,i=ec(),a=tc(o);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=zi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Bi(o,t,a))&&(nc(e,o,a,i),Ui(e,o,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||To.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Es(t),pi();break;case 5:$i(t);break;case 1:Oo(t.type)&&Do(t);break;case 4:Yi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Co(ki,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Co(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ds(e,t,n):(Co(ea,1&ea.current),null!==(e=Hs(e,t,n))?e.sibling:null);Co(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qs(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Co(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,As(e,t,n)}return Hs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ii&&0!==(1048576&t.flags)&&ei(t,Wo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vs(e,t),e=t.pendingProps;var o=Po(t,Eo.current);Ti(t,n),o=ga(null,t,r,e,o,n);var a=va();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oo(r)?(a=!0,Do(t)):a=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Di(t),o.updater=os,t.stateNode=o,o._reactInternals=t,ls(t,r,e,n),t=js(null,t,r,!0,a,n)):(t.tag=0,ii&&a&&ti(t),xs(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vs(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===j)return 11;if(e===I)return 14}return 2}(r),e=ns(r,e),o){case 0:t=Ns(null,t,r,e,n);break e;case 1:t=Cs(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=_s(null,t,r,ns(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,Ns(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 1:return r=t.type,o=t.pendingProps,Cs(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 3:e:{if(Es(t),null===e)throw Error(i(387));r=t.pendingProps,o=(a=t.memoizedState).element,Fi(e,t),Vi(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ts(e,t,r,n,o=cs(Error(i(423)),t));break e}if(r!==o){t=Ts(e,t,r,n,o=cs(Error(i(424)),t));break e}for(oi=co(t.stateNode.containerInfo.firstChild),ri=t,ii=!0,ai=null,n=_i(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pi(),r===o){t=Hs(e,t,n);break e}xs(e,t,r,n)}t=t.child}return t;case 5:return $i(t),null===e&&ui(t),r=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,s=o.children,no(r,o)?s=null:null!==a&&no(r,a)&&(t.flags|=32),Ss(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&ui(t),null;case 13:return Ds(e,t,n);case 4:return Yi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wi(t,null,r,n):xs(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,ws(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,a=t.memoizedProps,s=o.value,Co(ki,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===o.children&&!To.current){t=Hs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=zi(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ei(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(i(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ei(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}xs(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Ti(t,n),r=r(o=Ii(o)),t.flags|=1,xs(e,t,r,n),t.child;case 14:return o=ns(r=t.type,t.pendingProps),_s(e,t,r,o=ns(r.type,o),n);case 15:return ks(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ns(r,o),Vs(e,t),t.tag=1,Oo(r)?(e=!0,Do(t)):e=!1,Ti(t,n),as(t,r,o),ls(t,r,o,n),js(null,t,r,!0,e,n);case 19:return qs(e,t,n);case 22:return As(e,t,n)}throw Error(i(156,t.tag))};var Wc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Zc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function Xc(e,t,n,r,o){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof o){var s=o;o=function(){var e=Hc(a);s.call(e)}}Vc(t,a,e,o)}else a=function(e,t,n,r,o){if(o){if("function"===typeof r){var i=r;r=function(){var e=Hc(a);i.call(e)}}var a=qc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=a,e[mo]=a.current,qr(8===e.nodeType?e.parentNode:e),uc(),a}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof r){var s=r;r=function(){var e=Hc(l);s.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[mo]=l.current,qr(8===e.nodeType?e.parentNode:e),uc(function(){Vc(t,l,n,r)}),l}(n,t,e,o,r);return Hc(a)}Zc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Vc(e,t,null,null)},Zc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Vc(null,e,null,null)}),t[mo]=null}},Zc.prototype.unstable_scheduleHydration=function(e){if(e){var t=At();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Dt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Je()),0===(6&jl)&&(ql=Je()+500,Vo()))}break;case 13:uc(function(){var t=Li(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Kc(e,1)}},_t=function(e){if(13===e.tag){var t=Li(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),n=Li(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},At=function(){return bt},St=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=_o(r);if(!o)throw Error(i(90));W(r),$(r,o)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},je=cc,Ee=uc;var eu={usingClientEntryPoint:!1,Events:[xo,wo,_o,Ne,Ce,cc]},tu={findFiberByHostInstance:bo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{ot=ru.inject(nu),it=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(i(299));var n=!1,r="",o=Wc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,o),e[mo]=t.current,qr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(i(200));return Xc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,o=!1,a="",s=Wc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,o,0,a,s),e[mo]=t.current,qr(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Zc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(i(200));return Xc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(i(40));return!!e._reactRootContainer&&(uc(function(){Xc(null,null,e,!1,function(){e._reactRootContainer=null,e[mo]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Xc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3257:(e,t)=>{t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},3339:(e,t,n)=>{"use strict";n.r(t),n.d(t,{LocalNotifications:()=>i,Weekday:()=>r});var r,o=n(5403);!function(e){e[e.Sunday=1]="Sunday",e[e.Monday=2]="Monday",e[e.Tuesday=3]="Tuesday",e[e.Wednesday=4]="Wednesday",e[e.Thursday=5]="Thursday",e[e.Friday=6]="Friday",e[e.Saturday=7]="Saturday"}(r||(r={}));const i=(0,o.F3)("LocalNotifications",{web:()=>n.e(640).then(n.bind(n,8640)).then(e=>new e.LocalNotificationsWeb)})},4004:(e,t,n)=>{const r=n(7421),o=n(900),i=n(9642),a=n(8697),s=n(5200),l=n(8511),c=n(7969),u=n(7347);function d(e){return unescape(encodeURIComponent(e)).length}function h(e,t,n){const r=[];let o;for(;null!==(o=e.exec(n));)r.push({data:o[0],index:o.index,mode:t,length:o[0].length});return r}function f(e){const t=h(l.NUMERIC,r.NUMERIC,e),n=h(l.ALPHANUMERIC,r.ALPHANUMERIC,e);let o,i;c.isKanjiModeEnabled()?(o=h(l.BYTE,r.BYTE,e),i=h(l.KANJI,r.KANJI,e)):(o=h(l.BYTE_KANJI,r.BYTE,e),i=[]);return t.concat(n,o,i).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function p(e,t){switch(t){case r.NUMERIC:return o.getBitsLength(e);case r.ALPHANUMERIC:return i.getBitsLength(e);case r.KANJI:return s.getBitsLength(e);case r.BYTE:return a.getBitsLength(e)}}function m(e,t){let n;const l=r.getBestModeForData(e);if(n=r.from(t,l),n!==r.BYTE&&n.bit<l.bit)throw new Error('"'+e+'" cannot be encoded with mode '+r.toString(n)+".\n Suggested mode is: "+r.toString(l));switch(n!==r.KANJI||c.isKanjiModeEnabled()||(n=r.BYTE),n){case r.NUMERIC:return new o(e);case r.ALPHANUMERIC:return new i(e);case r.KANJI:return new s(e);case r.BYTE:return new a(e)}}t.fromArray=function(e){return e.reduce(function(e,t){return"string"===typeof t?e.push(m(t,null)):t.data&&e.push(m(t.data,t.mode)),e},[])},t.fromString=function(e,n){const o=function(e){const t=[];for(let n=0;n<e.length;n++){const o=e[n];switch(o.mode){case r.NUMERIC:t.push([o,{data:o.data,mode:r.ALPHANUMERIC,length:o.length},{data:o.data,mode:r.BYTE,length:o.length}]);break;case r.ALPHANUMERIC:t.push([o,{data:o.data,mode:r.BYTE,length:o.length}]);break;case r.KANJI:t.push([o,{data:o.data,mode:r.BYTE,length:d(o.data)}]);break;case r.BYTE:t.push([{data:o.data,mode:r.BYTE,length:d(o.data)}])}}return t}(f(e,c.isKanjiModeEnabled())),i=function(e,t){const n={},o={start:{}};let i=["start"];for(let a=0;a<e.length;a++){const s=e[a],l=[];for(let e=0;e<s.length;e++){const c=s[e],u=""+a+e;l.push(u),n[u]={node:c,lastCount:0},o[u]={};for(let e=0;e<i.length;e++){const a=i[e];n[a]&&n[a].node.mode===c.mode?(o[a][u]=p(n[a].lastCount+c.length,c.mode)-p(n[a].lastCount,c.mode),n[a].lastCount+=c.length):(n[a]&&(n[a].lastCount=c.length),o[a][u]=p(c.length,c.mode)+4+r.getCharCountIndicator(c.mode,t))}}i=l}for(let r=0;r<i.length;r++)o[i[r]].end=0;return{map:o,table:n}}(o,n),a=u.find_path(i.map,"start","end"),s=[];for(let t=1;t<a.length-1;t++)s.push(i.table[a[t]].node);return t.fromArray(function(e){return e.reduce(function(e,t){const n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[])}(s))},t.rawSplit=function(e){return t.fromArray(f(e,c.isKanjiModeEnabled()))}},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,m(x,v.prototype),x.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,k={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var o,i={},a=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,o)&&!A.hasOwnProperty(o)&&(i[o]=t[o]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===i[o]&&(i[o]=l[o]);return{$$typeof:n,type:e,key:a,ref:s,props:i,_owner:k.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function j(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(e,t,o,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+j(l,0):i,w(a)?(o="",null!=e&&(o=e.replace(C,"$&/")+"/"),E(a,t,o,"",function(e){return e})):null!=a&&(N(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,o+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var u=i+j(s=e[c],c);l+=E(s,t,o,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=E(s=s.value,t,o,u=i+j(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var r=[],o=0;return E(e,r,"","",function(e){return t.call(n,e,o++)}),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},O={transition:null},M={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:O,ReactCurrentOwner:k};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=o,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=m({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=k.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!A.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},4377:(e,t,n)=>{"use strict";n.d(t,{generateWalkingRoute:()=>l});var r=n(2555),o=n(4737);const i="eyJvcmciOiI1YjNjZTM1OTc4NTExMTAwMDFjZjYyNDgiLCJpZCI6ImEzN2RiYzM2MjdlZDRjMzVhNjE4MTI3ZTU2MTcwMjVjIiwiaCI6Im11cm11cjY0In0=",a="routequest_route_cache_",s=864e5;const l=async e=>{let{origin:t,lengthMeters:n,checkpointCount:r,seed:o,preferGreenAreas:i}=e;Math.random()<.1&&(()=>{try{const t=Date.now();let n=0;for(let r=0;r<localStorage.length;r++){const o=localStorage.key(r);if(o&&o.startsWith(a))try{const{timestamp:e}=JSON.parse(localStorage.getItem(o));t-e>s&&(localStorage.removeItem(o),n++)}catch(e){localStorage.removeItem(o),n++}}}catch(t){console.warn("[RouteService] Cache cleanup error:",t)}})();const l=((e,t,n,r,o)=>{const i=e.lat.toFixed(4),s=e.lng.toFixed(4);return"".concat(a).concat(i,"_").concat(s,"_").concat(t,"_").concat(n,"_").concat(r,"_").concat(o)})(t,n,r,o,i),d=(e=>{try{const t=localStorage.getItem(e);if(!t)return null;const{data:n,timestamp:r}=JSON.parse(t);return Date.now()-r>s?(localStorage.removeItem(e),null):n}catch(t){return console.warn("[RouteService] Cache read error:",t),null}})(l);if(d){return h(d,r)}try{const e=u({origin:t,lengthMeters:n,checkpointCount:r}),a=[...e,e[0]];0;const s=await c(a,n,o,i);((e,t)=>{try{const n={data:t,timestamp:Date.now()};localStorage.setItem(e,JSON.stringify(n))}catch(n){console.warn("[RouteService] Cache write error:",n)}})(l,s);return h(s,r)}catch(p){console.warn("[RouteService] Kunde inte h\xe4mta ruttdata fr\xe5n OpenRouteService:",p);return f({origin:t,lengthMeters:n,checkpointCount:r})}},c=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const a=r?"foot-hiking":"foot-walking",s="".concat("https://api.openrouteservice.org/v2","/directions/").concat(a),l=e.map(e=>[e.lng,e.lat]),c={avoid_features:["ferries"],round_trip:{length:t,points:Math.min(4,Math.max(2,Math.floor(t/1e3))),seed:n||Math.floor(90*Math.random())}};r&&(c.profile_params={weightings:{green:1,quiet:1}},c.avoid_features.push("steps"));const u={coordinates:[l[0]],format:"json",instructions:!1,geometry:!0,options:c};const d=await fetch(s,{method:"POST",headers:{Authorization:i,"Content-Type":"application/json"},body:JSON.stringify(u)});if(!d.ok){const e=await d.text(),t="OpenRouteService API fel: ".concat(d.status," - ").concat(e);throw o.D.reportError("OpenRouteService",t),new Error(t)}const h=(await d.json()).routes[0];if(h.geometry){var f;const e=(e=>{const t=[];let n=0,r=0,o=0;for(;n<e.length;){let i,a=0,s=0;do{i=e.charCodeAt(n++)-63,s|=(31&i)<<a,a+=5}while(i>=32);r+=1&s?~(s>>1):s>>1,a=0,s=0;do{i=e.charCodeAt(n++)-63,s|=(31&i)<<a,a+=5}while(i>=32);o+=1&s?~(s>>1):s>>1,t.push({lat:r/1e5,lng:o/1e5})}return t})(h.geometry);return{coordinates:e,totalDistance:(null===(f=h.summary)||void 0===f?void 0:f.distance)||0,route:e}}throw new Error("Ingen geometri returnerad fr\xe5n API")},u=e=>{let{origin:t,lengthMeters:n,checkpointCount:r}=e;const o=n/(2*Math.PI*111e3),i=Math.min(.6*o,.005),a=Math.max(4,Math.min(8,Math.ceil(n/600)));const s=[];for(let l=0;l<a;l++){const e=l/a*Math.PI*2,n=i*(.8+.4*Math.random());s.push({lat:t.lat+Math.sin(e)*n,lng:t.lng+Math.cos(e)*n})}return s},d=e=>({lat:e.lat,lng:e.lng}),h=(e,t)=>{if(!e.coordinates||0===e.coordinates.length)throw new Error("Ingen giltig rutt att placera checkpoints p\xe5");const n=[],r=e.coordinates.length;for(let o=0;o<t;o++){const i=Math.floor(o/t*r),a=Math.min(i,r-1),s=e.coordinates[a],l=d(s);n.push({location:l,routeIndex:a,order:o+1,originalRouteLocation:s})}return{checkpoints:n,route:e.coordinates,totalDistance:e.totalDistance}},f=e=>{let{origin:t,lengthMeters:n,checkpointCount:o}=e;const i=[],a=[],s=Math.sqrt(n)/111e3,l=Math.min(s,.004);const c=[{lat:-l/2,lng:-l/2},{lat:-l/2,lng:l/2},{lat:l/2,lng:l/2},{lat:l/2,lng:-l/2},{lat:-l/2,lng:-l/2}],u=Math.max(15,Math.ceil(n/150));for(let r=0;r<c.length-1;r++){const e=c[r],n=c[r+1];for(let r=0;r<u;r++){const o=r/u,i=t.lat+e.lat+(n.lat-e.lat)*o,s=t.lng+e.lng+(n.lng-e.lng)*o,l=2e-4;a.push({lat:i+(Math.random()-.5)*l,lng:s+(Math.random()-.5)*l})}}a.length>0&&a.push((0,r.A)({},a[0]));for(let r=0;r<o;r++){const e=Math.floor(r/o*(a.length-1)),t=Math.min(e,a.length-1),n=a[t],s=d(n);i.push({location:s,routeIndex:t,order:r+1,originalRouteLocation:n})}return{checkpoints:i,route:a,totalDistance:n}}},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4566:e=>{function t(){this.buffer=[],this.length=0}t.prototype={get:function(e){const t=Math.floor(e/8);return 1===(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let n=0;n<t;n++)this.putBit(1===(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},4661:e=>{function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}t.prototype.set=function(e,t,n,r){const o=e*this.size+t;this.data[o]=n,r&&(this.reservedBit[o]=!0)},t.prototype.get=function(e,t){return this.data[e*this.size+t]},t.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},t.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=t},4737:(e,t,n)=>{"use strict";n.d(t,{D:()=>o});var r=n(2555);const o=new class{constructor(){this.statusCache={lastCheck:null,services:{}},this.cacheTimeout=3e5,this.recentErrors=this.loadRecentErrors()}loadRecentErrors(){try{const e=localStorage.getItem("serviceErrors");if(e){const t=JSON.parse(e),n=Date.now()-18e5;return t.filter(e=>e.timestamp>n)}}catch(e){console.error("Kunde inte ladda servicefel:",e)}return[]}reportError(e,t){const n={service:e,message:t,timestamp:Date.now()};this.recentErrors.push(n),this.recentErrors.length>10&&(this.recentErrors=this.recentErrors.slice(-10));try{localStorage.setItem("serviceErrors",JSON.stringify(this.recentErrors))}catch(n){console.error("Kunde inte spara servicefel:",n)}}async checkAllServices(){if(this.statusCache.lastCheck&&Date.now()-this.statusCache.lastCheck<this.cacheTimeout)return this.statusCache.services;const e={stripe:await this.checkStripe(),openrouteservice:await this.checkOpenRouteService(),anthropic:await this.checkAnthropic()};return this.statusCache={lastCheck:Date.now(),services:e},e}async checkStripe(){try{const e=new Promise((e,t)=>setTimeout(()=>t(new Error("Timeout")),5e3)),t=fetch("https://europe-west1-geoquest2-7e45c.cloudfunctions.net/getStripeStatus"),n=await Promise.race([t,e]),r=await n.json();return r.success&&r.payoutsEnabled?{status:"operational",message:"Stripe fungerar"}:r.success?{status:"degraded",message:"Stripe fungerar men utbetalningar \xe4r avst\xe4ngda"}:{status:"down",message:"Stripe har problem"}}catch(e){return{status:"down",message:"Kunde inte kontrollera Stripe",error:e.message}}}async checkOpenRouteService(){try{return"eyJvcmciOiI1YjNjZTM1OTc4NTExMTAwMDFjZjYyNDgiLCJpZCI6ImEzN2RiYzM2MjdlZDRjMzVhNjE4MTI3ZTU2MTcwMjVjIiwiaCI6Im11cm11cjY0In0="?{status:"operational",message:"OpenRouteService konfigurerad"}:{status:"error",message:"OpenRouteService API-nyckel saknas"}}catch(e){return{status:"error",message:"Kunde inte kontrollera OpenRouteService",error:e.message}}}async checkAnthropic(){try{const e=new Promise((e,t)=>setTimeout(()=>t(new Error("Timeout")),5e3)),t=fetch("https://europe-west1-geoquest2-7e45c.cloudfunctions.net/getAIStatus"),n=await Promise.race([t,e]),r=await n.json();if(r.available){const e=r.providers||{};if(Object.entries(e).some(e=>{let[t,n]=e;return n.configured&&!n.available})){const t=Object.entries(e).filter(e=>{let[t,n]=e;return n.configured&&!n.available}).map(e=>{let[t]=e;return t});return{status:"degraded",message:"AI fungerar (".concat(r.primaryProvider,") men ").concat(t.join(", ")," \xe4r nere")}}return{status:"operational",message:"AI-tj\xe4nster fungerar (".concat(r.primaryProvider,")")}}return{status:"down",message:r.message||"AI-tj\xe4nster \xe4r nere"}}catch(e){return{status:"down",message:"Kunde inte kontrollera AI-tj\xe4nster",error:e.message}}}async getProblematicServices(){const e=await this.checkAllServices(),t=[];Object.entries(e).forEach(e=>{let[n,o]=e;"down"!==o.status&&"degraded"!==o.status&&"error"!==o.status||t.push((0,r.A)({name:this.getServiceDisplayName(n)},o))});const n=Date.now()-6e5,o=this.loadRecentErrors().filter(e=>e.timestamp>n),i={};return o.forEach(e=>{i[e.service]||(i[e.service]=[]),i[e.service].push(e)}),Object.entries(i).forEach(e=>{let[n,r]=e;r.length>=2&&!t.find(e=>e.name.includes(n))&&t.push({name:this.getServiceDisplayName(n),status:"degraded",message:"".concat(r.length," fel senaste 10 minuterna")})}),t}getServiceDisplayName(e){return{firebase:"Firebase (databas)",stripe:"Stripe (betalningar)",openrouteservice:"OpenRouteService (kartor)",anthropic:"AI-tj\xe4nster (fr\xe5gegenerering)",OpenRouteService:"OpenRouteService (kartor)"}[e]||e}async forceCheck(){return this.statusCache.lastCheck=null,this.checkAllServices()}}},4772:(e,t,n)=>{const r=n(7969),o=n(6272),i=n(4566),a=n(4661),s=n(9382),l=n(9021),c=n(4833),u=n(1805),d=n(8177),h=n(4980),f=n(350),p=n(7421),m=n(4004);function g(e,t,n){const r=e.size,o=f.getEncodedBits(t,n);let i,a;for(i=0;i<15;i++)a=1===(o>>i&1),i<6?e.set(i,8,a,!0):i<8?e.set(i+1,8,a,!0):e.set(r-15+i,8,a,!0),i<8?e.set(8,r-i-1,a,!0):i<9?e.set(8,15-i-1+1,a,!0):e.set(8,15-i-1,a,!0);e.set(r-8,8,1,!0)}function v(e,t,n){const o=new i;n.forEach(function(t){o.put(t.mode.bit,4),o.put(t.getLength(),p.getCharCountIndicator(t.mode,e)),t.write(o)});const a=8*(r.getSymbolTotalCodewords(e)-u.getTotalCodewordsCount(e,t));for(o.getLengthInBits()+4<=a&&o.put(0,4);o.getLengthInBits()%8!==0;)o.putBit(0);const s=(a-o.getLengthInBits())/8;for(let r=0;r<s;r++)o.put(r%2?17:236,8);return function(e,t,n){const o=r.getSymbolTotalCodewords(t),i=u.getTotalCodewordsCount(t,n),a=o-i,s=u.getBlocksCount(t,n),l=o%s,c=s-l,h=Math.floor(o/s),f=Math.floor(a/s),p=f+1,m=h-f,g=new d(m);let v=0;const y=new Array(s),b=new Array(s);let x=0;const w=new Uint8Array(e.buffer);for(let r=0;r<s;r++){const e=r<c?f:p;y[r]=w.slice(v,v+e),b[r]=g.encode(y[r]),v+=e,x=Math.max(x,e)}const _=new Uint8Array(o);let k,A,S=0;for(k=0;k<x;k++)for(A=0;A<s;A++)k<y[A].length&&(_[S++]=y[A][k]);for(k=0;k<m;k++)for(A=0;A<s;A++)_[S++]=b[A][k];return _}(o,e,t)}function y(e,t,n,o){let i;if(Array.isArray(e))i=m.fromArray(e);else{if("string"!==typeof e)throw new Error("Invalid data");{let r=t;if(!r){const t=m.rawSplit(e);r=h.getBestVersionForData(t,n)}i=m.fromString(e,r||40)}}const u=h.getBestVersionForData(i,n);if(!u)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<u)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+u+".\n")}else t=u;const d=v(t,n,i),f=r.getSymbolSize(t),p=new a(f);return function(e,t){const n=e.size,r=l.getPositions(t);for(let o=0;o<r.length;o++){const t=r[o][0],i=r[o][1];for(let r=-1;r<=7;r++)if(!(t+r<=-1||n<=t+r))for(let o=-1;o<=7;o++)i+o<=-1||n<=i+o||(r>=0&&r<=6&&(0===o||6===o)||o>=0&&o<=6&&(0===r||6===r)||r>=2&&r<=4&&o>=2&&o<=4?e.set(t+r,i+o,!0,!0):e.set(t+r,i+o,!1,!0))}}(p,t),function(e){const t=e.size;for(let n=8;n<t-8;n++){const t=n%2===0;e.set(n,6,t,!0),e.set(6,n,t,!0)}}(p),function(e,t){const n=s.getPositions(t);for(let r=0;r<n.length;r++){const t=n[r][0],o=n[r][1];for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++)-2===n||2===n||-2===r||2===r||0===n&&0===r?e.set(t+n,o+r,!0,!0):e.set(t+n,o+r,!1,!0)}}(p,t),g(p,n,0),t>=7&&function(e,t){const n=e.size,r=h.getEncodedBits(t);let o,i,a;for(let s=0;s<18;s++)o=Math.floor(s/3),i=s%3+n-8-3,a=1===(r>>s&1),e.set(o,i,a,!0),e.set(i,o,a,!0)}(p,t),function(e,t){const n=e.size;let r=-1,o=n-1,i=7,a=0;for(let s=n-1;s>0;s-=2)for(6===s&&s--;;){for(let n=0;n<2;n++)if(!e.isReserved(o,s-n)){let r=!1;a<t.length&&(r=1===(t[a]>>>i&1)),e.set(o,s-n,r),i--,-1===i&&(a++,i=7)}if(o+=r,o<0||n<=o){o-=r,r=-r;break}}}(p,d),isNaN(o)&&(o=c.getBestMask(p,g.bind(null,p,n))),c.applyMask(o,p),g(p,n,o),{modules:p,version:t,errorCorrectionLevel:n,maskPattern:o,segments:i}}t.create=function(e,t){if("undefined"===typeof e||""===e)throw new Error("No input text");let n,i,a=o.M;return"undefined"!==typeof t&&(a=o.from(t.errorCorrectionLevel,o.M),n=h.from(t.version),i=c.from(t.maskPattern),t.toSJISFunc&&r.setToSJISFunction(t.toSJISFunc)),y(e,n,a,i)}},4830:(e,t,n)=>{"use strict";var r,o;n.d(t,{_:()=>o,k:()=>r}),function(e){e.Heavy="HEAVY",e.Medium="MEDIUM",e.Light="LIGHT"}(r||(r={})),function(e){e.Success="SUCCESS",e.Warning="WARNING",e.Error="ERROR"}(o||(o={}))},4833:(e,t)=>{t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const n=3,r=3,o=40,i=10;function a(e,n,r){switch(e){case t.Patterns.PATTERN000:return(n+r)%2===0;case t.Patterns.PATTERN001:return n%2===0;case t.Patterns.PATTERN010:return r%3===0;case t.Patterns.PATTERN011:return(n+r)%3===0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2===0;case t.Patterns.PATTERN101:return n*r%2+n*r%3===0;case t.Patterns.PATTERN110:return(n*r%2+n*r%3)%2===0;case t.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2===0;default:throw new Error("bad maskPattern:"+e)}}t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){const t=e.size;let r=0,o=0,i=0,a=null,s=null;for(let l=0;l<t;l++){o=i=0,a=s=null;for(let c=0;c<t;c++){let t=e.get(l,c);t===a?o++:(o>=5&&(r+=n+(o-5)),a=t,o=1),t=e.get(c,l),t===s?i++:(i>=5&&(r+=n+(i-5)),s=t,i=1)}o>=5&&(r+=n+(o-5)),i>=5&&(r+=n+(i-5))}return r},t.getPenaltyN2=function(e){const t=e.size;let n=0;for(let r=0;r<t-1;r++)for(let o=0;o<t-1;o++){const t=e.get(r,o)+e.get(r,o+1)+e.get(r+1,o)+e.get(r+1,o+1);4!==t&&0!==t||n++}return n*r},t.getPenaltyN3=function(e){const t=e.size;let n=0,r=0,i=0;for(let o=0;o<t;o++){r=i=0;for(let a=0;a<t;a++)r=r<<1&2047|e.get(o,a),a>=10&&(1488===r||93===r)&&n++,i=i<<1&2047|e.get(a,o),a>=10&&(1488===i||93===i)&&n++}return n*o},t.getPenaltyN4=function(e){let t=0;const n=e.data.length;for(let r=0;r<n;r++)t+=e.data[r];return Math.abs(Math.ceil(100*t/n/5)-10)*i},t.applyMask=function(e,t){const n=t.size;for(let r=0;r<n;r++)for(let o=0;o<n;o++)t.isReserved(o,r)||t.xor(o,r,a(e,o,r))},t.getBestMask=function(e,n){const r=Object.keys(t.Patterns).length;let o=0,i=1/0;for(let a=0;a<r;a++){n(a),t.applyMask(a,e);const r=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(a,e),r<i&&(i=r,o=a)}return o}},4980:(e,t,n)=>{const r=n(7969),o=n(1805),i=n(6272),a=n(7421),s=n(3257),l=r.getBCHDigit(7973);function c(e,t){return a.getCharCountIndicator(e,t)+4}function u(e,t){let n=0;return e.forEach(function(e){const r=c(e.mode,t);n+=r+e.getBitsLength()}),n}t.from=function(e,t){return s.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,n){if(!s.isValid(e))throw new Error("Invalid QR Code version");"undefined"===typeof n&&(n=a.BYTE);const i=8*(r.getSymbolTotalCodewords(e)-o.getTotalCodewordsCount(e,t));if(n===a.MIXED)return i;const l=i-c(n,e);switch(n){case a.NUMERIC:return Math.floor(l/10*3);case a.ALPHANUMERIC:return Math.floor(l/11*2);case a.KANJI:return Math.floor(l/13);case a.BYTE:default:return Math.floor(l/8)}},t.getBestVersionForData=function(e,n){let r;const o=i.from(n,i.M);if(Array.isArray(e)){if(e.length>1)return function(e,n){for(let r=1;r<=40;r++)if(u(e,r)<=t.getCapacity(r,n,a.MIXED))return r}(e,o);if(0===e.length)return 1;r=e[0]}else r=e;return function(e,n,r){for(let o=1;o<=40;o++)if(n<=t.getCapacity(o,r,e))return o}(r.mode,r.getLength(),o)},t.getEncodedBits=function(e){if(!s.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;r.getBCHDigit(t)-l>=0;)t^=7973<<r.getBCHDigit(t)-l;return e<<12|t}},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},5173:(e,t,n)=>{e.exports=n(1497)()},5200:(e,t,n)=>{const r=n(7421),o=n(7969);function i(e){this.mode=r.KANJI,this.data=e}i.getBitsLength=function(e){return 13*e},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=o.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),e.put(n,13)}},e.exports=i},5403:(e,t,n)=>{"use strict";var r;n.d(t,{E_:()=>l,F3:()=>s,Ii:()=>a}),function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"}(r||(r={}));class o extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const i=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},i=n.Plugins=n.Plugins||{},a=()=>null!==t?t.name:(e=>{var t,n;return(null===e||void 0===e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null===e||void 0===e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"})(e),s=e=>{var t;return null===(t=n.PluginHeaders)||void 0===t?void 0:t.find(t=>t.name===e)},l=new Map;return n.convertFileSrc||(n.convertFileSrc=e=>e),n.getPlatform=a,n.handleError=t=>e.console.error(t),n.isNativePlatform=()=>"web"!==a(),n.isPluginAvailable=e=>{const t=l.get(e);return!!(null===t||void 0===t?void 0:t.platforms.has(a()))||!!s(e)},n.registerPlugin=function(e){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const u=l.get(e);if(u)return console.warn('Capacitor plugin "'.concat(e,'" already registered. Cannot register plugins twice.')),u.proxy;const d=a(),h=s(e);let f;const p=i=>{let a;const s=function(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];const p=(async()=>(!f&&d in c?f=f="function"===typeof c[d]?await c[d]():c[d]:null!==t&&!f&&"web"in c&&(f=f="function"===typeof c.web?await c.web():c.web),f))().then(t=>{const s=((t,i)=>{var a,s;if(!h){if(t)return null===(s=t[i])||void 0===s?void 0:s.bind(t);throw new o('"'.concat(e,'" plugin is not implemented on ').concat(d),r.Unimplemented)}{const r=null===h||void 0===h?void 0:h.methods.find(e=>i===e.name);if(r)return"promise"===r.rtype?t=>n.nativePromise(e,i.toString(),t):(t,r)=>n.nativeCallback(e,i.toString(),t,r);if(t)return null===(a=t[i])||void 0===a?void 0:a.bind(t)}})(t,i);if(s){const e=s(...l);return a=null===e||void 0===e?void 0:e.remove,e}throw new o('"'.concat(e,".").concat(i,'()" is not implemented on ').concat(d),r.Unimplemented)});return"addListener"===i&&(p.remove=async()=>a()),p};return s.toString=()=>"".concat(i.toString(),"() { [capacitor code] }"),Object.defineProperty(s,"name",{value:i,writable:!1,configurable:!1}),s},m=p("addListener"),g=p("removeListener"),v=(e,t)=>{const n=m({eventName:e},t),r=async()=>{const r=await n;g({eventName:e,callbackId:r},t)},o=new Promise(e=>n.then(()=>e({remove:r})));return o.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await r()},o},y=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return h?v:m;case"removeListener":return g;default:return p(t)}}});return i[e]=y,l.set(e,{name:e,proxy:y,platforms:new Set([...Object.keys(c),...h?[d]:[]])}),y},n.Exception=o,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},a=(e=>e.Capacitor=i(e))("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{}),s=a.registerPlugin;class l{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r),n&&this.sendRetainedArgumentsForEvent(e);return Promise.resolve({remove:async()=>this.removeListener(e,t)})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,n){const r=this.listeners[e];if(r)r.forEach(e=>e(t));else if(n){let n=this.retainedEventArguments[e];n||(n=[]),n.push(t),this.retainedEventArguments[e]=n}}hasListeners(e){var t;return!!(null===(t=this.listeners[e])||void 0===t?void 0:t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not implemented";return new a.Exception(e,r.Unimplemented)}unavailable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not available";return new a.Exception(e,r.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const r=n.indexOf(t);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(t=>{this.notifyListeners(e,t)}))}}const c=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),u=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class d extends l{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(e=>{if(e.length<=0)return;let[n,r]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=u(n).trim(),r=u(r).trim(),t[n]=r}),t}async setCookie(e){try{const t=c(e.key),n=c(e.value),r="; expires=".concat((e.expires||"").replace("expires=","")),o=(e.path||"/").replace("path=",""),i=null!=e.url&&e.url.length>0?"domain=".concat(e.url):"";document.cookie="".concat(t,"=").concat(n||"").concat(r,"; path=").concat(o,"; ").concat(i,";")}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie="".concat(e.key,"=; Max-Age=0")}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,"=;expires=".concat((new Date).toUTCString(),";path=/"))}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}s("CapacitorCookies",{web:()=>new d});const h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Object.assign({method:e.method||"GET",headers:e.headers},t),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.keys(e);return Object.keys(e).map(e=>e.toLocaleLowerCase()).reduce((n,r,o)=>(n[r]=e[t[o]],n),{})}(e.headers),o=r["content-type"]||"";if("string"===typeof e.data)n.body=e.data;else if(o.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[n,r]of Object.entries(e.data||{}))t.set(n,r);n.body=t.toString()}else if(o.includes("multipart/form-data")||e.data instanceof FormData){const t=new FormData;if(e.data instanceof FormData)e.data.forEach((e,n)=>{t.append(n,e)});else for(const n of Object.keys(e.data))t.append(n,e.data[n]);n.body=t;const r=new Headers(n.headers);r.delete("content-type"),n.headers=r}else(o.includes("application/json")||"object"===typeof e.data)&&(n.body=JSON.stringify(e.data));return n};class f extends l{async request(e){const t=h(e,e.webFetchExtra),n=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e?Object.entries(e).reduce((e,n)=>{const[r,o]=n;let i,a;return Array.isArray(o)?(a="",o.forEach(e=>{i=t?encodeURIComponent(e):e,a+="".concat(r,"=").concat(i,"&")}),a.slice(0,-1)):(i=t?encodeURIComponent(o):o,a="".concat(r,"=").concat(i)),"".concat(e,"&").concat(a)},"").substr(1):null}(e.params,e.shouldEncodeUrlParams),r=n?"".concat(e.url,"?").concat(n):e.url,o=await fetch(r,t),i=o.headers.get("content-type")||"";let a,s,{responseType:l="text"}=o.ok?e:{};switch(i.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":s=await o.blob(),a=await(async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const e=r.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},r.onerror=e=>n(e),r.readAsDataURL(e)}))(s);break;case"json":a=await o.json();break;default:a=await o.text()}const c={};return o.headers.forEach((e,t)=>{c[t]=e}),{data:a,headers:c,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}s("CapacitorHttp",{web:()=>new f})},5472:(e,t,n)=>{"use strict";n.d(t,{gS:()=>Js,rJ:()=>za,deleteDoc:()=>Ys,H9:()=>Ba,Fs:()=>Za,x7:()=>Gs,getDocs:()=>Ws,aU:()=>Ha,AB:()=>Ms,aQ:()=>$s,My:()=>Ps,P:()=>Cs,O5:()=>rl,BN:()=>Qs,mZ:()=>Zs,_M:()=>Es,wP:()=>ol});var r,o,i=n(7150),a=n(8812),s=n(443),l=n(7700),c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},u={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var o=0;16>o;++o)r[o]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(o=0;16>o;++o)r[o]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],o=e.g[2];var i=e.g[3],a=t+(i^n&(o^i))+r[0]+3614090360&4294967295;a=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(o^t&(n^o))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=o+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^o&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(o^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(o^t&(n^o))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=o+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^o&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(o^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(o^t&(n^o))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=o+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^o&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(o^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(o^t&(n^o))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=o+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^o&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^i&(n^o))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^o&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=o+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(o^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(o^i&(n^o))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^o&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=o+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(o^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(o^i&(n^o))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^o&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=o+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(o^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(o^i&(n^o))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^o&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=o+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(o^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^o^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^o)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=o+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(o^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^o^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^o)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=o+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(o^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^o^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^o)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=o+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(o^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^o^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^o)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=o+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(o^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(o^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~o))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=o+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(o|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(o^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~o))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=o+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(o|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(o^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~o))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=o+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(o|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(o^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~o))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((o=i+((a=o+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(o+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+o&4294967295,e.g[3]=e.g[3]+i&4294967295}function i(e,t){this.h=t;for(var n=[],r=!0,o=e.length-1;0<=o;o--){var i=0|e[o];r&&i==t||(n[o]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var o=Array(arguments.length-2),i=2;i<arguments.length;i++)o[i-2]=arguments[i];return t.prototype[n].apply(e,o)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,o=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(o[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,o),i=0;break}}else for(;a<t;)if(o[i++]=e[a++],i==this.blockSize){n(this,o),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var a={};function s(e){return-128<=e&&128>e?function(e,t){var n=a;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new i([0|e],0>e?-1:0)}):new i([0|e],0>e?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return c;if(0>e)return m(l(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new i(t,0)}var c=s(0),d=s(1),h=s(16777216);function f(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function p(e){return-1==e.h}function m(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new i(n,~e.h).add(d)}function g(e,t){return e.add(m(t))}function v(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function b(e,t){if(f(t))throw Error("division by zero");if(f(e))return new y(c,c);if(p(e))return t=b(m(e),t),new y(m(t.g),m(t.h));if(p(t))return t=b(e,m(t)),new y(m(t.g),t.h);if(30<e.g.length){if(p(e)||p(t))throw Error("slowDivide_ only works with positive integers.");for(var n=d,r=t;0>=r.l(e);)n=x(n),r=x(r);var o=w(n,1),i=w(r,1);for(r=w(r,2),n=w(n,2);!f(r);){var a=i.add(r);0>=a.l(e)&&(o=o.add(n),i=a),r=w(r,1),n=w(n,1)}return t=g(e,o.j(t)),new y(o,t)}for(o=c;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),a=(i=l(n)).j(t);p(a)||0<a.l(e);)a=(i=l(n-=r)).j(t);f(i)&&(i=d),o=o.add(i),e=g(e,a)}return new y(o,e)}function x(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new i(n,e.h)}function w(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,o=[],a=0;a<r;a++)o[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new i(o,e.h)}(e=i.prototype).m=function(){if(p(this))return-m(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(f(this))return"0";if(p(this))return"-"+m(this).toString(e);for(var t=l(Math.pow(e,6)),n=this,r="";;){var o=b(n,t).g,i=((0<(n=g(n,o.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(f(n=o))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return p(e=g(this,e))?-1:f(e)?0:1},e.abs=function(){return p(this)?m(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,o=0;o<=t;o++){var a=r+(65535&this.i(o))+(65535&e.i(o)),s=(a>>>16)+(this.i(o)>>>16)+(e.i(o)>>>16);r=s>>>16,a&=65535,s&=65535,n[o]=s<<16|a}return new i(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(f(this)||f(e))return c;if(p(this))return p(e)?m(this).j(m(e)):m(m(this).j(e));if(p(e))return m(this.j(m(e)));if(0>this.l(h)&&0>e.l(h))return l(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var o=0;o<e.g.length;o++){var a=this.i(r)>>>16,s=65535&this.i(r),u=e.i(o)>>>16,d=65535&e.i(o);n[2*r+2*o]+=s*d,v(n,2*r+2*o),n[2*r+2*o+1]+=a*d,v(n,2*r+2*o+1),n[2*r+2*o+1]+=s*u,v(n,2*r+2*o+1),n[2*r+2*o+2]+=a*u,v(n,2*r+2*o+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new i(n,0)},e.A=function(e){return b(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new i(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new i(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new i(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,o=u.Md5=t,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=l,i.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return m(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=l(Math.pow(n,8)),o=c,i=0;i<t.length;i+=8){var a=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+a),n);8>a?(a=l(Math.pow(n,a)),o=o.j(a).add(l(s))):o=(o=o.j(r)).add(l(s))}return o},r=u.Integer=i}).apply("undefined"!==typeof c?c:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var d,h,f,p,m,g,v,y,b="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},x={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof b&&b];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var o=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in o))break e;o=o[a]}(r=r(i=o[e=e[e.length-1]]))!=i&&null!=r&&t(o,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,o={next:function(){if(!r&&n<e.length){var o=n++;return{value:t(o,e[o]),done:!1}}return r=!0,{done:!0,value:void 0}}};return o[Symbol.iterator]=function(){return o},o}(this,function(e,t){return t})}});var r=r||{},o=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function s(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?s:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function _(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var o=Array(arguments.length-2),i=2;i<arguments.length;i++)o[i-2]=arguments[i];return t.prototype[n].apply(e,o)}}function k(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function S(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let o=0;o<r;o++)e[n+o]=t[o]}else e.push(t)}}function N(e){return/^[\s\xa0]*$/.test(e)}function C(){var e=o.navigator;return e&&(e=e.userAgent)?e:""}function j(e){return j[" "](e),e}j[" "]=function(){};var E=-1!=C().indexOf("Gecko")&&!(-1!=C().toLowerCase().indexOf("webkit")&&-1==C().indexOf("Edge"))&&!(-1!=C().indexOf("Trident")||-1!=C().indexOf("MSIE"))&&-1==C().indexOf("Edge");function T(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function I(e){const t={};for(const n in e)t[n]=e[n];return t}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(e,t){let n,r;for(let o=1;o<arguments.length;o++){for(n in r=arguments[o],r)e[n]=r[n];for(let t=0;t<P.length;t++)n=P[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function M(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function L(e){o.setTimeout(()=>{throw e},0)}function R(){var e=U;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var D=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new F,e=>e.reset());class F{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let z,B=!1,U=new class{constructor(){this.h=this.g=null}add(e,t){const n=D.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},q=()=>{const e=o.Promise.resolve(void 0);z=()=>{e.then(V)}};var V=()=>{for(var e;e=R();){try{e.h.call(e.g)}catch(n){L(n)}var t=D;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}B=!1};function H(){this.s=this.s,this.C=this.C}function G(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},G.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};o.addEventListener("test",e,t),o.removeEventListener("test",e,t)}catch(n){}return e}();function W(e,t){if(G.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(E){e:{try{j(t.nodeName);var o=!0;break e}catch(i){}o=!1}o||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Q[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&W.aa.h.call(this)}}_(W,G);var Q={2:"touch",3:"pen",4:"mouse"};W.prototype.h=function(){W.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Z="closure_listenable_"+(1e6*Math.random()|0),Y=0;function J(e,t,n,r,o){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=o,this.key=++Y,this.da=this.fa=!1}function $(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function X(e){this.src=e,this.g={},this.h=0}function ee(e,t){var n=t.type;if(n in e.g){var r,o=e.g[n],i=Array.prototype.indexOf.call(o,t,void 0);(r=0<=i)&&Array.prototype.splice.call(o,i,1),r&&($(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function te(e,t,n,r){for(var o=0;o<e.length;++o){var i=e[o];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return o}return-1}X.prototype.add=function(e,t,n,r,o){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=te(e,t,r,o);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new J(t,this.src,i,!!r,o)).fa=n,e.push(t)),t};var ne="closure_lm_"+(1e6*Math.random()|0),re={};function oe(e,t,n,r,o){if(r&&r.once)return ae(e,t,n,r,o);if(Array.isArray(t)){for(var i=0;i<t.length;i++)oe(e,t[i],n,r,o);return null}return n=fe(n),e&&e[Z]?e.K(t,n,a(r)?!!r.capture:!!r,o):ie(e,t,n,!1,r,o)}function ie(e,t,n,r,o,i){if(!t)throw Error("Invalid event type");var s=a(o)?!!o.capture:!!o,l=de(e);if(l||(e[ne]=l=new X(e)),(n=l.add(t,n,r,s,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=ue;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)K||(o=s),void 0===o&&(o=!1),e.addEventListener(t.toString(),r,o);else if(e.attachEvent)e.attachEvent(ce(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ae(e,t,n,r,o){if(Array.isArray(t)){for(var i=0;i<t.length;i++)ae(e,t[i],n,r,o);return null}return n=fe(n),e&&e[Z]?e.L(t,n,a(r)?!!r.capture:!!r,o):ie(e,t,n,!0,r,o)}function se(e,t,n,r,o){if(Array.isArray(t))for(var i=0;i<t.length;i++)se(e,t[i],n,r,o);else r=a(r)?!!r.capture:!!r,n=fe(n),e&&e[Z]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=te(i=e.g[t],n,r,o))&&($(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=de(e))&&(t=e.g[t.toString()],e=-1,t&&(e=te(t,n,r,o)),(n=-1<e?t[e]:null)&&le(n))}function le(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[Z])ee(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ce(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=de(t))?(ee(n,e),0==n.h&&(n.src=null,t[ne]=null)):$(e)}}}function ce(e){return e in re?re[e]:re[e]="on"+e}function ue(e,t){if(e.da)e=!0;else{t=new W(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&le(e),e=n.call(r,t)}return e}function de(e){return(e=e[ne])instanceof X?e:null}var he="__closure_events_fn_"+(1e9*Math.random()>>>0);function fe(e){return"function"===typeof e?e:(e[he]||(e[he]=function(t){return e.handleEvent(t)}),e[he])}function pe(){H.call(this),this.i=new X(this),this.M=this,this.F=null}function me(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new G(t,e);else if(t instanceof G)t.target=t.target||e;else{var o=t;O(t=new G(r,e),o)}if(o=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];o=ge(a,r,!0,t)&&o}if(o=ge(a=t.g=e,r,!0,t)&&o,o=ge(a,r,!1,t)&&o,n)for(i=0;i<n.length;i++)o=ge(a=t.g=n[i],r,!1,t)&&o}function ge(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var o=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==n){var s=a.listener,l=a.ha||a.src;a.fa&&ee(e.i,a),o=!1!==s.call(l,r)&&o}}return o&&!r.defaultPrevented}function ve(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:o.setTimeout(e,t||0)}function ye(e){e.g=ve(()=>{e.g=null,e.i&&(e.i=!1,ye(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}_(pe,H),pe.prototype[Z]=!0,pe.prototype.removeEventListener=function(e,t,n,r){se(this,e,t,n,r)},pe.prototype.N=function(){if(pe.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)$(n[r]);delete t.g[e],t.h--}}this.F=null},pe.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},pe.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class be extends H{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ye(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xe(e){H.call(this),this.h=e,this.g={}}_(xe,H);var we=[];function _e(e){T(e.g,function(e,t){this.g.hasOwnProperty(t)&&le(e)},e),e.g={}}xe.prototype.N=function(){xe.aa.N.call(this),_e(this)},xe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ke=o.JSON.stringify,Ae=o.JSON.parse,Se=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function Ne(){}function Ce(e){return e.h||(e.h=e.i())}function je(){}Ne.prototype.h=null;var Ee={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Te(){G.call(this,"d")}function Ie(){G.call(this,"c")}_(Te,G),_(Ie,G);var Pe={},Oe=null;function Me(){return Oe=Oe||new pe}function Le(e){G.call(this,Pe.La,e)}function Re(e){const t=Me();me(t,new Le(t))}function De(e,t){G.call(this,Pe.STAT_EVENT,e),this.stat=t}function Fe(e){const t=Me();me(t,new De(t,e))}function ze(e,t){G.call(this,Pe.Ma,e),this.size=t}function Be(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){e()},t)}function Ue(){this.g=!0}function qe(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var i=o[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<o.length;a++)o[a]=""}}}return ke(n)}catch(s){return t}}(e,n)+(r?" "+r:"")})}Pe.La="serverreachability",_(Le,G),Pe.STAT_EVENT="statevent",_(De,G),Pe.Ma="timingevent",_(ze,G),Ue.prototype.xa=function(){this.g=!1},Ue.prototype.info=function(){};var Ve,He={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ge={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Ke(){}function We(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new xe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qe}function Qe(){this.i=null,this.g="",this.h=!1}_(Ke,Ne),Ke.prototype.g=function(){return new XMLHttpRequest},Ke.prototype.i=function(){return{}},Ve=new Ke;var Ze={},Ye={};function Je(e,t,n){e.L=1,e.v=kt(yt(t)),e.m=n,e.P=!0,$e(e,null)}function $e(e,t){e.F=Date.now(),tt(e),e.A=yt(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Dt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Qe,e.g=Sn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new be(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var o="readystatechange";Array.isArray(o)||(o&&(we[0]=o.toString()),o=we);for(var i=0;i<o.length;i++){var a=oe(n,o[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?I(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Re(),function(e,t,n,r,o,i){e.info(function(){if(e.g)if(i)for(var a="",s=i.split("&"),l=0;l<s.length;l++){var c=s[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Xe(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function et(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ye:(n=Number(t.substring(n,r)),isNaN(n)?Ze:(r+=1)+n>t.length?Ye:(t=t.slice(r,r+n),e.C=r+n,t))}function tt(e){e.S=Date.now()+e.I,nt(e,e.I)}function nt(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Be(c(e.ba,e),t)}function rt(e){e.B&&(o.clearTimeout(e.B),e.B=null)}function ot(e){0==e.j.G||e.J||xn(e.j,e)}function it(e){rt(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,_e(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function at(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||dt(n.h,e)))if(!e.K&&dt(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;bn(n),cn(n)}gn(n),Fe(18)}}else n.za=o[1],0<n.za-n.T&&37500>o[2]&&n.F&&0==n.v&&!n.C&&(n.C=Be(c(n.Za,n),6e3));if(1>=ut(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else _n(n,11)}else if((e.K||n.g==e)&&bn(n),!N(t))for(o=n.Da.g.parse(t),t=0;t<o.length;t++){let c=o[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const o=c[4];null!=o&&(n.Aa=o,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(ht(i,i.h),i.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,_t(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=An(r,r.J?r.ia:null,r.W),a.K){ft(r.h,a);var s=a,l=r.L;l&&(s.I=l),s.B&&(rt(s),tt(s)),r.g=a}else mn(r);0<n.i.length&&dn(n)}else"stop"!=c[0]&&"close"!=c[0]||_n(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?_n(n,7):ln(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Re()}catch(u){}}We.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==rn(e)?t.j():this.Y(e)},We.prototype.Y=function(e){try{if(e==this.g)e:{const h=rn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||on(this.g)))){this.J||4!=h||7==t||Re(),rt(this);var n=this.g.Z();this.X=n;t:if(Xe(this)){var r=on(this.g);e="";var i=r.length,a=4==rn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){it(this),ot(this);var s="";break t}this.h.i=new o.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.oa();if(this.o=200==n,function(e,t,n,r,o,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Fe(12),it(this),ot(this);break e}qe(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,at(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<s.length;){if(e=et(this,s),e==Ye){4==h&&(this.s=4,Fe(14),n=!1),qe(this.i,this.l,null,"[Incomplete Response]");break}if(e==Ze){this.s=4,Fe(15),qe(this.i,this.l,s,"[Invalid Chunk]"),n=!1;break}qe(this.i,this.l,e,null),at(this,e)}if(Xe(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=s.length||this.h.h||(this.s=1,Fe(16),n=!1),this.o=this.o&&n,n){if(0<s.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+s.length),vn(d),d.M=!0,Fe(11))}}else qe(this.i,this.l,s,"[Invalid Chunked Response]"),it(this),ot(this)}else qe(this.i,this.l,s,null),at(this,s);4==h&&it(this),this.o&&!this.J&&(4==h?xn(this.j,this):(this.o=!1,tt(this)))}else(function(e){const t={};e=(e.g&&2<=rn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(N(e[r]))continue;var n=M(e[r]);const o=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[o]||[];t[o]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,Fe(12)):(this.s=0,Fe(13)),it(this),ot(this)}}}catch(w){}},We.prototype.cancel=function(){this.J=!0,it(this)},We.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Re(),Fe(17)),it(this),this.s=2,ot(this)):nt(this,this.S-e)};var st=class{constructor(e,t){this.g=e,this.map=t}};function lt(e){this.l=e||10,o.PerformanceNavigationTiming?e=0<(e=o.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ct(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ut(e){return e.h?1:e.g?e.g.size:0}function dt(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ht(e,t){e.g?e.g.add(t):e.h=t}function ft(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function pt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return k(e.i)}function mt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),o=r.length,a=0;a<o;a++)t.call(void 0,r[a],n&&n[a],e)}lt.prototype.cancel=function(){if(this.i=pt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var gt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof vt){this.h=e.h,bt(this,e.j),this.o=e.o,this.g=e.g,xt(this,e.s),this.l=e.l;var t=e.i,n=new Ot;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),wt(this,n),this.m=e.m}else e&&(t=String(e).match(gt))?(this.h=!1,bt(this,t[1]||"",!0),this.o=At(t[2]||""),this.g=At(t[3]||"",!0),xt(this,t[4]),this.l=At(t[5]||"",!0),wt(this,t[6]||"",!0),this.m=At(t[7]||"")):(this.h=!1,this.i=new Ot(null,this.h))}function yt(e){return new vt(e)}function bt(e,t,n){e.j=n?At(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function xt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function wt(e,t,n){t instanceof Ot?(e.i=t,function(e,t){t&&!e.j&&(Mt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Lt(this,t),Dt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=St(t,It)),e.i=new Ot(t,e.h))}function _t(e,t,n){e.i.set(t,n)}function kt(e){return _t(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function At(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function St(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Nt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Nt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}vt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(St(t,jt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(St(t,jt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(St(n,"/"==n.charAt(0)?Tt:Et,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",St(n,Pt)),e.join("")};var Ct,jt=/[#\/\?@]/g,Et=/[#\?:]/g,Tt=/[#\?]/g,It=/[#\?@]/g,Pt=/#/g;function Ot(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Mt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),o=null;if(0<=r){var i=e[n].substring(0,r);o=e[n].substring(r+1)}else i=e[n];t(i,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Lt(e,t){Mt(e),t=Ft(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Rt(e,t){return Mt(e),t=Ft(e,t),e.g.has(t)}function Dt(e,t,n){Lt(e,t),0<n.length&&(e.i=null,e.g.set(Ft(e,t),k(n)),e.h+=n.length)}function Ft(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function zt(e,t,n,r,o){try{o&&(o.onload=null,o.onerror=null,o.onabort=null,o.ontimeout=null),r(n)}catch(i){}}function Bt(){this.g=new Se}function Ut(e,t,n){const r=n||"";try{mt(e,function(e,n){let o=e;a(e)&&(o=ke(e)),t.push(r+n+"="+encodeURIComponent(o))})}catch(o){throw t.push(r+"type="+encodeURIComponent("_badmap")),o}}function qt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Vt(e,t){pe.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Ht(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Gt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Kt(e)}function Kt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Wt(e){let t="";return T(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Qt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Wt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):_t(e,t,n))}function Zt(e){pe.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Ot.prototype).add=function(e,t){Mt(this),this.i=null,e=Ft(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Mt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Mt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const o=e[r];for(let e=0;e<o.length;e++)n.push(t[r])}return n},e.V=function(e){Mt(this);let t=[];if("string"===typeof e)Rt(this,e)&&(t=t.concat(this.g.get(Ft(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Mt(this),this.i=null,Rt(this,e=Ft(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")},_(qt,Ne),qt.prototype.g=function(){return new Vt(this.l,this.j)},qt.prototype.i=(Ct={},function(){return Ct}),_(Vt,pe),(e=Vt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Kt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||o).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Gt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Kt(this)),this.g&&(this.readyState=3,Kt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof o.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ht(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Gt(this):Kt(this),3==this.readyState&&Ht(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Gt(this))},e.Qa=function(e){this.g&&(this.response=e,Gt(this))},e.ga=function(){this.g&&Gt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Vt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),_(Zt,pe);var Yt=/^https?$/i,Jt=["POST","PUT"];function $t(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Xt(e),tn(e)}function Xt(e){e.A||(e.A=!0,me(e,"complete"),me(e,"error"))}function en(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=rn(e)||2!=e.Z()))if(e.u&&4==rn(e))ve(e.Ea,0,e);else if(me(e,"readystatechange"),4==rn(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var a=String(e.D).match(gt)[1]||null;!a&&o.self&&o.self.location&&(a=o.self.location.protocol.slice(0,-1)),i=!Yt.test(a?a.toLowerCase():"")}n=i}if(n)me(e,"complete"),me(e,"success");else{e.m=6;try{var s=2<rn(e)?e.g.statusText:""}catch(l){s=""}e.l=s+" ["+e.Z()+"]",Xt(e)}}finally{tn(e)}}}function tn(e,t){if(e.g){nn(e);const r=e.g,o=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||me(e,"ready");try{r.onreadystatechange=o}catch(n){}}}function nn(e){e.I&&(o.clearTimeout(e.I),e.I=null)}function rn(e){return e.g?e.g.readyState:0}function on(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(A){return null}}function an(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function sn(e){this.Aa=0,this.i=[],this.j=new Ue,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=an("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=an("baseRetryDelayMs",5e3,e),this.cb=an("retryDelaySeedMs",1e4,e),this.Wa=an("forwardChannelMaxRetries",2,e),this.wa=an("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new lt(e&&e.concurrentRequestLimit),this.Da=new Bt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function ln(e){if(un(e),3==e.G){var t=e.U++,n=yt(e.I);if(_t(n,"SID",e.K),_t(n,"RID",t),_t(n,"TYPE","terminate"),fn(e,n),(t=new We(e,e.j,t)).L=2,t.v=kt(yt(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&o.Image&&((new Image).src=t.v,n=!0),n||(t.g=Sn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),tt(t)}kn(e)}function cn(e){e.g&&(vn(e),e.g.cancel(),e.g=null)}function un(e){cn(e),e.u&&(o.clearTimeout(e.u),e.u=null),bn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&o.clearTimeout(e.s),e.s=null)}function dn(e){if(!ct(e.h)&&!e.s){e.s=!0;var t=e.Ga;z||q(),B||(z(),B=!0),U.add(t,e),e.B=0}}function hn(e,t){var n;n=t?t.l:e.U++;const r=yt(e.I);_t(r,"SID",e.K),_t(r,"RID",n),_t(r,"AID",e.T),fn(e,r),e.m&&e.o&&Qt(r,e.m,e.o),n=new We(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=pn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),ht(e.h,n),Je(n,r,t)}function fn(e,t){e.H&&T(e.H,function(e,n){_t(t,n,e)}),e.l&&mt({},function(e,n){_t(t,n,e)})}function pn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var o=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=o[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let a=0;a<n;a++){let n=o[a].g;const s=o[a].map;if(n-=t,0>n)t=Math.max(0,o[a].g-100),i=!1;else try{Ut(s,e,"req"+n+"_")}catch(w){r&&r(s)}}if(i){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function mn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;z||q(),B||(z(),B=!0),U.add(t,e),e.v=0}}function gn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Be(c(e.Fa,e),wn(e,e.v)),e.v++,!0)}function vn(e){null!=e.A&&(o.clearTimeout(e.A),e.A=null)}function yn(e){e.g=new We(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=yt(e.qa);_t(t,"RID","rpc"),_t(t,"SID",e.K),_t(t,"AID",e.T),_t(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&_t(t,"TO",e.ja),_t(t,"TYPE","xmlhttp"),fn(e,t),e.m&&e.o&&Qt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=kt(yt(t)),n.m=null,n.P=!0,$e(n,e)}function bn(e){null!=e.C&&(o.clearTimeout(e.C),e.C=null)}function xn(e,t){var n=null;if(e.g==t){bn(e),vn(e),e.g=null;var r=2}else{if(!dt(e.h,t))return;n=t.D,ft(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var o=e.B;me(r=Me(),new ze(r,n)),dn(e)}else mn(e);else if(3==(o=t.s)||0==o&&0<t.X||!(1==r&&function(e,t){return!(ut(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Be(c(e.Ga,e,t),wn(e,e.B)),e.B++,!0))}(e,t)||2==r&&gn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),o){case 1:_n(e,5);break;case 4:_n(e,10);break;case 3:_n(e,6);break;default:_n(e,2)}}function wn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function _n(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new vt(r||"//www.google.com/images/cleardot.gif"),o.location&&"http"==o.location.protocol||bt(r,"https"),kt(r),t?function(e,t){const n=new Ue;if(o.Image){const r=new Image;r.onload=u(zt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(zt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(zt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(zt,n,"TestLoadImage: timeout",!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ue;const n=new AbortController,r=setTimeout(()=>{n.abort(),zt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?zt(0,0,!0,t):zt(0,0,!1,t)}).catch(()=>{clearTimeout(r),zt(0,0,!1,t)})}(r.toString(),n)}else Fe(2);e.G=0,e.l&&e.l.sa(t),kn(e),un(e)}function kn(e){if(e.G=0,e.ka=[],e.l){const t=pt(e.h);0==t.length&&0==e.i.length||(S(e.ka,t),S(e.ka,e.i),e.h.i.length=0,k(e.i),e.i.length=0),e.l.ra()}}function An(e,t,n){var r=n instanceof vt?yt(n):new vt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),xt(r,r.s);else{var i=o.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new vt(null);r&&bt(a,r),t&&(a.g=t),i&&xt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&_t(r,n,t),_t(r,"VER",e.la),fn(e,r),r}function Sn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Zt(new qt({eb:n})):new Zt(e.pa)).Ha(e.J),t}function Nn(){}function Cn(){}function jn(e,t){pe.call(this),this.g=new sn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!N(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!N(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new In(this)}function En(e){Te.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Tn(){Ie.call(this),this.status=1}function In(e){this.g=e}(e=Zt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ve.g(),this.v=this.o?Ce(this.o):Ce(Ve),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void $t(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=o.FormData&&e instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Jt,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{nn(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){$t(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,me(this,"complete"),me(this,"abort"),tn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tn(this,!0)),Zt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?en(this):this.bb())},e.bb=function(){en(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<rn(this)?this.g.status:-1}catch(Ct){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(Ct){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ae(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=sn.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Fe(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=An(this,null,this.W),dn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const o=new We(this,this.j,e);let i=this.o;if(this.S&&(i?(i=I(i),O(i,this.S)):i=this.S),null!==this.m||this.O||(o.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=pn(this,o,t),_t(n=yt(this.I),"RID",e),_t(n,"CVER",22),this.D&&_t(n,"X-HTTP-Session-Id",this.D),fn(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Wt(i)))+"&"+t:this.m&&Qt(n,this.m,i)),ht(this.h,o),this.Ua&&_t(n,"TYPE","init"),this.P?(_t(n,"$req",t),_t(n,"SID","null"),o.T=!0,Je(o,n,null)):Je(o,n,t),this.G=2}}else 3==this.G&&(e?hn(this,e):0==this.i.length||ct(this.h)||hn(this))},e.Fa=function(){if(this.u=null,yn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Be(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Fe(10),cn(this),yn(this))},e.Za=function(){null!=this.C&&(this.C=null,cn(this),gn(this),Fe(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Fe(2)):(this.j.info("Failed to ping google.com"),Fe(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=Nn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},Cn.prototype.g=function(e,t){return new jn(e,t)},_(jn,pe),jn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jn.prototype.close=function(){ln(this.g)},jn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=ke(e),e=n);t.i.push(new st(t.Ya++,e)),3==t.G&&dn(t)},jn.prototype.N=function(){this.g.l=null,delete this.j,ln(this.g),delete this.g,jn.aa.N.call(this)},_(En,Te),_(Tn,Ie),_(In,Nn),In.prototype.ua=function(){me(this.g,"a")},In.prototype.ta=function(e){me(this.g,new En(e))},In.prototype.sa=function(e){me(this.g,new Tn)},In.prototype.ra=function(){me(this.g,"b")},Cn.prototype.createWebChannel=Cn.prototype.g,jn.prototype.send=jn.prototype.o,jn.prototype.open=jn.prototype.m,jn.prototype.close=jn.prototype.close,y=x.createWebChannelTransport=function(){return new Cn},v=x.getStatEventTarget=function(){return Me()},g=x.Event=Pe,m=x.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},He.NO_ERROR=0,He.TIMEOUT=8,He.HTTP_ERROR=6,p=x.ErrorCode=He,Ge.COMPLETE="complete",f=x.EventType=Ge,je.EventType=Ee,Ee.OPEN="a",Ee.CLOSE="b",Ee.ERROR="c",Ee.MESSAGE="d",pe.prototype.listen=pe.prototype.K,h=x.WebChannel=je,x.FetchXmlHttpFactory=qt,Zt.prototype.listenOnce=Zt.prototype.L,Zt.prototype.getLastError=Zt.prototype.Ka,Zt.prototype.getLastErrorCode=Zt.prototype.Ba,Zt.prototype.getStatus=Zt.prototype.Z,Zt.prototype.getResponseJson=Zt.prototype.Oa,Zt.prototype.getResponseText=Zt.prototype.oa,Zt.prototype.send=Zt.prototype.ea,Zt.prototype.setWithCredentials=Zt.prototype.Ha,d=x.XhrIo=Zt}).apply("undefined"!==typeof b?b:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const w="@firebase/firestore";class _{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_.UNAUTHENTICATED=new _(null),_.GOOGLE_CREDENTIALS=new _("google-credentials-uid"),_.FIRST_PARTY=new _("first-party-uid"),_.MOCK_USER=new _("mock-user");let k="10.14.0";const A=new s.Vy("@firebase/firestore");function S(){return A.logLevel}function N(e){if(A.logLevel<=s.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=n.map(E);A.debug("Firestore (".concat(k,"): ").concat(e),...o)}}function C(e){if(A.logLevel<=s.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=n.map(E);A.error("Firestore (".concat(k,"): ").concat(e),...o)}}function j(e){if(A.logLevel<=s.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=n.map(E);A.warn("Firestore (".concat(k,"): ").concat(e),...o)}}function E(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function T(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(k,") INTERNAL ASSERTION FAILED: ")+e;throw C(t),new Error(t)}function I(e,t){e||T()}function P(e,t){return e}const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class M extends l.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class L{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class R{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class D{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(_.UNAUTHENTICATED))}shutdown(){}}class F{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class z{constructor(e){this.t=e,this.currentUser=_.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){I(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let o=new L;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new L,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=o;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{N("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(N("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new L)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(N("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(I("string"==typeof t.accessToken),new R(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return I(null===e||"string"==typeof e),new _(e)}}class B{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=_.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class U{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new B(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(_.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class q{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class V{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){I(void 0===this.o);const n=e=>{null!=e.error&&N("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,N("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{N("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):N("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(I("string"==typeof e.token),this.R=e.token,new q(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function H(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class G{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=H(40);for(let o=0;o<r.length;++o)n.length<20&&r[o]<t&&(n+=e.charAt(r[o]%62))}return n}}function K(e,t){return e<t?-1:e>t?1:0}function W(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class Q{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new M(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new M(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new M(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new M(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Q.fromMillis(Date.now())}static fromDate(e){return Q.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Q(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?K(this.nanoseconds,e.nanoseconds):K(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Z{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Z(e)}static min(){return new Z(new Q(0,0))}static max(){return new Z(new Q(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Y{constructor(e,t,n){void 0===t?t=0:t>e.length&&T(),void 0===n?n=e.length-t:n>e.length-t&&T(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Y.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Y?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),o=t.get(r);if(n<o)return-1;if(n>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class J extends Y{construct(e,t,n){return new J(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const o of n){if(o.indexOf("//")>=0)throw new M(O.INVALID_ARGUMENT,"Invalid segment (".concat(o,"). Paths must not contain // in them."));e.push(...o.split("/").filter(e=>e.length>0))}return new J(e)}static emptyPath(){return new J([])}}const $=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class X extends Y{construct(e,t,n){return new X(e,t,n)}static isValidIdentifier(e){return $.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),X.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new X(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const o=()=>{if(0===n.length)throw new M(O.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new M(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new M(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(o(),r++)}if(o(),i)throw new M(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new X(t)}static emptyPath(){return new X([])}}class ee{constructor(e){this.path=e}static fromPath(e){return new ee(J.fromString(e))}static fromName(e){return new ee(J.fromString(e).popFirst(5))}static empty(){return new ee(J.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===J.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return J.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new J(e.slice()))}}class te{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}te.UNKNOWN_ID=-1;function ne(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,o=Z.fromTimestamp(1e9===r?new Q(n+1,0):new Q(n,r));return new oe(o,ee.empty(),t)}function re(e){return new oe(e.readTime,e.key,-1)}class oe{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new oe(Z.min(),ee.empty(),-1)}static max(){return new oe(Z.max(),ee.empty(),-1)}}function ie(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ee.comparator(e.documentKey,t.documentKey),0!==n?n:K(e.largestBatchId,t.largestBatchId))}const ae="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class se{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function le(e){if(e.code!==O.FAILED_PRECONDITION||e.message!==ae)throw e;N("LocalStore","Unexpectedly lost primary lease")}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&T(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(e){return ce.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.reject(t)}static resolve(e){return new ce((t,n)=>{t(e)})}static reject(e){return new ce((t,n)=>{n(e)})}static waitFor(e){return new ce((t,n)=>{let r=0,o=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++o,i&&o===r&&t()},e=>n(e))}),i=!0,o===r&&t()})}static or(e){let t=ce.resolve(!1);for(const n of e)t=t.next(e=>e?ce.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new ce((n,r)=>{const o=e.length,i=new Array(o);let a=0;for(let s=0;s<o;s++){const l=s;t(e[l]).next(e=>{i[l]=e,++a,a===o&&n(i)},e=>r(e))}})}static doWhile(e,t){return new ce((n,r)=>{const o=()=>{!0===e()?t().next(()=>{o()},r):n()};o()})}}function ue(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function de(e){return"IndexedDbTransactionError"===e.name}class he{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function fe(e){return null==e}function pe(e){return 0===e&&1/e==-1/0}function me(e){return"number"==typeof e&&Number.isInteger(e)&&!pe(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}he.oe=-1;const ge=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ve=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ye=ve,be=[...ye,"indexConfiguration","indexState","indexEntries"];function xe(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function we(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function _e(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ke{constructor(e,t){this.comparator=e,this.root=t||Se.EMPTY}insert(e,t){return new ke(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Se.BLACK,null,null))}remove(e){return new ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Se.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ae(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ae(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ae(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ae(this.root,e,this.comparator,!0)}}class Ae{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Se{constructor(e,t,n,r,o){this.key=e,this.value=t,this.color=null!=n?n:Se.RED,this.left=null!=r?r:Se.EMPTY,this.right=null!=o?o:Se.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,o){return new Se(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=o?o:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const o=n(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===o?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Se.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Se.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Se.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Se.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw T();if(this.right.isRed())throw T();const e=this.left.check();if(e!==this.right.check())throw T();return e+(this.isRed()?0:1)}}Se.EMPTY=null,Se.RED=!0,Se.BLACK=!1,Se.EMPTY=new class{constructor(){this.size=0}get key(){throw T()}get value(){throw T()}get color(){throw T()}get left(){throw T()}get right(){throw T()}copy(e,t,n,r,o){return this}insert(e,t,n){return new Se(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ne{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ce(this.data.getIterator())}getIteratorFrom(e){return new Ce(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Ne))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ne(this.comparator);return t.data=e,t}}class Ce{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class je{constructor(e){this.fields=e,e.sort(X.comparator)}static empty(){return new je([])}unionWith(e){let t=new Ne(X.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new je(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return W(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Ee extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Te{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ee("Invalid base64 string: "+e):e}}(e);return new Te(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Te(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return K(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Te.EMPTY_BYTE_STRING=new Te("");const Ie=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pe(e){if(I(!!e),"string"==typeof e){let t=0;const n=Ie.exec(e);if(I(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Oe(e.seconds),nanos:Oe(e.nanos)}}function Oe(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Me(e){return"string"==typeof e?Te.fromBase64String(e):Te.fromUint8Array(e)}function Le(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Re(e){const t=e.mapValue.fields.__previous_value__;return Le(t)?Re(t):t}function De(e){const t=Pe(e.mapValue.fields.__local_write_time__.timestampValue);return new Q(t.seconds,t.nanos)}class Fe{constructor(e,t,n,r,o,i,a,s,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=o,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=s,this.useFetchStreams=l}}class ze{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ze("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ze&&e.projectId===this.projectId&&e.database===this.database}}const Be={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ue(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Le(e)?4:rt(e)?9007199254740991:tt(e)?10:11:T()}function qe(e,t){if(e===t)return!0;const n=Ue(e);if(n!==Ue(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return De(e).isEqual(De(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Pe(e.timestampValue),r=Pe(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Me(e.bytesValue).isEqual(Me(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Oe(e.geoPointValue.latitude)===Oe(t.geoPointValue.latitude)&&Oe(e.geoPointValue.longitude)===Oe(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Oe(e.integerValue)===Oe(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Oe(e.doubleValue),r=Oe(t.doubleValue);return n===r?pe(n)===pe(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return W(e.arrayValue.values||[],t.arrayValue.values||[],qe);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(xe(n)!==xe(r))return!1;for(const o in n)if(n.hasOwnProperty(o)&&(void 0===r[o]||!qe(n[o],r[o])))return!1;return!0}(e,t);default:return T()}}function Ve(e,t){return void 0!==(e.values||[]).find(e=>qe(e,t))}function He(e,t){if(e===t)return 0;const n=Ue(e),r=Ue(t);if(n!==r)return K(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return K(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Oe(e.integerValue||e.doubleValue),r=Oe(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ge(e.timestampValue,t.timestampValue);case 4:return Ge(De(e),De(t));case 5:return K(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Me(e),r=Me(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let o=0;o<n.length&&o<r.length;o++){const e=K(n[o],r[o]);if(0!==e)return e}return K(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=K(Oe(e.latitude),Oe(t.latitude));return 0!==n?n:K(Oe(e.longitude),Oe(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ke(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,o,i;const a=e.fields||{},s=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(r=s.value)||void 0===r?void 0:r.arrayValue,u=K((null===(o=null==l?void 0:l.values)||void 0===o?void 0:o.length)||0,(null===(i=null==c?void 0:c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:Ke(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Be.mapValue&&t===Be.mapValue)return 0;if(e===Be.mapValue)return 1;if(t===Be.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),o=t.fields||{},i=Object.keys(o);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=K(r[a],i[a]);if(0!==e)return e;const t=He(n[r[a]],o[i[a]]);if(0!==t)return t}return K(r.length,i.length)}(e.mapValue,t.mapValue);default:throw T()}}function Ge(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return K(e,t);const n=Pe(e),r=Pe(t),o=K(n.seconds,r.seconds);return 0!==o?o:K(n.nanos,r.nanos)}function Ke(e,t){const n=e.values||[],r=t.values||[];for(let o=0;o<n.length&&o<r.length;++o){const e=He(n[o],r[o]);if(e)return e}return K(n.length,r.length)}function We(e){return Qe(e)}function Qe(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Pe(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Me(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ee.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Qe(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const o of t)r?r=!1:n+=",",n+="".concat(o,":").concat(Qe(e.fields[o]));return n+"}"}(e.mapValue):T()}function Ze(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Ye(e){return!!e&&"integerValue"in e}function Je(e){return!!e&&"arrayValue"in e}function $e(e){return!!e&&"nullValue"in e}function Xe(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function et(e){return!!e&&"mapValue"in e}function tt(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function nt(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return we(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=nt(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=nt(e.arrayValue.values[n]);return t}return Object.assign({},e)}function rt(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class ot{constructor(e){this.value=e}static empty(){return new ot({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!et(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nt(t)}setAll(e){let t=X.emptyPath(),n={},r=[];e.forEach((e,o)=>{if(!t.isImmediateParentOf(o)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=o.popLast()}e?n[o.lastSegment()]=nt(e):r.push(o.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,n,r)}delete(e){const t=this.field(e.popLast());et(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qe(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];et(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){we(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new ot(nt(this.value))}}function it(e){const t=[];return we(e.fields,(e,n)=>{const r=new X([e]);if(et(n)){const e=it(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new je(t)}class at{constructor(e,t,n,r,o,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=o,this.data=i,this.documentState=a}static newInvalidDocument(e){return new at(e,0,Z.min(),Z.min(),Z.min(),ot.empty(),0)}static newFoundDocument(e,t,n,r){return new at(e,1,t,Z.min(),n,r,0)}static newNoDocument(e,t){return new at(e,2,t,Z.min(),Z.min(),ot.empty(),0)}static newUnknownDocument(e,t){return new at(e,3,t,Z.min(),Z.min(),ot.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Z.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ot.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ot.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof at&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new at(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class st{constructor(e,t){this.position=e,this.inclusive=t}}function lt(e,t,n){let r=0;for(let o=0;o<e.position.length;o++){const i=t[o],a=e.position[o];if(r=i.field.isKeyField()?ee.comparator(ee.fromName(a.referenceValue),n.key):He(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function ct(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!qe(e.position[n],t.position[n]))return!1;return!0}class ut{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function dt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class ht{}class ft extends ht{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new wt(e,t,n):"array-contains"===t?new St(e,n):"in"===t?new Nt(e,n):"not-in"===t?new Ct(e,n):"array-contains-any"===t?new jt(e,n):new ft(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new _t(e,n):new kt(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(He(t,this.value)):null!==t&&Ue(this.value)===Ue(t)&&this.matchesComparison(He(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return T()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pt extends ht{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new pt(e,t)}matches(e){return mt(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function mt(e){return"and"===e.op}function gt(e){return vt(e)&&mt(e)}function vt(e){for(const t of e.filters)if(t instanceof pt)return!1;return!0}function yt(e){if(e instanceof ft)return e.field.canonicalString()+e.op.toString()+We(e.value);if(gt(e))return e.filters.map(e=>yt(e)).join(",");{const t=e.filters.map(e=>yt(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function bt(e,t){return e instanceof ft?function(e,t){return t instanceof ft&&e.op===t.op&&e.field.isEqual(t.field)&&qe(e.value,t.value)}(e,t):e instanceof pt?function(e,t){return t instanceof pt&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&bt(n,t.filters[r]),!0)}(e,t):void T()}function xt(e){return e instanceof ft?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(We(e.value))}(e):e instanceof pt?function(e){return e.op.toString()+" {"+e.getFilters().map(xt).join(" ,")+"}"}(e):"Filter"}class wt extends ft{constructor(e,t,n){super(e,t,n),this.key=ee.fromName(n.referenceValue)}matches(e){const t=ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class _t extends ft{constructor(e,t){super(e,"in",t),this.keys=At("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class kt extends ft{constructor(e,t){super(e,"not-in",t),this.keys=At("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function At(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ee.fromName(e.referenceValue))}class St extends ft{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Je(t)&&Ve(t.arrayValue,this.value)}}class Nt extends ft{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ve(this.value.arrayValue,t)}}class Ct extends ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ve(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ve(this.value.arrayValue,t)}}class jt extends ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Je(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Ve(this.value.arrayValue,e))}}class Et{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=o,this.startAt=i,this.endAt=a,this.ue=null}}function Tt(e){return new Et(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function It(e){const t=P(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>yt(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),fe(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>We(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>We(e)).join(",")),t.ue=e}return t.ue}function Pt(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!dt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!bt(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ct(e.startAt,t.startAt)&&ct(e.endAt,t.endAt)}function Ot(e){return ee.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Mt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=o,this.limitType=i,this.startAt=a,this.endAt=s,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Lt(e,t,n,r,o,i,a,s){return new Mt(e,t,n,r,o,i,a,s)}function Rt(e){return new Mt(e)}function Dt(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ft(e){return null!==e.collectionGroup}function zt(e){const t=P(e);if(null===t.ce){t.ce=[];const e=new Set;for(const o of t.explicitOrderBy)t.ce.push(o),e.add(o.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Ne(X.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new ut(r,n))}),e.has(X.keyField().canonicalString())||t.ce.push(new ut(X.keyField(),n))}return t.ce}function Bt(e){const t=P(e);return t.le||(t.le=Ut(t,zt(e))),t.le}function Ut(e,t){if("F"===e.limitType)return Tt(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new ut(e.field,t)});const n=e.endAt?new st(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new st(e.startAt.position,e.startAt.inclusive):null;return Tt(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function qt(e,t){const n=e.filters.concat([t]);return new Mt(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Vt(e,t,n){return new Mt(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ht(e,t){return Pt(Bt(e),Bt(t))&&e.limitType===t.limitType}function Gt(e){return"".concat(It(Bt(e)),"|lt:").concat(e.limitType)}function Kt(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>xt(e)).join(", "),"]")),fe(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>We(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>We(e)).join(",")),"Target(".concat(t,")")}(Bt(e)),"; limitType=").concat(e.limitType,")")}function Wt(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ee.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of zt(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=lt(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,zt(e),t))&&!(e.endAt&&!function(e,t,n){const r=lt(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,zt(e),t))}(e,t)}function Qt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Zt(e){return(t,n)=>{let r=!1;for(const o of zt(e)){const e=Yt(o,t,n);if(0!==e)return e;r=r||o.field.isKeyField()}return 0}}function Yt(e,t,n){const r=e.field.isKeyField()?ee.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),o=n.data.field(e);return null!==r&&null!==o?He(r,o):T()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return T()}}class Jt{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,o]of n)if(this.equalsFn(r,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){we(this.inner,(t,n)=>{for(const[r,o]of n)e(r,o)})}isEmpty(){return _e(this.inner)}size(){return this.innerSize}}const $t=new ke(ee.comparator);function Xt(){return $t}const en=new ke(ee.comparator);function tn(){let e=en;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const o of n)e=e.insert(o.key,o);return e}function nn(e){let t=en;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function rn(){return an()}function on(){return an()}function an(){return new Jt(e=>e.toString(),(e,t)=>e.isEqual(t))}const sn=new ke(ee.comparator),ln=new Ne(ee.comparator);function cn(){let e=ln;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const o of n)e=e.add(o);return e}const un=new Ne(K);function dn(){return un}function hn(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pe(t)?"-0":t}}function fn(e){return{integerValue:""+e}}function pn(e,t){return me(t)?fn(t):hn(e,t)}class mn{constructor(){this._=void 0}}function gn(e,t,n){return e instanceof bn?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Le(t)&&(t=Re(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof xn?wn(e,t):e instanceof _n?kn(e,t):function(e,t){const n=yn(e,t),r=Sn(n)+Sn(e.Pe);return Ye(n)&&Ye(e.Pe)?fn(r):hn(e.serializer,r)}(e,t)}function vn(e,t,n){return e instanceof xn?wn(e,t):e instanceof _n?kn(e,t):n}function yn(e,t){return e instanceof An?function(e){return Ye(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class bn extends mn{}class xn extends mn{constructor(e){super(),this.elements=e}}function wn(e,t){const n=Nn(t);for(const r of e.elements)n.some(e=>qe(e,r))||n.push(r);return{arrayValue:{values:n}}}class _n extends mn{constructor(e){super(),this.elements=e}}function kn(e,t){let n=Nn(t);for(const r of e.elements)n=n.filter(e=>!qe(e,r));return{arrayValue:{values:n}}}class An extends mn{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Sn(e){return Oe(e.integerValue||e.doubleValue)}function Nn(e){return Je(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Cn{constructor(e,t){this.field=e,this.transform=t}}class jn{constructor(e,t){this.version=e,this.transformResults=t}}class En{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tn(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class In{}function Pn(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new qn(e.key,En.none()):new Dn(e.key,e.data,En.none());{const n=e.data,r=ot.empty();let o=new Ne(X.comparator);for(let e of t.fields)if(!o.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),o=o.add(e)}return new Fn(e.key,r,new je(o.toArray()),En.none())}}function On(e,t,n){e instanceof Dn?function(e,t,n){const r=e.value.clone(),o=Bn(e.fieldTransforms,t,n.transformResults);r.setAll(o),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Fn?function(e,t,n){if(!Tn(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Bn(e.fieldTransforms,t,n.transformResults),o=t.data;o.setAll(zn(e)),o.setAll(r),t.convertToFoundDocument(n.version,o).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Mn(e,t,n,r){return e instanceof Dn?function(e,t,n,r){if(!Tn(e.precondition,t))return n;const o=e.value.clone(),i=Un(e.fieldTransforms,r,t);return o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null}(e,t,n,r):e instanceof Fn?function(e,t,n,r){if(!Tn(e.precondition,t))return n;const o=Un(e.fieldTransforms,r,t),i=t.data;return i.setAll(zn(e)),i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Tn(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ln(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),o=yn(r.transform,e||null);null!=o&&(null===n&&(n=ot.empty()),n.set(r.field,o))}return n||null}function Rn(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&W(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof xn&&t instanceof xn||e instanceof _n&&t instanceof _n?W(e.elements,t.elements,qe):e instanceof An&&t instanceof An?qe(e.Pe,t.Pe):e instanceof bn&&t instanceof bn}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Dn extends In{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Fn extends In{constructor(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function zn(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Bn(e,t,n){const r=new Map;I(e.length===n.length);for(let o=0;o<n.length;o++){const i=e[o],a=i.transform,s=t.data.field(i.field);r.set(i.field,vn(a,s,n[o]))}return r}function Un(e,t,n){const r=new Map;for(const o of e){const e=o.transform,i=n.data.field(o.field);r.set(o.field,gn(e,i,t))}return r}class qn extends In{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vn extends In{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Hn{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&On(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Mn(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Mn(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=on();return this.mutations.forEach(r=>{const o=e.get(r.key),i=o.overlayedDocument;let a=this.applyToLocalView(i,o.mutatedFields);a=t.has(r.key)?null:a;const s=Pn(i,a);null!==s&&n.set(r.key,s),i.isValidDocument()||i.convertToNoDocument(Z.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),cn())}isEqual(e){return this.batchId===e.batchId&&W(this.mutations,e.mutations,(e,t)=>Rn(e,t))&&W(this.baseMutations,e.baseMutations,(e,t)=>Rn(e,t))}}class Gn{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){I(e.mutations.length===n.length);let r=sn;const o=e.mutations;for(let i=0;i<o.length;i++)r=r.insert(o[i].key,n[i].version);return new Gn(e,t,n,r)}}class Kn{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Wn{constructor(e,t){this.count=e,this.unchangedNames=t}}var Qn,Zn;function Yn(e){switch(e){default:return T();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function Jn(e){if(void 0===e)return C("GRPC error has no .code"),O.UNKNOWN;switch(e){case Qn.OK:return O.OK;case Qn.CANCELLED:return O.CANCELLED;case Qn.UNKNOWN:return O.UNKNOWN;case Qn.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Qn.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Qn.INTERNAL:return O.INTERNAL;case Qn.UNAVAILABLE:return O.UNAVAILABLE;case Qn.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Qn.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Qn.NOT_FOUND:return O.NOT_FOUND;case Qn.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Qn.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Qn.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Qn.ABORTED:return O.ABORTED;case Qn.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Qn.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Qn.DATA_LOSS:return O.DATA_LOSS;default:return T()}}(Zn=Qn||(Qn={}))[Zn.OK=0]="OK",Zn[Zn.CANCELLED=1]="CANCELLED",Zn[Zn.UNKNOWN=2]="UNKNOWN",Zn[Zn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zn[Zn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zn[Zn.NOT_FOUND=5]="NOT_FOUND",Zn[Zn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zn[Zn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zn[Zn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zn[Zn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zn[Zn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zn[Zn.ABORTED=10]="ABORTED",Zn[Zn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zn[Zn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zn[Zn.INTERNAL=13]="INTERNAL",Zn[Zn.UNAVAILABLE=14]="UNAVAILABLE",Zn[Zn.DATA_LOSS=15]="DATA_LOSS";let $n=null;function Xn(){return new TextEncoder}const er=new r([4294967295,4294967295],0);function tr(e){const t=Xn().encode(e),n=new o;return n.update(t),new Uint8Array(n.digest())}function nr(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),o=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new r([n,o],0),new r([i,a],0)]}class rr{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new or("Invalid padding: ".concat(t));if(n<0)throw new or("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new or("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new or("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=r.fromNumber(this.Ie)}Ee(e,t,n){let o=e.add(t.multiply(r.fromNumber(n)));return 1===o.compare(er)&&(o=new r([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=tr(e),[n,r]=nr(t);for(let o=0;o<this.hashCount;o++){const e=this.Ee(n,r,o);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),i=new rr(o,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.Ie)return;const t=tr(e),[n,r]=nr(t);for(let o=0;o<this.hashCount;o++){const e=this.Ee(n,r,o);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class or extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ir{constructor(e,t,n,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,ar.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ir(Z.min(),r,new ke(K),Xt(),cn())}}class ar{constructor(e,t,n,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ar(n,t,cn(),cn(),cn())}}class sr{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class lr{constructor(e,t){this.targetId=e,this.me=t}}class cr{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Te.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ur{constructor(){this.fe=0,this.ge=fr(),this.pe=Te.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=cn(),t=cn(),n=cn();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:T()}}),new ar(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=fr()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,I(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class dr{constructor(e){this.Le=e,this.Be=new Map,this.ke=Xt(),this.qe=hr(),this.Qe=new ke(K)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:T()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const o=r.target;if(Ot(o))if(0===n){const e=new ee(o.path);this.Ue(t,e,at.newNoDocument(e,Z.min()))}else I(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),o=n?this.Xe(n,e,r):1;if(0!==o){this.je(t);const e=2===o?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==$n||$n.et(function(e,t,n,r,o){var i,a,s,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===o,hashCount:null!==(i=null==h?void 0:h.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(l=null===(s=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===s?void 0:s.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,o))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:o=0}=t;let i,a;try{i=Me(n).toUint8Array()}catch(e){if(e instanceof Ee)return j("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new rr(i,r,o)}catch(e){return j(e instanceof or?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const o=this.Le.tt(),i="projects/".concat(o.projectId,"/databases/").concat(o.database,"/documents/").concat(n.path.canonicalString());e.mightContain(i)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const o=this.Je(r);if(o){if(n.current&&Ot(o.target)){const t=new ee(o.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,at.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=cn();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new ir(e,t,this.Qe,this.ke,n);return this.ke=Xt(),this.qe=hr(),this.Qe=new ke(K),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new ur,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ne(K),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||N("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ur),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function hr(){return new ke(ee.comparator)}function fr(){return new ke(ee.comparator)}const pr={asc:"ASCENDING",desc:"DESCENDING"},mr={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gr={and:"AND",or:"OR"};class vr{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function yr(e,t){return e.useProto3Json||fe(t)?t:{value:t}}function br(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function xr(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function wr(e,t){return br(e,t.toTimestamp())}function _r(e){return I(!!e),Z.fromTimestamp(function(e){const t=Pe(e);return new Q(t.seconds,t.nanos)}(e))}function kr(e,t){return Ar(e,t).canonicalString()}function Ar(e,t){const n=function(e){return new J(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Sr(e){const t=J.fromString(e);return I(Gr(t)),t}function Nr(e,t){return kr(e.databaseId,t.path)}function Cr(e,t){const n=Sr(t);if(n.get(1)!==e.databaseId.projectId)throw new M(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new M(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ee(Ir(n))}function jr(e,t){return kr(e.databaseId,t)}function Er(e){const t=Sr(e);return 4===t.length?J.emptyPath():Ir(t)}function Tr(e){return new J(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ir(e){return I(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Pr(e,t,n){return{name:Nr(e,t),fields:n.value.mapValue.fields}}function Or(e,t){let n;if(t instanceof Dn)n={update:Pr(e,t.key,t.value)};else if(t instanceof qn)n={delete:Nr(e,t.key)};else if(t instanceof Fn)n={update:Pr(e,t.key,t.data),updateMask:Hr(t.fieldMask)};else{if(!(t instanceof Vn))return T();n={verify:Nr(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof bn)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof xn)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof _n)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof An)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw T()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:wr(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:T()}(e,t.precondition)),n}function Mr(e,t){return{documents:[jr(e,t.path)]}}function Lr(e,t){const n={structuredQuery:{}},r=t.path;let o;null!==t.collectionGroup?(o=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=jr(e,o);const i=function(e){if(0!==e.length)return Vr(pt.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Ur(e.field),direction:Fr(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const s=yr(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:o}}function Rr(e){let t=Er(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){I(1===r);const e=n.from[0];e.allDescendants?o=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Dr(e);return t instanceof pt&&gt(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new ut(qr(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,fe(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new st(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new st(n,t)}(n.endAt)),Lt(t,o,a,i,s,"F",l,c)}function Dr(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=qr(e.unaryFilter.field);return ft.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=qr(e.unaryFilter.field);return ft.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=qr(e.unaryFilter.field);return ft.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=qr(e.unaryFilter.field);return ft.create(o,"!=",{nullValue:"NULL_VALUE"});default:return T()}}(e):void 0!==e.fieldFilter?function(e){return ft.create(qr(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return T()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return pt.create(e.compositeFilter.filters.map(e=>Dr(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return T()}}(e.compositeFilter.op))}(e):T()}function Fr(e){return pr[e]}function zr(e){return mr[e]}function Br(e){return gr[e]}function Ur(e){return{fieldPath:e.canonicalString()}}function qr(e){return X.fromServerFormat(e.fieldPath)}function Vr(e){return e instanceof ft?function(e){if("=="===e.op){if(Xe(e.value))return{unaryFilter:{field:Ur(e.field),op:"IS_NAN"}};if($e(e.value))return{unaryFilter:{field:Ur(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Xe(e.value))return{unaryFilter:{field:Ur(e.field),op:"IS_NOT_NAN"}};if($e(e.value))return{unaryFilter:{field:Ur(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ur(e.field),op:zr(e.op),value:e.value}}}(e):e instanceof pt?function(e){const t=e.getFilters().map(e=>Vr(e));return 1===t.length?t[0]:{compositeFilter:{op:Br(e.op),filters:t}}}(e):T()}function Hr(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Gr(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Kr{constructor(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Z.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Z.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Te.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=s}withSequenceNumber(e){return new Kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Wr{constructor(e){this.ct=e}}function Qr(e){const t=Rr({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Vt(t,t.limit,"L"):t}class Zr{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Oe(e.integerValue));else if("doubleValue"in e){const n=Oe(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),pe(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=Pe(n)),t.Rt("".concat(n.seconds||"")),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Me(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?rt(e)?this.dt(t,Number.MAX_SAFE_INTEGER):tt(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):T()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const o=e.fields||{};this.dt(t,53);const i="value",a=(null===(r=null===(n=o[i].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(Oe(a)),this.Vt(i,t),this.Tt(o[i],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),ee.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}Zr.vt=new Zr;class Yr{constructor(){this.un=new Jr}addToCollectionParentIndex(e,t){return this.un.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(oe.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(oe.min())}updateCollectionGroup(e,t,n){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class Jr{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ne(J.comparator),o=!r.has(n);return this.index[t]=r.add(n),o}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ne(J.comparator)).toArray()}}new Uint8Array(0);class $r{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new $r(e,$r.DEFAULT_COLLECTION_PERCENTILE,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}$r.DEFAULT_COLLECTION_PERCENTILE=10,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$r.DEFAULT=new $r(41943040,$r.DEFAULT_COLLECTION_PERCENTILE,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$r.DISABLED=new $r(-1,0,0);class Xr{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Xr(0)}static kn(){return new Xr(-1)}}class eo{constructor(){this.changes=new Jt(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ce.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class to{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class no{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Mn(n.mutation,e,je.empty(),Q.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,cn()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cn();const r=rn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=tn();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=rn();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,cn()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let o=Xt();const i=an(),a=an();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Fn)?o=o.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),Mn(a.mutation,t,a.mutation.getFieldMask(),Q.now())):i.set(t.key,je.empty())}),this.recalculateAndSaveOverlays(e,o).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new to(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=an();let r=new ke((e,t)=>e-t),o=cn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const o of e)o.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||je.empty();a=o.applyToLocalView(i,a),n.set(e,a);const s=(r.get(o.batchId)||cn()).add(e);r=r.insert(o.batchId,s)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),s=r.key,l=r.value,c=on();l.forEach(e=>{if(!o.has(e)){const r=Pn(t.get(e),n.get(e));null!==r&&c.set(e,r),o=o.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,s,c))}return ce.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ee.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ft(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(o=>{const i=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-o.size):ce.resolve(rn());let a=-1,s=o;return i.next(t=>ce.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),o.get(t)?ce.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{s=s.insert(t,e)}))).next(()=>this.populateOverlays(e,t,o)).next(()=>this.computeViews(e,s,t,cn())).next(e=>({batchId:a,changes:nn(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ee(t)).next(e=>{let t=tn();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const o=t.collectionGroup;let i=tn();return this.indexManager.getCollectionParents(e,o).next(a=>ce.forEach(a,a=>{const s=function(e,t){return new Mt(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(o));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(o=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,o,r))).next(e=>{o.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,at.newInvalidDocument(r)))});let n=tn();return e.forEach((e,r)=>{const i=o.get(e);void 0!==i&&Mn(i.mutation,r,je.empty(),Q.now()),Wt(t,r)&&(n=n.insert(e,r))}),n})}}class ro{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return ce.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:_r(e.createTime)}}(t)),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:Qr(e.bundledQuery),readTime:_r(e.readTime)}}(t)),ce.resolve()}}class oo{constructor(){this.overlays=new ke(ee.comparator),this.Ir=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const n=rn();return ce.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),ce.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),ce.resolve()}getOverlaysForCollection(e,t,n){const r=rn(),o=t.length+1,i=new ee(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===o&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ce.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let o=new ke((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=o.get(e.largestBatchId);null===t&&(t=rn(),o=o.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=rn(),s=o.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return ce.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Kn(t,n));let o=this.Ir.get(t);void 0===o&&(o=cn(),this.Ir.set(t,o)),this.Ir.set(t,o.add(n.key))}}class io{constructor(){this.sessionToken=Te.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ce.resolve()}}class ao{constructor(){this.Tr=new Ne(so.Er),this.dr=new Ne(so.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new so(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new so(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new ee(new J([])),n=new so(t,e),r=new so(t,e+1),o=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),o.push(e.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ee(new J([])),n=new so(t,e),r=new so(t,e+1);let o=cn();return this.dr.forEachInRange([n,r],e=>{o=o.add(e.key)}),o}containsKey(e){const t=new so(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class so{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ee.comparator(e.key,t.key)||K(e.wr,t.wr)}static Ar(e,t){return K(e.wr,t.wr)||ee.comparator(e.key,t.key)}}class lo{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ne(so.Er)}checkEmpty(e){return ce.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Hn(o,t,n,r);this.mutationQueue.push(i);for(const a of r)this.br=this.br.add(new so(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ce.resolve(i)}lookupMutationBatch(e,t){return ce.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),o=r<0?0:r;return ce.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new so(t,0),r=new so(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);o.push(t)}),ce.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ne(K);return t.forEach(e=>{const t=new so(e,0),r=new so(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),ce.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let o=n;ee.isDocumentKey(o)||(o=o.child(""));const i=new so(new ee(o),0);let a=new Ne(K);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.wr)),!0)},i),ce.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){I(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return ce.forEach(t.mutations,r=>{const o=new so(r.key,t.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new so(t,0),r=this.br.firstAfterOrEqual(n);return ce.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class co{constructor(e){this.Mr=e,this.docs=new ke(ee.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),o=r?r.size:0,i=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ce.resolve(n?n.document.mutableCopy():at.newInvalidDocument(t))}getEntries(e,t){let n=Xt();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():at.newInvalidDocument(e))}),ce.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let o=Xt();const i=t.path,a=new ee(i.child("")),s=this.docs.getIteratorFrom(a);for(;s.hasNext();){const{key:e,value:{document:a}}=s.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||ie(re(a),n)<=0||(r.has(a.key)||Wt(t,a))&&(o=o.insert(a.key,a.mutableCopy()))}return ce.resolve(o)}getAllFromCollectionGroup(e,t,n,r){T()}Or(e,t){return ce.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new uo(this)}getSize(e){return ce.resolve(this.size)}}class uo extends eo{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),ce.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class ho{constructor(e){this.persistence=e,this.Nr=new Jt(e=>It(e),Pt),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ao,this.targetCount=0,this.kr=Xr.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),ce.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Xr(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.Kn(t),ce.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,n){let r=0;const o=[];return this.Nr.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(i),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),ce.waitFor(o).next(()=>r)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return ce.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),ce.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,o=[];return r&&t.forEach(t=>{o.push(r.markPotentiallyOrphaned(e,t))}),ce.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return ce.resolve(n)}containsKey(e,t){return ce.resolve(this.Br.containsKey(t))}}class fo{constructor(e,t){this.qr={},this.overlays={},this.Qr=new he(0),this.Kr=!1,this.Kr=!0,this.$r=new io,this.referenceDelegate=e(this),this.Ur=new ho(this),this.indexManager=new Yr,this.remoteDocumentCache=function(e){return new co(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new Wr(t),this.Gr=new ro(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new oo,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new lo(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){N("MemoryPersistence","Starting transaction:",e);const r=new po(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return ce.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class po extends se{constructor(e){super(),this.currentSequenceNumber=e}}class mo{constructor(e){this.persistence=e,this.Jr=new ao,this.Yr=null}static Zr(e){return new mo(e)}get Xr(){if(this.Yr)return this.Yr;throw T()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),ce.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),ce.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Xr,n=>{const r=ee.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,Z.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return ce.or([()=>ce.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class go{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=cn(),r=cn();for(const o of t.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new go(e,t.fromCache,n,r)}}class vo{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class yo{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,l.nr)()?8:ue((0,l.ZQ)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const o={result:null};return this.Yi(e,t).next(e=>{o.result=e}).next(()=>{if(!o.result)return this.Zi(e,t,r,n).next(e=>{o.result=e})}).next(()=>{if(o.result)return;const n=new vo;return this.Xi(e,t,n).next(r=>{if(o.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>o.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(S()<=s.$b.DEBUG&&N("QueryEngine","SDK will not create cache indexes for query:",Kt(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ce.resolve()):(S()<=s.$b.DEBUG&&N("QueryEngine","Query:",Kt(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(S()<=s.$b.DEBUG&&N("QueryEngine","The SDK decides to create cache indexes for query:",Kt(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bt(t))):ce.resolve())}Yi(e,t){if(Dt(t))return ce.resolve(null);let n=Bt(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Vt(t,null,"F"),n=Bt(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const o=cn(...r);return this.Ji.getDocuments(e,o).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.ts(t,r);return this.ns(t,i,o,n.readTime)?this.Yi(e,Vt(t,null,"F")):this.rs(e,i,t,n)}))})))}Zi(e,t,n,r){return Dt(t)||r.isEqual(Z.min())?ce.resolve(null):this.Ji.getDocuments(e,n).next(o=>{const i=this.ts(t,o);return this.ns(t,i,n,r)?ce.resolve(null):(S()<=s.$b.DEBUG&&N("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Kt(t)),this.rs(e,i,t,ne(r,-1)).next(e=>e))})}ts(e,t){let n=new Ne(Zt(e));return t.forEach((t,r)=>{Wt(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(e,t,n){return S()<=s.$b.DEBUG&&N("QueryEngine","Using full collection scan to execute query:",Kt(t)),this.Ji.getDocumentsMatchingQuery(e,t,oe.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class bo{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new ke(K),this._s=new Jt(e=>It(e),Pt),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new no(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function xo(e,t,n,r){return new bo(e,t,n,r)}async function wo(e,t){const n=P(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(o=>(r=o,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const o=[],i=[];let a=cn();for(const e of r){o.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({hs:e,removedBatchIds:o,addedBatchIds:i}))})})}function _o(e){const t=P(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function ko(e,t,n){let r=cn(),o=cn();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Xt();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(o=o.add(n)),i.isNoDocument()&&i.version.isEqual(Z.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):N("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{Ps:r,Is:o}})}function Ao(e,t){const n=P(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function So(e,t){const n=P(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(o=>o?(r=o,ce.resolve(r)):n.Ur.allocateTargetId(e).next(o=>(r=new Kr(t,o,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}async function No(e,t,n){const r=P(e),o=r.os.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,o))}catch(e){if(!de(e))throw e;N("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.os=r.os.remove(t),r._s.delete(o.target)}function Co(e,t,n){const r=P(e);let o=Z.min(),i=cn();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=P(e),o=r._s.get(n);return void 0!==o?ce.resolve(r.os.get(o)):r.Ur.getTargetData(t,n)}(r,e,Bt(t)).next(t=>{if(t)return o=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?o:Z.min(),n?i:cn())).next(e=>(jo(r,Qt(t),e),{documents:e,Ts:i})))}function jo(e,t,n){let r=e.us.get(t)||Z.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}class Eo{constructor(){this.activeTargetIds=dn()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class To{constructor(){this.so=new Eo,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Eo,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Io{_o(e){}shutdown(){}}class Po{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){N("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){N("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Oo=null;function Mo(){return null===Oo?Oo=268435456+Math.round(2147483648*Math.random()):Oo++,"0x"+Oo.toString(16)}const Lo={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ro{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Do="WebChannelConnection";class Fo extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo="projects/".concat(n,"/databases/").concat(r),this.Co="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Fo(){return!1}Mo(e,t,n,r,o){const i=Mo(),a=this.xo(e,t.toUriEncodedString());N("RestConnection","Sending RPC '".concat(e,"' ").concat(i,":"),a,n);const s={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(s,r,o),this.No(e,a,s,n).then(t=>(N("RestConnection","Received RPC '".concat(e,"' ").concat(i,": "),t),t),t=>{throw j("RestConnection","RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",a,"request:",n),t})}Lo(e,t,n,r,o,i){return this.Mo(e,t,n,r,o)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+k,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=Lo[e];return"".concat(this.Do,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const o=Mo();return new Promise((i,a)=>{const s=new d;s.setWithCredentials(!0),s.listenOnce(f.COMPLETE,()=>{try{switch(s.getLastErrorCode()){case p.NO_ERROR:const t=s.getResponseJson();N(Do,"XHR for RPC '".concat(e,"' ").concat(o," received:"),JSON.stringify(t)),i(t);break;case p.TIMEOUT:N(Do,"RPC '".concat(e,"' ").concat(o," timed out")),a(new M(O.DEADLINE_EXCEEDED,"Request time out"));break;case p.HTTP_ERROR:const n=s.getStatus();if(N(Do,"RPC '".concat(e,"' ").concat(o," failed with status:"),n,"response text:",s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(t)>=0?t:O.UNKNOWN}(t.status);a(new M(e,t.message))}else a(new M(O.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new M(O.UNAVAILABLE,"Connection failed."));break;default:T()}}finally{N(Do,"RPC '".concat(e,"' ").concat(o," completed."))}});const l=JSON.stringify(r);N(Do,"RPC '".concat(e,"' ").concat(o," sending request:"),r),s.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=Mo(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=y(),a=v(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(s.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Oo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const c=o.join("");N(Do,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);const u=i.createWebChannel(c,s);let d=!1,f=!1;const p=new Ro({Io:t=>{f?N(Do,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(N(Do,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),N(Do,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},To:()=>u.close()}),b=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return b(u,h.EventType.OPEN,()=>{f||(N(Do,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),p.yo())}),b(u,h.EventType.CLOSE,()=>{f||(f=!0,N(Do,"RPC '".concat(e,"' stream ").concat(r," transport closed")),p.So())}),b(u,h.EventType.ERROR,t=>{f||(f=!0,j(Do,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),p.So(new M(O.UNAVAILABLE,"The operation could not be completed")))}),b(u,h.EventType.MESSAGE,t=>{var n;if(!f){const o=t.data[0];I(!!o);const i=o,a=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){N(Do,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=Qn[e];if(void 0!==t)return Jn(t)}(t),o=a.message;void 0===n&&(n=O.INTERNAL,o="Unknown error status: "+t+" with message "+a.message),f=!0,p.So(new M(n,o)),u.close()}else N(Do,"RPC '".concat(e,"' stream ").concat(r," received:"),o),p.bo(o)}}),b(a,g.STAT_EVENT,t=>{t.stat===m.PROXY?N(Do,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===m.NOPROXY&&N(Do,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{p.wo()},0),p}}function zo(){return"undefined"!=typeof document?document:null}function Bo(e){return new vr(e,!0)}class Uo{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&N("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class qo{constructor(e,t,n,r,o,i,a,s){this.ui=e,this.Ho=n,this.Jo=r,this.connection=o,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=s,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Uo(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===O.RESOURCE_EXHAUSTED?(C(t.toString()),C("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===O.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)},t=>{e(()=>{const e=new M(O.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return N("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(N("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Vo extends qo{constructor(e,t,n,r,o,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:T()}(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(I(void 0===t||"string"==typeof t),Te.fromBase64String(t||"")):(I(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Te.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&function(e){const t=void 0===e.code?O.UNKNOWN:Jn(e.code);return new M(t,e.message||"")}(a);n=new cr(r,o,i,s||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=Cr(e,r.document.name),i=_r(r.document.updateTime),a=r.document.createTime?_r(r.document.createTime):Z.min(),s=new ot({mapValue:{fields:r.document.fields}}),l=at.newFoundDocument(o,i,a,s),c=r.targetIds||[],u=r.removedTargetIds||[];n=new sr(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=Cr(e,r.document),i=r.readTime?_r(r.readTime):Z.min(),a=at.newNoDocument(o,i),s=r.removedTargetIds||[];n=new sr([],s,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=Cr(e,r.document),i=r.removedTargetIds||[];n=new sr([],i,o,null)}else{if(!("filter"in t))return T();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:o}=e,i=new Wn(r,o),a=e.targetId;n=new lr(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Z.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Z.min():t.readTime?_r(t.readTime):Z.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=Tr(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Ot(r)?{documents:Mr(e,r)}:{query:Lr(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=xr(e,t.resumeToken);const r=yr(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Z.min())>0){n.readTime=br(e,t.snapshotVersion.toTimestamp());const r=yr(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return T()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=Tr(this.serializer),t.removeTarget=e,this.a_(t)}}class Ho extends qo{constructor(e,t,n,r,o,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return I(!!e.streamToken),this.lastStreamToken=e.streamToken,I(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){I(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(I(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?_r(e.updateTime):_r(t);return n.isEqual(Z.min())&&(n=_r(t)),new jn(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=_r(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=Tr(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Or(this.serializer,e))};this.a_(t)}}class Go extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new M(O.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(o=>{let[i,a]=o;return this.connection.Mo(e,Ar(t,n),r,i,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new M(O.UNKNOWN,e.toString())})}Lo(e,t,n,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,s]=i;return this.connection.Lo(e,Ar(t,n),r,a,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new M(O.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Ko{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.D_?(C(t),this.D_=!1):N("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Wo{constructor(e,t,n,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(e=>{n.enqueueAndForget(async()=>{ni(this)&&(N("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=P(e);t.L_.add(4),await Zo(t),t.q_.set("Unknown"),t.L_.delete(4),await Qo(t)}(this))})}),this.q_=new Ko(n,r)}}async function Qo(e){if(ni(e))for(const t of e.B_)await t(!0)}async function Zo(e){for(const t of e.B_)await t(!1)}function Yo(e,t){const n=P(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),ti(n)?ei(n):wi(n).r_()&&$o(n,t))}function Jo(e,t){const n=P(e),r=wi(n);n.N_.delete(t),r.r_()&&Xo(n,t),0===n.N_.size&&(r.r_()?r.o_():ni(n)&&n.q_.set("Unknown"))}function $o(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Z.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}wi(e).A_(t)}function Xo(e,t){e.Q_.xe(t),wi(e).R_(t)}function ei(e){e.Q_=new dr({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),wi(e).start(),e.q_.v_()}function ti(e){return ni(e)&&!wi(e).n_()&&e.N_.size>0}function ni(e){return 0===P(e).L_.size}function ri(e){e.Q_=void 0}async function oi(e){e.q_.set("Online")}async function ii(e){e.N_.forEach((t,n)=>{$o(e,t)})}async function ai(e,t){ri(e),ti(e)?(e.q_.M_(t),ei(e)):e.q_.set("Unknown")}async function si(e,t,n){if(e.q_.set("Online"),t instanceof cr&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){N("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await li(e,n)}else if(t instanceof sr?e.Q_.Ke(t):t instanceof lr?e.Q_.He(t):e.Q_.We(t),!n.isEqual(Z.min()))try{const t=await _o(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const o=e.N_.get(r);o&&e.N_.set(r,o.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(Te.EMPTY_BYTE_STRING,r.snapshotVersion)),Xo(e,t);const o=new Kr(r.target,t,n,r.sequenceNumber);$o(e,o)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){N("RemoteStore","Failed to raise snapshot:",t),await li(e,t)}}async function li(e,t,n){if(!de(t))throw t;e.L_.add(1),await Zo(e),e.q_.set("Offline"),n||(n=()=>_o(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{N("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await Qo(e)})}function ci(e,t){return t().catch(n=>li(e,n,t))}async function ui(e){const t=P(e),n=_i(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;di(t);)try{const e=await Ao(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,hi(t,e)}catch(e){await li(t,e)}fi(t)&&pi(t)}function di(e){return ni(e)&&e.O_.length<10}function hi(e,t){e.O_.push(t);const n=_i(e);n.r_()&&n.V_&&n.m_(t.mutations)}function fi(e){return ni(e)&&!_i(e).n_()&&e.O_.length>0}function pi(e){_i(e).start()}async function mi(e){_i(e).p_()}async function gi(e){const t=_i(e);for(const n of e.O_)t.m_(n.mutations)}async function vi(e,t,n){const r=e.O_.shift(),o=Gn.from(r,t,n);await ci(e,()=>e.remoteSyncer.applySuccessfulWrite(o)),await ui(e)}async function yi(e,t){t&&_i(e).V_&&await async function(e,t){if(function(e){return Yn(e)&&e!==O.ABORTED}(t.code)){const n=e.O_.shift();_i(e).s_(),await ci(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await ui(e)}}(e,t),fi(e)&&pi(e)}async function bi(e,t){const n=P(e);n.asyncQueue.verifyOperationInProgress(),N("RemoteStore","RemoteStore received new credentials");const r=ni(n);n.L_.add(3),await Zo(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await Qo(n)}async function xi(e,t){const n=P(e);t?(n.L_.delete(2),await Qo(n)):t||(n.L_.add(2),await Zo(n),n.q_.set("Unknown"))}function wi(e){return e.K_||(e.K_=function(e,t,n){const r=P(e);return r.w_(),new Vo(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:oi.bind(null,e),Ro:ii.bind(null,e),mo:ai.bind(null,e),d_:si.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),ti(e)?ei(e):e.q_.set("Unknown")):(await e.K_.stop(),ri(e))})),e.K_}function _i(e){return e.U_||(e.U_=function(e,t,n){const r=P(e);return r.w_(),new Ho(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:mi.bind(null,e),mo:yi.bind(null,e),f_:gi.bind(null,e),g_:vi.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await ui(e)):(await e.U_.stop(),e.O_.length>0&&(N("RemoteStore","Stopping write stream with ".concat(e.O_.length," pending writes")),e.O_=[]))})),e.U_}class ki{constructor(e,t,n,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=o,this.deferred=new L,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,o){const i=Date.now()+n,a=new ki(e,t,i,r,o);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new M(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ai(e,t){if(C("AsyncQueue","".concat(t,": ").concat(e)),de(e))return new M(O.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Si{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ee.comparator(t.key,n.key):(e,t)=>ee.comparator(e.key,t.key),this.keyedMap=tn(),this.sortedSet=new ke(this.comparator)}static emptySet(e){return new Si(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Si))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Si;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Ni{constructor(){this.W_=new ke(ee.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):T():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class Ci{constructor(e,t,n,r,o,i,a,s,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=o,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=s,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,o){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Ci(e,t,Si.emptySet(t),i,n,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ht(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class ji{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Ei{constructor(){this.queries=Ti(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=P(e),r=n.queries;n.queries=Ti(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new M(O.ABORTED,"Firestore shutting down"))}}function Ti(){return new Jt(e=>Gt(e),Ht)}async function Ii(e,t){const n=P(e);let r=3;const o=t.query;let i=n.queries.get(o);i?!i.H_()&&t.J_()&&(r=2):(i=new ji,r=t.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(o,!0);break;case 1:i.z_=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(e){const n=Ai(e,"Initialization of query '".concat(Kt(t.query),"' failed"));return void t.onError(n)}n.queries.set(o,i),i.j_.push(t),t.Z_(n.onlineState),i.z_&&t.X_(i.z_)&&Li(n)}async function Pi(e,t){const n=P(e),r=t.query;let o=3;const i=n.queries.get(r);if(i){const e=i.j_.indexOf(t);e>=0&&(i.j_.splice(e,1),0===i.j_.length?o=t.J_()?0:1:!i.H_()&&t.J_()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Oi(e,t){const n=P(e);let r=!1;for(const o of t){const e=o.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(o)&&(r=!0);t.z_=o}}r&&Li(n)}function Mi(e,t,n){const r=P(e),o=r.queries.get(t);if(o)for(const i of o.j_)i.onError(n);r.queries.delete(t)}function Li(e){e.Y_.forEach(e=>{e.next()})}var Ri,Di;(Di=Ri||(Ri={})).ea="default",Di.Cache="cache";class Fi{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ci(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=Ci.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ri.Cache}}class zi{constructor(e){this.key=e}}class Bi{constructor(e){this.key=e}}class Ui{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=cn(),this.mutatedKeys=cn(),this.Aa=Zt(e),this.Ra=new Si(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new Ni,r=t?t.Ra:this.Ra;let o=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const s="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Wt(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(s&&this.Aa(u,s)>0||l&&this.Aa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(s||l)&&(a=!0)),f&&(u?(i=i.add(u),o=h?o.add(e):o.delete(e)):(i=i.delete(e),o=o.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),o=o.delete(e.key),n.track({type:1,doc:e})}return{Ra:i,fa:n,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return T()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const a=t&&!r?this.ya():[],s=0===this.da.size&&this.current&&!r?1:0,l=s!==this.Ea;return this.Ea=s,0!==i.length||l?{snapshot:new Ci(this.query,e.Ra,o,i,e.mutatedKeys,0===s,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ni,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=cn(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new Bi(e))}),this.da.forEach(n=>{e.has(n)||t.push(new zi(n))}),t}ba(e){this.Ta=e.Ts,this.da=cn();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ci.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class qi{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Vi{constructor(e){this.key=e,this.va=!1}}class Hi{constructor(e,t,n,r,o,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new Jt(e=>Gt(e),Ht),this.Ma=new Map,this.xa=new Set,this.Oa=new ke(ee.comparator),this.Na=new Map,this.La=new ao,this.Ba={},this.ka=new Map,this.qa=Xr.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function Gi(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=ha(e);let o;const i=r.Fa.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),o=i.view.Da()):o=await Wi(r,t,n,!0),o}async function Ki(e,t){const n=ha(e);await Wi(n,t,!0,!1)}async function Wi(e,t,n,r){const o=await So(e.localStore,Bt(t)),i=o.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let s;return r&&(s=await Qi(e,t,i,"current"===a,o.resumeToken)),e.isPrimaryClient&&n&&Yo(e.remoteStore,o),s}async function Qi(e,t,n,r,o){e.Ka=(t,n,r)=>async function(e,t,n,r){let o=t.view.ma(n);o.ns&&(o=await Co(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ma(n,o)}));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),s=t.view.applyChanges(o,e.isPrimaryClient,i,a);return aa(e,t.targetId,s.wa),s.snapshot}(e,t,n,r);const i=await Co(e.localStore,t,!0),a=new Ui(t,i.Ts),s=a.ma(i.documents),l=ar.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,o),c=a.applyChanges(s,e.isPrimaryClient,l);aa(e,n,c.wa);const u=new qi(t,n,a);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function Zi(e,t,n){const r=P(e),o=r.Fa.get(t),i=r.Ma.get(o.targetId);if(i.length>1)return r.Ma.set(o.targetId,i.filter(e=>!Ht(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await No(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Jo(r.remoteStore,o.targetId),oa(r,o.targetId)}).catch(le)):(oa(r,o.targetId),await No(r.localStore,o.targetId,!0))}async function Yi(e,t){const n=P(e),r=n.Fa.get(t),o=n.Ma.get(r.targetId);n.isPrimaryClient&&1===o.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Jo(n.remoteStore,r.targetId))}async function Ji(e,t){const n=P(e);try{const e=await function(e,t){const n=P(e),r=t.snapshotVersion;let o=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.cs.newChangeBuffer({trackRemovals:!0});o=n.os;const a=[];t.targetChanges.forEach((i,s)=>{const l=o.get(s);if(!l)return;a.push(n.Ur.removeMatchingKeys(e,i.removedDocuments,s).next(()=>n.Ur.addMatchingKeys(e,i.addedDocuments,s)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(Te.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),o=o.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,i)&&a.push(n.Ur.updateTargetData(e,c))});let s=Xt(),l=cn();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(ko(e,i,t.documentUpdates).next(e=>{s=e.Ps,l=e.Is})),!r.isEqual(Z.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return ce.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,s,l)).next(()=>s)}).then(e=>(n.os=o,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(I(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?I(r.va):e.removedDocuments.size>0&&(I(r.va),r.va=!1))}),await ca(n,e,t)}catch(e){await le(e)}}function $i(e,t,n){const r=P(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const o=r.view.Z_(t);o.snapshot&&e.push(o.snapshot)}),function(e,t){const n=P(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const o of n.j_)o.Z_(t)&&(r=!0)}),r&&Li(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Xi(e,t,n){const r=P(e);r.sharedClientState.updateQueryState(t,"rejected",n);const o=r.Na.get(t),i=o&&o.key;if(i){let e=new ke(ee.comparator);e=e.insert(i,at.newNoDocument(i,Z.min()));const n=cn().add(i),o=new ir(Z.min(),new Map,new ke(K),e,n);await Ji(r,o),r.Oa=r.Oa.remove(i),r.Na.delete(t),la(r)}else await No(r.localStore,t,!1).then(()=>oa(r,t,n)).catch(le)}async function ea(e,t){const n=P(e),r=t.batch.batchId;try{const e=await function(e,t){const n=P(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const o=n.batch,i=o.keys();let a=ce.resolve();return i.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);I(null!==i),t.version.compareTo(i)<0&&(o.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,o))}(n,e,t,o).next(()=>o.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=cn();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);ra(n,r,null),na(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ca(n,e)}catch(e){await le(e)}}async function ta(e,t,n){const r=P(e);try{const e=await function(e,t){const n=P(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(I(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);ra(r,t,n),na(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ca(r,e)}catch(n){await le(n)}}function na(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function ra(e,t,n){const r=P(e);let o=r.Ba[r.currentUser.toKey()];if(o){const e=o.get(t);e&&(n?e.reject(n):e.resolve(),o=o.remove(t)),r.Ba[r.currentUser.toKey()]=o}}function oa(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||ia(e,t)})}function ia(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(Jo(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),la(e))}function aa(e,t,n){for(const r of n)r instanceof zi?(e.La.addReference(r.key,t),sa(e,r)):r instanceof Bi?(N("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||ia(e,r.key)):T()}function sa(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(N("SyncEngine","New document in limbo: "+n),e.xa.add(r),la(e))}function la(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new ee(J.fromString(t)),r=e.qa.next();e.Na.set(r,new Vi(n)),e.Oa=e.Oa.insert(n,r),Yo(e.remoteStore,new Kr(Bt(Rt(n.path)),r,"TargetPurposeLimboResolution",he.oe))}}async function ca(e,t,n){const r=P(e),o=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((e,s)=>{a.push(r.Ka(s,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const o=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(s.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(s.targetId,o?"current":"not-current")}if(e){o.push(e);const t=go.Wi(s.targetId,e);i.push(t)}}))}),await Promise.all(a),r.Ca.d_(o),await async function(e,t){const n=P(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>ce.forEach(t,t=>ce.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>ce.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!de(e))throw e;N("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,o=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,o)}}}(r.localStore,i))}async function ua(e,t){const n=P(e);if(!n.currentUser.isEqual(t)){N("SyncEngine","User change. New user:",t.toKey());const e=await wo(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new M(O.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ca(n,e.hs)}}function da(e,t){const n=P(e),r=n.Na.get(t);if(r&&r.va)return cn().add(r.key);{let e=cn();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function ha(e){const t=P(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ji.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=da.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Xi.bind(null,t),t.Ca.d_=Oi.bind(null,t.eventManager),t.Ca.$a=Mi.bind(null,t.eventManager),t}function fa(e){const t=P(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ea.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ta.bind(null,t),t}class pa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bo(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return xo(this.persistence,new yo,e.initialUser,this.serializer)}Ga(e){return new fo(mo.Zr,this.serializer)}Wa(e){return new To}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pa.provider={build:()=>new pa};class ma{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>$i(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=ua.bind(null,this.syncEngine),await xi(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ei}createDatastore(e){const t=Bo(e.databaseInfo.databaseId),n=function(e){return new Fo(e)}(e.databaseInfo);return function(e,t,n,r){return new Go(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,o){return new Wo(e,t,n,r,o)}(this.localStore,this.datastore,e.asyncQueue,e=>$i(this.syncEngine,e,0),Po.D()?new Po:new Io)}createSyncEngine(e,t){return function(e,t,n,r,o,i,a){const s=new Hi(e,t,n,r,o,i);return a&&(s.Qa=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=P(e);N("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await Zo(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}ma.provider={build:()=>new ma};class ga{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):C("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class va{constructor(e,t,n,r,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=_.UNAUTHENTICATED,this.clientId=G.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,async e=>{N("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(N("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new L;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Ai(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function ya(e,t){e.asyncQueue.verifyOperationInProgress(),N("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await wo(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function ba(e,t){e.asyncQueue.verifyOperationInProgress();const n=await xa(e);N("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>bi(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>bi(t.remoteStore,n)),e._onlineComponents=t}async function xa(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){N("FirestoreClient","Using user provided OfflineComponentProvider");try{await ya(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===O.FAILED_PRECONDITION||e.code===O.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;j("Error using user provided cache. Falling back to memory cache: "+n),await ya(e,new pa)}}else N("FirestoreClient","Using default OfflineComponentProvider"),await ya(e,new pa);return e._offlineComponents}async function wa(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(N("FirestoreClient","Using user provided OnlineComponentProvider"),await ba(e,e._uninitializedComponentsProvider._online)):(N("FirestoreClient","Using default OnlineComponentProvider"),await ba(e,new ma))),e._onlineComponents}function _a(e){return wa(e).then(e=>e.syncEngine)}async function ka(e){const t=await wa(e),n=t.eventManager;return n.onListen=Gi.bind(null,t.syncEngine),n.onUnlisten=Zi.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Ki.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Yi.bind(null,t.syncEngine),n}function Aa(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new L;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,o){const i=new ga({next:s=>{i.Za(),t.enqueueAndForget(()=>Pi(e,a));const l=s.docs.has(n);!l&&s.fromCache?o.reject(new M(O.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&s.fromCache&&r&&"server"===r.source?o.reject(new M(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):o.resolve(s)},error:e=>o.reject(e)}),a=new Fi(Rt(n.path),i,{includeMetadataChanges:!0,_a:!0});return Ii(e,a)}(await ka(e),e.asyncQueue,t,n,r)),r.promise}function Sa(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new L;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,o){const i=new ga({next:n=>{i.Za(),t.enqueueAndForget(()=>Pi(e,a)),n.fromCache&&"server"===r.source?o.reject(new M(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):o.resolve(n)},error:e=>o.reject(e)}),a=new Fi(n,i,{includeMetadataChanges:!0,_a:!0});return Ii(e,a)}(await ka(e),e.asyncQueue,t,n,r)),r.promise}function Na(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Ca=new Map;function ja(e,t,n){if(!n)throw new M(O.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Ea(e){if(!ee.isDocumentKey(e))throw new M(O.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ta(e){if(ee.isDocumentKey(e))throw new M(O.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ia(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":T()}function Pa(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new M(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ia(e);throw new M(O.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Oa(e,t){if(t<=0)throw new M(O.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Ma{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new M(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new M(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new M(O.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Na(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new M(O.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new M(O.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new M(O.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class La{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ma({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new M(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new M(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ma(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new D;switch(e.type){case"firstParty":return new U(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new M(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ca.get(e);t&&(N("ComponentProvider","Removing Datastore"),Ca.delete(e),t.terminate())}(this),Promise.resolve()}}class Ra{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ra(this.firestore,e,this._query)}}class Da{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Da(this.firestore,e,this._key)}}class Fa extends Ra{constructor(e,t,n){super(e,t,Rt(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Da(this.firestore,null,new ee(e))}withConverter(e){return new Fa(this.firestore,e,this._path)}}function za(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];if(e=(0,l.Ku)(e),ja("collection","path",t),e instanceof La){const n=J.fromString(t,...r);return Ta(n),new Fa(e,null,n)}{if(!(e instanceof Da||e instanceof Fa))throw new M(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(J.fromString(t,...r));return Ta(n),new Fa(e.firestore,null,n)}}function Ba(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];if(e=(0,l.Ku)(e),1===arguments.length&&(t=G.newId()),ja("doc","path",t),e instanceof La){const n=J.fromString(t,...r);return Ea(n),new Da(e,null,new ee(n))}{if(!(e instanceof Da||e instanceof Fa))throw new M(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(J.fromString(t,...r));return Ea(n),new Da(e.firestore,e instanceof Fa?e.converter:null,new ee(n))}}class Ua{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Uo(this,"async_queue_retry"),this.Vu=()=>{const e=zo();e&&N("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=zo();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=zo();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new L;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!de(e))throw e;N("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw C("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=ki.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&T()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function qa(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Va extends La{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Ua,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ua(e),this._firestoreClient=void 0,await e}}}function Ha(e,t){const n="object"==typeof e?e:(0,i.Sx)(),r="string"==typeof e?e:t||"(default)",o=(0,i.j6)(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const e=(0,l.yU)("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var o;const i=(e=Pa(e,La))._getSettings(),a="".concat(t,":").concat(n);if("firestore.googleapis.com"!==i.host&&i.host!==a&&j("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=_.MOCK_USER;else{t=(0,l.Fy)(r.mockUserToken,null===(o=e._app)||void 0===o?void 0:o.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new M(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new _(i)}e._authCredentials=new F(new R(t,n))}}(o,...e)}return o}function Ga(e){if(e._terminated)throw new M(O.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Ka(e),e._firestoreClient}function Ka(e){var t,n,r;const o=e._freezeSettings(),i=function(e,t,n,r){return new Fe(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Na(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,o);e._componentsProvider||(null===(n=o.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=o.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),e._firestoreClient=new va(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Wa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wa(Te.fromBase64String(e))}catch(e){throw new M(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Wa(Te.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Qa{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new M(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new X(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function Za(){return new Qa("__name__")}class Ya{constructor(e){this._methodName=e}}class Ja{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new M(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new M(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return K(this._lat,e._lat)||K(this._long,e._long)}}class $a{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Xa=/^__.*__$/;class es{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Fn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Dn(e,this.data,t,this.fieldTransforms)}}class ts{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Fn(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ns(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw T()}}class rs{constructor(e,t,n,r,o,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===o&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new rs(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return bs(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(ns(this.Cu)&&Xa.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class os{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Bo(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new rs({Cu:e,methodName:t,qu:n,path:X.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function is(e){const t=e._freezeSettings(),n=Bo(e._databaseId);return new os(e._databaseId,!!t.ignoreUndefinedProperties,n)}function as(e,t,n,r,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Qu(i.merge||i.mergeFields?2:0,t,n,o);ms("Data must be an object, but it was:",a,r);const s=fs(r,a);let l,c;if(i.merge)l=new je(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const o=gs(t,r,n);if(!a.contains(o))throw new M(O.INVALID_ARGUMENT,"Field '".concat(o,"' is specified in your field mask but missing from your input data."));xs(e,o)||e.push(o)}l=new je(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new es(new ot(s),l,c)}class ss extends Ya{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Bu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ss}}class ls extends Ya{_toFieldTransform(e){return new Cn(e.path,new bn)}isEqual(e){return e instanceof ls}}function cs(e,t,n,r){const o=e.Qu(1,t,n);ms("Data must be an object, but it was:",o,r);const i=[],a=ot.empty();we(r,(e,r)=>{const s=ys(t,e,n);r=(0,l.Ku)(r);const c=o.Nu(s);if(r instanceof ss)i.push(s);else{const e=hs(r,c);null!=e&&(i.push(s),a.set(s,e))}});const s=new je(i);return new ts(a,s,o.fieldTransforms)}function us(e,t,n,r,o,i){const a=e.Qu(1,t,n),s=[gs(t,r,n)],c=[o];if(i.length%2!=0)throw new M(O.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let l=0;l<i.length;l+=2)s.push(gs(t,i[l])),c.push(i[l+1]);const u=[],d=ot.empty();for(let f=s.length-1;f>=0;--f)if(!xs(u,s[f])){const e=s[f];let t=c[f];t=(0,l.Ku)(t);const n=a.Nu(e);if(t instanceof ss)u.push(e);else{const r=hs(t,n);null!=r&&(u.push(e),d.set(e,r))}}const h=new je(u);return new ts(d,h,a.fieldTransforms)}function ds(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return hs(n,e.Qu(r?4:3,t))}function hs(e,t){if(ps(e=(0,l.Ku)(e)))return ms("Unsupported field value:",t,e),fs(e,t);if(e instanceof Ya)return function(e,t){if(!ns(t.Cu))throw t.Bu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Bu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const o of e){let e=hs(o,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,l.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return pn(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Q.fromDate(e);return{timestampValue:br(t.serializer,n)}}if(e instanceof Q){const n=new Q(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:br(t.serializer,n)}}if(e instanceof Ja)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Wa)return{bytesValue:xr(t.serializer,e._byteString)};if(e instanceof Da){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:kr(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof $a)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return hn(t.serializer,e)})}}}}}}(e,t);throw t.Bu("Unsupported field value: ".concat(Ia(e)))}(e,t)}function fs(e,t){const n={};return _e(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):we(e,(e,r)=>{const o=hs(r,t.Mu(e));null!=o&&(n[e]=o)}),{mapValue:{fields:n}}}function ps(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Q||e instanceof Ja||e instanceof Wa||e instanceof Da||e instanceof Ya||e instanceof $a)}function ms(e,t,n){if(!ps(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Ia(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function gs(e,t,n){if((t=(0,l.Ku)(t))instanceof Qa)return t._internalPath;if("string"==typeof t)return ys(e,t);throw bs("Field path arguments must be of type string or ",e,!1,void 0,n)}const vs=new RegExp("[~\\*/\\[\\]]");function ys(e,t,n){if(t.search(vs)>=0)throw bs("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Qa(...t.split("."))._internalPath}catch(r){throw bs("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function bs(e,t,n,r,o){const i=r&&!r.isEmpty(),a=void 0!==o;let s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(o)),l+=")"),new M(O.INVALID_ARGUMENT,s+e+l)}function xs(e,t){return e.some(e=>e.isEqual(t))}class ws{constructor(e,t,n,r,o){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Da(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new _s(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ks("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class _s extends ws{data(){return super.data()}}function ks(e,t){return"string"==typeof t?ys(e,t):t instanceof Qa?t._internalPath:t._delegate._internalPath}function As(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new M(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ss{}class Ns extends Ss{}function Cs(e,t){let n=[];for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];t instanceof Ss&&n.push(t),n=n.concat(o),function(e){const t=e.filter(e=>e instanceof Ts).length,n=e.filter(e=>e instanceof js).length;if(t>1||t>0&&n>0)throw new M(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class js extends Ns{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new js(e,t,n)}_apply(e){const t=this._parse(e);return Ds(e._query,t),new Ra(e.firestore,e.converter,qt(e._query,t))}_parse(e){const t=is(e.firestore),n=function(e,t,n,r,o,i,a){let s;if(o.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new M(O.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){Rs(a,i);const t=[];for(const n of a)t.push(Ls(r,e,n));s={arrayValue:{values:t}}}else s=Ls(r,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Rs(a,i),s=ds(n,t,a,"in"===i||"not-in"===i);return ft.create(o,i,s)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Es(e,t,n){const r=t,o=ks("where",e);return js._create(o,r,n)}class Ts extends Ss{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ts(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:pt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const o of r)Ds(n,o),n=qt(n,o)}(e._query,t),new Ra(e.firestore,e.converter,qt(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Is extends Ns{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Is(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new M(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new M(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ut(t,n)}(e._query,this._field,this._direction);return new Ra(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Mt(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Ps(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=ks("orderBy",e);return Is._create(n,t)}class Os extends Ns{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Os(e,t,n)}_apply(e){return new Ra(e.firestore,e.converter,Vt(e._query,this._limit,this._limitType))}}function Ms(e){return Oa("limit",e),Os._create("limit",e,"F")}function Ls(e,t,n){if("string"==typeof(n=(0,l.Ku)(n))){if(""===n)throw new M(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ft(t)&&-1!==n.indexOf("/"))throw new M(O.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(J.fromString(n));if(!ee.isDocumentKey(r))throw new M(O.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ze(e,new ee(r))}if(n instanceof Da)return Ze(e,n._key);throw new M(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Ia(n),"."))}function Rs(e,t){if(!Array.isArray(e)||0===e.length)throw new M(O.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Ds(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new M(O.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new M(O.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Fs{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ue(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Me(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw T()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return we(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const o=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>Oe(e.doubleValue));return new $a(o)}convertGeoPoint(e){return new Ja(Oe(e.latitude),Oe(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Re(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(De(e));default:return null}}convertTimestamp(e){const t=Pe(e);return new Q(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=J.fromString(e);I(Gr(n));const r=new ze(n.get(1),n.get(3)),o=new ee(n.popFirst(5));return r.isEqual(t)||C("Document ".concat(o," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),o}}function zs(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Bs{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Us extends ws{constructor(e,t,n,r,o,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new qs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(ks("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class qs extends Us{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Vs{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Bs(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new qs(this._firestore,this._userDataWriter,n.key,n,new Bs(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new M(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new qs(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Bs(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new qs(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Bs(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let o=-1,i=-1;return 0!==t.type&&(o=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:Hs(t.type),doc:r,oldIndex:o,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Hs(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return T()}}function Gs(e){e=Pa(e,Da);const t=Pa(e.firestore,Va);return Aa(Ga(t),e._key).then(n=>el(t,e,n))}class Ks extends Fs{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Da(this.firestore,null,t)}}function Ws(e){e=Pa(e,Ra);const t=Pa(e.firestore,Va),n=Ga(t),r=new Ks(t);return As(e._query),Sa(n,e._query).then(n=>new Vs(t,r,e,n))}function Qs(e,t,n){e=Pa(e,Da);const r=Pa(e.firestore,Va),o=zs(e.converter,t,n);return Xs(r,[as(is(r),"setDoc",e._key,o,null!==e.converter,n).toMutation(e._key,En.none())])}function Zs(e,t,n){e=Pa(e,Da);const r=Pa(e.firestore,Va),o=is(r);let i;for(var a=arguments.length,s=new Array(a>3?a-3:0),c=3;c<a;c++)s[c-3]=arguments[c];return i="string"==typeof(t=(0,l.Ku)(t))||t instanceof Qa?us(o,"updateDoc",e._key,t,n,s):cs(o,"updateDoc",e._key,t),Xs(r,[i.toMutation(e._key,En.exists(!0))])}function Ys(e){return Xs(Pa(e.firestore,Va),[new qn(e._key,En.none())])}function Js(e,t){const n=Pa(e.firestore,Va),r=Ba(e),o=zs(e.converter,t);return Xs(n,[as(is(e.firestore),"addDoc",r._key,o,null!==e.converter,{}).toMutation(r._key,En.exists(!1))]).then(()=>r)}function $s(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o,i,a;e=(0,l.Ku)(e);let s={includeMetadataChanges:!1,source:"default"},c=0;"object"!=typeof n[c]||qa(n[c])||(s=n[c],c++);const u={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(qa(n[c])){const e=n[c];n[c]=null===(o=e.next)||void 0===o?void 0:o.bind(e),n[c+1]=null===(i=e.error)||void 0===i?void 0:i.bind(e),n[c+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let d,h,f;if(e instanceof Da)h=Pa(e.firestore,Va),f=Rt(e._key.path),d={next:t=>{n[c]&&n[c](el(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=Pa(e,Ra);h=Pa(t.firestore,Va),f=t._query;const r=new Ks(h);d={next:e=>{n[c]&&n[c](new Vs(h,r,t,e))},error:n[c+1],complete:n[c+2]},As(e._query)}return function(e,t,n,r){const o=new ga(r),i=new Fi(t,o,n);return e.asyncQueue.enqueueAndForget(async()=>Ii(await ka(e),i)),()=>{o.Za(),e.asyncQueue.enqueueAndForget(async()=>Pi(await ka(e),i))}}(Ga(h),f,u,d)}function Xs(e,t){return function(e,t){const n=new L;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=fa(e);try{const e=await function(e,t){const n=P(e),r=Q.now(),o=t.reduce((e,t)=>e.add(t.key),cn());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let s=Xt(),l=cn();return n.cs.getEntries(e,o).next(e=>{s=e,s.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,s)).next(o=>{i=o;const a=[];for(const e of t){const t=Ln(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new Fn(e.key,t,it(t.value.mapValue),En.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:nn(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new ke(K)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await ca(r,e.changes),await ui(r.remoteStore)}catch(e){const t=Ai(e,"Failed to persist write");n.reject(t)}}(await _a(e),t,n)),n.promise}(Ga(e),t)}function el(e,t,n){const r=n.docs.get(t._key),o=new Ks(e);return new Us(e,o,t._key,r,new Bs(n.hasPendingWrites,n.fromCache),t.converter)}class tl{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=is(e)}set(e,t,n){this._verifyNotCommitted();const r=nl(e,this._firestore),o=zs(r.converter,t,n),i=as(this._dataReader,"WriteBatch.set",r._key,o,null!==r.converter,n);return this._mutations.push(i.toMutation(r._key,En.none())),this}update(e,t,n){this._verifyNotCommitted();const r=nl(e,this._firestore);let o;for(var i=arguments.length,a=new Array(i>3?i-3:0),s=3;s<i;s++)a[s-3]=arguments[s];return o="string"==typeof(t=(0,l.Ku)(t))||t instanceof Qa?us(this._dataReader,"WriteBatch.update",r._key,t,n,a):cs(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(o.toMutation(r._key,En.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=nl(e,this._firestore);return this._mutations=this._mutations.concat(new qn(t._key,En.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new M(O.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function nl(e,t){if((e=(0,l.Ku)(e)).firestore!==t)throw new M(O.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function rl(){return new ls("serverTimestamp")}function ol(e){return Ga(e=Pa(e,Va)),new tl(e,t=>Xs(e,t))}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){k=e}(i.MF),(0,i.om)(new a.uA("firestore",(e,n)=>{let{instanceIdentifier:r,options:o}=n;const i=e.getProvider("app").getImmediate(),a=new Va(new z(e.getProvider("auth-internal")),new V(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new M(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ze(e.options.projectId,t)}(i,r),i);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),(0,i.KO)(w,"4.7.3",e),(0,i.KO)(w,"4.7.3","esm2017")}()},5487:(e,t,n)=>{const r=n(8293);function o(e,t){const n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function i(e,t,n){let r=e+t;return"undefined"!==typeof n&&(r+=" "+n),r}t.render=function(e,t,n){const a=r.getOptions(t),s=e.modules.size,l=e.modules.data,c=s+2*a.margin,u=a.color.light.a?"<path "+o(a.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",d="<path "+o(a.color.dark,"stroke")+' d="'+function(e,t,n){let r="",o=0,a=!1,s=0;for(let l=0;l<e.length;l++){const c=Math.floor(l%t),u=Math.floor(l/t);c||a||(a=!0),e[l]?(s++,l>0&&c>0&&e[l-1]||(r+=a?i("M",c+n,.5+u+n):i("m",o,0),o=0,a=!1),c+1<t&&e[l+1]||(r+=i("h",s),s=0)):o++}return r}(l,s,a.margin)+'"/>',h='viewBox="0 0 '+c+" "+c+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+h+' shape-rendering="crispEdges">'+u+d+"</svg>\n";return"function"===typeof n&&n(null,f),f}},6116:e=>{e.exports=function(){return"function"===typeof Promise&&Promise.prototype&&Promise.prototype.then}},6272:(e,t)=>{t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&"undefined"!==typeof e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!==typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(r){return n}}},7150:(e,t,n)=>{"use strict";n.d(t,{MF:()=>de,j6:()=>ae,xZ:()=>se,om:()=>ie,Sx:()=>fe,Dk:()=>pe,Wp:()=>he,KO:()=>me});var r=n(8812),o=n(443),i=n(7700),a=n(2555);let s,l;const c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap;let p={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return u.get(e);if("objectStoreNames"===t)return e.objectStoreNames||d.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return v(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function m(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(l||(l=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(y(this),n),v(c.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return v(e.apply(y(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];const i=e.call(y(this),t,...r);return d.set(i,t.sort?t.sort():[t]),v(i)}}function g(e){return"function"===typeof e?m(e):(e instanceof IDBTransaction&&function(e){if(u.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)});u.set(e,t)}(e),t=e,(s||(s=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,p):e);var t}function v(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(v(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&c.set(t,e)}).catch(()=>{}),f.set(t,e),t}(e);if(h.has(e))return h.get(e);const t=g(e);return t!==e&&(h.set(e,t),f.set(t,e)),t}const y=e=>f.get(e);const b=["get","getKey","getAll","getAllKeys","count"],x=["put","add","delete","clear"],w=new Map;function _(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(w.get(t))return w.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=x.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!b.includes(n))return;const i=async function(e){const t=this.transaction(e,o?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return r&&(i=i.index(s.shift())),(await Promise.all([i[n](...s),o&&t.done]))[0]};return w.set(t,i),i}p=(e=>(0,a.A)((0,a.A)({},e),{},{get:(t,n,r)=>_(t,n)||e.get(t,n,r),has:(t,n)=>!!_(t,n)||e.has(t,n)}))(p);class k{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const A="@firebase/app",S="0.10.13",N=new o.Vy("@firebase/app"),C="@firebase/app-compat",j="@firebase/analytics-compat",E="@firebase/analytics",T="@firebase/app-check-compat",I="@firebase/app-check",P="@firebase/auth",O="@firebase/auth-compat",M="@firebase/database",L="@firebase/data-connect",R="@firebase/database-compat",D="@firebase/functions",F="@firebase/functions-compat",z="@firebase/installations",B="@firebase/installations-compat",U="@firebase/messaging",q="@firebase/messaging-compat",V="@firebase/performance",H="@firebase/performance-compat",G="@firebase/remote-config",K="@firebase/remote-config-compat",W="@firebase/storage",Q="@firebase/storage-compat",Z="@firebase/firestore",Y="@firebase/vertexai-preview",J="@firebase/firestore-compat",$="firebase",X="[DEFAULT]",ee={[A]:"fire-core",[C]:"fire-core-compat",[E]:"fire-analytics",[j]:"fire-analytics-compat",[I]:"fire-app-check",[T]:"fire-app-check-compat",[P]:"fire-auth",[O]:"fire-auth-compat",[M]:"fire-rtdb",[L]:"fire-data-connect",[R]:"fire-rtdb-compat",[D]:"fire-fn",[F]:"fire-fn-compat",[z]:"fire-iid",[B]:"fire-iid-compat",[U]:"fire-fcm",[q]:"fire-fcm-compat",[V]:"fire-perf",[H]:"fire-perf-compat",[G]:"fire-rc",[K]:"fire-rc-compat",[W]:"fire-gcs",[Q]:"fire-gcs-compat",[Z]:"fire-fst",[J]:"fire-fst-compat",[Y]:"fire-vertex","fire-js":"fire-js",[$]:"fire-js-all"},te=new Map,ne=new Map,re=new Map;function oe(e,t){try{e.container.addComponent(t)}catch(n){N.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function ie(e){const t=e.name;if(re.has(t))return N.debug("There were multiple attempts to register component ".concat(t,".")),!1;re.set(t,e);for(const n of te.values())oe(n,e);for(const n of ne.values())oe(n,e);return!0}function ae(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function se(e){return void 0!==e.settings}const le={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ce=new i.FA("app","Firebase",le);class ue{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ce.create("app-deleted",{appName:this._name})}}const de="10.14.1";function he(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const o=Object.assign({name:X,automaticDataCollectionEnabled:!1},t),a=o.name;if("string"!==typeof a||!a)throw ce.create("bad-app-name",{appName:String(a)});if(n||(n=(0,i.T9)()),!n)throw ce.create("no-options");const s=te.get(a);if(s){if((0,i.bD)(n,s.options)&&(0,i.bD)(o,s.config))return s;throw ce.create("duplicate-app",{appName:a})}const l=new r.h1(a);for(const r of re.values())l.addComponent(r);const c=new ue(n,o,l);return te.set(a,c),c}function fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X;const t=te.get(e);if(!t&&e===X&&(0,i.T9)())return he();if(!t)throw ce.create("no-app",{appName:e});return t}function pe(){return Array.from(te.values())}function me(e,t,n){var o;let i=null!==(o=ee[e])&&void 0!==o?o:e;n&&(i+="-".concat(n));const a=i.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void N.warn(e.join(" "))}ie(new r.uA("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const ge="firebase-heartbeat-store";let ve=null;function ye(){return ve||(ve=function(e,t){let{blocked:n,upgrade:r,blocking:o,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),s=v(a);return r&&a.addEventListener("upgradeneeded",e=>{r(v(a.result),e.oldVersion,e.newVersion,v(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{i&&e.addEventListener("close",()=>i()),o&&e.addEventListener("versionchange",e=>o(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ge)}catch(n){console.warn(n)}}}).catch(e=>{throw ce.create("idb-open",{originalErrorMessage:e.message})})),ve}async function be(e,t){try{const n=(await ye()).transaction(ge,"readwrite"),r=n.objectStore(ge);await r.put(t,xe(e)),await n.done}catch(n){if(n instanceof i.g)N.warn(n.message);else{const e=ce.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});N.warn(e.message)}}}function xe(e){return"".concat(e.name,"!").concat(e.options.appId)}class we{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ke(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=_e();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(n){N.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=_e(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const o of e){const e=n.find(e=>e.agent===o.agent);if(e){if(e.dates.push(o.date),Ae(n)>t){e.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Ae(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),o=(0,i.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return N.warn(t),""}}}function _e(){return(new Date).toISOString().substring(0,10)}class ke{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,i.zW)()&&(0,i.eX)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ye()).transaction(ge),n=await t.objectStore(ge).get(xe(e));return await t.done,n}catch(t){if(t instanceof i.g)N.warn(t.message);else{const e=ce.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});N.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return be(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return be(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ae(e){return(0,i.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var Se;Se="",ie(new r.uA("platform-logger",e=>new k(e),"PRIVATE")),ie(new r.uA("heartbeat",e=>new we(e),"PRIVATE")),me(A,S,Se),me(A,S,"esm2017"),me("fire-js","")},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,a=o>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>i(l,n))c<o&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<o&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,O(_);else{var t=r(u);null!==t&&M(w,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,y(N),N=-1),p=!0;var i=f;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!E());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var s=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&o(c),x(n)}else o(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&M(w,d.startTime-n),l=!1}return l}finally{h=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,A=!1,S=null,N=-1,C=5,j=-1;function E(){return!(t.unstable_now()-j<C)}function T(){if(null!==S){var e=t.unstable_now();j=e;var n=!0;try{n=S(!0,e)}finally{n?k():(A=!1,S=null)}}else A=!1}if("function"===typeof b)k=function(){b(T)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,P=I.port2;I.port1.onmessage=T,k=function(){P.postMessage(null)}}else k=function(){v(T,0)};function O(e){S=e,A||(A=!0,k())}function M(e,n){N=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,o,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(y(N),N=-1):g=!0,M(w,i-a))):(e.sortIndex=s,n(c,e),m||p||(m=!0,O(_))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},7347:e=>{"use strict";var t={single_source_shortest_paths:function(e,n,r){var o={},i={};i[n]=0;var a,s,l,c,u,d,h,f=t.PriorityQueue.make();for(f.push(n,0);!f.empty();)for(l in s=(a=f.pop()).value,c=a.cost,u=e[s]||{})u.hasOwnProperty(l)&&(d=c+u[l],h=i[l],("undefined"===typeof i[l]||h>d)&&(i[l]=d,f.push(l,d),o[l]=s));if("undefined"!==typeof r&&"undefined"===typeof i[r]){var p=["Could not find a path from ",n," to ",r,"."].join("");throw new Error(p)}return o},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],r=t;r;)n.push(r),e[r],r=e[r];return n.reverse(),n},find_path:function(e,n,r){var o=t.single_source_shortest_paths(e,n,r);return t.extract_shortest_path_from_predecessor_list(o,r)},PriorityQueue:{make:function(e){var n,r=t.PriorityQueue,o={};for(n in e=e||{},r)r.hasOwnProperty(n)&&(o[n]=r[n]);return o.queue=[],o.sorter=e.sorter||r.default_sorter,o},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=t},7421:(e,t,n)=>{const r=n(3257),o=n(8511);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!r.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return o.testNumeric(e)?t.NUMERIC:o.testAlphanumeric(e)?t.ALPHANUMERIC:o.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!==typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(r){return n}}},7700:(e,t,n)=>{"use strict";n.d(t,{Am:()=>I,FA:()=>N,Fy:()=>m,I9:()=>P,Im:()=>j,Ku:()=>D,T9:()=>h,Tj:()=>u,Uj:()=>a,XA:()=>f,ZQ:()=>g,bD:()=>E,c1:()=>y,cY:()=>p,eX:()=>A,g:()=>S,hp:()=>O,jZ:()=>v,lT:()=>w,lV:()=>x,nr:()=>_,sr:()=>b,tD:()=>M,u:()=>s,yU:()=>d,zW:()=>k});const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296===(64512&o)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++r)),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<e.length;o+=3){const t=e[o],i=o+1<e.length,a=i?e[o+1]:0,s=o+2<e.length,l=s?e[o+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;s||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const o=e[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const i=e[n++];t[r++]=String.fromCharCode((31&o)<<6|63&i)}else if(o>239&&o<365){const i=((7&o)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&o)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<e.length;){const t=n[e.charAt(o++)],a=o<e.length?n[e.charAt(o)]:0;++o;const s=o<e.length?n[e.charAt(o)]:64;++o;const l=o<e.length?n[e.charAt(o)]:64;if(++o,null==t||null==a||null==s||null==l)throw new i;const c=t<<2|a>>4;if(r.push(c),64!==s){const e=a<<4&240|s>>2;if(r.push(e),64!==l){const e=s<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class i extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(e){return function(e){const t=r(e);return o.encodeByteArray(t,!0)}(e).replace(/\./g,"")},s=function(e){try{return o.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const l=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,c=()=>{try{return l()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyArvQzOJTrtsekOK9Wpgi3PezPcM9KmXyY",REACT_APP_FIREBASE_APP_ID:"1:614868886377:web:3c020075969956ef1813f8",REACT_APP_FIREBASE_AUTH_DOMAIN:"geoquest2-7e45c.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-L45RHX7MCN",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"614868886377",REACT_APP_FIREBASE_PROJECT_ID:"geoquest2-7e45c",REACT_APP_FIREBASE_STORAGE_BUCKET:"geoquest2-7e45c.firebasestorage.app",REACT_APP_OPENROUTE_API_KEY:"eyJvcmciOiI1YjNjZTM1OTc4NTExMTAwMDFjZjYyNDgiLCJpZCI6ImEzN2RiYzM2MjdlZDRjMzVhNjE4MTI3ZTU2MTcwMjVjIiwiaCI6Im11cm11cjY0In0=",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_live_51SCkJSCO02VZleLGS20eWjUQl0cAhGoZaQA5wfxS9ShhQJZmTm8Os02jPlP9c2fehToeLz369r0pjAixP98N6FAy00DFPn5jNh"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&s(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},u=e=>{var t,n;return null===(n=null===(t=c())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},d=e=>{const t=u(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},h=()=>{var e;return null===(e=c())||void 0===e?void 0:e.config},f=e=>{var t;return null===(t=c())||void 0===t?void 0:t["_".concat(e)]};class p{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function m(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[a(JSON.stringify({alg:"none",type:"JWT"})),a(JSON.stringify(i)),""].join(".")}function g(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function v(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function y(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function b(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function x(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function w(){const e=g();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function _(){return!function(){var e;const t=null===(e=c())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function k(){try{return"object"===typeof indexedDB}catch(e){return!1}}function A(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var e;t((null===(e=o.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class S extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,S.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,N.prototype.create)}}class N{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],o=r?function(e,t){return e.replace(C,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",i="".concat(this.serviceName,": ").concat(o," (").concat(n,").");return new S(n,i,t)}}const C=/\{\$([^}]+)}/g;function j(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function E(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const o of n){if(!r.includes(o))return!1;const n=e[o],i=t[o];if(T(n)&&T(i)){if(!E(n,i))return!1}else if(n!==i)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function T(e){return null!==e&&"object"===typeof e}function I(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function P(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function O(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function M(e,t){const n=new L(e,t);return n.subscribe.bind(n)}class L{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=R),void 0===r.error&&(r.error=R),void 0===r.complete&&(r.complete=R);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),o}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function R(){}function D(e){return e&&e._delegate?e._delegate:e}},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},7969:(e,t)=>{let n;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return r[e]},t.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!==typeof e)throw new Error('"toSJISFunc" is not a valid function.');n=e},t.isKanjiModeEnabled=function(){return"undefined"!==typeof n},t.toSJIS=function(e){return n(e)}},8177:(e,t,n)=>{const r=n(1312);function o(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}o.prototype.initialize=function(e){this.degree=e,this.genPoly=r.generateECPolynomial(this.degree)},o.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const n=r.mod(t,this.genPoly),o=this.degree-n.length;if(o>0){const e=new Uint8Array(this.degree);return e.set(n,o),e}return n},e.exports=o},8293:(e,t)=>{function n(e){if("number"===typeof e&&(e=e.toString()),"string"!==typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");const n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});const t="undefined"===typeof e.margin||null===e.margin||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,o=e.scale||4;return{width:r,scale:r?4:o,margin:t,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,n){const r=t.getScale(e,n);return Math.floor((e+2*n.margin)*r)},t.qrToImageData=function(e,n,r){const o=n.modules.size,i=n.modules.data,a=t.getScale(o,r),s=Math.floor((o+2*r.margin)*a),l=r.margin*a,c=[r.color.light,r.color.dark];for(let t=0;t<s;t++)for(let n=0;n<s;n++){let u=4*(t*s+n),d=r.color.light;if(t>=l&&n>=l&&t<s-l&&n<s-l){d=c[i[Math.floor((t-l)/a)*o+Math.floor((n-l)/a)]?1:0]}e[u++]=d.r,e[u++]=d.g,e[u++]=d.b,e[u]=d.a}}},8330:e=>{"use strict";e.exports={rE:"0.8.1"}},8511:(e,t)=>{const n="[0-9]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const o="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+")(?:.|[\r\n]))+";t.KANJI=new RegExp(r,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(o,"g"),t.NUMERIC=new RegExp(n,"g"),t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const i=new RegExp("^"+r+"$"),a=new RegExp("^"+n+"$"),s=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return i.test(e)},t.testNumeric=function(e){return a.test(e)},t.testAlphanumeric=function(e){return s.test(e)}},8697:(e,t,n)=>{const r=n(7421);function o(e){this.mode=r.BYTE,this.data="string"===typeof e?(new TextEncoder).encode(e):new Uint8Array(e)}o.getBitsLength=function(e){return 8*e},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)},e.exports=o},8812:(e,t,n)=>{"use strict";n.d(t,{h1:()=>s,uA:()=>o});var r=n(7700);class o{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const i="[DEFAULT]";class a{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:i})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[o,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(o)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),o=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;o.add(e),this.onInitCallbacks.set(r,o);const i=this.instances.get(r);return i&&e(i,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const o of n)try{o(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(o=t,o===i?void 0:o),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var o;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.component?this.component.multipleInstances?e:i:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class s{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},8856:function(e,t,n){!function(e){"use strict";function t(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}e=e&&e.hasOwnProperty("default")?e.default:e;var n=function(e,t){return(180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI+90+360)%360},r=function(e,t){var n=e.value;return e.isInPixels?n/t:n};function o(e){if("string"===typeof e&&-1!==e.indexOf("%"))return{value:parseFloat(e)/100,isInPixels:!1};var t=e?parseFloat(e):0;return{value:t,isInPixels:t>0}}var i=function(e,t){return e.x===t.x&&e.y===t.y};function a(e){return e.reduce(function(e,r,o,a){if(o>0&&!i(r,a[o-1])){var s=a[o-1],l=e.length>0?e[e.length-1].distB:0,c=t(s,r);e.push({a:s,b:r,distA:l,distB:l+c,heading:n(s,r)})}return e},[])}function s(e,t){var n=a(e),o=n.length;if(0===o)return[];var i=n[o-1].distB,s=r(t.offset,i),c=r(t.endOffset,i),u=i*r(t.repeat,i),d=c>0?i*c:0,h=[],f=s>0?i*s:0;do{h.push(f),f+=u}while(u>0&&f<i-d);var p=0,m=n[0];return h.map(function(e){for(;e>m.distB&&p<o-1;)p++,m=n[p];var t=(e-m.distA)/(m.distB-m.distA);return{pt:l(m.a,m.b,t),heading:m.heading}})}function l(e,t,n){return t.x!==e.x?{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}:{x:e.x,y:e.y+(t.y-e.y)*n}}(function(){var e=L.Marker.prototype._initIcon,t=L.Marker.prototype._setPos,n="msTransform"===L.DomUtil.TRANSFORM;L.Marker.addInitHook(function(){var e=this.options.icon&&this.options.icon.options&&this.options.icon.options.iconAnchor;e&&(e=e[0]+"px "+e[1]+"px"),this.options.rotationOrigin=this.options.rotationOrigin||e||"center bottom",this.options.rotationAngle=this.options.rotationAngle||0,this.on("drag",function(e){e.target._applyRotation()})}),L.Marker.include({_initIcon:function(){e.call(this)},_setPos:function(e){t.call(this,e),this._applyRotation()},_applyRotation:function(){this.options.rotationAngle&&(this._icon.style[L.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,n?this._icon.style[L.DomUtil.TRANSFORM]="rotate("+this.options.rotationAngle+"deg)":this._icon.style[L.DomUtil.TRANSFORM]+=" rotateZ("+this.options.rotationAngle+"deg)")},setRotationAngle:function(e){return this.options.rotationAngle=e,this.update(),this},setRotationOrigin:function(e){return this.options.rotationOrigin=e,this.update(),this}})})(),e.Symbol=e.Symbol||{},e.Symbol.Dash=e.Class.extend({options:{pixelSize:10,pathOptions:{}},initialize:function(t){e.Util.setOptions(this,t),this.options.pathOptions.clickable=!1},buildSymbol:function(t,n,r,o,i){var a=this.options,s=Math.PI/180;if(a.pixelSize<=1)return e.polyline([t.latLng,t.latLng],a.pathOptions);var l=r.project(t.latLng),c=-(t.heading-90)*s,u=e.point(l.x+a.pixelSize*Math.cos(c+Math.PI)/2,l.y+a.pixelSize*Math.sin(c)/2),d=l.add(l.subtract(u));return e.polyline([r.unproject(u),r.unproject(d)],a.pathOptions)}}),e.Symbol.dash=function(t){return new e.Symbol.Dash(t)},e.Symbol.ArrowHead=e.Class.extend({options:{polygon:!0,pixelSize:10,headAngle:60,pathOptions:{stroke:!1,weight:2}},initialize:function(t){e.Util.setOptions(this,t),this.options.pathOptions.clickable=!1},buildSymbol:function(t,n,r,o,i){return this.options.polygon?e.polygon(this._buildArrowPath(t,r),this.options.pathOptions):e.polyline(this._buildArrowPath(t,r),this.options.pathOptions)},_buildArrowPath:function(t,n){var r=Math.PI/180,o=n.project(t.latLng),i=-(t.heading-90)*r,a=this.options.headAngle/2*r,s=i+a,l=i-a,c=e.point(o.x-this.options.pixelSize*Math.cos(s),o.y+this.options.pixelSize*Math.sin(s)),u=e.point(o.x-this.options.pixelSize*Math.cos(l),o.y+this.options.pixelSize*Math.sin(l));return[n.unproject(c),t.latLng,n.unproject(u)]}}),e.Symbol.arrowHead=function(t){return new e.Symbol.ArrowHead(t)},e.Symbol.Marker=e.Class.extend({options:{markerOptions:{},rotate:!1},initialize:function(t){e.Util.setOptions(this,t),this.options.markerOptions.clickable=!1,this.options.markerOptions.draggable=!1},buildSymbol:function(t,n,r,o,i){return this.options.rotate&&(this.options.markerOptions.rotationAngle=t.heading+(this.options.angleCorrection||0)),e.marker(t.latLng,this.options.markerOptions)}}),e.Symbol.marker=function(t){return new e.Symbol.Marker(t)};var c=function(t){return t instanceof e.LatLng||Array.isArray(t)&&2===t.length&&"number"===typeof t[0]},u=function(e){return Array.isArray(e)&&c(e[0])};e.PolylineDecorator=e.FeatureGroup.extend({options:{patterns:[]},initialize:function(t,n){e.FeatureGroup.prototype.initialize.call(this),e.Util.setOptions(this,n),this._map=null,this._paths=this._initPaths(t),this._bounds=this._initBounds(),this._patterns=this._initPatterns(this.options.patterns)},_initPaths:function(t,n){var r=this;return u(t)?[n?t.concat([t[0]]):t]:t instanceof e.Polyline?this._initPaths(t.getLatLngs(),t instanceof e.Polygon):Array.isArray(t)?t.reduce(function(e,t){return e.concat(r._initPaths(t,n))},[]):[]},_initPatterns:function(e){return e.map(this._parsePatternDef)},setPatterns:function(e){this.options.patterns=e,this._patterns=this._initPatterns(this.options.patterns),this.redraw()},setPaths:function(e){this._paths=this._initPaths(e),this._bounds=this._initBounds(),this.redraw()},_parsePatternDef:function(e,t){return{symbolFactory:e.symbol,offset:o(e.offset),endOffset:o(e.endOffset),repeat:o(e.repeat)}},onAdd:function(e){this._map=e,this._draw(),this._map.on("moveend",this.redraw,this)},onRemove:function(t){this._map.off("moveend",this.redraw,this),this._map=null,e.FeatureGroup.prototype.onRemove.call(this,t)},_initBounds:function(){var t=this._paths.reduce(function(e,t){return e.concat(t)},[]);return e.latLngBounds(t)},getBounds:function(){return this._bounds},_buildSymbols:function(e,t,n){var r=this;return n.map(function(o,i){return t.buildSymbol(o,e,r._map,i,n.length)})},_getDirectionPoints:function(t,n){var r=this;return t.length<2?[]:s(t.map(function(e){return r._map.project(e)}),n).map(function(t){return{latLng:r._map.unproject(e.point(t.pt)),heading:t.heading}})},redraw:function(){this._map&&(this.clearLayers(),this._draw())},_getPatternLayers:function(t){var n=this,r=this._map.getBounds().pad(.1);return this._paths.map(function(o){var i=n._getDirectionPoints(o,t).filter(function(e){return r.contains(e.latLng)});return e.featureGroup(n._buildSymbols(o,t.symbolFactory,i))})},_draw:function(){var t=this;this._patterns.map(function(e){return t._getPatternLayers(e)}).forEach(function(n){t.addLayer(e.featureGroup(n))})}}),e.polylineDecorator=function(t,n){return new e.PolylineDecorator(t,n)}}(n(228))},8970:(e,t,n)=>{const r=n(6116),o=n(4772),i=n(2182),a=n(5487);function s(e,t,n,i,a){const s=[].slice.call(arguments,1),l=s.length,c="function"===typeof s[l-1];if(!c&&!r())throw new Error("Callback required as last argument");if(!c){if(l<1)throw new Error("Too few arguments provided");return 1===l?(n=t,t=i=void 0):2!==l||t.getContext||(i=n,n=t,t=void 0),new Promise(function(r,a){try{const a=o.create(n,i);r(e(a,t,i))}catch(s){a(s)}})}if(l<2)throw new Error("Too few arguments provided");2===l?(a=n,n=t,t=i=void 0):3===l&&(t.getContext&&"undefined"===typeof a?(a=i,i=void 0):(a=i,i=n,n=t,t=void 0));try{const r=o.create(n,i);a(null,e(r,t,i))}catch(u){a(u)}}t.create=o.create,t.toCanvas=s.bind(null,i.render),t.toDataURL=s.bind(null,i.renderToDataURL),t.toString=s.bind(null,function(e,t,n){return a.render(e,n)})},9021:(e,t,n)=>{const r=n(7969).getSymbolSize;t.getPositions=function(e){const t=r(e);return[[0,0],[t-7,0],[0,t-7]]}},9382:(e,t,n)=>{const r=n(7969).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];const t=Math.floor(e/7)+2,n=r(e),o=145===n?26:2*Math.ceil((n-13)/(2*t-2)),i=[n-7];for(let r=1;r<t-1;r++)i[r]=i[r-1]-o;return i.push(6),i.reverse()},t.getPositions=function(e){const n=[],r=t.getRowColCoords(e),o=r.length;for(let t=0;t<o;t++)for(let e=0;e<o;e++)0===t&&0===e||0===t&&e===o-1||t===o-1&&0===e||n.push([r[t],r[e]]);return n}},9642:(e,t,n)=>{const r=n(7421),o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function i(e){this.mode=r.ALPHANUMERIC,this.data=e}i.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let n=45*o.indexOf(this.data[t]);n+=o.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(o.indexOf(this.data[t]),6)},e.exports=i}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;__webpack_require__.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"===typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"===typeof n.then)return n}var o=Object.create(null);__webpack_require__.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&n;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>i[e]=()=>n[e]);return i.default=()=>n,__webpack_require__.d(o,i),o}})(),__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce((t,n)=>(__webpack_require__.f[n](e,t),t),[])),__webpack_require__.u=e=>"static/js/"+e+"."+{182:"89ff721e",551:"0d2892b9",640:"1867ec00",869:"1bd2d32c"}[e]+".chunk.js",__webpack_require__.miniCssF=e=>{},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="routequest:";__webpack_require__.l=(n,r,o,i)=>{if(e[n])e[n].push(r);else{var a,s;if(void 0!==o)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var u=l[c];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+o){a=u;break}}a||(s=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,__webpack_require__.nc&&a.setAttribute("nonce",__webpack_require__.nc),a.setAttribute("data-webpack",t+o),a.src=n),e[n]=[r];var d=(t,r)=>{a.onerror=a.onload=null,clearTimeout(h);var o=e[n];if(delete e[n],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach(e=>e(r)),t)return t(r)},h=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),s&&document.head.appendChild(a)}}})(),__webpack_require__.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.p="/",(()=>{var e={792:0};__webpack_require__.f.j=(t,n)=>{var r=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise((n,o)=>r=e[t]=[n,o]);n.push(r[2]=o);var i=__webpack_require__.p+__webpack_require__.u(t),a=new Error;__webpack_require__.l(i,n=>{if(__webpack_require__.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",a.name="ChunkLoadError",a.type=o,a.request=i,r[1](a)}},"chunk-"+t,t)}};var t=(t,n)=>{var r,o,i=n[0],a=n[1],s=n[2],l=0;if(i.some(t=>0!==e[t])){for(r in a)__webpack_require__.o(a,r)&&(__webpack_require__.m[r]=a[r]);if(s)s(__webpack_require__)}for(t&&t(n);l<i.length;l++)o=i[l],__webpack_require__.o(e,o)&&e[o]&&e[o][0](),e[o]=0},n=self.webpackChunkroutequest=self.webpackChunkroutequest||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var __webpack_exports__={};(()=>{"use strict";var e,t=__webpack_require__(5043),n=__webpack_require__.t(t,2),r=__webpack_require__(4391);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const i="popstate";function a(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function s(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function l(e,t){return{usr:e.state,key:e.key,idx:t}}function c(e,t,n,r){return void 0===n&&(n=null),o({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?d(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function u(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function d(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function h(t,n,r,s){void 0===s&&(s={});let{window:d=document.defaultView,v5Compat:h=!1}=s,f=d.history,p=e.Pop,m=null,g=v();function v(){return(f.state||{idx:null}).idx}function y(){p=e.Pop;let t=v(),n=null==t?null:t-g;g=t,m&&m({action:p,location:x.location,delta:n})}function b(e){let t="null"!==d.location.origin?d.location.origin:d.location.href,n="string"===typeof e?e:u(e);return n=n.replace(/ $/,"%20"),a(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,f.replaceState(o({},f.state,{idx:g}),""));let x={get action(){return p},get location(){return t(d,f)},listen(e){if(m)throw new Error("A history only accepts one active listener");return d.addEventListener(i,y),m=e,()=>{d.removeEventListener(i,y),m=null}},createHref:e=>n(d,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){p=e.Push;let o=c(x.location,t,n);r&&r(o,t),g=v()+1;let i=l(o,g),a=x.createHref(o);try{f.pushState(i,"",a)}catch(s){if(s instanceof DOMException&&"DataCloneError"===s.name)throw s;d.location.assign(a)}h&&m&&m({action:p,location:x.location,delta:1})},replace:function(t,n){p=e.Replace;let o=c(x.location,t,n);r&&r(o,t),g=v();let i=l(o,g),a=x.createHref(o);f.replaceState(i,"",a),h&&m&&m({action:p,location:x.location,delta:0})},go:e=>f.go(e)};return x}var f;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(f||(f={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function p(e,t,n){return void 0===n&&(n="/"),m(e,t,n,!1)}function m(e,t,n,r){let o=E(("string"===typeof t?d(t):t).pathname||"/",n);if(null==o)return null;let i=g(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let a=null;for(let s=0;null==a&&s<i.length;++s){let e=j(o);a=N(i[s],e,r)}return a}function g(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let o=(e,o,i)=>{let s={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};s.relativePath.startsWith("/")&&(a(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let l=M([r,s.relativePath]),c=n.concat(s);e.children&&e.children.length>0&&(a(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),g(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:S(l,e.index),routesMeta:c})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of v(e.path))o(e,t,r);else o(e,t)}),t}function v(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,o=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return o?[i,""]:[i];let a=v(r.join("/")),s=[];return s.push(...a.map(e=>""===e?i:[i,e].join("/"))),o&&s.push(...a),s.map(t=>e.startsWith("/")&&""===t?"/":t)}const y=/^:[\w-]+$/,b=3,x=2,w=1,_=10,k=-2,A=e=>"*"===e;function S(e,t){let n=e.split("/"),r=n.length;return n.some(A)&&(r+=k),t&&(r+=x),n.filter(e=>!A(e)).reduce((e,t)=>e+(y.test(t)?b:""===t?w:_),r)}function N(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,o={},i="/",a=[];for(let s=0;s<r.length;++s){let e=r[s],l=s===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(o,u.params),a.push({params:o,pathname:M([i,u.pathname]),pathnameBase:L(M([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=M([i,u.pathnameBase]))}return a}function C(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);s("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))");let i=new RegExp(o,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let i=o[0],a=i.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:o}=t;if("*"===r){let e=l[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const s=l[n];return e[r]=o&&!s?void 0:(s||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:a,pattern:e}}function j(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return s(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function E(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function T(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function I(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function P(e,t){let n=I(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function O(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=d(e):(i=o({},e),a(!i.pathname||!i.pathname.includes("?"),T("?","pathname","search",i)),a(!i.pathname||!i.pathname.includes("#"),T("#","pathname","hash",i)),a(!i.search||!i.search.includes("#"),T("#","search","hash",i)));let s,l=""===e||""===i.pathname,c=l?"/":i.pathname;if(null==c)s=n;else{let e=t.length-1;if(!r&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:o=""}="string"===typeof e?d(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:R(r),hash:D(o)}}(i,s),h=c&&"/"!==c&&c.endsWith("/"),f=(l||"."===c)&&n.endsWith("/");return u.pathname.endsWith("/")||!h&&!f||(u.pathname+="/"),u}const M=e=>e.join("/").replace(/\/\/+/g,"/"),L=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),R=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",D=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function F(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const z=["post","put","patch","delete"],B=(new Set(z),["get",...z]);new Set(B),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function U(){return U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U.apply(this,arguments)}const q=t.createContext(null);const V=t.createContext(null);const H=t.createContext(null);const G=t.createContext(null);const K=t.createContext({outlet:null,matches:[],isDataRoute:!1});const W=t.createContext(null);function Q(){return null!=t.useContext(G)}function Z(){return Q()||a(!1),t.useContext(G).location}function Y(e){t.useContext(H).static||t.useLayoutEffect(e)}function J(){let{isDataRoute:e}=t.useContext(K);return e?function(){let{router:e}=le(ae.UseNavigateStable),n=ue(se.UseNavigateStable),r=t.useRef(!1);return Y(()=>{r.current=!0}),t.useCallback(function(t,o){void 0===o&&(o={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,U({fromRouteId:n},o)))},[e,n])}():function(){Q()||a(!1);let e=t.useContext(q),{basename:n,future:r,navigator:o}=t.useContext(H),{matches:i}=t.useContext(K),{pathname:s}=Z(),l=JSON.stringify(P(i,r.v7_relativeSplatPath)),c=t.useRef(!1);return Y(()=>{c.current=!0}),t.useCallback(function(t,r){if(void 0===r&&(r={}),!c.current)return;if("number"===typeof t)return void o.go(t);let i=O(t,JSON.parse(l),s,"path"===r.relative);null==e&&"/"!==n&&(i.pathname="/"===i.pathname?n:M([n,i.pathname])),(r.replace?o.replace:o.push)(i,r.state,r)},[n,o,l,s,e])}()}function $(){let{matches:e}=t.useContext(K),n=e[e.length-1];return n?n.params:{}}function X(e,n){let{relative:r}=void 0===n?{}:n,{future:o}=t.useContext(H),{matches:i}=t.useContext(K),{pathname:a}=Z(),s=JSON.stringify(P(i,o.v7_relativeSplatPath));return t.useMemo(()=>O(e,JSON.parse(s),a,"path"===r),[e,s,a,r])}function ee(n,r,o,i){Q()||a(!1);let{navigator:s}=t.useContext(H),{matches:l}=t.useContext(K),c=l[l.length-1],u=c?c.params:{},h=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let f,m=Z();if(r){var g;let e="string"===typeof r?d(r):r;"/"===h||(null==(g=e.pathname)?void 0:g.startsWith(h))||a(!1),f=e}else f=m;let v=f.pathname||"/",y=v;if("/"!==h){let e=h.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=p(n,{pathname:y});let x=ie(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:M([h,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:M([h,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,o,i);return r&&x?t.createElement(G.Provider,{value:{location:U({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:e.Pop}},x):x}function te(){let e=function(){var e;let n=t.useContext(W),r=ce(se.UseRouteError),o=ue(se.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[o]}(),n=F(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,o="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:o};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:i},r):null,null)}const ne=t.createElement(te,null);class re extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(K.Provider,{value:this.props.routeContext},t.createElement(W.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oe(e){let{routeContext:n,match:r,children:o}=e,i=t.useContext(q);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(K.Provider,{value:n},o)}function ie(e,n,r,o){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===o&&(o=null),null==e){var s;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(s=o)&&s.v7_partialHydration&&0===n.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let l=e,c=null==(i=r)?void 0:i.errors;if(null!=c){let e=l.findIndex(e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id]));e>=0||a(!1),l=l.slice(0,Math.min(l.length,e+1))}let u=!1,d=-1;if(r&&o&&o.v7_partialHydration)for(let t=0;t<l.length;t++){let e=l[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=t),e.route.id){let{loaderData:t,errors:n}=r,o=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||o){u=!0,l=d>=0?l.slice(0,d+1):[l[0]];break}}}return l.reduceRight((e,o,i)=>{let a,s=!1,h=null,f=null;var p;r&&(a=c&&o.route.id?c[o.route.id]:void 0,h=o.route.errorElement||ne,u&&(d<0&&0===i?(p="route-fallback",!1||de[p]||(de[p]=!0),s=!0,f=null):d===i&&(s=!0,f=o.route.hydrateFallbackElement||null)));let m=n.concat(l.slice(0,i+1)),g=()=>{let n;return n=a?h:s?f:o.route.Component?t.createElement(o.route.Component,null):o.route.element?o.route.element:e,t.createElement(oe,{match:o,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:n})};return r&&(o.route.ErrorBoundary||o.route.errorElement||0===i)?t.createElement(re,{location:r.location,revalidation:r.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var ae=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ae||{}),se=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(se||{});function le(e){let n=t.useContext(q);return n||a(!1),n}function ce(e){let n=t.useContext(V);return n||a(!1),n}function ue(e){let n=function(){let e=t.useContext(K);return e||a(!1),e}(),r=n.matches[n.matches.length-1];return r.route.id||a(!1),r.route.id}const de={};function he(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}n.startTransition;function fe(e){let{to:n,replace:r,state:o,relative:i}=e;Q()||a(!1);let{future:s,static:l}=t.useContext(H),{matches:c}=t.useContext(K),{pathname:u}=Z(),d=J(),h=O(n,P(c,s.v7_relativeSplatPath),u,"path"===i),f=JSON.stringify(h);return t.useEffect(()=>d(JSON.parse(f),{replace:r,state:o,relative:i}),[d,f,i,r,o]),null}function pe(e){a(!1)}function me(n){let{basename:r="/",children:o=null,location:i,navigationType:s=e.Pop,navigator:l,static:c=!1,future:u}=n;Q()&&a(!1);let h=r.replace(/^\/*/,"/"),f=t.useMemo(()=>({basename:h,navigator:l,static:c,future:U({v7_relativeSplatPath:!1},u)}),[h,u,l,c]);"string"===typeof i&&(i=d(i));let{pathname:p="/",search:m="",hash:g="",state:v=null,key:y="default"}=i,b=t.useMemo(()=>{let e=E(p,h);return null==e?null:{location:{pathname:e,search:m,hash:g,state:v,key:y},navigationType:s}},[h,p,m,g,v,y,s]);return null==b?null:t.createElement(H.Provider,{value:f},t.createElement(G.Provider,{children:o,value:b}))}function ge(e){let{children:t,location:n}=e;return ee(ve(t),n)}new Promise(()=>{});t.Component;function ve(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,(e,o)=>{if(!t.isValidElement(e))return;let i=[...n,o];if(e.type===t.Fragment)return void r.push.apply(r,ve(e.props.children,i));e.type!==pe&&a(!1),e.props.index&&e.props.children&&a(!1);let s={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=ve(e.props.children,i)),r.push(s)}),r}var ye=__webpack_require__(7950),be=__webpack_require__.t(ye,2);function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xe.apply(this,arguments)}function we(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}function _e(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const ke=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Vu){}new Map;const Ae=n.startTransition;be.flushSync,n.useId;function Se(e){let{basename:n,children:r,future:o,window:i}=e,a=t.useRef();var s;null==a.current&&(a.current=(void 0===(s={window:i,v5Compat:!0})&&(s={}),h(function(e,t){let{pathname:n,search:r,hash:o}=e.location;return c("",{pathname:n,search:r,hash:o},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:u(t)},null,s)));let l=a.current,[d,f]=t.useState({action:l.action,location:l.location}),{v7_startTransition:p}=o||{},m=t.useCallback(e=>{p&&Ae?Ae(()=>f(e)):f(e)},[f,p]);return t.useLayoutEffect(()=>l.listen(m),[l,m]),t.useEffect(()=>he(o),[o]),t.createElement(me,{basename:n,children:r,location:d.location,navigationType:d.action,navigator:l,future:o})}const Ne="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ce=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,je=t.forwardRef(function(e,n){let r,{onClick:o,relative:i,reloadDocument:s,replace:l,state:c,target:d,to:h,preventScrollReset:f,viewTransition:p}=e,m=we(e,ke),{basename:g}=t.useContext(H),v=!1;if("string"===typeof h&&Ce.test(h)&&(r=h,Ne))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=E(t.pathname,g);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:v=!0}catch(Vu){}let y=function(e,n){let{relative:r}=void 0===n?{}:n;Q()||a(!1);let{basename:o,navigator:i}=t.useContext(H),{hash:s,pathname:l,search:c}=X(e,{relative:r}),u=l;return"/"!==o&&(u="/"===l?o:M([o,l])),i.createHref({pathname:u,search:c,hash:s})}(h,{relative:i}),b=function(e,n){let{target:r,replace:o,state:i,preventScrollReset:a,relative:s,viewTransition:l}=void 0===n?{}:n,c=J(),d=Z(),h=X(e,{relative:s});return t.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==o?o:u(d)===u(h);c(e,{replace:n,state:i,preventScrollReset:a,relative:s,viewTransition:l})}},[d,c,h,o,i,r,e,a,s,l])}(h,{replace:l,state:c,target:d,preventScrollReset:f,relative:i,viewTransition:p});return t.createElement("a",xe({},m,{href:r||y,onClick:v||s?o:function(e){o&&o(e),e.defaultPrevented||b(e)},ref:n,target:d}))});var Ee,Te;function Ie(e){let n=t.useRef(_e(e)),r=t.useRef(!1),o=Z(),i=t.useMemo(()=>function(e,t){let n=_e(e);return t&&t.forEach((e,r)=>{n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)})}),n}(o.search,r.current?null:n.current),[o.search]),a=J(),s=t.useCallback((e,t)=>{const n=_e("function"===typeof e?e(i):e);r.current=!0,a("?"+n,t)},[a,i]);return[i,s]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ee||(Ee={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Te||(Te={}));var Pe=__webpack_require__(5403);const Oe={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var Me,Le=new Uint8Array(16);function Re(){if(!Me&&!(Me="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Me(Le)}for(var De=[],Fe=0;Fe<256;++Fe)De.push((Fe+256).toString(16).slice(1));function ze(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(De[e[t+0]]+De[e[t+1]]+De[e[t+2]]+De[e[t+3]]+"-"+De[e[t+4]]+De[e[t+5]]+"-"+De[e[t+6]]+De[e[t+7]]+"-"+De[e[t+8]]+De[e[t+9]]+"-"+De[e[t+10]]+De[e[t+11]]+De[e[t+12]]+De[e[t+13]]+De[e[t+14]]+De[e[t+15]]).toLowerCase()}const Be=function(e,t,n){if(Oe.randomUUID&&!t&&!e)return Oe.randomUUID();var r=(e=e||{}).random||(e.rng||Re)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return ze(r)};var Ue=__webpack_require__(7150),qe=__webpack_require__(7700),Ve=__webpack_require__(443);function He(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var Ge=__webpack_require__(8812);function Ke(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const We=Ke,Qe=new qe.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ze=new Ve.Vy("@firebase/auth");function Ye(e){if(Ze.logLevel<=Ve.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ze.error("Auth (".concat(Ue.MF,"): ").concat(e),...n)}}function Je(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw tt(e,...n)}function $e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return tt(e,...n)}function Xe(e,t,n){const r=Object.assign(Object.assign({},We()),{[t]:n});return new qe.FA("auth","Firebase",r).create(t,{appName:e.name})}function et(e){return Xe(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Qe.create(e,...n)}function nt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];throw tt(t,...r)}}function rt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ye(t),new Error(t)}function ot(e,t){e||rt(t)}function it(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function at(){return"http:"===st()||"https:"===st()}function st(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class lt{constructor(e,t){this.shortDelay=e,this.longDelay=t,ot(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,qe.jZ)()||(0,qe.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(at()||(0,qe.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function ct(e,t){ot(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class ut{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void rt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void rt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void rt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const dt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ht=new lt(3e4,6e4);function ft(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function pt(e,t,n,r){return mt(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let o={},i={};r&&("GET"===t?i=r:o={body:JSON.stringify(r)});const a=(0,qe.Am)(Object.assign({key:e.config.apiKey},i)).slice(1),s=await e._getAdditionalHeaders();s["Content-Type"]="application/json",e.languageCode&&(s["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:s},o);return(0,qe.c1)()||(l.referrerPolicy="no-referrer"),ut.fetch()(vt(e,e.config.apiHost,n,a),l)})}async function mt(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},dt),t);try{const t=new bt(e),o=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await o.json();if("needConfirmation"in i)throw xt(e,"account-exists-with-different-credential",i);if(o.ok&&!("errorMessage"in i))return i;{const t=o.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw xt(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw xt(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw xt(e,"user-disabled",i);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Xe(e,s,a);Je(e,s)}}catch(Vu){if(Vu instanceof qe.g)throw Vu;Je(e,"network-request-failed",{message:String(Vu)})}}async function gt(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await pt(e,t,n,r,o);return"mfaPendingCredential"in i&&Je(e,"multi-factor-auth-required",{_serverResponse:i}),i}function vt(e,t,n,r){const o="".concat(t).concat(n,"?").concat(r);return e.config.emulator?ct(e.config,o):"".concat(e.config.apiScheme,"://").concat(o)}function yt(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class bt{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t($e(this.auth,"network-request-failed")),ht.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xt(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=$e(e,t,r);return o.customData._tokenResponse=n,o}function wt(e){return void 0!==e&&void 0!==e.enterprise}class _t{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return yt(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function kt(e,t){return pt(e,"GET","/v2/recaptchaConfig",ft(e,t))}async function At(e,t){return pt(e,"POST","/v1/accounts:lookup",t)}function St(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Vu){}}function Nt(e){return 1e3*Number(e)}function Ct(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Ye("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,qe.u)(n);return e?JSON.parse(e):(Ye("Failed to decode base64 JWT payload"),null)}catch(Vu){return Ye("Caught error parsing JWT payload as JSON",null===Vu||void 0===Vu?void 0:Vu.toString()),null}}function jt(e){const t=Ct(e);return nt(t,"internal-error"),nt("undefined"!==typeof t.exp,"internal-error"),nt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Et(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Vu){throw Vu instanceof qe.g&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(Vu)&&e.auth.currentUser===e&&await e.auth.signOut(),Vu}}class Tt{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Vu){return void((null===Vu||void 0===Vu?void 0:Vu.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class It{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=St(this.lastLoginAt),this.creationTime=St(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Pt(e){var t;const n=e.auth,r=await e.getIdToken(),o=await Et(e,At(n,{idToken:r}));nt(null===o||void 0===o?void 0:o.users.length,n,"internal-error");const i=o.users[0];e._notifyReloadListener(i);const a=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?Ot(i.providerUserInfo):[],s=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&i.passwordHash)&&!(null===s||void 0===s?void 0:s.length),h=!!u&&d,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new It(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function Ot(e){return e.map(e=>{var{providerId:t}=e,n=He(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Mt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){nt(e.idToken,"internal-error"),nt("undefined"!==typeof e.idToken,"internal-error"),nt("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):jt(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){nt(0!==e.length,"internal-error");const t=jt(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(nt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:o}=await async function(e,t){const n=await mt(e,{},async()=>{const n=(0,qe.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:o}=e.config,i=vt(e,r,"/v1/token","key=".concat(o)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ut.fetch()(i,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(o))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:o}=t,i=new Mt;return n&&(nt("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(nt("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),o&&(nt("number"===typeof o,"internal-error",{appName:e}),i.expirationTime=o),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mt,this.toJSON())}_performRefresh(){return rt("not implemented")}}function Lt(e,t){nt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Rt{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,o=He(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Tt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new It(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Et(this,this.stsTokenManager.getToken(this.auth,e));return nt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,qe.Ku)(e),r=await n.getIdToken(t),o=Ct(r);nt(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const i="object"===typeof o.firebase?o.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:o,token:r,authTime:St(Nt(o.auth_time)),issuedAtTime:St(Nt(o.iat)),expirationTime:St(Nt(o.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,qe.Ku)(e);await Pt(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(nt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Rt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Pt(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,Ue.xZ)(this.auth.app))return Promise.reject(et(this.auth));const e=await this.getIdToken();return await Et(this,async function(e,t){return pt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,o,i,a,s,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(o=t.phoneNumber)&&void 0!==o?o:void 0,f=null!==(i=t.photoURL)&&void 0!==i?i:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(s=t._redirectEventId)&&void 0!==s?s:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:b,isAnonymous:x,providerData:w,stsTokenManager:_}=t;nt(y&&_,e,"internal-error");const k=Mt.fromJSON(this.name,_);nt("string"===typeof y,e,"internal-error"),Lt(u,e.name),Lt(d,e.name),nt("boolean"===typeof b,e,"internal-error"),nt("boolean"===typeof x,e,"internal-error"),Lt(h,e.name),Lt(f,e.name),Lt(p,e.name),Lt(m,e.name),Lt(g,e.name),Lt(v,e.name);const A=new Rt({uid:y,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:x,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:k,createdAt:g,lastLoginAt:v});return w&&Array.isArray(w)&&(A.providerData=w.map(e=>Object.assign({},e))),m&&(A._redirectEventId=m),A}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Mt;r.updateFromServerResponse(t);const o=new Rt({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Pt(o),o}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];nt(void 0!==r.localId,"internal-error");const o=void 0!==r.providerUserInfo?Ot(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null===o||void 0===o?void 0:o.length),a=new Mt;a.updateFromIdToken(n);const s=new Rt({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new It(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===o||void 0===o?void 0:o.length)};return Object.assign(s,l),s}}const Dt=new Map;function Ft(e){ot(e instanceof Function,"Expected a class definition");let t=Dt.get(e);return t?(ot(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Dt.set(e,t),t)}class zt{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}zt.type="NONE";const Bt=zt;function Ut(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class qt{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:o}=this.auth;this.fullUserKey=Ut(this.userKey,r.apiKey,o),this.fullPersistenceKey=Ut("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Rt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new qt(Ft(Bt),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let o=r[0]||Ft(Bt);const i=Ut(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){const n=Rt._fromJSON(e,t);c!==o&&(a=n),o=c;break}}catch(l){}const s=r.filter(e=>e._shouldAllowMigration);return o._shouldAllowMigration&&s.length?(o=s[0],a&&await o._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==o)try{await e._remove(i)}catch(l){}})),new qt(o,e,n)):new qt(o,e,n)}}function Vt(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Wt(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ht(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Zt(t))return"Blackberry";if(Yt(t))return"Webos";if(Gt(t))return"Safari";if((t.includes("chrome/")||Kt(t))&&!t.includes("edge/"))return"Chrome";if(Qt(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Ht(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,qe.ZQ)();return/firefox\//i.test(e)}function Gt(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,qe.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Kt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,qe.ZQ)();return/crios\//i.test(e)}function Wt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,qe.ZQ)();return/iemobile/i.test(e)}function Qt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,qe.ZQ)();return/android/i.test(e)}function Zt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,qe.ZQ)();return/blackberry/i.test(e)}function Yt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,qe.ZQ)();return/webos/i.test(e)}function Jt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,qe.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function $t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,qe.ZQ)();return Jt(e)||Qt(e)||Yt(e)||Zt(e)||/windows phone/i.test(e)||Wt(e)}function Xt(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Vt((0,qe.ZQ)());break;case"Worker":t="".concat(Vt((0,qe.ZQ)()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ue.MF,"/").concat(r)}class en{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(Vu){r(Vu)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Vu){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Vu||void 0===Vu?void 0:Vu.message})}}}class tn{constructor(e){var t,n,r,o;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(o=e.forceUpgradeOnSignin)&&void 0!==o&&o,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,o,i,a;const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(o=s.containsUppercaseLetter)||void 0===o||o),s.isValid&&(s.isValid=null===(i=s.containsNumericCharacter)||void 0===i||i),s.isValid&&(s.isValid=null===(a=s.containsNonAlphanumericCharacter)||void 0===a||a),s}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class nn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new on(this),this.idTokenSubscription=new on(this),this.beforeStateQueue=new en(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ft(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await qt.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Vu){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await At(this,{idToken:e}),n=await Rt._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if((0,Ue.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==i||!(null===a||void 0===a?void 0:a.user)||(r=a.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(Vu){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(Vu))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Vu){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Pt(e)}catch(Vu){if((null===Vu||void 0===Vu?void 0:Vu.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,Ue.xZ)(this.app))return Promise.reject(et(this));const t=e?(0,qe.Ku)(e):null;return t&&nt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&nt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,Ue.xZ)(this.app)?Promise.reject(et(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,Ue.xZ)(this.app)?Promise.reject(et(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ft(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return pt(e,"GET","/v2/passwordPolicy",ft(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new tn(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new qe.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return pt(e,"POST","/v2/accounts:revokeToken",ft(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ft(e)||this._popupRedirectResolver;nt(t,this,"argument-error"),this.redirectPersistenceManager=await qt.create(this,[Ft(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const o="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(nt(a,this,"internal-error"),a.then(()=>{i||o(this.currentUser)}),"function"===typeof t){const o=e.addObserver(t,n,r);return()=>{i=!0,o()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Xt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Ze.logLevel<=Ve.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ze.warn("Auth (".concat(Ue.MF,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function rn(e){return(0,qe.Ku)(e)}class on{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,qe.tD)(e=>this.observer=e)}get next(){return nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let an={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sn(e){return an.loadJS(e)}function ln(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class cn{constructor(e){this.type="recaptcha-enterprise",this.auth=rn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const o=window.grecaptcha;wt(o)?o.enterprise.ready(()=>{o.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{kt(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new _t(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(o=>{if(!t&&wt(window.grecaptcha))n(o,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=an.recaptchaEnterpriseScript;0!==t.length&&(t+=o),sn(t).then(()=>{n(o,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function un(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=new cn(e);let i;try{i=await o.verify(n)}catch(s){i=await o.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function dn(e,t,n,r){var o;if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await un(e,t,n,"getOobCode"===n);return r(e,o)}return r(e,t).catch(async o=>{if(o.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const o=await un(e,t,n,"getOobCode"===n);return r(e,o)}return Promise.reject(o)})}function hn(e,t,n){const r=rn(e);nt(r._canInitEmulator,r,"emulator-config-failed"),nt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const o=!!(null===n||void 0===n?void 0:n.disableWarnings),i=fn(t),{host:a,port:s}=function(e){const t=fn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const e=o[1];return{host:e,port:pn(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:pn(t)}}}(t),l=null===s?"":":".concat(s);r.config.emulator={url:"".concat(i,"//").concat(a).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:s,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:o})}),o||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function fn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function pn(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class mn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return rt("not implemented")}_getIdTokenResponse(e){return rt("not implemented")}_linkToIdToken(e,t){return rt("not implemented")}_getReauthenticationResolver(e){return rt("not implemented")}}async function gn(e,t){return pt(e,"POST","/v1/accounts:signUp",t)}async function vn(e,t){return gt(e,"POST","/v1/accounts:signInWithPassword",ft(e,t))}class yn extends mn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new yn(e,t,"password")}static _fromEmailAndCode(e,t){return new yn(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return dn(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",vn);case"emailLink":return async function(e,t){return gt(e,"POST","/v1/accounts:signInWithEmailLink",ft(e,t))}(e,{email:this._email,oobCode:this._password});default:Je(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return dn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gn);case"emailLink":return async function(e,t){return gt(e,"POST","/v1/accounts:signInWithEmailLink",ft(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Je(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function bn(e,t){return gt(e,"POST","/v1/accounts:signInWithIdp",ft(e,t))}class xn extends mn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Je("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,o=He(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new xn(n,r);return i.idToken=o.idToken||void 0,i.accessToken=o.accessToken||void 0,i.secret=o.secret,i.nonce=o.nonce,i.pendingToken=o.pendingToken||null,i}_getIdTokenResponse(e){return bn(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,bn(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,bn(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,qe.Am)(t)}return e}}const wn={USER_NOT_FOUND:"user-not-found"};class _n extends mn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new _n({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new _n({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return gt(e,"POST","/v1/accounts:signInWithPhoneNumber",ft(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await gt(e,"POST","/v1/accounts:signInWithPhoneNumber",ft(e,t));if(n.temporaryProof)throw xt(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return gt(e,"POST","/v1/accounts:signInWithPhoneNumber",ft(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),wn)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:o}=e;return n||t||r||o?new _n({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:o}):null}}class kn{constructor(e){var t,n,r,o,i,a;const s=(0,qe.I9)((0,qe.hp)(e)),l=null!==(t=s.apiKey)&&void 0!==t?t:null,c=null!==(n=s.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=s.mode)&&void 0!==r?r:null);nt(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(o=s.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(i=s.languageCode)&&void 0!==i?i:null,this.tenantId=null!==(a=s.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,qe.I9)((0,qe.hp)(e)).link,n=t?(0,qe.I9)((0,qe.hp)(t)).deep_link_id:null,r=(0,qe.I9)((0,qe.hp)(e)).deep_link_id;return(r?(0,qe.I9)((0,qe.hp)(r)).link:null)||r||n||t||e}(e);try{return new kn(t)}catch(n){return null}}}class An{constructor(){this.providerId=An.PROVIDER_ID}static credential(e,t){return yn._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=kn.parseLink(t);return nt(n,"argument-error"),yn._fromEmailAndCode(e,n.code,n.tenantId)}}An.PROVIDER_ID="password",An.EMAIL_PASSWORD_SIGN_IN_METHOD="password",An.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Sn{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Nn extends Sn{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Cn extends Nn{constructor(){super("facebook.com")}static credential(e){return xn._fromParams({providerId:Cn.PROVIDER_ID,signInMethod:Cn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cn.credentialFromTaggedObject(e)}static credentialFromError(e){return Cn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Cn.credential(t.oauthAccessToken)}catch(n){return null}}}Cn.FACEBOOK_SIGN_IN_METHOD="facebook.com",Cn.PROVIDER_ID="facebook.com";class jn extends Nn{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xn._fromParams({providerId:jn.PROVIDER_ID,signInMethod:jn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return jn.credentialFromTaggedObject(e)}static credentialFromError(e){return jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return jn.credential(n,r)}catch(o){return null}}}jn.GOOGLE_SIGN_IN_METHOD="google.com",jn.PROVIDER_ID="google.com";class En extends Nn{constructor(){super("github.com")}static credential(e){return xn._fromParams({providerId:En.PROVIDER_ID,signInMethod:En.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return En.credentialFromTaggedObject(e)}static credentialFromError(e){return En.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return En.credential(t.oauthAccessToken)}catch(n){return null}}}En.GITHUB_SIGN_IN_METHOD="github.com",En.PROVIDER_ID="github.com";class Tn extends Nn{constructor(){super("twitter.com")}static credential(e,t){return xn._fromParams({providerId:Tn.PROVIDER_ID,signInMethod:Tn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Tn.credentialFromTaggedObject(e)}static credentialFromError(e){return Tn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Tn.credential(n,r)}catch(o){return null}}}async function In(e,t){return gt(e,"POST","/v1/accounts:signUp",ft(e,t))}Tn.TWITTER_SIGN_IN_METHOD="twitter.com",Tn.PROVIDER_ID="twitter.com";class Pn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=await Rt._fromIdTokenResponse(e,n,r),i=On(n);return new Pn({user:o,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=On(n);return new Pn({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function On(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}async function Mn(e){var t;if((0,Ue.xZ)(e.app))return Promise.reject(et(e));const n=rn(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Pn({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await In(n,{returnSecureToken:!0}),o=await Pn._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(o.user),o}class Ln extends qe.g{constructor(e,t,n,r){var o;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Ln.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Ln(e,t,n,r)}}function Rn(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ln._fromErrorAndOperation(e,n,t,r);throw n})}async function Dn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Et(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Pn._forOperation(e,"link",r)}async function Fn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if((0,Ue.xZ)(r.app))return Promise.reject(et(r));const o="reauthenticate";try{const i=await Et(e,Rn(r,o,t,e),n);nt(i.idToken,r,"internal-error");const a=Ct(i.idToken);nt(a,r,"internal-error");const{sub:s}=a;return nt(e.uid===s,r,"user-mismatch"),Pn._forOperation(e,o,i)}catch(Vu){throw(null===Vu||void 0===Vu?void 0:Vu.code)==="auth/".concat("user-not-found")&&Je(r,"user-mismatch"),Vu}}async function zn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,Ue.xZ)(e.app))return Promise.reject(et(e));const r="signIn",o=await Rn(e,r,t),i=await Pn._fromIdTokenResponse(e,r,o);return n||await e._updateCurrentUser(i.user),i}async function Bn(e,t){return zn(rn(e),t)}async function Un(e){const t=rn(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function qn(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const o=(0,qe.Ku)(e),i={idToken:await o.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await Et(o,async function(e,t){return pt(e,"POST","/v1/accounts:update",t)}(o.auth,i));o.displayName=a.displayName||null,o.photoURL=a.photoUrl||null;const s=o.providerData.find(e=>{let{providerId:t}=e;return"password"===t});s&&(s.displayName=o.displayName,s.photoURL=o.photoURL),await o._updateTokensIfNecessary(a)}new WeakMap;const Vn="__sak";class Hn{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Vn,"1"),this.storage.removeItem(Vn),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Gn extends Hn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$t(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},o=this.storage.getItem(n);(0,qe.lT)()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Gn.type="LOCAL";const Kn=Gn;class Wn extends Hn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Wn.type="SESSION";const Qn=Wn;class Zn{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Zn(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:o}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async e=>e(t.origin,o)),s=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Yn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Zn.receivers=[];class Jn{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,i;return new Promise((a,s)=>{const l=Yn("",20);r.port1.start();const c=setTimeout(()=>{s(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),o=setTimeout(()=>{s(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(t.data.response);break;default:clearTimeout(c),clearTimeout(o),s(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function $n(){return window}function Xn(){return"undefined"!==typeof $n().WorkerGlobalScope&&"function"===typeof $n().importScripts}const er="firebaseLocalStorageDb",tr="firebaseLocalStorage",nr="fbase_key";class rr{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function or(e,t){return e.transaction([tr],t?"readwrite":"readonly").objectStore(tr)}function ir(){const e=indexedDB.open(er,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(tr,{keyPath:nr})}catch(Vu){n(Vu)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(tr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(er);return new rr(e).toPromise()}(),t(await ir()))})})}async function ar(e,t,n){const r=or(e,!0).put({[nr]:t,value:n});return new rr(r).toPromise()}function sr(e,t){const n=or(e,!0).delete(t);return new rr(n).toPromise()}class lr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await ir()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Vu){if(t++>3)throw Vu;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Xn()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zn._getInstance(Xn()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Jn(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ir();return await ar(e,Vn,"1"),await sr(e,Vn),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ar(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=or(e,!1).get(t),r=await new rr(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>sr(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=or(e,!1).getAll();return new rr(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:o}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}lr.type="LOCAL";const cr=lr;ln("rcb"),new lt(3e4,6e4);const ur="recaptcha";async function dr(e,t,n){var r;const o=await n.verify();try{let i;if(nt("string"===typeof o,e,"argument-error"),nt(n.type===ur,e,"argument-error"),i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){nt("enroll"===t.type,e,"internal-error");const n=await function(e,t){return pt(e,"POST","/v2/accounts/mfaEnrollment:start",ft(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:o}});return n.phoneSessionInfo.sessionInfo}{nt("signin"===t.type,e,"internal-error");const n=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;nt(n,e,"missing-multi-factor-info");const a=await function(e,t){return pt(e,"POST","/v2/accounts/mfaSignIn:start",ft(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:o}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return pt(e,"POST","/v1/accounts:sendVerificationCode",ft(e,t))}(e,{phoneNumber:i.phoneNumber,recaptchaToken:o});return t}}finally{n._reset()}}class hr{constructor(e){this.providerId=hr.PROVIDER_ID,this.auth=rn(e)}verifyPhoneNumber(e,t){return dr(this.auth,e,(0,qe.Ku)(t))}static credential(e,t){return _n._fromVerification(e,t)}static credentialFromResult(e){const t=e;return hr.credentialFromTaggedObject(t)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?_n._fromTokenResponse(n,r):null}}function fr(e,t){return t?Ft(t):(nt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}hr.PROVIDER_ID="phone",hr.PHONE_SIGN_IN_METHOD="phone";class pr extends mn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return bn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return bn(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function mr(e){return zn(e.auth,new pr(e),e.bypassAuthState)}function gr(e){const{auth:t,user:n}=e;return nt(n,t,"internal-error"),Fn(n,new pr(e),e.bypassAuthState)}async function vr(e){const{auth:t,user:n}=e;return nt(n,t,"internal-error"),Dn(n,new pr(e),e.bypassAuthState)}class yr{constructor(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Vu){this.reject(Vu)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:o,error:i,type:a}=e;if(i)return void this.reject(i);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(Vu){this.reject(Vu)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mr;case"linkViaPopup":case"linkViaRedirect":return vr;case"reauthViaPopup":case"reauthViaRedirect":return gr;default:Je(this.auth,"internal-error")}}resolve(e){ot(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ot(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const br=new lt(2e3,1e4);class xr extends yr{constructor(e,t,n,r,o){super(e,t,r,o),this.provider=n,this.authWindow=null,this.pollId=null,xr.currentPopupAction&&xr.currentPopupAction.cancel(),xr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return nt(e,this.auth,"internal-error"),e}async onExecution(){ot(1===this.filter.length,"Popup operations only handle one event");const e=Yn();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject($e(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject($e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($e(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,br.get())};e()}}xr.currentPopupAction=null;const wr=new Map;class _r extends yr{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=wr.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Sr(t),r=Ar(e);if(!await r._isAvailable())return!1;const o="true"===await r._get(n);return await r._remove(n),o}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Vu){e=()=>Promise.reject(Vu)}wr.set(this.auth._key(),e)}return this.bypassAuthState||wr.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function kr(e,t){wr.set(e._key(),t)}function Ar(e){return Ft(e._redirectPersistence)}function Sr(e){return Ut("pendingRedirect",e.config.apiKey,e.name)}async function Nr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,Ue.xZ)(e.app))return Promise.reject(et(e));const r=rn(e),o=fr(r,t),i=new _r(r,o,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Cr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Er(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Er(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError($e(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(jr(e))}saveEventToCache(e){this.cachedEventUids.add(jr(e)),this.lastProcessedEventTime=Date.now()}}function jr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Er(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Tr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ir=/^https?/;async function Pr(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return pt(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Or(r))return}catch(n){}Je(e,"unauthorized-domain")}function Or(e){const t=it(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return""===o.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&o.hostname===r}if(!Ir.test(n))return!1;if(Tr.test(e))return r===e;const o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const Mr=new lt(3e4,6e4);function Lr(){const e=$n().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Rr(e){return new Promise((t,n)=>{var r,o,i;function a(){Lr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Lr(),n($e(e,"network-request-failed"))},timeout:Mr.get()})}if(null===(o=null===(r=$n().gapi)||void 0===r?void 0:r.iframes)||void 0===o?void 0:o.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=$n().gapi)||void 0===i?void 0:i.load)){const t=ln("iframefcb");return $n()[t]=()=>{gapi.load?a():n($e(e,"network-request-failed"))},sn("".concat(an.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}a()}}).catch(e=>{throw Dr=null,e})}let Dr=null;const Fr=new lt(5e3,15e3),zr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Br=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ur(e){const t=e.config;nt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?ct(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Ue.MF},o=Br.get(e.config.apiHost);o&&(r.eid=o);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat((0,qe.Am)(r).slice(1))}async function qr(e){const t=await function(e){return Dr=Dr||Rr(e),Dr}(e),n=$n().gapi;return nt(n,e,"internal-error"),t.open({where:document.body,url:Ur(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zr,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const o=$e(e,"network-request-failed"),i=$n().setTimeout(()=>{r(o)},Fr.get());function a(){$n().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{r(o)})}))}const Vr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Hr{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Vu){}}}function Gr(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-o)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const l=Object.assign(Object.assign({},Vr),{width:r.toString(),height:o.toString(),top:i,left:a}),c=(0,qe.ZQ)().toLowerCase();n&&(s=Kt(c)?"_blank":n),Ht(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,qe.ZQ)())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==s)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new Hr(null);const d=window.open(t||"",s,u);nt(d,e,"popup-blocked");try{d.focus()}catch(Vu){}return new Hr(d)}const Kr="__/auth/handler",Wr="emulator/auth/handler",Qr=encodeURIComponent("fac");async function Zr(e,t,n,r,o,i){nt(e.config.authDomain,e,"auth-domain-config-required"),nt(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ue.MF,eventId:o};if(t instanceof Sn){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",(0,qe.Im)(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof Nn){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const s=a;for(const u of Object.keys(s))void 0===s[u]&&delete s[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Qr,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Kr);return ct(t,Wr)}(e),"?").concat((0,qe.Am)(s).slice(1)).concat(c)}const Yr="webStorageSupport";const Jr=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qn,this._completeRedirectFn=Nr,this._overrideRedirectResult=kr}async _openPopup(e,t,n,r){var o;ot(null===(o=this.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");return Gr(e,await Zr(e,t,n,it(),r),Yn())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){$n().location.href=e}(await Zr(e,t,n,it(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(ot(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await qr(e),n=new Cr(e);return t.register("authEvent",t=>{nt(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Yr,{type:Yr},n=>{var r;const o=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Yr];void 0!==o&&t(!!o),Je(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Pr(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return $t()||Gt()||Jt()}};var $r="@firebase/auth",Xr="1.7.9";class eo{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const to=(0,qe.XA)("authIdTokenMaxAge")||300;let no=null;function ro(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Ue.Sx)();const t=(0,Ue.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,Ue.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,qe.bD)(r,null!==t&&void 0!==t?t:{}))return e;Je(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Jr,persistence:[cr,Kn,Qn]}),r=(0,qe.XA)("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(o=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>to)return;const r=null===t||void 0===t?void 0:t.token;no!==r&&(no=r,await fetch(o,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){(0,qe.Ku)(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){(0,qe.Ku)(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var o;const i=(0,qe.Tj)("auth");return i&&hn(n,"http://".concat(i)),n}var oo;an={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=$e("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},oo="Browser",(0,Ue.om)(new Ge.uA("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:s}=r.options;nt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:s,clientPlatform:oo,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xt(oo)},c=new nn(r,o,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ft);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,Ue.om)(new Ge.uA("auth-internal",e=>(e=>new eo(e))(rn(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ue.KO)($r,Xr,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(oo)),(0,Ue.KO)($r,Xr,"esm2017");var io=__webpack_require__(5472);(0,Ue.KO)("firebase","10.14.1","app");const ao={apiKey:"AIzaSyArvQzOJTrtsekOK9Wpgi3PezPcM9KmXyY",authDomain:"geoquest2-7e45c.firebaseapp.com",projectId:"geoquest2-7e45c",storageBucket:"geoquest2-7e45c.firebasestorage.app",messagingSenderId:"614868886377",appId:"1:614868886377:web:3c020075969956ef1813f8",measurementId:"G-L45RHX7MCN"},so=["apiKey","authDomain","projectId","appId"],lo=so.every(e=>{const t=ao[e];return"string"===typeof t&&t.trim().length>0});let co=null,uo=null,ho=null;const fo=()=>{if(!lo)throw new Error("Firebase \xe4r inte konfigurerat. Kontrollera att f\xf6ljande milj\xf6variabler \xe4r satta i .env:\n"+so.map(e=>"REACT_APP_FIREBASE_".concat(e.toUpperCase())).join("\n"));if(co)return co;const e=(0,Ue.Dk)();if(e.length>0)return co=e[0],co;try{return co=(0,Ue.Wp)(ao),co}catch(t){throw new Error("Kunde inte initialisera Firebase: ".concat(t.message))}},po=()=>{if(!uo){const e=fo();uo=(0,io.aU)(e)}return uo},mo=()=>{if(!ho){const e=fo();ho=ro(e)}return ho},go=()=>lo,vo=po(),yo=mo(),bo="geoquest:preferences";const xo=new class{getPreferences(){try{const e=localStorage.getItem(bo);return e?JSON.parse(e):{}}catch(e){return console.error("[UserPreferences] Kunde inte l\xe4sa preferenser:",e),{}}}savePreferences(e){try{localStorage.setItem(bo,JSON.stringify(e)),"undefined"!==typeof window&&window.dispatchEvent(new Event("userPreferences:changed"))}catch(t){console.error("[UserPreferences] Kunde inte spara preferenser:",t)}}getAlias(){return this.getPreferences().alias||""}saveAlias(e){const t=this.getPreferences();t.alias=e,this.savePreferences(t)}removeAlias(){const e=this.getPreferences();"alias"in e&&(delete e.alias,this.savePreferences(e))}getContact(){return this.getPreferences().contact||""}saveContact(e){const t=this.getPreferences();t.contact=e,this.savePreferences(t)}removeContact(){const e=this.getPreferences();"contact"in e&&(delete e.contact,this.savePreferences(e))}clearPreferences(){try{localStorage.removeItem(bo),"undefined"!==typeof window&&window.dispatchEvent(new Event("userPreferences:changed"))}catch(e){console.error("[UserPreferences] Kunde inte rensa preferenser:",e)}}};var wo=__webpack_require__(579);const _o="tipspromenad:auth",ko=(0,t.createContext)(),Ao=go(),So=Ao?mo():null,No=Ao?po():null,Co=async function(e){var t,n,r;let{profileOverride:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!No||!e)return;const i=(0,io.H9)(No,"users",e.uid);let a=null;try{a=await(0,io.x7)(i)}catch(c){0}const s=null!==(t=a)&&void 0!==t&&t.exists()?a.data():null,l={profile:{displayName:(null===o||void 0===o?void 0:o.displayName)||e.displayName||e.email||"Anv\xe4ndare",contact:null!==(n=null!==(r=null===o||void 0===o?void 0:o.contact)&&void 0!==r?r:e.email)&&void 0!==n?n:null},email:e.email||null};null!==s&&void 0!==s&&s.createdAt||(l.createdAt=(0,io.O5)()),await(0,io.BN)(i,l,{merge:!0})},jo=e=>{let{children:n}=e;const[r,o]=(0,t.useState)(()=>Ao?null:(()=>{if("undefined"===typeof window)return null;try{const e=window.localStorage.getItem(_o);return e?JSON.parse(e):null}catch(e){return console.warn("Kunde inte l\xe4sa auth fr\xe5n storage",e),null}})()),[i,a]=(0,t.useState)(!Ao);(0,t.useEffect)(()=>{Ao||((e=>{if("undefined"!==typeof window)try{e?window.localStorage.setItem(_o,JSON.stringify(e)):window.localStorage.removeItem(_o)}catch(t){console.warn("Kunde inte skriva auth till storage",t)}})(r),a(!0))},[r]);const s=(0,t.useCallback)(async e=>{if(!Ao)return null;if(!e)return o(null),a(!0),null;try{0;const t=await(async e=>{if(!No||!e)return null;const t=(0,io.H9)(No,"users",e.uid),n=await(0,io.x7)(t),r=n.exists()?n.data():{},o=r.profile||{},i=!0===r.isSuperUser;return{id:e.uid,name:o.displayName||e.displayName||e.email||"Anv\xe4ndare",email:e.email||null,contact:o.contact||e.email||null,isAnonymous:e.isAnonymous,isSuperUser:i,profile:o}})(e);return t?(o(t),a(!0),t):(o(null),a(!0),null)}catch(t){return console.warn("Kunde inte tolka Firebase-anv\xe4ndare",t),o(null),a(!0),null}},[]);(0,t.useEffect)(()=>{if(!Ao||!So)return;const e=function(e,t,n,r){return(0,qe.Ku)(e).onAuthStateChanged(t,n,r)}(So,async e=>{if(!e)try{const e=await Mn(So),t=xo.getAlias(),n=xo.getContact();return void((t||n)&&await Co(e.user,{profileOverride:{displayName:t||"G\xe4st",contact:n||null}}))}catch(t){console.error("[Auth] Kunde inte skapa anonym anv\xe4ndare:",t)}s(e)});return e},[s]);const l=(0,t.useCallback)(async e=>{let{email:t,password:n,name:r}=e;if(!Ao){const e={id:Be(),name:r||"Anv\xe4ndare",email:t,contact:t,isAnonymous:!1,isSuperUser:!1};return o(e),a(!0),e}if(!t||!n)throw new Error("Ange e-post och l\xf6senord.");const i=await function(e,t,n){return(0,Ue.xZ)(e.app)?Promise.reject(et(e)):Bn((0,qe.Ku)(e),An.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Un(e),t})}(So,t,n);return r&&i.user.displayName!==r&&await qn(i.user,{displayName:r}),await Co(i.user,{profileOverride:{displayName:r||i.user.displayName}}),await s(i.user),i.user},[s]),c=(0,t.useCallback)(async e=>{let{name:t,email:n,password:r,contact:i}=e;if(!Ao){if(null===t||void 0===t||!t.trim())throw new Error("Ange ett namn.");const e={id:Be(),name:t.trim(),email:n||null,contact:i||n||null,isAnonymous:!1,isSuperUser:!1};return o(e),a(!0),e}if(null===t||void 0===t||!t.trim()||null===n||void 0===n||!n.trim()||!r)throw new Error("Fyll i namn, e-post och l\xf6senord f\xf6r att registrera.");const l=await async function(e,t,n){if((0,Ue.xZ)(e.app))return Promise.reject(et(e));const r=rn(e),o=dn(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",In),i=await o.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Un(e),t}),a=await Pn._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(a.user),a}(So,n.trim(),r);return l.user.displayName!==t.trim()&&await qn(l.user,{displayName:t.trim()}),await Co(l.user,{profileOverride:{displayName:t.trim(),contact:i||n.trim()}}),await s(l.user),l.user},[s]),u=(0,t.useCallback)(async e=>{let{alias:t,contact:n}=e;if(!Ao){const e={id:Be(),name:t||"G\xe4st",contact:n||null,isAnonymous:!0,isSuperUser:!1};return o(e),a(!0),e}try{t&&xo.saveAlias(t),n&&xo.saveContact(n);const e=So.currentUser;if(e&&e.isAnonymous)return await Co(e,{profileOverride:{displayName:t||e.displayName||"G\xe4st",contact:n||null}}),await s(e),e;const r=await Mn(So);return await Co(r.user,{profileOverride:{displayName:t||r.user.displayName||"G\xe4st",contact:n||null}}),await s(r.user),r.user}catch(r){if("auth/admin-restricted-operation"===r.code){console.warn("[Auth] Anonymous login disabled in Firebase, using offline mode");const e={id:Be(),name:t||"G\xe4st",contact:n||null,isAnonymous:!0,isSuperUser:!1};return o(e),a(!0),e}throw r}},[s]),d=(0,t.useCallback)(async()=>{Ao?await function(e){return(0,qe.Ku)(e).signOut()}(So):(o(null),a(!0))},[]),h=(0,t.useMemo)(()=>({currentUser:r,isAuthenticated:Boolean(r),isSuperUser:!0===(null===r||void 0===r?void 0:r.isSuperUser),isAuthInitialized:i,login:l,register:c,loginAsGuest:u,logout:d,usesFirebaseAuth:Ao}),[r,i,l,c,u,d]);return(0,wo.jsx)(ko.Provider,{value:h,children:n})},Eo=()=>{const e=(0,t.useContext)(ko);if(!e)throw new Error("useAuth m\xe5ste anv\xe4ndas inom AuthProvider");return e};var To=__webpack_require__(2555);const Io=[{id:"q-geography-1",difficulty:"adult",audience:"adult",category:"Geografi",languages:{sv:{text:"Vilken \xe4r Sveriges h\xf6gsta fj\xe4lltopp?",options:["Kebnekaise","Helags","Sarektj\xe5kk\xe5","\xc5reskutan"],explanation:"Kebnekaise \xe4r Sveriges h\xf6gsta berg med sydtoppen 2 095,6 meter \xf6ver havet."},en:{text:"What is Sweden's highest mountain peak?",options:["Kebnekaise","Helags","Sarektj\xe5kk\xe5","\xc5reskutan"],explanation:"Kebnekaise is Sweden's highest mountain with the southern peak at 2,095.6 meters above sea level."}},correctOption:0},{id:"q-geography-2",difficulty:"family",audience:"family",category:"Geografi",languages:{sv:{text:"Vilken svensk stad kallas f\xf6r Lilla London?",options:["G\xf6teborg","Malm\xf6","Stockholm","Uppsala"],explanation:"Smeknamnet kom under 1800-talet d\xe5 m\xe5nga britter flyttade till G\xf6teborg."},en:{text:"Which Swedish city is called Little London?",options:["Gothenburg","Malm\xf6","Stockholm","Uppsala"],explanation:"The nickname came in the 19th century when many Britons moved to Gothenburg."}},correctOption:0},{id:"q-animals-1",difficulty:"kid",audience:"kid",category:"Djur",languages:{sv:{text:'Vilket djur s\xe4ger "kuckeliku"?',options:["Hund","Katt","Tupp","Ko"],explanation:"Tuppen \xe4r den som gal kuckeliku p\xe5 morgonen."},en:{text:'Which animal says "cock-a-doodle-doo"?',options:["Dog","Cat","Rooster","Cow"],explanation:"The rooster is the one that crows cock-a-doodle-doo in the morning."}},correctOption:2},{id:"q-history-1",difficulty:"adult",audience:"adult",category:"Historia",languages:{sv:{text:"N\xe4r blev Sverige medlem i EU?",options:["1993","1995","1998","2001"],explanation:"Sverige gick med i EU den 1 januari 1995."},en:{text:"When did Sweden become a member of the EU?",options:["1993","1995","1998","2001"],explanation:"Sweden joined the EU on January 1, 1995."}},correctOption:1},{id:"q-science-1",difficulty:"family",audience:"family",category:"Naturvetenskap",languages:{sv:{text:"Hur m\xe5nga planeter finns det i v\xe5rt solsystem?",options:["7","8","9","10"],explanation:"Sedan Pluto omklassificerades finns \xe5tta planeter kvar."},en:{text:"How many planets are there in our solar system?",options:["7","8","9","10"],explanation:"Since Pluto was reclassified, eight planets remain."}},correctOption:1},{id:"q-sport-1",difficulty:"adult",audience:"adult",category:"Sport",languages:{sv:{text:"Vilken svensk vann Wimbledon 1990?",options:["Bj\xf6rn Borg","Stefan Edberg","Mats Wilander","Robin S\xf6derling"],explanation:"Stefan Edberg vann Wimbledon b\xe5de 1988 och 1990."},en:{text:"Which Swede won Wimbledon in 1990?",options:["Bj\xf6rn Borg","Stefan Edberg","Mats Wilander","Robin S\xf6derling"],explanation:"Stefan Edberg won Wimbledon in both 1988 and 1990."}},correctOption:1},{id:"q-riddle-1",difficulty:"kid",audience:"kid",category:"G\xe5tor",languages:{sv:{text:"Jag har ett huvud och en fot men ingen kropp, vad \xe4r jag?",options:["En svamp","Ett bord","En s\xe4ng","En stol"],explanation:"En s\xe4ng har b\xe5de huvuds- och fot\xe4nde."},en:{text:"I have a head and a foot but no body, what am I?",options:["A mushroom","A table","A bed","A chair"],explanation:"A bed has both a headboard and a footboard."}},correctOption:2},{id:"q-nature-1",difficulty:"family",audience:"family",category:"Natur",languages:{sv:{text:"Vid vilken temperatur fryser vatten?",options:["0 \xb0C","10 \xb0C","32 \xb0C","100 \xb0C"],explanation:"Vatten fryser vid 0 \xb0C under normala f\xf6rh\xe5llanden."},en:{text:"At what temperature does water freeze?",options:["0 \xb0C","10 \xb0C","32 \xb0C","100 \xb0C"],explanation:"Water freezes at 0 \xb0C under normal conditions."}},correctOption:0}],Po="questions",Oo={listQuestions:async()=>{const e=po();return(await(0,io.getDocs)((0,io.rJ)(e,Po))).docs.map(e=>(0,To.A)({id:e.id},e.data()))},getQuestion:async e=>{if(!e)return null;const t=po(),n=await(0,io.x7)((0,io.H9)(t,Po,e));return n.exists()?(0,To.A)({id:n.id},n.data()):null},getQuestionsByIds:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!Array.isArray(e)||0===e.length)return[];const t=po(),n=e.map(e=>(0,io.x7)((0,io.H9)(t,Po,e)));return(await Promise.all(n)).filter(e=>e.exists()).map(e=>(0,To.A)({id:e.id},e.data()))},subscribeToQuestions:e=>{const t=po(),n=(0,io.rJ)(t,Po);return(0,io.aQ)(n,t=>{const n=t.docs.map(e=>(0,To.A)({id:e.id},e.data()));e(n)},t=>{console.error("[Firestore] Error in questions subscription:",t),e([])})},deleteQuestion:async e=>{const t=po();await(0,io.deleteDoc)((0,io.H9)(t,Po,e))},deleteQuestions:async e=>{if(!e||0===e.length)return;const t=po(),n=(0,io.wP)(t);e.forEach(e=>{const r=(0,io.H9)(t,Po,e);n.delete(r)}),await n.commit()},addManyQuestions:async e=>{if(!e||0===e.length)return;const t=po(),n=(0,io.wP)(t);e.forEach(e=>{const r=(0,io.H9)(t,Po,e.id),o=(0,To.A)((0,To.A)({},e),{},{createdAt:e.createdAt||(0,io.O5)()});n.set(r,o,{merge:!0})}),await n.commit()},updateQuestion:async(e,t)=>{const n=po(),r=(0,io.H9)(n,Po,e);await(0,io.mZ)(r,t)},updateManyQuestions:async e=>{if(!e||0===e.length)return;const t=po();for(let n=0;n<e.length;n+=500){const r=(0,io.wP)(t);e.slice(n,n+500).forEach(e=>{let{questionId:n,updateData:o}=e;const i=(0,io.H9)(t,Po,n);r.update(i,o)}),await r.commit()}}},Mo=Oo,Lo=async e=>{await Mo.deleteQuestion(e)},Ro=async e=>{await Mo.deleteQuestions(e)},Do=async()=>Mo.listQuestions(),Fo=async e=>Mo.getQuestionsByIds(e),zo=async(e,t)=>{await Mo.updateQuestion(e,t)},Bo=async(e,t)=>{const n=ro().currentUser;if(!n)throw new Error("User must be authenticated to queue tasks.");const r=await fetch((e=>"https://".concat("europe-west1","-").concat("geoquest2-7e45c",".cloudfunctions.net/").concat(e))(e),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(await n.getIdToken())},body:JSON.stringify(t)}),o=await r.json();if(!r.ok)throw new Error(o.error||"Failed to queue task with ".concat(e));return o},Uo=async e=>{let{amount:t,category:n,ageGroup:r,difficulty:o,provider:i}=e;return await Bo("generateAIQuestions",{amount:t,category:n,ageGroup:r,difficulty:o,provider:i})},qo=async e=>{let{question:t,options:n,correctOption:r,explanation:o}=e;return await Bo("validateQuestionWithAI",{question:t,options:n,correctOption:r,explanation:o})},Vo=async e=>{let{questions:t}=e;return await Bo("batchValidateQuestions",{questions:t})},Ho=async e=>{let{questionId:t,provider:n}=e;return await Bo("regenerateQuestionEmoji",{questionId:t,provider:n})},Go=async e=>{let{questionIds:t}=e;return await Bo("batchRegenerateEmojis",{questionIds:t})},Ko=["children","youth","adults"],Wo={easy:["children"],medium:["youth"],hard:["adults"],kid:["children"],family:["children","adults"],adult:["adults"]},Qo={barn:["children"],kid:["children"],children:["children"],ungdom:["youth"],youth:["youth"],vuxen:["adults"],adult:["adults"],familj:["children","adults"],family:["children","adults"]},Zo=["swedish","english","international","global","german","norwegian","danish"],Yo=e=>"string"===typeof e?e.toLowerCase().trim():"",Jo=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sv";const n=[],r=((e,t)=>e.languages?e.languages[t]:{text:e.text,options:e.options,explanation:e.explanation})(e,t);if(!r)return n.push("Fr\xe5gan saknar ".concat("sv"===t?"svensk":"engelsk"," \xf6vers\xe4ttning")),{valid:!1,errors:n};const{text:o,options:i,explanation:a}=r,s=e.correctOption;if((!o||o.trim().length<10)&&n.push("Fr\xe5getexten m\xe5ste vara minst 10 tecken l\xe5ng"),Array.isArray(i))if(4!==i.length)n.push("Fr\xe5gan m\xe5ste ha exakt 4 svarsalternativ (har ".concat(i.length,")"));else{i.forEach((e,t)=>{e&&0!==e.trim().length||n.push("Alternativ ".concat(t+1," \xe4r tomt"))});new Set(i.map(e=>e.trim().toLowerCase())).size!==i.length&&n.push("Flera svarsalternativ \xe4r identiska");const e=$o(i);e.length>0&&n.push("Varning: Dessa alternativ verkar liknande: ".concat(e.join(", ")))}else n.push("Fr\xe5gan m\xe5ste ha svarsalternativ");"number"!==typeof s?n.push("Fr\xe5gan m\xe5ste ha ett korrekt svar angivet (correctOption)"):(s<0||s>=((null===i||void 0===i?void 0:i.length)||0))&&n.push("Korrekt svar (".concat(s,") \xe4r utanf\xf6r giltigt intervall (0-").concat(((null===i||void 0===i?void 0:i.length)||1)-1,")")),(!a||a.trim().length<10)&&n.push("F\xf6rklaringen m\xe5ste vara minst 10 tecken l\xe5ng");const l=(e=>{const t=new Set;Array.isArray(e.ageGroups)&&e.ageGroups.forEach(e=>{const n=Yo(e);Ko.includes(n)&&t.add(n)});const n=Yo(e.difficulty);Wo[n]&&Wo[n].forEach(e=>t.add(e));const r=Yo(e.audience);return Qo[r]&&Qo[r].forEach(e=>t.add(e)),Array.from(t)})(e);0===l.length&&n.push("Fr\xe5gan m\xe5ste ha minst en ageGroup (children/youth/adults)");const c=(e=>{const t=Yo(e.targetAudience);if(t)return t;const n=Yo(e.audience);return n||""})(e);c?Zo.includes(c)||n.push("Fr\xe5gan m\xe5ste ha en giltig targetAudience (".concat(Zo.join("/"),")")):n.push("Fr\xe5gan m\xe5ste ha en targetAudience (t.ex. swedish/english/international)");const u=(e=>Array.isArray(e.categories)?e.categories.filter(e=>"string"===typeof e).map(e=>e.trim()).filter(e=>e.length>0):"string"===typeof e.category&&e.category.trim().length>0?[e.category.trim()]:[])(e);return 0===u.length&&n.push("Fr\xe5gan m\xe5ste ha minst en kategori"),e.languages&&(e.languages.sv||n.push("Fr\xe5gan saknar svensk \xf6vers\xe4ttning"),e.languages.en||n.push("Fr\xe5gan saknar engelsk \xf6vers\xe4ttning")),{valid:0===n.length,errors:n}},$o=e=>{const t=[];for(let n=0;n<e.length;n++)for(let r=n+1;r<e.length;r++){Xo(e[n],e[r])>.8&&t.push('"'.concat(e[n],'" \u2248 "').concat(e[r],'"'))}return t},Xo=(e,t)=>{const n=e.toLowerCase().trim(),r=t.toLowerCase().trim();if(n===r)return 1;return 1-ei(n,r)/Math.max(n.length,r.length)},ei=(e,t)=>{const n=e.length,r=t.length,o=Array(n+1).fill(null).map(()=>Array(r+1).fill(0));for(let i=0;i<=n;i++)o[i][0]=i;for(let i=0;i<=r;i++)o[0][i]=i;for(let i=1;i<=n;i++)for(let n=1;n<=r;n++)e[i-1]===t[n-1]?o[i][n]=o[i-1][n-1]:o[i][n]=Math.min(o[i-1][n]+1,o[i][n-1]+1,o[i-1][n-1]+1);return o[n][r]},ti=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sv",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.85;const r=[],o=new Set;for(let c=0;c<e.length;c++)for(let u=c+1;u<e.length;u++){var i,a,s,l;const d=e[c],h=e[u],f=[d.id,h.id].sort().join("-");if(o.has(f))continue;o.add(f);const p=(null===(i=d.languages)||void 0===i||null===(a=i[t])||void 0===a?void 0:a.text)||"",m=(null===(s=h.languages)||void 0===s||null===(l=s[t])||void 0===l?void 0:l.text)||"";if(!p||!m)continue;const g=Xo(p,m);g>=n&&r.push({question1:d,question2:h,similarity:Math.round(100*g),text1:p,text2:m,pairId:f})}return r.sort((e,t)=>t.similarity-e.similarity)};let ni=[],ri=new Map,oi=!1,ii=null;const ai=new Set,si=()=>{ai.forEach(e=>e([...ni]))},li=()=>{var e;e=Array.from(ri.values()),ni=e.sort((e,t)=>{var n,r;const o=null!==(n=e.createdAt)&&void 0!==n&&n.toMillis?e.createdAt.toMillis():0;return(null!==(r=t.createdAt)&&void 0!==r&&r.toMillis?t.createdAt.toMillis():0)-o})},ci=async()=>{try{const e=await Do();return ri=new Map(e.map(e=>[e.id,e])),li(),oi=!0,si(),ni}catch(e){throw console.error("[questionService] Kunde inte ladda fr\xe5gor fr\xe5n Firestore:",e),ri=new Map,ni=[],oi=!0,si(),e}},ui=async()=>oi?ni:(ii||(ii=ci().finally(()=>{ii=null})),ii),di=(e,t)=>{const n=ri.get(e);if(!n)return!1;const r="function"===typeof t?t(n):(0,To.A)((0,To.A)({},n),t);return ri.set(e,r),li(),si(),!0},hi=async(e,t)=>{await ui();try{var n;const r=t?JSON.parse(JSON.stringify(t)):null,o=ri.get(e),i="structure"===(null===o||void 0===o||null===(n=o.aiValidationResult)||void 0===n?void 0:n.validationType),a={structureValidationResult:r,structureValidatedAt:new Date};return i&&(a.aiValidationResult=null),await zo(e,a),di(e,e=>(0,To.A)((0,To.A)({},e),a)),!0}catch(r){throw console.error("[questionService] Kunde inte uppdatera strukturvalidering:",r),r}},fi=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=(Array.isArray(e)?e:[e]).filter(e=>e&&!ri.has(e));if(0!==t.length)try{const e=await Fo(t);e.length>0&&(e.forEach(e=>{e&&ri.set(e.id,e)}),li(),si())}catch(n){console.error("[questionService] Kunde inte ladda fr\xe5gor efter id:",n)}},pi=e=>{var t,n;const r=e.languages?(0,To.A)({},e):(0,To.A)((0,To.A)({},e),{},{languages:{sv:{text:e.text,options:e.options,explanation:e.explanation||"Ingen f\xf6rklaring tillg\xe4nglig"}}}),o=(null===(t=r.languages)||void 0===t?void 0:t.sv)||{text:"",options:[]},i=(null===(n=r.languages)||void 0===n?void 0:n.en)||{text:o.text,options:o.options,explanation:o.explanation};r.languages={sv:{text:o.text||i.text||"",options:Array.isArray(o.options)&&4===o.options.length?o.options:i.options||[],explanation:o.explanation||i.explanation||""},en:{text:i.text||o.text||"",options:Array.isArray(i.options)&&4===i.options.length?i.options:o.options||[],explanation:i.explanation||o.explanation||""}};let a=[];Array.isArray(r.categories)&&r.categories.length>0?a=r.categories:r.category&&(a=[r.category]),a=a.filter(e=>"string"===typeof e&&e.trim().length>0).map(e=>e.trim()),0===a.length&&(a=["Allm\xe4nt"]);let s=[];if(Array.isArray(r.ageGroups)&&r.ageGroups.length>0)s=r.ageGroups;else{const e=r.audience||r.difficulty;"kid"!==e&&"children"!==e||s.push("children"),"youth"!==e&&"medium"!==e||s.push("youth"),"adult"!==e&&"adults"!==e&&"difficult"!==e||s.push("adults")}0===s.length&&(s=["adults"]),s=Array.from(new Set(s));const l=r.targetAudience||"swedish";let c=r.correctOption;if("string"===typeof c){const e=parseInt(c,10);Number.isNaN(e)||(c=e)}return(0,To.A)((0,To.A)({},r),{},{categories:a,ageGroups:s,targetAudience:l,correctOption:c})},mi=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sv";const n=pi(e),r=n.languages[t]||n.languages.sv||n.languages[Object.keys(n.languages)[0]];return r?(0,To.A)((0,To.A)({},n),{},{text:r.text,options:r.options,explanation:r.explanation}):(0,To.A)((0,To.A)({},n),{},{text:"Fr\xe5gan kunde inte laddas",options:[],explanation:""})},gi=()=>(oi||ii||ui().catch(()=>{}),ni.map(pi)),vi=()=>(async()=>(await ui(),ni.map(pi)))(),yi=e=>{if(!e)return null;const t=ri.get(e);return t?pi(t):(fi([e]),null)},bi=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sv";const n=ri.get(e);return n?mi(n,t):(fi([e]),null)},xi=e=>{if(!Array.isArray(e)||0===e.length)return[];const t=e.filter(e=>e&&!ri.has(e));return t.length>0&&fi(t),e.map(e=>{const t=ri.get(e);return t?pi(t):null}).filter(Boolean)},wi=e=>fi(e),_i=async e=>{await ui();if(-1===ni.findIndex(t=>t.id===e))throw new Error("Fr\xe5ga hittades inte i cache.");if(Io.some(t=>t.id===e))throw new Error("Kan inte ta bort inbyggda fr\xe5gor.");return await Lo(e),(e=>{const t=Array.isArray(e)?new Set(e):new Set([e]);let n=!1;t.forEach(e=>{ri.delete(e)&&(n=!0)}),n&&(li(),si())})(e),!0},ki=e=>(ai.add(e),oi?e([...ni]):ui().then(()=>e([...ni])).catch(()=>e([])),()=>ai.delete(e)),Ai=function(e){return Jo(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sv")},Si=function(){return ti(ni,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sv",arguments.length>1&&void 0!==arguments[1]?arguments[1]:.85)},Ni=async e=>{await ui();try{var t;const n=ri.get(e);if(!n)throw new Error("Question ".concat(e," not found"));const r=(null===(t=n.languages)||void 0===t?void 0:t.sv)||{text:n.text,options:n.options,explanation:n.explanation};return await qo({question:r.text,options:r.options,correctOption:n.correctOption,explanation:r.explanation||""})}catch(n){throw console.error("Error validating single question:",n),n}},Ci=async e=>{await ui();try{const t=e.map(e=>ri.get(e)).filter(Boolean).map(e=>{var t;const n=(null===(t=e.languages)||void 0===t?void 0:t.sv)||{text:e.text,options:e.options,explanation:e.explanation};return{id:e.id,question:n.text,options:n.options,correctOption:e.correctOption,explanation:n.explanation}});return await Vo({questions:t})}catch(t){throw console.error("Error batch validating questions:",t),t}},ji=(e,t)=>hi(e,t),Ei=async function(e,t){await ui();try{const n=t?JSON.parse(JSON.stringify(t)):t;return"structure"===(null===n||void 0===n?void 0:n.validationType)?hi(e,n):(await zo(e,{aiValidated:!1,aiValidationResult:n}),di(e,e=>(0,To.A)((0,To.A)({},e),{},{aiValidated:!1,aiValidationResult:n})),!0)}catch(n){throw console.error("Kunde inte markera fr\xe5ga som ovaliderad:",n),n}},Ti=async e=>{await ui();try{return await zo(e,{aiValidated:!0,manuallyApproved:!0,manuallyRejected:!1,manuallyApprovedAt:new Date,aiValidationResult:{valid:!0,validationType:"manual",reasoning:"Manuellt godk\xe4nd efter granskning"},structureValidationResult:{valid:!0,validationType:"manual",reasoning:"Manuellt godk\xe4nd efter granskning",issues:[],checkedAt:new Date}}),di(e,e=>(0,To.A)((0,To.A)({},e),{},{aiValidated:!0,manuallyApproved:!0,manuallyRejected:!1,manuallyApprovedAt:new Date,aiValidationResult:{valid:!0,validationType:"manual",reasoning:"Manuellt godk\xe4nd efter granskning"},structureValidationResult:{valid:!0,validationType:"manual",reasoning:"Manuellt godk\xe4nd efter granskning",issues:[],checkedAt:new Date}})),!0}catch(t){throw console.error("Kunde inte markera fr\xe5ga som manuellt godk\xe4nd:",t),t}},Ii=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";await ui();try{return await zo(e,{aiValidated:!1,manuallyRejected:!0,manuallyApproved:!1,manuallyRejectedAt:new Date,aiValidationResult:{valid:!1,validationType:"manual",issues:[t||"Manuellt underk\xe4nd efter granskning"],reasoning:t||"Manuellt underk\xe4nd efter granskning"}}),di(e,e=>(0,To.A)((0,To.A)({},e),{},{aiValidated:!1,manuallyRejected:!0,manuallyApproved:!1,manuallyRejectedAt:new Date,aiValidationResult:{valid:!1,validationType:"manual",issues:[t||"Manuellt underk\xe4nd efter granskning"],reasoning:t||"Manuellt underk\xe4nd efter granskning"}})),!0}catch(n){throw console.error("Kunde inte markera fr\xe5ga som manuellt underk\xe4nd:",n),n}},Pi=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"anonymous";await ui();try{const r=ni.find(t=>t.id===e);if(!r)throw new Error("Fr\xe5gan hittades inte");const o={reportedAt:new Date,reportedBy:n,reason:t,resolved:!1},i=[...r.reports||[],o];return await zo(e,{reported:!0,reportCount:i.length,reports:i}),di(e,e=>(0,To.A)((0,To.A)({},e),{},{reported:!0,reportCount:i.length,reports:i})),!0}catch(r){throw console.error("Kunde inte rapportera fr\xe5ga:",r),r}},Oi=async e=>{await ui();try{const t=ni.find(t=>t.id===e);if(!t)throw new Error("Fr\xe5gan hittades inte");const n=(t.reports||[]).map(e=>(0,To.A)((0,To.A)({},e),{},{resolved:!0,resolvedAt:new Date,resolution:"approved"}));return await zo(e,{reported:!1,reports:n,reportResolvedAt:new Date}),di(e,e=>(0,To.A)((0,To.A)({},e),{},{reported:!1,reports:n,reportResolvedAt:new Date})),!0}catch(t){throw console.error("Kunde inte godk\xe4nna rapporterad fr\xe5ga:",t),t}},Mi=async(e,t)=>{if(!e)throw new Error("questionId is required");await ui();try{const n=await Ho({questionId:e,provider:t}),{svg:r,provider:o}=n||{},i={illustration:r,illustrationProvider:o,illustrationGeneratedAt:new Date};return await zo(e,i),di(e,e=>e?(0,To.A)((0,To.A)({},e),i):e),n}catch(n){throw console.error("[questionService] Kunde inte regenerera emoji:",n),n}},Li=async e=>{await ui();try{const t=ni.find(t=>t.id===e);if(!t)throw new Error("Fr\xe5gan hittades inte");const n=(t.reports||[]).map(e=>e.reason).filter(Boolean).join("; "),r=(t.reports||[]).map(e=>(0,To.A)((0,To.A)({},e),{},{resolved:!0,resolvedAt:new Date,resolution:"rejected"}));return await zo(e,{reported:!1,aiValidated:!1,manuallyRejected:!0,manuallyApproved:!1,manuallyRejectedAt:new Date,reports:r,reportResolvedAt:new Date,aiValidationResult:{valid:!1,validationType:"manual",issues:["Rapporterad av anv\xe4ndare: ".concat(n)],reasoning:"Underk\xe4nd baserat p\xe5 anv\xe4ndarrapporter: ".concat(n)}}),di(e,e=>(0,To.A)((0,To.A)({},e),{},{reported:!1,aiValidated:!1,manuallyRejected:!0,manuallyApproved:!1,manuallyRejectedAt:new Date,reports:r,reportResolvedAt:new Date,aiValidationResult:{valid:!1,validationType:"manual",issues:["Rapporterad av anv\xe4ndare: ".concat(n)],reasoning:"Underk\xe4nd baserat p\xe5 anv\xe4ndarrapporter: ".concat(n)}})),!0}catch(t){throw console.error("Kunde inte underk\xe4nna rapporterad fr\xe5ga:",t),t}};var Ri=__webpack_require__(4377);const Di={lat:56.6657823,lng:16.3453025},Fi=[Di.lat,Di.lng],zi=()=>{const e="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let t="";for(let n=0;n<6;n+=1)t+=e[Math.floor(32*Math.random())];return t},Bi=async()=>{try{const e=await vi();return 0===e.length?Io:e}catch(e){return Io}},Ui=e=>{const t=Math.max(0,e),n=Math.floor(t/3),r=t-3*n,o=["children","youth","adults"],i={children:n,youth:n,adults:n};for(let a=0;a<r;a+=1)i[o[a%o.length]]+=1;return i},qi=async e=>{let{audience:t,difficulty:n,questionCount:r,categories:o=[]}=e;const i=await Bi();if(0===i.length)throw new Error("Fr\xe5gebanken \xe4r tom. Kontrollera att fr\xe5gor har laddats korrekt fr\xe5n databasen.");if(r<1||r>50)throw new Error("Ogiltigt antal fr\xe5gor (".concat(r,"). V\xe4lj mellan 1 och 50 fr\xe5gor."));if("family"===n)return Vi(i,r,o);const a=[...i.filter(e=>{if(!1===e.aiValidated||!0===e.manuallyRejected||!0===e.reported)return!1;let t=!1;t=Array.isArray(e.ageGroups)&&e.ageGroups.length>0?e.ageGroups.includes(n):"children"===n||"kid"===n?"kid"===e.audience||"kid"===e.difficulty:"youth"===n||"medium"===n?"medium"===e.audience||"medium"===e.difficulty:"adults"!==n&&"adult"!==n||("adult"===e.audience||"adult"===e.difficulty);let r=!1;return 0===o.length?r=!0:Array.isArray(e.categories)?r=e.categories.some(e=>o.includes(e)):e.category&&(r=o.includes(e.category)),t&&r})].sort(()=>Math.random()-.5);if(0===a.length){const e=o.length>0?" och kategorier (".concat(o.join(", "),")"):"";throw new Error("Inga godk\xe4nda fr\xe5gor matchar vald \xe5ldersgrupp (".concat(n,")").concat(e,". Prova en annan kombination eller validera fler fr\xe5gor."))}if(a.length<r){const e=o.length>0?" och kategorier (".concat(o.join(", "),")"):"";throw new Error("Det finns endast ".concat(a.length," godk\xe4nda fr\xe5gor som matchar vald \xe5ldersgrupp (").concat(n,")").concat(e,", men du beh\xf6ver ").concat(r," fr\xe5gor.\n\n")+"V\xe4lj ett l\xe4gre antal fr\xe5gor eller validera fler fr\xe5gor i fr\xe5gebanken.")}return a.slice(0,r)},Vi=(e,t,n)=>{const r=t=>e.filter(e=>{if(!1===e.aiValidated||!0===e.manuallyRejected||!0===e.reported)return!1;let r=!1;return Array.isArray(e.ageGroups)?r=e.ageGroups.includes(t):"children"===t?r="kid"===e.difficulty||"kid"===e.audience:"youth"===t?r="medium"===e.difficulty||"medium"===e.audience:"adults"===t&&(r="adult"===e.difficulty||"adult"===e.audience||"expert"===e.difficulty||"hard"===e.difficulty),!!r&&(0===n.length||(Array.isArray(e.categories)?e.categories.some(e=>n.includes(e)):!!e.category&&n.includes(e.category)))}),o=r("children"),i=r("youth"),a=r("adults"),s=Ui(t),l=s.children,c=s.youth,u=s.adults;if(o.length<l){const e=n.length>0?" och kategorier (".concat(n.join(", "),")"):"";throw new Error("F\xf6r f\xe5 barnfr\xe5gor tillg\xe4ngliga".concat(e,". Beh\xf6ver ").concat(l," men har bara ").concat(o.length,".\n\n")+"Validera fler barnfr\xe5gor eller v\xe4lj f\xe4rre fr\xe5gor totalt.")}if(i.length<c){const e=n.length>0?" och kategorier (".concat(n.join(", "),")"):"";throw new Error("F\xf6r f\xe5 ungdomsfr\xe5gor tillg\xe4ngliga".concat(e,". Beh\xf6ver ").concat(c," men har bara ").concat(i.length,".\n\n")+"Validera fler ungdomsfr\xe5gor eller v\xe4lj f\xe4rre fr\xe5gor totalt.")}if(a.length<u){const e=n.length>0?" och kategorier (".concat(n.join(", "),")"):"";throw new Error("F\xf6r f\xe5 vuxenfr\xe5gor tillg\xe4ngliga".concat(e,". Beh\xf6ver ").concat(u," men har bara ").concat(a.length,".\n\n")+"Validera fler vuxenfr\xe5gor eller v\xe4lj f\xe4rre fr\xe5gor totalt.")}const d={children:[...o].sort(()=>Math.random()-.5).slice(0,l),youth:[...i].sort(()=>Math.random()-.5).slice(0,c),adults:[...a].sort(()=>Math.random()-.5).slice(0,u)},h=["children","youth","adults"].sort(()=>Math.random()-.5),f=[];let p=0;for(;f.length<t;){let e=!1;for(const n of h){const r=d[n];if(p<r.length&&(f.push(r[p]),e=!0,f.length===t))break}if(!e)break;p+=1}return f},Hi=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Di;return e.map((n,r)=>{const o=r/e.length*Math.PI*2,i=.002*Math.sin(o),a=.002*Math.cos(o);return{order:r+1,location:{lat:t.lat+i+.001*(Math.random()-.5),lng:t.lng+a+.001*(Math.random()-.5)},questionId:n.id,title:"Fr\xe5ga ".concat(r+1)}})},Gi=(e,t)=>(0,To.A)((0,To.A)({},e),{},{createdBy:(null===t||void 0===t?void 0:t.id)||"admin",createdByName:(null===t||void 0===t?void 0:t.name)||"Administrat\xf6r",createdAt:(new Date).toISOString(),status:"active"}),Ki=async(e,t)=>{let{name:n,audience:r="family",difficulty:o="family",lengthMeters:i=2500,questionCount:a=8,categories:s=[],allowAnonymous:l=!0,allowRouteSelection:c=!1,language:u="sv",origin:d,seed:h,preferGreenAreas:f}=e;const p=await qi({audience:r,difficulty:o,questionCount:a,categories:s}),m=zi(),g=await(async(e,t)=>{var n,r;let{lengthMeters:o=2500,origin:i,seed:a,preferGreenAreas:s}=t;const l=null!==(n=null===i||void 0===i?void 0:i.lat)&&void 0!==n?n:Di.lat,c=null!==(r=null===i||void 0===i?void 0:i.lng)&&void 0!==r?r:Di.lng;try{const t=await(0,Ri.generateWalkingRoute)({origin:{lat:l,lng:c},lengthMeters:o,checkpointCount:e.length,seed:a,preferGreenAreas:s});return{checkpoints:t.checkpoints.map((t,n)=>({order:t.order,location:t.location,questionId:e[n].id,title:"Fr\xe5ga ".concat(n+1),routeIndex:t.routeIndex})),route:t.route,totalDistance:t.totalDistance}}catch(f){var u,d,h;return console.warn("[RunFactory] Ruttplanering misslyckades, anv\xe4nder cirkul\xe4r fallback:",f),null!==(u=f.message)&&void 0!==u&&u.includes("API")||null!==(d=f.message)&&void 0!==d&&d.includes("network")||null!==(h=f.message)&&void 0!==h&&h.includes("fetch"),{checkpoints:e.map((t,n)=>{const r=n/e.length*Math.PI*2,i=o/1e3/e.length,a=Math.sin(r)*i*.01,s=Math.cos(r)*i*.01;return{order:n+1,location:{lat:l+a,lng:c+s},questionId:t.id,title:"Fr\xe5ga ".concat(n+1)}}),route:null,totalDistance:o}}})(p,{lengthMeters:i,origin:d,seed:h,preferGreenAreas:f});const v={id:Be(),name:n||"Ny runda",description:"Genererad utifr\xe5n \xf6nskem\xe5l",audience:r,difficulty:o,questionCount:a,type:"generated",lengthMeters:i,allowAnonymous:l,allowRouteSelection:c,language:u||"sv",joinCode:m,qrSlug:m.toLowerCase(),checkpoints:g.checkpoints,route:g.route,startPoint:d||Di,questionIds:p.map(e=>e.id)};return Gi(v,t||{id:n||"Auto",name:n||"Auto-generator"})},Wi=()=>po(),Qi=()=>(0,io.rJ)(Wi(),"runs"),Zi=e=>(0,io.rJ)(Wi(),"runs",e,"participants"),Yi=e=>{try{return JSON.parse(JSON.stringify(e))}catch(t){return console.warn("[FirestoreGateway] Serialisering misslyckades:",t),e}},Ji=e=>{if(null===e||void 0===e||!e.exists())return null;const t=e.data();return(0,To.A)({id:e.id},t)},$i=e=>{if(!e)return null;const t=Date.now(),n=e.lastSeen?new Date(e.lastSeen).getTime():0,r=e.completedAt?new Date(e.completedAt).getTime():null,o=Boolean(r),i=!o&&t-n<6e4,a=o?"finished":i?"active":"inactive";return(0,To.A)((0,To.A)({},e),{},{isActive:i,status:a,lastSeenFormatted:e.lastSeen?new Date(e.lastSeen).toLocaleString("sv-SE"):"Aldrig",completedAtFormatted:e.completedAt?new Date(e.completedAt).toLocaleString("sv-SE"):null})},Xi=e=>{if(null===e||void 0===e||!e.exists())return null;const t=(0,To.A)({id:e.id},e.data());return $i(t)},ea={listRuns:async()=>(await(0,io.getDocs)(Qi())).docs.map(Ji).filter(Boolean),async listRunsByIds(e){if(!e||0===e.length)return[];const t=(0,io.P)(Qi(),(0,io._M)((0,io.Fs)(),"in",e));return(await(0,io.getDocs)(t)).docs.map(Ji).filter(Boolean)},async getRun(e){var t;const n=await(0,io.x7)((0,io.H9)(Qi(),e));let r=Ji(n);if(r&&"generated"===r.type&&!r.route&&(null===(t=r.checkpoints)||void 0===t?void 0:t.length)>0){0;try{var o;const{generateWalkingRoute:e}=await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,4377)),t=(null===(o=r.checkpoints[0])||void 0===o?void 0:o.location)||Di,n=await e({origin:t,lengthMeters:r.lengthMeters||2500,checkpointCount:r.checkpoints.length});n.route&&n.route.length>0&&(r=(0,To.A)((0,To.A)({},r),{},{route:n.route}),await(0,io.BN)((0,io.H9)(Qi(),r.id),Yi(r)))}catch(i){console.warn("[FirestoreGateway] Kunde inte generera route-data retroaktivt:",i)}}return r},async getRunByCode(e){try{const t=(0,io.P)(Qi(),(0,io._M)("joinCode","==",e.toUpperCase())),n=await(0,io.getDocs)(t),[r]=n.docs;return r?Ji(r):null}catch(t){if(console.error("[getRunByCode] Firestore query failed:",{code:t.code,message:t.message,joinCode:e,error:t}),"permission-denied"===t.code)throw new Error("Kunde inte h\xe4mta runda - beh\xf6righetsproblem. F\xf6rs\xf6k igen om en stund.");throw t}},async createRun(e,t){const n=await(async(e,t)=>{let{name:n,description:r,audience:o="family",difficulty:i="family",questionCount:a=8,categories:s=[],type:l="hosted",lengthMeters:c=2e3,allowAnonymous:u=!0,allowRouteSelection:d=!1,language:h="sv",origin:f=null}=e;const p=await qi({audience:o,difficulty:i,questionCount:a,categories:s}),m=zi();let g=null,v=[];try{const e=f||Di,t=await(0,Ri.generateWalkingRoute)({origin:e,lengthMeters:c,checkpointCount:p.length});t.route&&t.route.length>0?(g=t.route,v=p.map((e,t)=>{const n=Math.floor(t/p.length*(g.length-1)),r=Math.min(n,g.length-1);return{order:t+1,location:(0,To.A)({},g[r]),questionId:e.id,title:"Fr\xe5ga ".concat(t+1),routeIndex:r}})):v=Hi(p,f||Di)}catch(x){var y;console.warn("[RunFactory] buildHostedRun: kunde inte generera route-data:",x),f&&null!==(y=x.message)&&void 0!==y&&y.includes("API"),v=Hi(p,f||Di)}const b={id:Be(),name:n,description:r,audience:o,difficulty:i,questionCount:a,type:l,lengthMeters:c,allowAnonymous:u,allowRouteSelection:d,language:h||"sv",joinCode:m,qrSlug:m.toLowerCase(),checkpoints:v,route:g,startPoint:f||Di,questionIds:p.map(e=>e.id)};return Gi(b,t)})(e,t);return await(0,io.BN)((0,io.H9)(Qi(),n.id),(0,To.A)((0,To.A)({},Yi(n)),{},{createdAt:(0,io.O5)()})),n},async generateRouteRun(e,t){let n;n="distance-based"===e.runType?await(async(e,t)=>{let{name:n,audience:r="family",difficulty:o="family",distanceBetweenQuestions:i=500,questionCount:a=8,categories:s=[],allowAnonymous:l=!0,language:c="sv"}=e;const u=await qi({audience:r,difficulty:o,questionCount:a,categories:s}),d=zi(),h={id:Be(),name:n||"Distansbaserad runda",description:"G\xe5 fritt - fr\xe5gor triggas automatiskt var X:e meter",audience:r,difficulty:o,questionCount:a,type:"distance-based",distanceBetweenQuestions:i,allowAnonymous:l,allowRouteSelection:!1,language:c||"sv",joinCode:d,qrSlug:d.toLowerCase(),checkpoints:[],route:null,startPoint:null,questionIds:u.map(e=>e.id)};return Gi(h,t||{id:n||"Auto",name:n||"Auto-generator"})})(e,t):"time-based"===e.runType?await(async(e,t)=>{let{name:n,audience:r="family",difficulty:o="family",minutesBetweenQuestions:i=5,questionCount:a=8,categories:s=[],allowAnonymous:l=!0,language:c="sv"}=e;const u=await qi({audience:r,difficulty:o,questionCount:a,categories:s}),d=zi(),h={id:Be(),name:n||"Tidsbaserad runda",description:"Fr\xe5gor sl\xe4pps automatiskt efter angivet tidsintervall.",audience:r,difficulty:o,questionCount:a,type:"time-based",minutesBetweenQuestions:i,allowAnonymous:l,allowRouteSelection:!1,language:c||"sv",joinCode:d,qrSlug:d.toLowerCase(),checkpoints:[],route:null,startPoint:null,questionIds:u.map(e=>e.id)};return Gi(h,t||{id:n||"Auto",name:n||"Auto-generator"})})(e,t):await Ki(e,t);const r=Yi(n);return await(0,io.BN)((0,io.H9)(Qi(),n.id),(0,To.A)((0,To.A)({},r),{},{createdAt:(0,io.O5)()})),n},listParticipants:async e=>(await(0,io.getDocs)(Zi(e))).docs.map(Xi).filter(Boolean),async registerParticipant(e,t){let{userId:n,alias:r,contact:o,isAnonymous:i}=t;const a={id:Be(),runId:e,userId:n||null,alias:r||"G\xe4st",contact:o||null,isAnonymous:Boolean(i),joinedAt:(0,io.O5)(),completedAt:null,currentOrder:1,score:0,answers:[],lastSeen:(0,io.O5)()};try{await(0,io.BN)((0,io.H9)(Zi(e),a.id),a)}catch(s){throw console.error("\u274c Failed to create participant:",s),console.error("Error code:",s.code),console.error("Error message:",s.message),s}return $i((0,To.A)((0,To.A)({},a),{},{joinedAt:(new Date).toISOString(),lastSeen:(new Date).toISOString()}))},async recordAnswer(e,t,n){var r;let{questionId:o,answerIndex:i,correct:a}=n;const s=(0,io.H9)(Zi(e),t),l=await(0,io.x7)(s);if(!l.exists())throw new Error("Deltagare hittades inte.");const c=(0,To.A)({id:t},l.data()),u=Array.isArray(c.answers)?[...c.answers]:[],d=(new Date).toISOString(),h=u.findIndex(e=>e.questionId===o);h>=0?u[h]=(0,To.A)((0,To.A)({},u[h]),{},{answerIndex:i,correct:a,answeredAt:d}):u.push({questionId:o,answerIndex:i,correct:a,answeredAt:d});const f=u.filter(e=>e.correct).length,p=await(0,io.x7)((0,io.H9)(Qi(),e)),m=p.exists()&&(null===(r=p.data().questionIds)||void 0===r?void 0:r.length)||0,g=(0,To.A)((0,To.A)({},c),{},{answers:u,score:f,currentOrder:u.length+1,completedAt:m>0&&u.length===m?d:c.completedAt,lastSeen:d});return await(0,io.BN)(s,Yi(g),{merge:!0}),$i(g)},async completeRun(e,t){const n=(0,io.H9)(Zi(e),t),r=(new Date).toISOString();await(0,io.mZ)(n,{completedAt:r,lastSeen:r})},async closeRun(e){const t=(new Date).toISOString();await(0,io.mZ)((0,io.H9)(Qi(),e),{status:"closed",closedAt:t})},async deleteRun(e){const{deleteDoc:t,getDocs:n}=await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,5472)),r=(await n(Zi(e))).docs.map(e=>t(e.ref));await Promise.all(r),await t((0,io.H9)(Qi(),e))},subscribeRuns(e){const t=(0,io.P)(Qi(),(0,io._M)("status","==","active"));return(0,io.aQ)(t,t=>{const n=t.docs.map(Ji).filter(Boolean);e(n)})},subscribeParticipants:(e,t)=>(0,io.aQ)(Zi(e),e=>{const n=e.docs.map(Xi).filter(Boolean);t(n)}),async heartbeatParticipant(e,t){const n=(0,io.H9)(Zi(e),t),r=(new Date).toISOString();await(0,io.mZ)(n,{lastSeen:r});const o=await(0,io.x7)(n);return Xi(o)},async getParticipant(e,t){const n=await(0,io.x7)((0,io.H9)(Zi(e),t));return Xi(n)},async updateRun(e,t){const n=(0,io.H9)(Qi(),e);await(0,io.mZ)(n,Yi(t));const r=await(0,io.x7)(n);return Ji(r)}};if(!go())throw new Error("Firebase m\xe5ste vara konfigurerat. Kontrollera att alla REACT_APP_FIREBASE_* variabler \xe4r satta i .env");const ta=ea,na=(0,t.createContext)(null),ra="tipspromenad:activeParticipant",oa=e=>{if("undefined"!==typeof window)try{e?window.localStorage.setItem(ra,JSON.stringify(e)):window.localStorage.removeItem(ra)}catch(t){console.warn("[RunContext] Kunde inte skriva aktiv deltagare till localStorage:",t)}},ia=e=>{var t;return null!==e&&void 0!==e&&null!==(t=e.questionIds)&&void 0!==t&&t.length?xi(e.questionIds):[]},aa=e=>{let{children:n}=e;const[r,o]=(0,t.useState)(!1),[i,a]=(0,t.useState)(null),[s,l]=(0,t.useState)(null),[c,u]=(0,t.useState)([]),[d,h]=(0,t.useState)([]),f=(null===i||void 0===i?void 0:i.id)||null,p=(null===s||void 0===s?void 0:s.id)||null,m=(0,t.useRef)(null);(0,t.useEffect)(()=>{m.current=(null===s||void 0===s?void 0:s.id)||null},[s]);const g=(0,t.useCallback)(async e=>{if(e){a(e),u(ia(e)),wi(e.questionIds).then(()=>{u(ia(e))}).catch(e=>{console.warn("[RunContext] Kunde inte ladda fr\xe5gor f\xf6r run:",e)});try{const t=await ta.listParticipants(e.id);h(t);const n=m.current;if(n){const e=t.find(e=>e.id===n);e&&l(e)}}catch(t){console.warn("[RunContext] Kunde inte ladda deltagare f\xf6r run:",t),h([])}}},[]),v=(0,t.useCallback)(async(e,t)=>{const n=await ta.createRun(e,t);return await g(n),n},[g]),y=(0,t.useCallback)(async(e,t)=>{const n=await ta.generateRouteRun(e,t);return await g(n),n},[g]),b=(0,t.useCallback)(async e=>{const t=await ta.getRun(e);if(!t)throw new Error("Runda med ID ".concat(e," hittades inte"));return await g(t),t},[g]),x=(0,t.useCallback)(async(e,t)=>{const n=await ta.getRunByCode(e);if(!n)throw new Error('Ingen runda hittades med anslutningskod "'.concat(e,'"'));const r=await ta.registerParticipant(n.id,t);return await g(n),l(r),{run:n,participant:r}},[g]),w=(0,t.useCallback)(async(e,t)=>{const n=await ta.getRun(e);if(!n)throw new Error("Runda med ID ".concat(e," hittades inte"));const r=t?await ta.getParticipant(e,t):null;return await g(n),l(r),{run:n,participant:r}},[g]),_=(0,t.useCallback)(async()=>{if(!f)return[];const e=await ta.listParticipants(f);h(e);const t=m.current;if(t){const n=e.find(e=>e.id===t);n?l(n):(m.current=null,l(null),oa(null))}return e},[f]),k=(0,t.useCallback)(async e=>{let{questionId:t,answerIndex:n}=e;if(!i||!s)throw new Error("Ingen aktiv runda eller deltagare. Kontrollera din session.");const r=yi(t);if(!r)throw new Error("Fr\xe5ga med ID ".concat(t," hittades inte."));const o=r.correctOption===n,a=await ta.recordAnswer(i.id,s.id,{questionId:t,answerIndex:n,correct:o});return l(a),await _(),{participant:a,correct:o}},[i,s,_]),A=(0,t.useCallback)(async()=>{f&&p?(await ta.completeRun(f,p),await _()):console.warn("[RunContext] F\xf6rs\xf6kte markera deltagare som klar utan aktiv session")},[f,p,_]),S=(0,t.useCallback)(async()=>{if(!f)return;await ta.closeRun(f);const e=await ta.getRun(f);e&&(a(e),u(ia(e)))},[f]),N=(0,t.useCallback)(async e=>{if(!f)return null;const t=await ta.updateRun(f,e);return t&&(a(t),u(ia(t))),t},[f]),C=(0,t.useCallback)(async function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||f;e&&(await ta.deleteRun(e),e===f&&(a(null),l(null),u([]),h([]),oa(null)))},[f]);(0,t.useEffect)(()=>{i&&s?oa({runId:i.id,participantId:s.id}):r&&oa(null)},[i,s,r]),(0,t.useEffect)(()=>{if(r)return;const e=(()=>{if("undefined"===typeof window)return null;try{const e=window.localStorage.getItem(ra);return e?JSON.parse(e):null}catch(e){return console.warn("[RunContext] Kunde inte l\xe4sa aktiv deltagare fr\xe5n localStorage:",e),null}})();null!==e&&void 0!==e&&e.runId&&null!==e&&void 0!==e&&e.participantId&&w(e.runId,e.participantId).catch(e=>{console.warn("[RunContext] Kunde inte \xe5terst\xe4lla session:",e),oa(null)}),o(!0)},[r,w]),(0,t.useEffect)(()=>{if(!f)return()=>{};return ta.subscribeRuns(e=>{const t=e.find(e=>e.id===f);t&&(a(t),u(ia(t)))})},[f]),(0,t.useEffect)(()=>{if(!f)return()=>{};return ta.subscribeParticipants(f,e=>{h(e);const t=m.current;if(t){const n=e.find(e=>e.id===t);n?l(n):(m.current=null,l(null),oa(null))}})},[f]),(0,t.useEffect)(()=>{if(!f||!p)return;if("undefined"===typeof window)return;const e=()=>{ta.heartbeatParticipant(f,p).catch(e=>{var t;console.warn("[RunContext] Heartbeat misslyckades:",e),("not-found"===(null===e||void 0===e?void 0:e.code)||null!==e&&void 0!==e&&null!==(t=e.message)&&void 0!==t&&t.includes("No document to update"))&&(m.current=null,l(null),oa(null))})};e();const t=window.setInterval(e,15e3),n=()=>{"undefined"!==typeof document&&"visible"===document.visibilityState&&e()},r=()=>e();return"undefined"!==typeof document&&document.addEventListener("visibilitychange",n),window.addEventListener("beforeunload",r),()=>{window.clearInterval(t),"undefined"!==typeof document&&document.removeEventListener("visibilitychange",n),window.removeEventListener("beforeunload",r)}},[f,p]),(0,t.useEffect)(()=>{f&&_().catch(e=>{console.warn("[RunContext] Kunde inte ladda initial deltagarlista:",e),h([])})},[_,f]);const j=(0,t.useMemo)(()=>({currentRun:i,questions:c,participants:d,currentParticipant:s,createHostedRun:v,generateRun:y,loadRunById:b,updateRun:N,closeRun:S,deleteRun:C,joinRunByCode:x,attachToRun:w,submitAnswer:k,completeRunForParticipant:A,refreshParticipants:_}),[i,c,d,s,v,y,b,N,S,C,x,w,k,A,_]);return(0,wo.jsx)(na.Provider,{value:j,children:n})},sa=()=>{const e=(0,t.useContext)(na);if(!e)throw new Error("useRun m\xe5ste anv\xe4ndas inom en RunProvider. Kontrollera att komponenten \xe4r wrappnad i <RunProvider>.");return e},la=e=>{let{isOpen:t,onClose:n,title:r="Meddelande",message:o,type:i="info"}=e;if(!t)return null;const a={success:{bgColor:"bg-green-500/10",borderColor:"border-green-500/50",textColor:"text-green-400",iconColor:"text-green-400",icon:(0,wo.jsx)("svg",{className:"w-full h-full",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})},error:{bgColor:"bg-red-500/10",borderColor:"border-red-500/50",textColor:"text-red-400",iconColor:"text-red-400",icon:(0,wo.jsx)("svg",{className:"w-full h-full",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},warning:{bgColor:"bg-yellow-500/10",borderColor:"border-yellow-500/50",textColor:"text-yellow-400",iconColor:"text-yellow-400",icon:(0,wo.jsx)("svg",{className:"w-full h-full",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})},info:{bgColor:"bg-cyan-500/10",borderColor:"border-cyan-500/50",textColor:"text-cyan-400",iconColor:"text-cyan-400",icon:(0,wo.jsx)("svg",{className:"w-full h-full",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}},s=a[i]||a.info;return(0,wo.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center px-4 py-6 z-[1200]",onClick:e=>{e.target===e.currentTarget&&n()},children:(0,wo.jsx)("div",{className:"bg-slate-900 rounded-xl shadow-2xl border border-slate-700 w-full max-w-sm sm:max-w-md mx-auto",onClick:e=>e.stopPropagation(),children:(0,wo.jsxs)("div",{className:"p-5 sm:p-6",children:[(0,wo.jsx)("div",{className:"flex justify-center mb-4 ".concat(s.iconColor),children:(0,wo.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12",children:s.icon})}),(0,wo.jsx)("h2",{className:"text-xl font-bold text-white mb-3 text-center",children:r}),(0,wo.jsx)("div",{className:"".concat(s.bgColor," ").concat(s.borderColor," border rounded-lg p-4 mb-6"),children:(0,wo.jsx)("p",{className:"".concat(s.textColor," text-center whitespace-pre-line"),children:o})}),(0,wo.jsx)("button",{onClick:n,className:"w-full bg-gradient-to-r from-cyan-600 to-indigo-600 hover:from-cyan-700 hover:to-indigo-700 text-white font-semibold py-3 px-4 rounded-lg transition-all shadow-lg",children:"OK"})]})})})},ca=100,ua=(0,io.rJ)(vo,"backgroundTasks"),da=e=>e?e.toDate?e.toDate():"number"===typeof e||"string"===typeof e?new Date(e):null:null,ha=e=>{const t=e.data()||{};return(0,To.A)((0,To.A)({id:e.id},t),{},{createdAt:da(t.createdAt),startedAt:da(t.startedAt),finishedAt:da(t.finishedAt),updatedAt:da(t.updatedAt)})},fa=e=>[...e].sort((e,t)=>{const n=e.createdAt instanceof Date?e.createdAt.getTime():0,r=t.createdAt instanceof Date?t.createdAt.getTime():0;return n!==r?r-n:e.id.localeCompare(t.id)}),pa=new Set(["completed","failed","cancelled"]),ma=function(e,t){let{limit:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Map;return(0,io.aQ)(e,e=>{const o=fa(e.docs.map(e=>{var t;const n=ha(e),{progress:o,status:i,id:a}=n;if(!o||"number"!==typeof o.completed)return pa.has(i)&&r.delete(a),n;const s=r.get(a),l=Number(o.completed)||0,c=Number(o.total)||0;if("queued"===i||"pending"===i||!s)return r.set(a,{completed:l,total:c}),pa.has(i)&&r.delete(a),n;let u=l,d=c;var h;"processing"===i&&l<s.completed&&(u=s.completed,d=Math.max(null!==(h=s.total)&&void 0!==h?h:0,c));return r.set(a,{completed:u,total:Math.max(d,null!==(t=s.total)&&void 0!==t?t:0)}),pa.has(i)&&r.delete(a),u===l&&d===c?n:(0,To.A)((0,To.A)({},n),{},{progress:(0,To.A)((0,To.A)({},o),{},{completed:u,total:d})})})),i="number"===typeof n?o.slice(0,n):o;t(i)},e=>{console.error("[backgroundTaskService] Realtime subscription failed:",e),t([],e)})},ga={async fetchUserTasks(e){var t;if(!e)return[];const n=null!==(t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).limit)&&void 0!==t?t:ca,r=(0,io.P)(ua,(0,io._M)("userId","==",e)),o=await(0,io.getDocs)(r);return fa(o.docs.map(ha)).slice(0,n)},subscribeToUserTasks(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return t([]),()=>{};const o=null!==(n=r.limit)&&void 0!==n?n:ca,i=(0,io.P)(ua,(0,io._M)("userId","==",e));return ma(i,t,{limit:o})},async fetchAllTasks(){var e;const t=null!==(e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).limit)&&void 0!==e?e:ca,n=(0,io.P)(ua,(0,io.My)("createdAt","desc"),(0,io.AB)(t)),r=await(0,io.getDocs)(n);return fa(r.docs.map(ha))},subscribeToAllTasks(e){var t;const n=null!==(t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).limit)&&void 0!==t?t:ca,r=(0,io.P)(ua,(0,io.My)("createdAt","desc"),(0,io.AB)(n));return ma(r,e)}},va=(0,t.createContext)({pushToast:()=>{},dismissToast:()=>{},toasts:[]});let ya=0;const ba=e=>{let{children:n}=e;const[r,o]=(0,t.useState)([]),i=(0,t.useRef)(new Map),a=(0,t.useCallback)(e=>{o(t=>t.filter(t=>t.id!==e));const t=i.current.get(e);t&&(clearTimeout(t),i.current.delete(e))},[]),s=(0,t.useCallback)(e=>{const t=(e=>{var t;return ya+=1,{id:"".concat(Date.now(),"-").concat(ya),title:e.title||"Avisering",message:e.message||"",variant:e.variant||"info",duration:null!==(t=e.duration)&&void 0!==t?t:6e3}})(e);if(o(e=>[...e,t]),null!==t.duration){const e=setTimeout(()=>{a(t.id)},t.duration);i.current.set(t.id,e)}return t.id},[a]),l=(0,t.useMemo)(()=>({toasts:r,pushToast:s,dismissToast:a}),[a,s,r]);return(0,wo.jsx)(va.Provider,{value:l,children:n})},xa=()=>(0,t.useContext)(va),wa=(0,t.createContext)({myTasks:[],myTrackedTasks:[],unreadTaskIds:new Set,unreadCount:0,hasActiveTrackedTasks:!1,registerTask:()=>{},markTaskAsSeen:()=>{},markAllTasksAsSeen:()=>{},allTasks:[],refreshUserTasks:()=>{},refreshAllTasks:()=>{}}),_a=new Set(["completed","failed","cancelled"]),ka={completed:"success",failed:"error",cancelled:"warning"},Aa={random:"slumpad provider",gemini:"Gemini",anthropic:"Claude",openai:"OpenAI"},Sa={isOpen:!1,title:"",message:"",type:"info"},Na=(e,t)=>{if(!e)return t;try{return JSON.parse(e)}catch(n){return console.warn("[BackgroundTaskContext] Failed to parse JSON from storage:",n),t}},Ca=e=>{let{children:n}=e;const{currentUser:r,isSuperUser:o}=Eo(),{pushToast:i}=xa(),[a,s]=(0,t.useState)([]),[l,c]=(0,t.useState)([]),[u,d]=(0,t.useState)([]),h=(0,t.useRef)(new Set),[f,p]=(0,t.useState)(new Set),[m,g]=(0,t.useState)(()=>(0,To.A)({},Sa)),v=(0,t.useRef)({}),y=(0,t.useRef)(new Set),b=(0,t.useRef)(!1),x=(0,t.useRef)(new Map),w=(0,t.useRef)(new Set),_=(0,t.useRef)({tracked:null,acknowledged:null}),k=(0,t.useRef)(!0);(0,t.useEffect)(()=>(k.current=!0,()=>{k.current=!1}),[]);const A=(0,t.useCallback)(()=>{if("undefined"===typeof window)return;const{tracked:e}=_.current;if(!e)return;const t=Array.from(x.current.entries()).reduce((e,t)=>{var n;let[r,o]=t;return e[r]=(0,To.A)((0,To.A)({},o),{},{createdAt:o.createdAt instanceof Date?o.createdAt.toISOString():null!==(n=o.createdAt)&&void 0!==n?n:null}),e},{});localStorage.setItem(e,JSON.stringify(t))},[]),S=(0,t.useCallback)(()=>{if("undefined"===typeof window)return;const{acknowledged:e}=_.current;if(!e)return;const t=Array.from(w.current);localStorage.setItem(e,JSON.stringify(t))},[]),N=(0,t.useCallback)(e=>{e&&y.current.forEach(t=>{t.startsWith("".concat(e,":"))&&y.current.delete(t)})},[]),C=(0,t.useCallback)(()=>{s([]),c([]),x.current=new Map,w.current=new Set,h.current=new Set,p(new Set),v.current={},y.current=new Set,b.current=!1,_.current={tracked:null,acknowledged:null},d([])},[]),j=(0,t.useCallback)(e=>{if(!k.current)return;s(e);const t={};if(e.forEach(e=>{t[e.id]=e.status}),!b.current)return v.current=t,void(b.current=!0);const n=new Set(h.current);e.forEach(e=>{const t=v.current[e.id],r=e.status!==t,a=x.current.has(e.id),s=_a.has(e.status);if(v.current[e.id]=e.status,a&&s&&r&&(w.current.has(e.id)||n.add(e.id),o)){const t="".concat(e.id,":").concat(e.status);if(!y.current.has(t)){const n=x.current.get(e.id)||{},r=ka[e.status]||"info",o=(()=>n.label?n.label:"generation"===e.taskType?"AI-generering":"validation"===e.taskType?"AI-validering":"regenerateemoji"===e.taskType?"Emoji-regenerering":"batchregenerateemojis"===e.taskType?"Mass-regenerering Emojis":"Bakgrundsjobb")(),a=[];var l;if("completed"===e.status)a.push("Bakgrundsjobbet \xe4r klart."),null!=(null===(l=e.result)||void 0===l?void 0:l.count)&&a.push("Resultat: ".concat(e.result.count,"."));if("failed"===e.status&&(a.push("Bakgrundsjobbet misslyckades."),e.error&&a.push(e.error)),"cancelled"===e.status&&a.push("Bakgrundsjobbet avbr\xf6ts."),i({title:o,message:a.join("\n"),variant:r}),"generation"===e.taskType&&"completed"===e.status){const t=function(){var e,t,n,r;let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i="string"===typeof(null===(e=o.result)||void 0===e?void 0:e.provider)&&o.result.provider||"string"===typeof(null===(t=o.payload)||void 0===t?void 0:t.provider)&&o.payload.provider||"AI",a=i.toLowerCase(),s=Aa[a]||i,l=[];return l.push("AI-generering via ".concat(s," klar!")),"number"===typeof(null===(n=o.result)||void 0===n?void 0:n.count)&&l.push("".concat(o.result.count," fr\xe5gor genererades.")),Array.isArray(null===(r=o.result)||void 0===r?void 0:r.questionIds)&&o.result.questionIds.length>0&&l.push("Fr\xe5gorna importeras och visas i listan n\xe4r Firestore-synken \xe4r klar."),l.join("\n\n")}(e);g({isOpen:!0,title:"AI-generering klar",message:t,type:"success"})}y.current.add(t)}}}),Array.from(n).forEach(e=>{x.current.has(e)&&!w.current.has(e)||n.delete(e)}),h.current=n,p(new Set(n)),v.current=t},[o,i]),E=(0,t.useCallback)(async()=>{if(r&&!r.isAnonymous)try{const e=await ga.fetchUserTasks(r.uid);j(e)}catch(e){console.error("[BackgroundTaskContext] Failed to fetch user background tasks:",e)}},[r,j]),T=(0,t.useCallback)(async()=>{if(o)try{const e=await ga.fetchAllTasks();if(!k.current)return;c(e)}catch(e){console.error("[BackgroundTaskContext] Failed to fetch global background tasks:",e)}},[o]);(0,t.useEffect)(()=>{if(!r||r.isAnonymous)return void C();C();const e="geoquest:tasks:tracked:".concat(r.uid),t="geoquest:tasks:ack:".concat(r.uid);_.current={tracked:e,acknowledged:t};const n=Na("undefined"!==typeof window?localStorage.getItem(e):null,{}),o=new Map;Object.entries(n).forEach(e=>{let[t,n]=e;o.set(t,{taskType:n.taskType,label:n.label,description:n.description,createdAt:n.createdAt?new Date(n.createdAt):new Date})}),x.current=o;const i=Na("undefined"!==typeof window?localStorage.getItem(t):null,[]);w.current=new Set(i),d(Array.from(o.entries())),v.current={},b.current=!1;const a=ga.subscribeToUserTasks(r.uid,(e,t)=>{k.current&&(t?console.error("[BackgroundTaskContext] Realtime user-task subscription failed:",t):j(e))});return()=>{"function"===typeof a&&a()}},[r,j,C]),(0,t.useEffect)(()=>{if(!o)return void c([]);const e=ga.subscribeToAllTasks((e,t)=>{k.current&&(t?console.error("[BackgroundTaskContext] Realtime all-task subscription failed:",t):c(e))});return()=>{"function"===typeof e&&e()}},[o]);const I=(0,t.useCallback)((e,t)=>{if(!e||!t||!r||r.isAnonymous)return;const n=x.current.get(e),o={taskType:t.taskType||(null===n||void 0===n?void 0:n.taskType)||"task",label:t.label||(null===n||void 0===n?void 0:n.label)||"Bakgrundsjobb",description:t.description||(null===n||void 0===n?void 0:n.description)||null,createdAt:t.createdAt?new Date(t.createdAt):(null===n||void 0===n?void 0:n.createdAt)||new Date};N(e),x.current.set(e,o),w.current.delete(e),A(),S(),d(Array.from(x.current.entries())),E()},[N,r,S,A,E]),P=(0,t.useCallback)(e=>{if(!e||!r||r.isAnonymous)return;w.current.add(e),x.current.delete(e),A(),S();const t=new Set(h.current);t.delete(e),h.current=t,p(new Set(t)),d(Array.from(x.current.entries())),N(e)},[N,r,S,A]),O=(0,t.useCallback)(()=>{r&&!r.isAnonymous&&(a.forEach(e=>{_a.has(e.status)&&(w.current.add(e.id),x.current.delete(e.id),N(e.id))}),A(),S(),h.current=new Set,p(new Set),d(Array.from(x.current.entries())))},[N,r,S,A,a]),M=(0,t.useMemo)(()=>{if(0===u.length&&0===a.length)return[];const e=new Map(u),t=a.reduce((e,t)=>(e.set(t.id,t),e),new Map),n=new Set([...Array.from(t.keys()),...Array.from(e.keys())]),o=Array.from(n).map(n=>{const o=t.get(n),i=e.get(n),a=(null===o||void 0===o?void 0:o.createdAt)||(null===i||void 0===i?void 0:i.createdAt)||null,s=(null===o||void 0===o?void 0:o.status)||"queued";return{id:n,taskType:(null===o||void 0===o?void 0:o.taskType)||(null===i||void 0===i?void 0:i.taskType)||"task",status:s,label:(null===o||void 0===o?void 0:o.label)||(null===i||void 0===i?void 0:i.label)||"Bakgrundsjobb",description:(null===o||void 0===o?void 0:o.description)||(null===i||void 0===i?void 0:i.description)||null,createdAt:a,startedAt:(null===o||void 0===o?void 0:o.startedAt)||null,finishedAt:(null===o||void 0===o?void 0:o.finishedAt)||null,userId:(null===o||void 0===o?void 0:o.userId)||(null===r||void 0===r?void 0:r.uid),payload:null===o||void 0===o?void 0:o.payload,result:null===o||void 0===o?void 0:o.result,error:null===o||void 0===o?void 0:o.error,progress:null===o||void 0===o?void 0:o.progress,statusHistory:null===o||void 0===o?void 0:o.statusHistory,tracked:!0}});return o.sort((e,t)=>{const n=e.createdAt?e.createdAt.getTime():0;return(t.createdAt?t.createdAt.getTime():0)-n}),o},[r,u,a]),L=(0,t.useMemo)(()=>new Set(f),[f]),R=L.size,D=M.some(e=>!_a.has(e.status)),F=(0,t.useMemo)(()=>({myTasks:a,myTrackedTasks:M,unreadTaskIds:L,unreadCount:R,hasActiveTrackedTasks:D,registerTask:I,markTaskAsSeen:P,markAllTasksAsSeen:O,allTasks:l,refreshUserTasks:E,refreshAllTasks:T}),[l,D,O,P,M,I,T,E,R,L,a]);return(0,wo.jsxs)(wa.Provider,{value:F,children:[n,(0,wo.jsx)(la,{isOpen:m.isOpen,onClose:()=>g((0,To.A)({},Sa)),title:m.title,message:m.message,type:m.type})]})},ja=()=>(0,t.useContext)(wa),Ea="geoquest:local:createdRuns",Ta="geoquest:local:joinedRuns",Ia="geoquest:local:migrated",Pa=e=>{if("undefined"===typeof window)return null;try{const t=window.localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.warn("[LocalStorage] Kunde inte l\xe4sa ".concat(e,":"),t),null}},Oa=(e,t)=>{if("undefined"!==typeof window)try{window.localStorage.setItem(e,JSON.stringify(t))}catch(n){console.warn("[LocalStorage] Kunde inte skriva ".concat(e,":"),n)}},Ma=()=>Pa(Ea)||[],La=()=>Pa(Ta)||[],Ra=()=>!0===Pa(Ia),Da=e=>{const t=Pa(Ea)||[];if(t.some(t=>t.runId===e.id)){const n=t.map(t=>t.runId===e.id?(0,To.A)((0,To.A)({},t),{},{updatedAt:Date.now()}):t);Oa(Ea,n)}else t.push({runId:e.id,createdAt:Date.now(),updatedAt:Date.now()}),Oa(Ea,t)},Fa=(e,t)=>{const n=Pa(Ta)||[];if(n.some(t=>t.runId===e.id)){const t=n.map(t=>t.runId===e.id?(0,To.A)((0,To.A)({},t),{},{updatedAt:Date.now()}):t);Oa(Ta,t)}else n.push({runId:e.id,participantId:(null===t||void 0===t?void 0:t.id)||null,joinedAt:Date.now(),updatedAt:Date.now()}),Oa(Ta,n)},za=Ma,Ba=La,Ua=()=>{const e=Ma(),t=La();return e.length>0||t.length>0},qa=Ra,Va=()=>{Oa(Ia,!0)},Ha=()=>({createdRuns:Ma(),joinedRuns:La(),hasMigrated:Ra()}),Ga=po(),Ka=()=>{if("undefined"===typeof window)return"unknown";const e=navigator.userAgent.toLowerCase();return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"},Wa=()=>{if("undefined"===typeof window)return"unknown";const e=navigator.userAgent;return/Windows/.test(e)?"Windows":/Mac OS X/.test(e)?"macOS":/Linux/.test(e)?"Linux":/Android/.test(e)?"Android":/iOS|iPhone|iPad|iPod/.test(e)?"iOS":"unknown"},Qa=()=>{if("undefined"===typeof window)return"unknown";const e=navigator.userAgent;return/Edg/.test(e)?"Edge":/Chrome/.test(e)&&!/Edg/.test(e)?"Chrome":/Safari/.test(e)&&!/Chrome/.test(e)?"Safari":/Firefox/.test(e)?"Firefox":/MSIE|Trident/.test(e)?"Internet Explorer":"unknown"},Za=()=>{if("undefined"===typeof window)return"unknown";try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){return"unknown"}},Ya=()=>{if("undefined"===typeof window)return null;let e=localStorage.getItem("geoquest:deviceId");return e||(e="device_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),localStorage.setItem("geoquest:deviceId",e)),e},Ja=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const n=Ya();if(!n)return;const r={deviceId:n,eventType:e,timestamp:(0,io.O5)(),deviceType:Ka(),os:Wa(),browser:Qa(),timezone:Za(),metadata:Object.fromEntries(Object.entries((0,To.A)((0,To.A)({},t),{},{userAgent:navigator.userAgent,language:navigator.language,screenResolution:"".concat(window.screen.width,"x").concat(window.screen.height),path:window.location.pathname})).filter(e=>{let[t,n]=e;return void 0!==n}))};await(0,io.gS)((0,io.rJ)(Ga,"analytics"),r)}catch(n){console.error("Error logging visit:",n)}},$a=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t=(0,io.P)((0,io.rJ)(Ga,"analytics"),(0,io.My)("timestamp","desc"));e.eventType&&(t=(0,io.P)(t,(0,io._M)("eventType","==",e.eventType))),e.limit&&(t=(0,io.P)(t,(0,io.AB)(e.limit)));return(await(0,io.getDocs)(t)).docs.map(e=>(0,To.A)({id:e.id},e.data()))}catch(t){return console.error("Error fetching analytics:",t),[]}},Xa=Ya,es=Ja,ts=$a,ns=async e=>{try{const t=Ya();if(!t)return;const n=(0,io.P)((0,io.rJ)(Ga,"analytics"),(0,io._M)("deviceId","==",t)),r=(await(0,io.getDocs)(n)).docs.map(t=>(0,io.mZ)(t.ref,{userId:e}));await Promise.all(r),await Ja("device_linked",{userId:e})}catch(t){console.error("Error linking device to user:",t)}},rs=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{await Ja("donation",(0,To.A)({amount:e,paymentIntentId:t},n)),localStorage.setItem("geoquest:hasDonated","true"),localStorage.setItem("geoquest:donationTimestamp",(new Date).toISOString())}catch(r){console.error("Error logging donation:",r)}},os=async()=>{try{const e=await $a({limit:1e4}),t={totalVisits:e.length,uniqueDevices:new Set(e.map(e=>e.deviceId)).size,eventsByType:{},devicesByDate:{},donations:{count:0,total:0}};return e.forEach(e=>{var n,r;(t.eventsByType[e.eventType]=(t.eventsByType[e.eventType]||0)+1,"donation"===e.eventType)&&(t.donations.count++,t.donations.total+=(null===(r=e.metadata)||void 0===r?void 0:r.amount)||0);if(null!==(n=e.timestamp)&&void 0!==n&&n.toDate){const n=e.timestamp.toDate().toISOString().split("T")[0];t.devicesByDate[n]=t.devicesByDate[n]||new Set,t.devicesByDate[n].add(e.deviceId)}}),t}catch(e){return console.error("Error getting aggregated stats:",e),null}},is="0.8.1",as=(new Date).toISOString(),ss={localStorage:!0,migration:!0,donations:!0,superuser:!0,simplifiedUI:!0,gpsStatus:!0,cacheControl:!0,mapImprovements:!0},ls=[{version:"0.2.3",date:"2025-10-06",changes:["Kompaktare header-design med b\xe4ttre mobilanpassning","GPS-status och version flyttad till hamburger-menyn","Klickbara checkpoints p\xe5 kartan n\xe4r GPS \xe4r avst\xe4ngd","Borttagen betalningskontroll - alla rundor \xe4r gratis","URL-baserad versionskontroll f\xf6r att undvika cache-problem","Fixad layout-problem i PlayRunPage med fixed header","F\xf6rb\xe4ttrad cache-rensning vid versions\xe4ndringar"]},{version:"0.2.2",date:"2025-10-06",changes:["Tydlig bl\xe5 \ud83d\udccd-ikon f\xf6r anv\xe4ndarens position p\xe5 kartan","Checkpointnummer visas p\xe5 alla checkpoints (1, 2, 3, etc)","Anv\xe4ndarens GPS-position visas nu n\xe4r man skapar runda","Pulsande animation p\xe5 anv\xe4ndarens position f\xf6r enkel identifiering","F\xf6rb\xe4ttrad kartvisning med numrerade markers ist\xe4llet f\xf6r cirklar"]},{version:"0.2.1",date:"2025-10-06",changes:["GPS-status i header med snurrande kompass","Visar GPS-noggrannhet (\xb1m) bredvid logotyp","GPS-aktiverings prompt efter 2 sekunder","Version-visning i header","Aggressiv cache-busting f\xf6r uppdateringar","Automatisk cache-rensning vid versions\xe4ndring"]},{version:"0.2.0",date:"2025-09-30",changes:["F\xf6renklad anv\xe4ndarupplevelse med 2 huvudknappar","Ta bort rollsystem - alla kan skapa/ansluta","Ny SuperUser-roll f\xf6r administration","Hamburger-meny med Mina rundor","LocalStorage f\xf6r oinloggade anv\xe4ndare","Automatisk migrering till Firebase vid login","Frivilliga donationer ist\xe4llet f\xf6r obligatorisk betalning","Endast ID:n sparas i localStorage","Versionshantering implementerad"]},{version:"0.1.0",date:"2025-01-01",changes:["Initial release","Firebase-integration","Ruttgenerering med OpenRouteService","QR-koder och join-l\xe4nkar","Grundl\xe4ggande spelvy med karta","Fr\xe5gebank med OpenTDB-import"]}],cs=()=>({version:is,buildDate:as,features:ss,changelog:ls}),us=po(),ds=25,hs=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const n=(0,io.rJ)(us,"messages");let r=[];e&&r.push((0,io.getDocs)((0,io.P)(n,(0,io._M)("userId","==",e),(0,io._M)("deleted","==",!1),(0,io.My)("createdAt","desc"),(0,io.AB)(ds)))),t&&r.push((0,io.getDocs)((0,io.P)(n,(0,io._M)("deviceId","==",t),(0,io._M)("deleted","==",!1),(0,io.My)("createdAt","desc"),(0,io.AB)(ds)))),r.push((0,io.getDocs)((0,io.P)(n,(0,io._M)("targetType","==","all"),(0,io._M)("deleted","==",!1),(0,io.My)("createdAt","desc"),(0,io.AB)(ds))));const o=await Promise.all(r),i=[];o.forEach(e=>{e.docs.forEach(e=>{i.push((0,To.A)({id:e.id},e.data()))})}),i.sort((e,t)=>e.createdAt&&t.createdAt?t.createdAt.toDate()-e.createdAt.toDate():0);return Array.from(new Map(i.map(e=>[e.id,e])).values())}catch(n){return console.error("Error fetching messages:",n),[]}},fs=async e=>{try{const{targetType:t="all",targetId:n=null}=e,r={};"user"===t&&n?r.userId=n:"device"===t&&n&&(r.deviceId=n);const o=(0,To.A)((0,To.A)((0,To.A)({},e),r),{},{createdAt:(0,io.O5)(),read:!1,deleted:!1});return(await(0,io.gS)((0,io.rJ)(us,"messages"),o)).id}catch(t){throw console.error("Error sending message:",t),t}},ps=hs,ms=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;const r=(0,io.rJ)(us,"messages"),o=[],i=new Map,a=()=>{const e=Array.from(i.values());e.sort((e,t)=>e.createdAt&&t.createdAt?t.createdAt.toDate()-e.createdAt.toDate():0),n(e)};if(e){const t=(0,io.aQ)((0,io.P)(r,(0,io._M)("userId","==",e),(0,io._M)("deleted","==",!1),(0,io.My)("createdAt","desc"),(0,io.AB)(ds)),e=>{e.docChanges().forEach(e=>{const t=(0,To.A)({id:e.doc.id},e.doc.data());"removed"===e.type||t.deleted?i.delete(e.doc.id):i.set(e.doc.id,t)}),a()},e=>{console.error("Error in user messages subscription:",e)});o.push(t)}if(t){const e=(0,io.aQ)((0,io.P)(r,(0,io._M)("deviceId","==",t),(0,io._M)("deleted","==",!1),(0,io.My)("createdAt","desc"),(0,io.AB)(ds)),e=>{e.docChanges().forEach(e=>{const t=(0,To.A)({id:e.doc.id},e.doc.data());"removed"===e.type||t.deleted?i.delete(e.doc.id):i.set(e.doc.id,t)}),a()},e=>{console.error("Error in device messages subscription:",e)});o.push(e)}const s=(0,io.aQ)((0,io.P)(r,(0,io._M)("targetType","==","all"),(0,io._M)("deleted","==",!1),(0,io.My)("createdAt","desc"),(0,io.AB)(ds)),e=>{e.docChanges().forEach(e=>{const t=(0,To.A)({id:e.doc.id},e.doc.data());"removed"===e.type||t.deleted?i.delete(e.doc.id):i.set(e.doc.id,t)}),a()},e=>{console.error("Error in global messages subscription:",e)});return o.push(s),()=>{o.forEach(e=>e())}},gs=async e=>{try{const t=(0,io.H9)(us,"messages",e);await(0,io.mZ)(t,{read:!0,readAt:(0,io.O5)()})}catch(t){console.error("Error marking message as read:",t)}},vs=async e=>{try{const t=(0,io.H9)(us,"messages",e);await(0,io.mZ)(t,{deleted:!0,deletedAt:(0,io.O5)()})}catch(t){console.error("Error deleting message:",t)}},ys=async e=>{try{await(0,io.deleteDoc)((0,io.H9)(us,"messages",e))}catch(t){console.error("Error permanently deleting message:",t)}},bs=async()=>{try{return(await(0,io.getDocs)((0,io.P)((0,io.rJ)(us,"messages"),(0,io.My)("createdAt","desc")))).docs.map(e=>(0,To.A)({id:e.id},e.data()))}catch(e){return console.error("Error fetching all messages:",e),[]}},xs=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return(await hs(e,t)).filter(e=>!e.read).length}catch(n){return console.error("Error getting unread count:",n),0}},ws="tipspromenad:trackingEnabled",_s=()=>{const[e,n]=(0,t.useState)(()=>(()=>{if("undefined"===typeof window)return!0;try{return"off"!==window.localStorage.getItem(ws)}catch(s){return console.warn("Kunde inte l\xe4sa tracking-preferens",s),!0}})()),[r,o]=(0,t.useState)("idle"),[i,a]=(0,t.useState)(null),[s,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(null),d=(0,t.useRef)(null),h=(0,t.useCallback)(()=>{"undefined"!==typeof navigator&&navigator.geolocation&&null!==d.current&&(navigator.geolocation.clearWatch(d.current),d.current=null)},[]);(0,t.useEffect)(()=>{if("undefined"!==typeof window)try{window.localStorage.setItem(ws,e?"on":"off")}catch(t){console.warn("Kunde inte spara tracking-preferens",t)}},[e]),(0,t.useEffect)(()=>{if(!e)return h(),void o(e=>"unsupported"===e?"unsupported":"idle");if("undefined"===typeof navigator||!navigator.geolocation)return o("unsupported"),void n(!1);o("pending");let t=null;return d.current=navigator.geolocation.watchPosition(e=>{if(t){if(((e,t,n,r)=>{const o=e*Math.PI/180,i=n*Math.PI/180,a=(n-e)*Math.PI/180,s=(r-t)*Math.PI/180,l=Math.sin(a/2)*Math.sin(a/2)+Math.cos(o)*Math.cos(i)*Math.sin(s/2)*Math.sin(s/2);return 2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*6371e3})(t.coords.latitude,t.coords.longitude,e.coords.latitude,e.coords.longitude)<5)return}t=e,o("active"),l(null),a({lat:e.coords.latitude,lng:e.coords.longitude,accuracy:e.coords.accuracy}),u(new Date(e.timestamp||Date.now()))},e=>{console.warn("Geolocation misslyckades",e),l(e),e.code===e.PERMISSION_DENIED?(o("denied"),n(!1)):e.code===e.POSITION_UNAVAILABLE?o("unavailable"):e.code===e.TIMEOUT?o("timeout"):o("error")},{enableHighAccuracy:!0,maximumAge:1e4,timeout:2e4}),h},[e,h]);const f=(0,t.useCallback)(()=>{n(!0)},[]),p=(0,t.useCallback)(()=>{n(!1)},[]),m=(0,t.useCallback)(()=>i&&"active"===r?i:Di,[i,r]);return{trackingEnabled:e,status:r,coords:i,error:s,lastUpdated:c,enableTracking:f,disableTracking:p,getCurrentPosition:m}};var ks=__webpack_require__(5173);function As(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ss(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?As(Object(n),!0).forEach(function(t){Cs(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):As(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ns(e){return Ns="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ns(e)}function Cs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function js(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Es(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ts(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ts(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ts(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Is=function(e,n,r){var o=!!r,i=t.useRef(r);t.useEffect(function(){i.current=r},[r]),t.useEffect(function(){if(!o||!e)return function(){};var t=function(){i.current&&i.current.apply(i,arguments)};return e.on(n,t),function(){e.off(n,t)}},[o,n,e,i])},Ps=function(e){var n=t.useRef(e);return t.useEffect(function(){n.current=e},[e]),n.current},Os=function(e){return null!==e&&"object"===Ns(e)},Ms="[object Object]",Ls=function e(t,n){if(!Os(t)||!Os(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var o=Object.prototype.toString.call(t)===Ms;if(o!==(Object.prototype.toString.call(n)===Ms))return!1;if(!o&&!r)return t===n;var i=Object.keys(t),a=Object.keys(n);if(i.length!==a.length)return!1;for(var s={},l=0;l<i.length;l+=1)s[i[l]]=!0;for(var c=0;c<a.length;c+=1)s[a[c]]=!0;var u=Object.keys(s);if(u.length!==i.length)return!1;var d=t,h=n;return u.every(function(t){return e(d[t],h[t])})},Rs=function(e,t,n){return Os(e)?Object.keys(e).reduce(function(r,o){var i=!Os(t)||!Ls(e[o],t[o]);return n.includes(o)?(i&&console.warn("Unsupported prop change: options.".concat(o," is not a mutable property.")),r):i?Ss(Ss({},r||{}),{},Cs({},o,e[o])):r},null):null},Ds="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",Fs=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ds;if(null===e||Os(t=e)&&"function"===typeof t.elements&&"function"===typeof t.createToken&&"function"===typeof t.createPaymentMethod&&"function"===typeof t.confirmCardPayment)return e;throw new Error(n)},zs=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ds;if(function(e){return Os(e)&&"function"===typeof e.then}(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(e){return Fs(e,t)})};var n=Fs(e,t);return null===n?{tag:"empty"}:{tag:"sync",stripe:n}},Bs=function(e){e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"4.0.2"}),e.registerAppInfo({name:"react-stripe-js",version:"4.0.2",url:"https://stripe.com/docs/stripe-js/react"}))},Us=t.createContext(null);Us.displayName="ElementsContext";var qs=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},Vs=function(e){var n=e.stripe,r=e.options,o=e.children,i=t.useMemo(function(){return zs(n)},[n]),a=Es(t.useState(function(){return{stripe:"sync"===i.tag?i.stripe:null,elements:"sync"===i.tag?i.stripe.elements(r):null}}),2),s=a[0],l=a[1];t.useEffect(function(){var e=!0,t=function(e){l(function(t){return t.stripe?t:{stripe:e,elements:e.elements(r)}})};return"async"!==i.tag||s.stripe?"sync"!==i.tag||s.stripe||t(i.stripe):i.stripePromise.then(function(n){n&&e&&t(n)}),function(){e=!1}},[i,s,r]);var c=Ps(n);t.useEffect(function(){null!==c&&c!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[c,n]);var u=Ps(r);return t.useEffect(function(){if(s.elements){var e=Rs(r,u,["clientSecret","fonts"]);e&&s.elements.update(e)}},[r,u,s.elements]),t.useEffect(function(){Bs(s.stripe)},[s.stripe]),t.createElement(Us.Provider,{value:s},o)};Vs.propTypes={stripe:ks.any,options:ks.object};var Hs=function(e){var n=t.useContext(Us);return qs(n,e)};ks.func.isRequired;var Gs=t.createContext(null);Gs.displayName="CheckoutContext",ks.any,ks.shape({fetchClientSecret:ks.func.isRequired,elementsOptions:ks.object}).isRequired;var Ks=function(e){var n=t.useContext(Gs),r=t.useContext(Us);if(n){if(r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return n}return qs(r,e)},Ws=["mode"],Qs=function(e,n){var r,o="".concat((r=e).charAt(0).toUpperCase()+r.slice(1),"Element"),i=n?function(e){Ks("mounts <".concat(o,">"));var n=e.id,r=e.className;return t.createElement("div",{id:n,className:r})}:function(n){var r,i=n.id,a=n.className,s=n.options,l=void 0===s?{}:s,c=n.onBlur,u=n.onFocus,d=n.onReady,h=n.onChange,f=n.onEscape,p=n.onClick,m=n.onLoadError,g=n.onLoaderStart,v=n.onNetworksChange,y=n.onConfirm,b=n.onCancel,x=n.onShippingAddressChange,w=n.onShippingRateChange,_=n.onSavedPaymentMethodRemove,k=n.onSavedPaymentMethodUpdate,A=Ks("mounts <".concat(o,">")),S="elements"in A?A.elements:null,N="checkoutState"in A?A.checkoutState:null,C="success"===(null===N||void 0===N?void 0:N.type)?N.checkout:null,j=Es(t.useState(null),2),E=j[0],T=j[1],I=t.useRef(null),P=t.useRef(null);Is(E,"blur",c),Is(E,"focus",u),Is(E,"escape",f),Is(E,"click",p),Is(E,"loaderror",m),Is(E,"loaderstart",g),Is(E,"networkschange",v),Is(E,"confirm",y),Is(E,"cancel",b),Is(E,"shippingaddresschange",x),Is(E,"shippingratechange",w),Is(E,"savedpaymentmethodremove",_),Is(E,"savedpaymentmethodupdate",k),Is(E,"change",h),d&&(r="expressCheckout"===e?d:function(){d(E)}),Is(E,"ready",r),t.useLayoutEffect(function(){if(null===I.current&&null!==P.current&&(S||C)){var t=null;if(C)switch(e){case"payment":t=C.createPaymentElement(l);break;case"address":if(!("mode"in l))throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");var n=l.mode,r=js(l,Ws);if("shipping"===n)t=C.createShippingAddressElement(r);else{if("billing"!==n)throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.");t=C.createBillingAddressElement(r)}break;case"expressCheckout":t=C.createExpressCheckoutElement(l);break;case"currencySelector":t=C.createCurrencySelectorElement();break;case"taxId":t=C.createTaxIdElement(l);break;default:throw new Error("Invalid Element type ".concat(o,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else S&&(t=S.create(e,l));I.current=t,T(t),t&&t.mount(P.current)}},[S,C,l]);var O=Ps(l);return t.useEffect(function(){if(I.current){var e=Rs(l,O,["paymentRequest"]);e&&"update"in I.current&&I.current.update(e)}},[l,O]),t.useLayoutEffect(function(){return function(){if(I.current&&"function"===typeof I.current.destroy)try{I.current.destroy(),I.current=null}catch(e){}}},[]),t.createElement("div",{id:i,className:a,ref:P})};return i.propTypes={id:ks.string,className:ks.string,onChange:ks.func,onBlur:ks.func,onFocus:ks.func,onReady:ks.func,onEscape:ks.func,onClick:ks.func,onLoadError:ks.func,onLoaderStart:ks.func,onNetworksChange:ks.func,onConfirm:ks.func,onCancel:ks.func,onShippingAddressChange:ks.func,onShippingRateChange:ks.func,onSavedPaymentMethodRemove:ks.func,onSavedPaymentMethodUpdate:ks.func,options:ks.object},i.displayName=o,i.__elementType=e,i},Zs="undefined"===typeof window,Ys=t.createContext(null);Ys.displayName="EmbeddedCheckoutProviderContext";Qs("auBankAccount",Zs);var Js,$s=Qs("card",Zs),Xs=(Qs("cardNumber",Zs),Qs("cardExpiry",Zs),Qs("cardCvc",Zs),Qs("fpxBank",Zs),Qs("iban",Zs),Qs("idealBank",Zs),Qs("p24Bank",Zs),Qs("epsBank",Zs),Qs("payment",Zs),Qs("expressCheckout",Zs),Qs("paymentRequestButton",Zs),Qs("linkAuthentication",Zs),Qs("address",Zs),Qs("shippingAddress",Zs),Qs("paymentMethodMessaging",Zs),Qs("affirmMessage",Zs),Qs("afterpayClearpayMessage",Zs),Qs("taxId",Zs),"basil"),el="https://js.stripe.com",tl="".concat(el,"/").concat(Xs,"/stripe.js"),nl=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,rl=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,ol="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",il=function(e){return nl.test(e)||rl.test(e)},al=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(tl).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n},sl=null,ll=null,cl=null,ul=function(e){return null!==sl?sl:(sl=new Promise(function(t,n){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn(ol),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(el,'"]')),t=0;t<e.length;t++){var n=e[t];if(il(n.src))return n}return null}();if(r&&e)console.warn(ol);else if(r){if(r&&null!==cl&&null!==ll){var o;r.removeEventListener("load",cl),r.removeEventListener("error",ll),null===(o=r.parentNode)||void 0===o||o.removeChild(r),r=al(e)}}else r=al(e);cl=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,n),ll=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}}(n),r.addEventListener("load",cl),r.addEventListener("error",ll)}catch(i){return void n(i)}else t(null)}),sl.catch(function(e){return sl=null,Promise.reject(e)}))},dl=!1,hl=function(){return Js||(Js=ul(null).catch(function(e){return Js=null,Promise.reject(e)}))};Promise.resolve().then(function(){return hl()}).catch(function(e){dl||console.warn(e)});var fl=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];dl=!0;var r=Date.now();return hl().then(function(e){return function(e,t,n){if(null===e)return null;var r=t[0].match(/^pk_test/),o=function(e){return 3===e?"v3":e}(e.version),i=Xs;r&&o!==i&&console.warn("Stripe.js@".concat(o," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(i,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var a=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:t})}(a,n),a}(e,t,r)})};const pl=()=>"true"==={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyArvQzOJTrtsekOK9Wpgi3PezPcM9KmXyY",REACT_APP_FIREBASE_APP_ID:"1:614868886377:web:3c020075969956ef1813f8",REACT_APP_FIREBASE_AUTH_DOMAIN:"geoquest2-7e45c.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-L45RHX7MCN",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"614868886377",REACT_APP_FIREBASE_PROJECT_ID:"geoquest2-7e45c",REACT_APP_FIREBASE_STORAGE_BUCKET:"geoquest2-7e45c.firebasestorage.app",REACT_APP_OPENROUTE_API_KEY:"eyJvcmciOiI1YjNjZTM1OTc4NTExMTAwMDFjZjYyNDgiLCJpZCI6ImEzN2RiYzM2MjdlZDRjMzVhNjE4MTI3ZTU2MTcwMjVjIiwiaCI6Im11cm11cjY0In0=",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_live_51SCkJSCO02VZleLGS20eWjUQl0cAhGoZaQA5wfxS9ShhQJZmTm8Os02jPlP9c2fehToeLz369r0pjAixP98N6FAy00DFPn5jNh"}.REACT_APP_PAYMENT_TEST_MODE||"undefined"!==typeof window&&"true"===localStorage.getItem("geoquest:paymentTestMode");let ml=null;const gl={createPaymentIntent:async e=>{let{runId:t,participantId:n,amount:r=500}=e;if(pl())return{success:!0,paymentIntentId:"test_pi_".concat(t,"_").concat(n,"_").concat(Date.now()),testMode:!0};try{const e="https://europe-west1-".concat("geoquest2-7e45c",".cloudfunctions.net/createPaymentIntent"),o=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({runId:t,participantId:n,amount:r,currency:"sek"})});if(!o.ok){const e=await o.json().catch(()=>({}));throw new Error(e.error||"HTTP error! status: ".concat(o.status))}const{client_secret:i,payment_intent_id:a}=await o.json();return{success:!0,clientSecret:i,paymentIntentId:a,testMode:!1}}catch(o){return console.error("[PaymentService] Fel vid skapande av betalning:",o),{success:!1,error:o.message,testMode:!1}}},confirmPayment:async e=>{let{clientSecret:t,stripe:n,elements:r}=e;if(pl())return{success:!0,paymentIntent:{id:"test_pi_confirmed_".concat(Date.now()),status:"succeeded"},testMode:!0};if(!n||!r)return{success:!1,error:"Stripe har inte laddats korrekt"};try{const{error:e,paymentIntent:o}=await n.confirmCardPayment(t,{payment_method:{card:r.getElement("card")}});return e?{success:!1,error:e.message}:{success:!0,paymentIntent:o,testMode:!1}}catch(o){return console.error("[PaymentService] Fel vid bekr\xe4ftelse av betalning:",o),{success:!1,error:o.message}}},getTestMode:pl,setTestMode:e=>{"undefined"!==typeof window&&(e?localStorage.setItem("geoquest:paymentTestMode","true"):localStorage.removeItem("geoquest:paymentTestMode"))},getStripeInstance:()=>(ml||pl()||(ml=fl("pk_live_51SCkJSCO02VZleLGS20eWjUQl0cAhGoZaQA5wfxS9ShhQJZmTm8Os02jPlP9c2fehToeLz369r0pjAixP98N6FAy00DFPn5jNh")),ml)},vl={style:{base:{fontSize:"16px",color:"#ffffff","::placeholder":{color:"#9CA3AF"},backgroundColor:"transparent"},invalid:{color:"#EF4444",iconColor:"#EF4444"}},hidePostalCode:!0},yl=e=>{let{runName:n,amount:r,onSuccess:o,onCancel:i,allowSkip:a=!0}=e;const[s,l]=(0,t.useState)(!1);return(0,wo.jsx)("div",{className:"fixed inset-0 z-[1100] flex items-end justify-center bg-black/70 p-4 sm:items-center",children:(0,wo.jsxs)("div",{className:"w-full max-w-lg rounded-2xl border border-slate-600 bg-slate-900 p-5 sm:p-6 shadow-2xl max-h-[90vh] overflow-y-auto",children:[(0,wo.jsxs)("div",{className:"mb-6",children:[(0,wo.jsx)("h2",{className:"text-xl font-semibold text-white mb-2",children:"St\xf6d projektet (valfritt)"}),(0,wo.jsx)("p",{className:"text-gray-300 text-sm mb-2",children:n}),(0,wo.jsx)("p",{className:"text-gray-400 text-sm",children:"Vill du st\xf6dja utvecklingen av RouteQuest med en frivillig donation?"}),(0,wo.jsx)("div",{className:"mt-2 bg-emerald-900/30 border border-emerald-500/50 rounded p-2",children:(0,wo.jsx)("p",{className:"text-emerald-200 text-xs",children:"\ud83e\uddea Test-l\xe4ge aktiverat - ingen riktig betalning kr\xe4vs"})})]}),(0,wo.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),l(!0),await new Promise(e=>setTimeout(e,1e3)),o({paymentIntentId:"test_payment_".concat(Date.now()),testMode:!0})},className:"space-y-4",children:[(0,wo.jsxs)("div",{className:"bg-slate-800 rounded-lg p-4 border border-slate-600",children:[(0,wo.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,wo.jsx)("span",{className:"text-gray-300",children:"Belopp:"}),(0,wo.jsxs)("span",{className:"text-white font-semibold",children:[(r/100).toFixed(2)," kr"]})]}),(0,wo.jsx)("p",{className:"text-sm text-gray-400",children:"Test-l\xe4ge: Ingen riktig betalning kr\xe4vs"})]}),(0,wo.jsxs)("div",{className:"space-y-3 pt-4",children:[(0,wo.jsxs)("div",{className:"flex gap-3",children:[(0,wo.jsx)("button",{type:"button",onClick:i,disabled:s,className:"flex-1 rounded-lg bg-slate-700 px-4 py-2 font-semibold text-gray-200 hover:bg-slate-600 disabled:opacity-50",children:"Avbryt"}),(0,wo.jsx)("button",{type:"submit",disabled:s,className:"flex-1 rounded-lg bg-emerald-500 px-4 py-2 font-semibold text-black hover:bg-emerald-400 disabled:opacity-50",children:s?"Bearbetar...":"Forts\xe4tt (Test)"})]}),a&&(0,wo.jsx)("button",{type:"button",onClick:()=>{o({paymentIntentId:"skipped_payment_".concat(Date.now()),testMode:!0,skipped:!0})},disabled:s,className:"w-full rounded-lg bg-slate-700 px-4 py-2 font-semibold text-gray-300 hover:bg-slate-600 disabled:opacity-50 text-sm",children:"Forts\xe4tt utan donation"})]})]}),(0,wo.jsx)("div",{className:"mt-4 text-xs text-gray-400 text-center",children:"\ud83e\uddea Test-l\xe4ge aktiverat"})]})})},bl=e=>{let{runName:n,amount:r,onSuccess:o,onCancel:i,runId:a,participantId:s,allowSkip:l=!0}=e;const c=Ks("calls useStripe()").stripe,u=Hs("calls useElements()").elements,[d,h]=(0,t.useState)(!1),[f,p]=(0,t.useState)(""),[m,g]=(0,t.useState)("");(0,t.useEffect)(()=>{(async()=>{if(!a||!r)return void p("Saknar n\xf6dv\xe4ndig information f\xf6r betalning");const e=await gl.createPaymentIntent({runId:a,participantId:s||"anonymous",amount:r});e.success?g(e.clientSecret):p(e.error)})()},[a,s,r]);return(0,wo.jsx)("div",{className:"fixed inset-0 z-[1100] flex items-end justify-center bg-black/70 p-4 sm:items-center",children:(0,wo.jsxs)("div",{className:"w-full max-w-lg rounded-2xl border border-slate-600 bg-slate-900 p-5 sm:p-6 shadow-2xl max-h-[90vh] overflow-y-auto",children:[(0,wo.jsxs)("div",{className:"mb-6",children:[(0,wo.jsx)("h2",{className:"text-xl font-semibold text-white mb-2",children:"St\xf6d projektet (valfritt)"}),(0,wo.jsx)("p",{className:"text-gray-300 text-sm mb-2",children:n}),(0,wo.jsx)("p",{className:"text-gray-400 text-sm",children:"Vill du st\xf6dja utvecklingen av RouteQuest med en frivillig donation?"})]}),(0,wo.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!d){h(!0),p("");try{if(!c||!u)return void p("Betalningssystem inte laddat");if(!u.getElement($s))return void p("Kortf\xe4lt inte tillg\xe4ngligt");const e=await gl.confirmPayment({clientSecret:m,stripe:c,elements:u});e.success?o({paymentIntentId:e.paymentIntent.id,testMode:!1}):p(e.error)}catch(t){p("Ett ov\xe4ntat fel intr\xe4ffade"),console.error("[PaymentModal] Betalningsfel:",t)}finally{h(!1)}}},className:"space-y-4",children:[(0,wo.jsxs)("div",{className:"bg-slate-800 rounded-lg p-4 border border-slate-600",children:[(0,wo.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,wo.jsx)("span",{className:"text-gray-300",children:"Belopp:"}),(0,wo.jsxs)("span",{className:"text-white font-semibold",children:[(r/100).toFixed(2)," kr"]})]}),(0,wo.jsxs)("div",{className:"space-y-2",children:[(0,wo.jsx)("label",{className:"text-sm text-gray-300",children:"Kortnummer, datum och CVC"}),(0,wo.jsx)("div",{className:"bg-slate-700 rounded border border-slate-600 p-3",children:(0,wo.jsx)($s,{options:vl})})]})]}),f&&(0,wo.jsx)("div",{className:"bg-red-900/30 border border-red-500/50 rounded p-3",children:(0,wo.jsx)("p",{className:"text-red-200 text-sm",children:f})}),(0,wo.jsxs)("div",{className:"space-y-3 pt-4",children:[(0,wo.jsxs)("div",{className:"flex gap-3",children:[(0,wo.jsx)("button",{type:"button",onClick:i,disabled:d,className:"flex-1 rounded-lg bg-slate-700 px-4 py-2 font-semibold text-gray-200 hover:bg-slate-600 disabled:opacity-50",children:"Avbryt"}),(0,wo.jsx)("button",{type:"submit",disabled:d||!c,className:"flex-1 rounded-lg bg-emerald-500 px-4 py-2 font-semibold text-black hover:bg-emerald-400 disabled:opacity-50",children:d?"Bearbetar...":"Donera ".concat((r/100).toFixed(2)," kr")})]}),l&&(0,wo.jsx)("button",{type:"button",onClick:()=>{o({paymentIntentId:"skipped_payment_".concat(Date.now()),testMode:!0,skipped:!0})},disabled:d,className:"w-full rounded-lg bg-slate-700 px-4 py-2 font-semibold text-gray-300 hover:bg-slate-600 disabled:opacity-50 text-sm",children:"Forts\xe4tt utan donation"})]})]}),(0,wo.jsx)("div",{className:"mt-4 text-xs text-gray-400 text-center",children:"\ud83d\udd12 S\xe4ker betalning via Stripe"})]})})},xl=e=>{let{isOpen:n,runName:r,amount:o=500,onSuccess:i,onCancel:a,runId:s,participantId:l,allowSkip:c=!0}=e;const[u,d]=(0,t.useState)(null);return(0,t.useEffect)(()=>{gl.getTestMode()||d(gl.getStripeInstance())},[]),n?gl.getTestMode()?(0,wo.jsx)(yl,{runName:r,amount:o,onSuccess:i,onCancel:a,allowSkip:c}):(0,wo.jsx)(Vs,{stripe:u,children:(0,wo.jsx)(bl,{runName:r,amount:o,onSuccess:i,onCancel:a,runId:s,participantId:l,allowSkip:c})}):null},wl=po(),_l=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{const r=(0,To.A)((0,To.A)({},e),{},{userId:t,deviceId:n,createdAt:(0,io.O5)(),read:!1,resolved:!1,userAgent:navigator.userAgent,screenSize:"".concat(window.screen.width,"x").concat(window.screen.height),language:navigator.language});return(await(0,io.gS)((0,io.rJ)(wl,"feedback"),r)).id}catch(r){throw console.error("Error submitting feedback:",r),r}},kl=e=>{let{isOpen:n,onClose:r}=e;const{currentUser:o}=Eo(),[i,a]=(0,t.useState)({name:"",email:"",type:"general",message:""}),[s,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)("");if(!n)return null;const f=()=>{a({name:"",email:"",type:"general",message:""}),u(!1),h(""),r()};return(0,wo.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-[1200]",onClick:e=>{e.target===e.currentTarget&&f()},children:(0,wo.jsxs)("div",{className:"bg-slate-900 rounded-xl shadow-2xl border border-cyan-500/40 max-w-md w-full",onClick:e=>e.stopPropagation(),children:[(0,wo.jsxs)("div",{className:"bg-slate-900 border-b border-slate-700 p-6 flex items-center justify-between rounded-t-xl",children:[(0,wo.jsx)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-cyan-400 to-indigo-400 bg-clip-text text-transparent",children:"Ge feedback"}),(0,wo.jsx)("button",{onClick:f,className:"text-gray-400 hover:text-gray-200 transition-colors p-2 hover:bg-slate-800 rounded-lg","aria-label":"St\xe4ng",children:(0,wo.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,wo.jsx)("div",{className:"p-6",children:c?(0,wo.jsxs)("div",{className:"text-center py-8",children:[(0,wo.jsx)("svg",{className:"w-16 h-16 text-green-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,wo.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"Tack f\xf6r din feedback!"}),(0,wo.jsx)("p",{className:"text-gray-400",children:"Vi uppskattar verkligen att du tog dig tid att dela med dig."})]}):(0,wo.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),i.message.trim()){l(!0),h("");try{const e=Xa(),t=null!==o&&void 0!==o&&o.isAnonymous?null:null===o||void 0===o?void 0:o.id;await _l((0,To.A)((0,To.A)({},i),{},{page:window.location.pathname}),t,e),u(!0),setTimeout(()=>{f()},2e3)}catch(t){console.error("Fel vid skickning av feedback:",t),h("Kunde inte skicka feedback. F\xf6rs\xf6k igen senare.")}finally{l(!1)}}else h("V\xe4nligen skriv ett meddelande")},className:"space-y-4",children:[(0,wo.jsx)("p",{className:"text-gray-300 text-sm mb-4",children:"Har du en id\xe9, hittat ett fel eller bara vill s\xe4ga hej? Vi skulle g\xe4rna h\xf6ra fr\xe5n dig!"}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300 mb-2",children:"Namn (valfritt)"}),(0,wo.jsx)("input",{type:"text",id:"name",value:i.name,onChange:e=>a((0,To.A)((0,To.A)({},i),{},{name:e.target.value})),className:"w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500 focus:outline-none",placeholder:"Ditt namn"})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"E-post (valfritt, om du vill ha svar)"}),(0,wo.jsx)("input",{type:"email",id:"email",value:i.email,onChange:e=>a((0,To.A)((0,To.A)({},i),{},{email:e.target.value})),className:"w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500 focus:outline-none",placeholder:"din@email.se"})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-300 mb-2",children:"Typ av feedback"}),(0,wo.jsxs)("select",{id:"type",value:i.type,onChange:e=>a((0,To.A)((0,To.A)({},i),{},{type:e.target.value})),className:"w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500 focus:outline-none",children:[(0,wo.jsx)("option",{value:"general",children:"Allm\xe4n feedback"}),(0,wo.jsx)("option",{value:"bug",children:"Buggrapport"}),(0,wo.jsx)("option",{value:"feature",children:"Funktionsf\xf6rslag"}),(0,wo.jsx)("option",{value:"question",children:"Fr\xe5ga"})]})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-300 mb-2",children:"Meddelande *"}),(0,wo.jsx)("textarea",{id:"message",value:i.message,onChange:e=>a((0,To.A)((0,To.A)({},i),{},{message:e.target.value})),rows:5,className:"w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500 focus:outline-none resize-none",placeholder:"Ber\xe4tta vad du tycker...",required:!0})]}),d&&(0,wo.jsx)("div",{className:"bg-red-500/10 border border-red-500/50 rounded-lg p-3 text-red-400 text-sm",children:d}),(0,wo.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,wo.jsx)("button",{type:"button",onClick:f,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white font-semibold py-3 px-4 rounded-lg transition-colors",disabled:s,children:"Avbryt"}),(0,wo.jsx)("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-cyan-600 to-indigo-600 hover:from-cyan-700 hover:to-indigo-700 text-white font-semibold py-3 px-4 rounded-lg transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",disabled:s,children:s?"Skickar...":"Skicka"})]})]})})]})})},Al=e=>{let{isOpen:n,onClose:r}=e;const[o,i]=(0,t.useState)(!1),[a,s]=(0,t.useState)(50),[l,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)(!1),[h,f]=(0,t.useState)({isOpen:!1,title:"",message:"",type:"info"});if(!n)return null;return(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-start justify-center p-4 z-[1200] overflow-y-auto pt-20",onClick:e=>{e.target===e.currentTarget&&r()},children:(0,wo.jsxs)("div",{className:"bg-slate-900 rounded-xl shadow-2xl border border-purple-500/40 max-w-2xl w-full mb-8",onClick:e=>e.stopPropagation(),children:[(0,wo.jsxs)("div",{className:"bg-slate-900 border-b border-slate-700 p-6 flex items-center justify-between rounded-t-xl",children:[(0,wo.jsxs)("div",{className:"flex items-center gap-3",children:[(0,wo.jsx)("img",{src:"/logo-compass.svg",alt:"RouteQuest",className:"w-10 h-10"}),(0,wo.jsx)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-cyan-400 to-indigo-400 bg-clip-text text-transparent",children:"Om RouteQuest"})]}),(0,wo.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-200 transition-colors p-2 hover:bg-slate-800 rounded-lg flex-shrink-0","aria-label":"St\xe4ng",children:(0,wo.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,wo.jsxs)("div",{className:"p-6 space-y-6 text-gray-300",children:[(0,wo.jsxs)("div",{className:"text-sm text-gray-500",children:["Version ",__webpack_require__(8330).rE]}),(0,wo.jsxs)("section",{children:[(0,wo.jsx)("h3",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Vad \xe4r RouteQuest?"}),(0,wo.jsx)("p",{className:"leading-relaxed",children:"RouteQuest \xe4r en plattform f\xf6r att skapa och spela interaktiva tipspromenader. Skapa sp\xe4nnande rutter med fr\xe5gor och utmaningar, eller delta i redan skapade \xe4ventyr!"})]}),(0,wo.jsxs)("section",{children:[(0,wo.jsxs)("button",{onClick:()=>c(!l),className:"w-full flex items-center justify-between text-lg font-semibold text-cyan-400 hover:text-cyan-300 transition-colors mb-3",children:[(0,wo.jsx)("span",{children:"S\xe5 h\xe4r fungerar det"}),(0,wo.jsx)("svg",{className:"w-5 h-5 transition-transform ".concat(l?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),l&&(0,wo.jsxs)("div",{className:"space-y-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h4",{className:"font-semibold text-indigo-300 mb-1",children:"\ud83d\uddfa\ufe0f Skapa en runda"}),(0,wo.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-sm ml-4",children:[(0,wo.jsx)("li",{children:"Klicka p\xe5 kartan f\xf6r att markera start och slut"}),(0,wo.jsx)("li",{children:"V\xe4lj sv\xe5righetsgrad och antal fr\xe5gor"}),(0,wo.jsx)("li",{children:"En rutt genereras automatiskt med fr\xe5gor l\xe4ngs v\xe4gen"}),(0,wo.jsx)("li",{children:"Dela QR-koden eller l\xe4nken med deltagare"})]})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h4",{className:"font-semibold text-indigo-300 mb-1",children:"\ud83c\udfae Spela en runda"}),(0,wo.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-sm ml-4",children:[(0,wo.jsx)("li",{children:"Skanna QR-koden eller \xf6ppna l\xe4nken"}),(0,wo.jsx)("li",{children:"Ange ditt namn och v\xe4lj spr\xe5k (svenska eller engelska)"}),(0,wo.jsx)("li",{children:"F\xf6lj rutten p\xe5 kartan och besvara fr\xe5gorna"}),(0,wo.jsx)("li",{children:"Se dina resultat och j\xe4mf\xf6r med andra deltagare"})]})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h4",{className:"font-semibold text-indigo-300 mb-1",children:"\ud83d\udc64 Mina rundor"}),(0,wo.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-sm ml-4",children:[(0,wo.jsx)("li",{children:"Se alla rundor du skapat och deltagit i"}),(0,wo.jsx)("li",{children:"F\xf6lj deltagarnas framsteg i realtid"}),(0,wo.jsx)("li",{children:"Avsluta rundor och se slutresultat"}),(0,wo.jsx)("li",{children:"Logga in f\xf6r att synka mellan enheter"})]})]})]})]}),(0,wo.jsxs)("section",{className:"bg-gradient-to-r from-purple-500/10 to-indigo-500/10 rounded-lg p-4 border border-purple-500/20",children:[(0,wo.jsx)("h3",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"St\xf6d RouteQuest"}),(0,wo.jsx)("p",{className:"text-sm mb-3 leading-relaxed",children:"RouteQuest \xe4r gratis att anv\xe4nda! Om du tycker om tj\xe4nsten kan du st\xf6dja utvecklingen med en donation."}),(0,wo.jsxs)("div",{className:"flex items-center gap-3",children:[(0,wo.jsx)("input",{type:"number",min:"10",step:"10",value:a,onChange:e=>s(parseInt(e.target.value)||50),className:"w-24 px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500 focus:outline-none"}),(0,wo.jsx)("span",{className:"text-gray-400",children:"SEK"}),(0,wo.jsx)("button",{onClick:()=>{i(!0)},className:"flex-1 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white font-semibold py-2 px-4 rounded-lg transition-all shadow-lg",children:"Donera"})]})]}),(0,wo.jsxs)("section",{children:[(0,wo.jsx)("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Kontakta oss"}),(0,wo.jsxs)("div",{className:"space-y-3",children:[(0,wo.jsxs)("button",{onClick:()=>d(!0),className:"w-full bg-gradient-to-r from-cyan-600 to-indigo-600 hover:from-cyan-700 hover:to-indigo-700 text-white font-semibold py-3 px-4 rounded-lg transition-all shadow-lg flex items-center justify-center gap-2",children:[(0,wo.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Ge feedback / Kontakta oss"]}),(0,wo.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-400 justify-center",children:[(0,wo.jsx)("svg",{className:"w-4 h-4 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),(0,wo.jsx)("a",{href:"https://www.routequest.se",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-300 hover:text-cyan-200 transition-colors",children:"www.routequest.se"})]})]})]}),(0,wo.jsxs)("div",{className:"text-center text-sm text-gray-500 pt-4 border-t border-slate-700",children:[(0,wo.jsx)("p",{className:"mb-2",children:"\xa9 2025 RouteQuest. Skapad med \u2764\ufe0f f\xf6r \xe4ventyrslystna sj\xe4lar."}),(0,wo.jsxs)("div",{className:"flex justify-center gap-4 text-xs",children:[(0,wo.jsx)("a",{href:"/privacy-policy.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-400 hover:text-cyan-300 transition-colors",children:"Integritetspolicy"}),(0,wo.jsx)("span",{className:"text-gray-600",children:"|"}),(0,wo.jsx)("a",{href:"/terms-of-service.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-400 hover:text-cyan-300 transition-colors",children:"Anv\xe4ndarvillkor"})]})]}),(0,wo.jsx)("div",{className:"mt-6",children:(0,wo.jsx)("button",{onClick:r,className:"w-full bg-slate-700 hover:bg-slate-600 text-white font-semibold py-3 px-4 rounded-lg transition-colors",children:"St\xe4ng"})})]})]})}),o&&(0,wo.jsx)(xl,{isOpen:o,runName:"RouteQuest Donation",runId:"donation",participantId:"donation",amount:100*a,allowSkip:!0,onSuccess:e=>{i(!1),e.skipped||f({isOpen:!0,title:"Tack f\xf6r din donation!",message:"Tack f\xf6r din donation! \ud83d\udc9a",type:"success"})},onCancel:()=>i(!1)}),(0,wo.jsx)(kl,{isOpen:u,onClose:()=>d(!1)}),(0,wo.jsx)(la,{isOpen:h.isOpen,onClose:()=>f((0,To.A)((0,To.A)({},h),{},{isOpen:!1})),title:h.title,message:h.message,type:h.type})]})},Sl=e=>{let{isOpen:n,onClose:r,onUnreadChange:o=()=>{}}=e;const{currentUser:i}=Eo(),[a,s]=(0,t.useState)([]),[l,c]=(0,t.useState)(!0);(0,t.useEffect)(()=>{if(!n)return;let e=!0;const t=Xa(),r=null!==i&&void 0!==i&&i.isAnonymous?null:null===i||void 0===i?void 0:i.uid;return(async()=>{c(!0);try{const n=await ps(r,t);if(!e)return;s(n);const i=n.filter(e=>!e.read&&!e.deleted).length;o(i)}catch(n){console.error("Kunde inte h\xe4mta meddelanden:",n),e&&s([])}finally{e&&c(!1)}})(),()=>{e=!1}},[i,n,o]);const u=e=>{if(null===e||void 0===e||!e.toDate)return"";const t=e.toDate(),n=new Date-t,r=Math.floor(n/6e4),o=Math.floor(n/36e5),i=Math.floor(n/864e5);return r<60?"".concat(r,"m sedan"):o<24?"".concat(o,"h sedan"):i<7?"".concat(i,"d sedan"):t.toLocaleDateString("sv-SE")},d=e=>{switch(e){case"success":return(0,wo.jsx)("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})});case"warning":return(0,wo.jsx)("svg",{className:"w-5 h-5 text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});case"error":return(0,wo.jsx)("svg",{className:"w-5 h-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});default:return(0,wo.jsx)("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}};if(!n)return null;const h=a.filter(e=>!e.read).length;return(0,wo.jsxs)("div",{className:"absolute right-0 mt-2 w-96 bg-slate-900 rounded-lg border border-slate-700 shadow-xl z-50 max-h-[32rem] overflow-hidden flex flex-col",children:[(0,wo.jsxs)("div",{className:"px-4 py-3 border-b border-slate-700 flex items-center justify-between",children:[(0,wo.jsx)("h3",{className:"text-lg font-semibold text-gray-200",children:"Meddelanden"}),h>0&&(0,wo.jsx)("span",{className:"px-2 py-0.5 bg-cyan-500 rounded-full text-xs font-bold text-black",children:h})]}),(0,wo.jsx)("div",{className:"overflow-y-auto flex-1",children:l?(0,wo.jsx)("div",{className:"text-center py-8 text-gray-400",children:"Laddar..."}):0===a.length?(0,wo.jsx)("div",{className:"text-center py-8 text-gray-400",children:"Inga meddelanden"}):(0,wo.jsx)("div",{className:"divide-y divide-slate-700",children:a.map(e=>(0,wo.jsx)("div",{className:"p-4 hover:bg-slate-800/50 transition-colors ".concat(e.read?"":"bg-slate-800/30"),children:(0,wo.jsxs)("div",{className:"flex items-start gap-3",children:[(0,wo.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:d(e.type)}),(0,wo.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,wo.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-1",children:[(0,wo.jsx)("h4",{className:"text-sm font-semibold text-gray-200 truncate",children:e.title}),!e.read&&(0,wo.jsx)("span",{className:"flex-shrink-0 w-2 h-2 bg-cyan-500 rounded-full"})]}),(0,wo.jsx)("p",{className:"text-sm text-gray-300 mb-2 line-clamp-2",children:e.message}),(0,wo.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,wo.jsx)("span",{className:"text-xs text-gray-500",children:u(e.createdAt)}),(0,wo.jsxs)("div",{className:"flex items-center gap-1",children:[!e.read&&(0,wo.jsx)("button",{onClick:()=>(async e=>{try{await gs(e),s(t=>{const n=t.map(t=>t.id===e?(0,To.A)((0,To.A)({},t),{},{read:!0}):t),r=n.filter(e=>!e.read&&!e.deleted).length;return o(r),n})}catch(t){console.error("Kunde inte markera meddelande som l\xe4st:",t)}})(e.id),className:"p-1.5 rounded hover:bg-slate-700 text-cyan-400 hover:text-cyan-300 transition-colors",title:"Markera som l\xe4st",children:(0,wo.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,wo.jsx)("button",{onClick:()=>(async e=>{try{await vs(e),s(t=>{const n=t.filter(t=>t.id!==e),r=n.filter(e=>!e.read&&!e.deleted).length;return o(r),n})}catch(t){console.error("Kunde inte radera meddelande:",t)}})(e.id),className:"p-1.5 rounded hover:bg-slate-700 text-red-400 hover:text-red-300 transition-colors",title:"Radera",children:(0,wo.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})]})},e.id))})}),(0,wo.jsx)("div",{className:"px-4 py-3 border-t border-slate-700",children:(0,wo.jsx)("button",{onClick:r,className:"w-full text-sm text-cyan-400 hover:text-cyan-300 transition-colors font-semibold",children:"St\xe4ng"})})]})},Nl={queued:{label:"K\xf6ad",badge:"bg-slate-600 text-white"},pending:{label:"F\xf6rbereds",badge:"bg-slate-600 text-white"},processing:{label:"P\xe5g\xe5r",badge:"bg-amber-500 text-black animate-pulse"},completed:{label:"Klar",badge:"bg-emerald-500 text-black"},failed:{label:"Misslyckades",badge:"bg-red-500 text-white"},cancelled:{label:"Avbruten",badge:"bg-gray-500 text-white"}},Cl=e=>{if(!e)return"\u2014";try{return e.toLocaleString("sv-SE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(t){return e.toString()}},jl=e=>e.label?e.label:"generation"===e.taskType?"AI-generering":"validation"===e.taskType?"AI-validering":"regenerateemoji"===e.taskType?"Emoji-regenerering":"batchregenerateemojis"===e.taskType?"Mass-regenerering Emojis":"Bakgrundsjobb",El=e=>{let{isOpen:t,tasks:n,unreadTaskIds:r,onMarkTaskSeen:o,onMarkAllSeen:i,onClose:a,isSuperUser:s}=e;const l=J();if(!t)return null;const c=n&&n.length>0;return(0,wo.jsx)("div",{className:"fixed top-16 right-4 z-[70] w-80 max-w-full",children:(0,wo.jsxs)("div",{className:"rounded-xl bg-slate-900/95 border border-slate-700 shadow-2xl overflow-hidden",children:[(0,wo.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-800",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h3",{className:"text-sm font-semibold text-white",children:"Bakgrundsjobb"}),(0,wo.jsx)("p",{className:"text-xs text-slate-400",children:"Utsprungna i den h\xe4r enheten"})]}),(0,wo.jsx)("button",{type:"button",onClick:a,className:"text-slate-400 hover:text-white transition-colors","aria-label":"St\xe4ng",children:"\u2715"})]}),(0,wo.jsx)("div",{className:"max-h-96 overflow-y-auto",children:c?(0,wo.jsx)("ul",{className:"divide-y divide-slate-800",children:n.map(e=>{var t;const n=Nl[e.status]||Nl.pending,i=r.has(e.id),a=["completed","failed","cancelled"].includes(e.status);return(0,wo.jsxs)("li",{className:"px-4 py-3 bg-slate-900 text-sm text-slate-200",children:[(0,wo.jsx)("div",{className:"flex items-center justify-between gap-2",children:(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsxs)("div",{className:"flex items-center gap-2",children:[(0,wo.jsx)("span",{className:"font-semibold text-white",children:jl(e)}),(0,wo.jsx)("span",{className:"px-2 py-0.5 rounded-full text-[11px] font-semibold ".concat(n.badge),children:n.label})]}),e.description&&(0,wo.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:e.description}),(0,wo.jsxs)("div",{className:"flex flex-col mt-2 text-[11px] text-slate-500 gap-0.5",children:[(0,wo.jsxs)("span",{children:["Start: ",Cl(e.createdAt)]}),e.finishedAt&&(0,wo.jsxs)("span",{children:["Klart: ",Cl(e.finishedAt)]}),null!=(null===(t=e.result)||void 0===t?void 0:t.count)&&(0,wo.jsxs)("span",{children:["Resultat: ",e.result.count," objekt"]}),e.error&&(0,wo.jsxs)("span",{className:"text-red-400",children:["Fel: ",e.error]})]})]})}),a&&(0,wo.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[i?(0,wo.jsx)("span",{className:"text-xs font-semibold text-amber-400",children:"Nytt resultat"}):(0,wo.jsx)("span",{className:"text-xs text-slate-500",children:"Markerad som l\xe4st"}),i&&(0,wo.jsx)("button",{type:"button",onClick:()=>o(e.id),className:"text-xs text-cyan-300 hover:text-cyan-200 font-semibold",children:"Markera som l\xe4st"})]})]},e.id)})}):(0,wo.jsx)("div",{className:"px-4 py-6 text-center text-sm text-slate-400",children:"Inga aktiva jobb just nu. Starta en AI-generering eller validering f\xf6r att se status h\xe4r."})}),c&&(0,wo.jsxs)("div",{className:"border-t border-slate-800 px-4 py-3 flex items-center justify-between text-xs",children:[(0,wo.jsx)("button",{type:"button",onClick:i,className:"text-slate-400 hover:text-slate-200 transition-colors",children:"Markera allt som l\xe4st"}),s&&(0,wo.jsx)("button",{type:"button",onClick:()=>{a(),l("/superuser/tasks")},className:"text-cyan-300 hover:text-cyan-200 font-semibold",children:"\xd6ppna k\xf6\xf6versikt"})]})]})})},Tl=e=>{let{title:n="RouteQuest",children:r}=e;const o=J(),{currentUser:i,isAuthenticated:a,isSuperUser:s,logout:l}=Eo(),{status:c,coords:u,trackingEnabled:d,enableTracking:h,disableTracking:f}=_s(),p=(0,t.useRef)(null),[m,g]=(0,t.useState)(!1),[v,y]=(0,t.useState)(!1),[b,x]=(0,t.useState)(!1),[w,_]=(0,t.useState)(!1),[k,A]=(0,t.useState)(0),{myTrackedTasks:S,unreadTaskIds:N,unreadCount:C,hasActiveTrackedTasks:j,markTaskAsSeen:E,markAllTasksAsSeen:T}=ja(),[I,P]=(0,t.useState)(()=>"undefined"===typeof window?"":xo.getAlias()),[O,M]=(0,t.useState)(()=>"undefined"===typeof window?"sv":localStorage.getItem("routequest:language")||"sv"),[L,R]=(0,t.useState)({isOpen:!1,title:"",message:"",type:"info"}),D=(0,t.useRef)(new Set),F=(0,t.useRef)(!1);(0,t.useLayoutEffect)(()=>{if("undefined"===typeof window)return;const e=()=>{if(!p.current)return;const e=p.current.getBoundingClientRect().height;document.documentElement.style.setProperty("--app-header-height","".concat(e,"px"))};e();const t=()=>e();window.addEventListener("resize",t);const n=window.visualViewport;let r;return n&&n.addEventListener("resize",t),"undefined"!==typeof ResizeObserver&&p.current&&(r=new ResizeObserver(()=>e()),r.observe(p.current)),()=>{window.removeEventListener("resize",t),n&&n.removeEventListener("resize",t),r&&r.disconnect()}},[]);const z=(0,t.useCallback)(()=>{try{xo.removeAlias(),xo.removeContact()}catch(e){console.warn("[Header] Kunde inte ta bort alias:",e)}P(""),g(!1)},[]),B=(0,t.useCallback)(async e=>{const t=(null===e||void 0===e?void 0:e.title)||"Nytt meddelande",n=(null===e||void 0===e?void 0:e.body)||(null===e||void 0===e?void 0:e.message)||"Du har f\xe5tt ett nytt meddelande.";try{if(Pe.Ii.isNativePlatform()){var r;const o=await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,3339)),i=o.LocalNotifications||(null===(r=o.default)||void 0===r?void 0:r.LocalNotifications);if(i){if("granted"!==(await i.checkPermissions()).display){if("granted"!==(await i.requestPermissions()).display)return}await i.schedule({notifications:[{id:Date.now()%2147483647,title:t,body:n,extra:{messageId:(null===e||void 0===e?void 0:e.id)||null,messageType:(null===e||void 0===e?void 0:e.type)||"info"}}]})}else console.warn("[Header] LocalNotifications plugin saknas")}else if("undefined"!==typeof window&&"Notification"in window&&("default"!==Notification.permission||F.current||(F.current=!0,await Notification.requestPermission()),"granted"===Notification.permission))try{if("serviceWorker"in navigator){const r=await navigator.serviceWorker.ready;await r.showNotification(t,{body:n,tag:"message-".concat((null===e||void 0===e?void 0:e.id)||Date.now()),data:{messageId:(null===e||void 0===e?void 0:e.id)||null}})}else new Notification(t,{body:n,tag:"message-".concat((null===e||void 0===e?void 0:e.id)||Date.now()),data:{messageId:(null===e||void 0===e?void 0:e.id)||null}})}catch(o){console.warn("[Header] Kunde inte skapa web-notifikation:",o)}"undefined"!==typeof navigator&&navigator.vibrate&&navigator.vibrate([120,60,120])}catch(i){console.warn("[Header] Kunde inte visa meddelandenotifikation:",i)}},[]);(0,t.useEffect)(()=>{if(m)try{P(xo.getAlias())}catch(e){console.warn("[Header] Kunde inte l\xe4sa g\xe4stalias:",e)}},[m]),(0,t.useEffect)(()=>{if("undefined"===typeof window)return;const e=e=>{e.key&&"geoquest:preferences"!==e.key||P(xo.getAlias())};return window.addEventListener("storage",e),window.addEventListener("userPreferences:changed",e),()=>{window.removeEventListener("storage",e),window.removeEventListener("userPreferences:changed",e)}},[]),(0,t.useEffect)(()=>{i&&!i.isAnonymous||P(xo.getAlias())},[i]),(0,t.useEffect)(()=>{let e=!0;const t=Xa(),n=null!==i&&void 0!==i&&i.isAnonymous?null:null===i||void 0===i?void 0:i.uid;return(async()=>{try{const r=await xs(n,t);e&&A(r)}catch(r){console.error("[Header] Failed to load unread message count:",r)}})(),()=>{e=!1}},[i]),(0,t.useEffect)(()=>{if("undefined"===typeof window)return;const e=Xa(),t=null!==i&&void 0!==i&&i.isAnonymous?null:null===i||void 0===i?void 0:i.uid;if(!e&&!t)return void A(0);D.current=new Set;let n=!0;const r=ms(t,e,async e=>{const t=e.filter(e=>!e.read&&!e.deleted).length;A(t);const r=e.filter(e=>!D.current.has(e.id));if(e.forEach(e=>D.current.add(e.id)),n)return void(n=!1);const o=r.find(e=>!e.read&&!e.deleted);o&&await B(o)});return()=>{D.current.clear(),"function"===typeof r&&r()}},[i,B]),(0,t.useEffect)(()=>{a||_(!1)},[a]),(0,t.useEffect)(()=>{b&&_(!1)},[b]),(0,t.useEffect)(()=>{w&&x(!1)},[w]);const U=e=>{M(e),"undefined"!==typeof window&&(localStorage.setItem("routequest:language",e),window.dispatchEvent(new Event("languageChange")))},q=a?0:za().length,V=a?0:Ba().length,H=q>0||V>0,G=(()=>{if(!d)return{color:"opacity-40",spin:!1,title:"GPS avst\xe4ngd",textColor:"text-gray-400"};switch(c){case"idle":case"pending":return{color:"opacity-60",spin:!0,title:"S\xf6ker GPS...",textColor:"text-gray-400"};case"active":const e=null!==u&&void 0!==u&&u.accuracy?Math.round(u.accuracy):null;return e&&e<20?{color:"drop-shadow-[0_0_8px_rgba(52,211,153,0.6)]",spin:!1,title:"\xb1".concat(e,"m"),textColor:"text-emerald-400"}:e&&e<50?{color:"drop-shadow-[0_0_8px_rgba(34,211,238,0.6)]",spin:!1,title:"\xb1".concat(e,"m"),textColor:"text-cyan-400"}:{color:"drop-shadow-[0_0_8px_rgba(251,191,36,0.6)]",spin:!1,title:e?"\xb1".concat(e,"m"):"GPS aktiv",textColor:"text-amber-400"};case"denied":return{color:"opacity-40 saturate-0",spin:!1,title:"GPS nekad",textColor:"text-red-400"};case"unsupported":return{color:"opacity-30",spin:!1,title:"GPS st\xf6ds ej",textColor:"text-gray-400"};default:return{color:"opacity-60",spin:!1,title:"GPS ej tillg\xe4nglig",textColor:"text-gray-400"}}})();return(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("header",{ref:p,className:"bg-slate-900/95 backdrop-blur-sm border-b border-slate-700 fixed top-0 left-0 right-0 z-50",style:{paddingTop:"var(--safe-area-inset-top, 0px)"},children:(0,wo.jsxs)("div",{className:"mx-auto w-full max-w-6xl px-2 sm:px-3 py-1.5 sm:py-2 grid grid-cols-[auto_1fr_auto] items-center gap-1 sm:gap-2 md:gap-3",children:[(0,wo.jsx)("div",{className:"flex items-center gap-1 sm:gap-2",children:(0,wo.jsx)("button",{onClick:()=>o("/"),className:"hover:opacity-80 transition-opacity","aria-label":"G\xe5 till startsidan",children:(0,wo.jsx)("img",{src:"/logo-compass.svg",alt:"RouteQuest",className:"w-7 h-7 sm:w-8 sm:h-8 md:w-9 md:h-9 flex-shrink-0 transition-all ".concat(G.color," ").concat(G.spin?"animate-spin":""),style:G.spin?{animationDuration:"2s"}:{}})})}),(0,wo.jsxs)("div",{className:"text-center px-1 flex items-center justify-center overflow-hidden gap-1.5",children:[(0,wo.jsx)("h1",{className:"text-sm sm:text-base md:text-lg font-bold bg-gradient-to-r from-cyan-400 to-indigo-400 bg-clip-text text-transparent whitespace-nowrap",children:n}),s&&(0,wo.jsx)("span",{className:"px-1.5 py-0.5 bg-red-500/20 border border-red-500/50 rounded text-[10px] text-red-300",children:"SU"})]}),(0,wo.jsxs)("div",{className:"relative flex justify-end items-center gap-1 sm:gap-2",children:[r&&(0,wo.jsx)("div",{className:"flex items-center gap-1 sm:gap-1.5 mr-0.5 sm:mr-1 flex-shrink-0",children:r}),(0,wo.jsxs)("button",{onClick:()=>g(!m),className:"p-1.5 rounded-lg hover:bg-slate-800 transition-colors relative","aria-label":"Meny",children:[(0,wo.jsxs)("div",{className:"w-5 h-5 flex flex-col justify-center gap-1",children:[(0,wo.jsx)("span",{className:"block h-0.5 bg-gray-300 transition-all ".concat(m?"rotate-45 translate-y-1.5":"")}),(0,wo.jsx)("span",{className:"block h-0.5 bg-gray-300 transition-all ".concat(m?"opacity-0":"")}),(0,wo.jsx)("span",{className:"block h-0.5 bg-gray-300 transition-all ".concat(m?"-rotate-45 -translate-y-1.5":"")})]}),s&&C>0?(0,wo.jsx)("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-amber-500 rounded-full text-xs font-bold text-black flex items-center justify-center animate-pulse",children:C}):k>0?(0,wo.jsx)("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full text-xs font-bold text-white flex items-center justify-center animate-pulse",children:k}):s&&j?(0,wo.jsx)("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-amber-400 rounded-full animate-ping"}):H?(0,wo.jsx)("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-cyan-500 rounded-full text-xs font-bold text-black flex items-center justify-center",children:q+V}):null]})]})]})}),m&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("div",{className:"fixed inset-0 z-[60]",onClick:()=>g(!1)}),(0,wo.jsx)("div",{className:"fixed top-[4.5rem] right-4 w-64 bg-slate-900 rounded-lg border border-slate-700 shadow-xl z-[70] overflow-hidden",style:{maxHeight:"calc(var(--app-viewport-100, 100vh) - 6rem)"},children:(0,wo.jsxs)("div",{className:"overflow-y-auto",style:{maxHeight:"calc(var(--app-viewport-100, 100vh) - 7rem)"},children:[a&&!(null!==i&&void 0!==i&&i.isAnonymous)&&(0,wo.jsxs)("div",{className:"px-4 py-3 border-b border-slate-700",children:[(0,wo.jsx)("p",{className:"text-sm text-gray-400",children:"Inloggad som"}),(0,wo.jsx)("p",{className:"font-semibold text-gray-200",children:null===i||void 0===i?void 0:i.name}),s&&(0,wo.jsx)("span",{className:"inline-block mt-1 px-2 py-0.5 bg-red-500/20 border border-red-500/50 rounded text-xs text-red-300",children:"SuperUser"})]}),(a&&(null===i||void 0===i?void 0:i.isAnonymous)||!a&&I)&&(0,wo.jsxs)("div",{className:"px-4 py-3 border-b border-slate-700",children:[(0,wo.jsx)("p",{className:"text-sm text-gray-400",children:"G\xe4st (ej inloggad)"}),I?(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("p",{className:"mt-1 text-sm font-semibold text-gray-200",children:I}),(0,wo.jsx)("button",{type:"button",onClick:z,className:"mt-2 text-xs font-semibold text-red-300 hover:text-red-200",children:"Ta bort alias"})]}):(0,wo.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Alias visas h\xe4r n\xe4r du sparat ett."})]}),(0,wo.jsxs)("div",{className:"py-2",children:[(0,wo.jsxs)("button",{onClick:()=>{g(!1),x(!b)},className:"w-full px-4 py-2 text-left hover:bg-slate-800 transition-colors flex items-center justify-between",children:[(0,wo.jsx)("span",{className:"text-gray-200",children:"Meddelanden"}),k>0&&(0,wo.jsx)("span",{className:"px-2 py-0.5 bg-cyan-500 rounded text-xs font-bold text-black",children:k})]}),s&&(0,wo.jsxs)("button",{onClick:()=>{g(!1),_(!0)},className:"w-full px-4 py-2 text-left hover:bg-slate-800 transition-colors flex items-center justify-between",children:[(0,wo.jsx)("span",{className:"text-gray-200",children:"Bakgrundsjobb"}),C>0?(0,wo.jsx)("span",{className:"px-2 py-0.5 bg-amber-500 rounded text-xs font-bold text-black",children:C}):j?(0,wo.jsx)("span",{className:"px-2 py-0.5 bg-amber-500/20 border border-amber-500/40 text-amber-300 rounded text-[11px] font-semibold",children:"P\xe5g\xe5r"}):null]}),(0,wo.jsxs)("button",{onClick:()=>{g(!1),o("/my-runs")},className:"w-full px-4 py-2 text-left hover:bg-slate-800 transition-colors flex items-center justify-between",children:[(0,wo.jsx)("span",{className:"text-gray-200",children:"Mina rundor"}),H&&(0,wo.jsx)("span",{className:"px-2 py-0.5 bg-cyan-500/20 border border-cyan-500/50 rounded text-xs text-cyan-300",children:q+V})]}),(0,wo.jsx)("div",{className:"my-2 border-t border-slate-700"}),(0,wo.jsx)("div",{className:"px-4 py-2 text-xs text-gray-500 font-semibold",children:"INST\xc4LLNINGAR"}),(0,wo.jsxs)("div",{className:"px-4 py-2",children:[(0,wo.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,wo.jsx)("span",{className:"text-sm text-gray-300",children:"GPS-sp\xe5rning"}),(0,wo.jsx)("button",{onClick:()=>{d?f():h()},className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(d?"bg-emerald-500":"bg-slate-600"),children:(0,wo.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(d?"translate-x-6":"translate-x-1")})})]}),(0,wo.jsxs)("div",{className:"text-xs space-y-1",children:[(0,wo.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,wo.jsx)("span",{className:G.textColor,children:"\u25cf"}),(0,wo.jsx)("span",{className:G.textColor+" font-medium",children:G.title})]}),d&&u&&u.lat&&u.lng&&(0,wo.jsxs)("div",{className:"font-mono text-[10px] text-gray-400 pl-4",children:[u.lat.toFixed(4),", ",u.lng.toFixed(4)]})]})]}),(0,wo.jsxs)("div",{className:"px-4 py-2",children:[(0,wo.jsx)("div",{className:"text-sm text-gray-300 mb-2",children:"Spr\xe5k"}),(0,wo.jsxs)("div",{className:"flex gap-2",children:[(0,wo.jsx)("button",{onClick:()=>U("sv"),className:"flex-1 px-3 py-1.5 rounded text-xs font-medium transition-colors ".concat("sv"===O?"bg-cyan-500 text-black":"bg-slate-700 text-gray-300 hover:bg-slate-600"),children:"Svenska"}),(0,wo.jsx)("button",{onClick:()=>U("en"),className:"flex-1 px-3 py-1.5 rounded text-xs font-medium transition-colors ".concat("en"===O?"bg-cyan-500 text-black":"bg-slate-700 text-gray-300 hover:bg-slate-600"),children:"English"})]})]}),s&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("div",{className:"my-2 border-t border-slate-700"}),(0,wo.jsx)("button",{onClick:()=>{g(!1),o("/superuser/notifications")},className:"w-full px-4 py-2 text-left hover:bg-slate-800 transition-colors text-red-300",children:"Systemnotiser"}),(0,wo.jsx)("button",{onClick:()=>{g(!1),o("/superuser/all-runs")},className:"w-full px-4 py-2 text-left hover:bg-slate-800 transition-colors text-red-300",children:"Alla rundor"}),(0,wo.jsx)("button",{onClick:()=>{g(!1),o("/superuser/users")},className:"w-full px-4 py-2 text-left hover:bg-slate-800 transition-colors text-red-300",children:"Alla anv\xe4ndare"}),(0,wo.jsx)("button",{onClick:()=>{g(!1),o("/admin/questions")},className:"w-full px-4 py-2 text-left hover:bg-slate-800 transition-colors text-red-300",children:"Fr\xe5gebank"}),(0,wo.jsx)("button",{onClick:()=>{g(!1),o("/superuser/analytics")},className:"w-full px-4 py-2 text-left hover:bg-slate-800 transition-colors text-red-300",children:"Bes\xf6ksstatistik"}),(0,wo.jsx)("button",{onClick:()=>{g(!1),o("/superuser/messages")},className:"w-full px-4 py-2 text-left hover:bg-slate-800 transition-colors text-red-300",children:"Meddelanden"}),(0,wo.jsxs)("button",{onClick:()=>{g(!1),o("/superuser/tasks")},className:"w-full px-4 py-2 text-left hover:bg-slate-800 transition-colors text-red-300 flex items-center justify-between",children:[(0,wo.jsx)("span",{children:"Bakgrundsjobb"}),C>0&&(0,wo.jsx)("span",{className:"px-2 py-0.5 bg-amber-500 rounded text-xs font-bold text-black",children:C})]}),(0,wo.jsx)("button",{onClick:()=>{g(!1),o("/superuser/logs")},className:"w-full px-4 py-2 text-left hover:bg-slate-800 transition-colors text-red-300",children:"\ud83d\udd34 Error Logs"}),"localhost"===window.location.hostname&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("div",{className:"my-2 border-t border-slate-700"}),(0,wo.jsx)("div",{className:"px-4 py-2 text-xs text-gray-500 font-semibold",children:"DEVELOPER TOOLS"}),(0,wo.jsx)("button",{onClick:async()=>{if(g(!1),window.confirm("Uppdatera alla fr\xe5gor med createdAt-f\xe4lt?\n\nDetta kan ta n\xe5gra sekunder."))try{const e=await fetch("https://europe-west1-geoquest2-7e45c.cloudfunctions.net/updateQuestionsCreatedAt"),t=await e.json();R({isOpen:!0,title:"Uppdatering klar",message:"\u2705 Klart!\n\nUppdaterade: ".concat(t.updated,"\nHade redan: ").concat(t.alreadyHad,"\nTotalt: ").concat(t.total),type:"success"}),setTimeout(()=>window.location.reload(),2e3)}catch(e){R({isOpen:!0,title:"Fel vid uppdatering",message:"\u274c Fel: ".concat(e.message),type:"error"})}},className:"w-full px-4 py-2 text-left hover:bg-slate-800 transition-colors text-yellow-300 text-sm",children:"\ud83d\udd27 Update Questions createdAt"})]})]}),(0,wo.jsx)("div",{className:"my-2 border-t border-slate-700"}),(0,wo.jsx)("button",{onClick:()=>{g(!1),y(!0)},className:"w-full px-4 py-2 text-left hover:bg-slate-800 transition-colors text-gray-200",children:"Om RouteQuest"}),(0,wo.jsxs)("div",{className:"px-4 py-3 text-xs text-gray-400",children:[(0,wo.jsxs)("div",{children:["Version ",is]}),(0,wo.jsxs)("div",{className:"text-gray-500 mt-1",children:["Build: ",new Date(as).toLocaleString("sv-SE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(",","")]})]}),(0,wo.jsx)("div",{className:"my-2 border-t border-slate-700"}),!a||null!==i&&void 0!==i&&i.isAnonymous?(0,wo.jsx)("button",{onClick:()=>{g(!1),o("/login")},className:"w-full px-4 py-2 text-left hover:bg-slate-800 transition-colors text-cyan-300 font-semibold",children:"Logga in"}):(0,wo.jsx)("button",{onClick:()=>{l(),g(!1),o("/")},className:"w-full px-4 py-2 text-left hover:bg-slate-800 transition-colors text-red-300",children:"Logga ut"})]})]})})]}),(0,wo.jsx)(Al,{isOpen:v,onClose:()=>y(!1)}),w&&s&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("div",{className:"fixed inset-0 z-[60]",onClick:()=>_(!1)}),(0,wo.jsx)(El,{isOpen:w,tasks:S,unreadTaskIds:N,onMarkTaskSeen:E,onMarkAllSeen:()=>{T(),_(!1)},onClose:()=>_(!1),isSuperUser:s})]}),b&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("div",{className:"fixed inset-0 z-[60]",onClick:()=>x(!1)}),(0,wo.jsx)("div",{className:"fixed top-16 right-4 z-[70]",children:(0,wo.jsx)(Sl,{isOpen:b,onClose:()=>x(!1),onUnreadChange:A})})]}),(0,wo.jsx)(la,{isOpen:L.isOpen,onClose:()=>R((0,To.A)((0,To.A)({},L),{},{isOpen:!1})),title:L.title,message:L.message,type:L.type})]})},Il=e=>{let{className:t=""}=e;const{VERSION:n,BUILD_DATE:r}=cs();return(0,wo.jsx)("footer",{className:"bg-slate-950 text-center border-t border-slate-800 px-4 py-4 ".concat(t).trim(),style:{paddingBottom:"calc(1rem + var(--safe-area-inset-bottom, 0px))"},children:(0,wo.jsxs)("p",{className:"text-xs text-gray-500",children:["RouteQuest Version ",n," (Build: ",new Date(r).toLocaleDateString("sv-SE"),")"]})})},Pl=e=>{let{children:t,headerTitle:n,maxWidth:r="max-w-4xl",background:o="bg-slate-950",className:i="",disableHeader:a=!1,disableFooter:s=!1}=e;return(0,wo.jsxs)("div",{className:"min-h-screen ".concat(o),children:[!a&&(0,wo.jsx)(Tl,{title:n}),(0,wo.jsxs)("div",{className:"flex min-h-[var(--app-viewport-100, 100vh)] flex-col",children:[(0,wo.jsx)("main",{className:"mx-auto w-full flex-1 ".concat(r," px-4 sm:px-6 pt-[calc(5.75rem+var(--safe-area-inset-top,0px))] pb-[calc(4rem+var(--safe-area-inset-bottom,0px))] ").concat(i).trim(),style:{paddingTop:"calc(var(--app-header-height, 5.75rem) + 1rem)"},children:t}),!s&&(0,wo.jsx)(Il,{className:"mt-auto"})]})]})},Ol=()=>{const e=J(),{isAuthenticated:n}=Eo(),[r,o]=(0,t.useState)(!1);return(0,wo.jsxs)(Pl,{headerTitle:"RouteQuest",maxWidth:"max-w-3xl",className:"space-y-8",children:[(0,wo.jsx)("section",{className:"space-y-6 text-center",children:(0,wo.jsxs)("div",{className:"space-y-3",children:[(0,wo.jsx)("h1",{className:"text-3xl font-bold text-slate-100 sm:text-4xl",children:"V\xe4lkommen till RouteQuest"}),(0,wo.jsx)("p",{className:"text-base text-gray-300 sm:text-lg",children:"Skapa och spela digitala tipsrundor direkt i mobilen"})]})}),(0,wo.jsxs)("section",{className:"rounded-2xl border border-amber-500/30 bg-amber-500/5",children:[(0,wo.jsxs)("button",{type:"button",onClick:()=>o(!r),"aria-expanded":r,className:"flex w-full items-center justify-between gap-4 px-4 py-4 text-left transition-colors hover:bg-amber-500/10 sm:px-6",children:[(0,wo.jsxs)("div",{className:"flex items-center gap-3",children:[(0,wo.jsx)("span",{"aria-hidden":"true",className:"text-xl",children:"\ud83d\udea7"}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h2",{className:"text-base font-semibold text-amber-200 sm:text-lg",children:"RouteQuest \xe4r i beta"}),(0,wo.jsx)("p",{className:"text-xs text-amber-100/80 sm:text-sm",children:"Vi slipar upplevelsen och v\xe4lkomnar din feedback."})]})]}),(0,wo.jsx)("span",{"aria-hidden":"true",className:"text-amber-200 transition-transform ".concat(r?"rotate-180":""),children:"\u25bc"})]}),r&&(0,wo.jsxs)("div",{className:"space-y-3 border-t border-amber-500/20 px-4 py-4 text-sm text-amber-50 sm:px-6",children:[(0,wo.jsx)("p",{children:"RouteQuest \xe4r under aktiv utveckling. H\xf6r g\xe4rna av dig om du saknar funktioner eller hittar problem \u2013 varje synpunkt hj\xe4lper oss fram\xe5t."}),(0,wo.jsxs)("p",{children:["Donationer g\xe5r direkt till drift och vidareutveckling. \xc4r du inte n\xf6jd? Mejla oss p\xe5"," ",(0,wo.jsx)("a",{href:"mailto:info@routequest.se",className:"text-cyan-300 underline hover:text-cyan-200",children:"info@routequest.se"})," ","s\xe5 hittar vi en l\xf6sning."]})]})]}),(0,wo.jsx)("section",{className:"space-y-6 text-center",children:(0,wo.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,wo.jsxs)("button",{type:"button",onClick:()=>{e("/generate")},className:"group flex flex-col items-center gap-4 rounded-2xl border border-slate-700 bg-slate-900/70 p-8 transition-all hover:border-cyan-400 hover:bg-slate-800/70",children:[(0,wo.jsx)("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-cyan-500/20 text-cyan-100 shadow-inner shadow-cyan-500/20 transition-colors group-hover:bg-cyan-500/30 group-hover:text-white",children:(0,wo.jsxs)("svg",{className:"h-10 w-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.6",d:"M9 20.25l-5.25-2.1a1 1 0 01-.6-.92V4.77c0-.69.7-1.18 1.35-.92L9 5.75m0 0l6-2.25m-6 2.25v14.5m6-16.75l5.25 2.25c.45.19.75.63.75 1.12v12.46c0 .69-.7 1.18-1.35.92L15 17.75m0 0l-6 2.5"}),(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.6",d:"M14.75 8.75h4M16.75 6.75v4"})]})}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h2",{className:"text-xl font-semibold text-slate-100",children:"Skapa runda"}),(0,wo.jsx)("p",{className:"mt-2 text-sm text-gray-400",children:"Generera en ny tipspromenad automatiskt"})]})]}),(0,wo.jsxs)("button",{type:"button",onClick:()=>{e("/join")},className:"group flex flex-col items-center gap-4 rounded-2xl border border-slate-700 bg-slate-900/70 p-8 transition-all hover:border-purple-400 hover:bg-slate-800/70",children:[(0,wo.jsx)("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-purple-500/20 text-purple-100 shadow-inner shadow-purple-500/20 transition-colors group-hover:bg-purple-500/30 group-hover:text-white",children:(0,wo.jsxs)("svg",{className:"h-10 w-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.6",d:"M18 9v3m1.5-1.5h-3M16.5 16.5a4.5 4.5 0 00-9 0m9-8.25a3 3 0 11-6 0 3 3 0 016 0z"}),(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.6",d:"M9 16.5v-.75a2.25 2.25 0 012.25-2.25h.5A2.25 2.25 0 0114 15.75v.75"})]})}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h2",{className:"text-xl font-semibold text-slate-100",children:"Anslut till runda"}),(0,wo.jsx)("p",{className:"mt-2 text-sm text-gray-400",children:"Ange kod f\xf6r att g\xe5 med i en befintlig runda"})]})]})]})}),(0,wo.jsxs)("section",{className:"space-y-6 text-center",children:[(0,wo.jsx)("h2",{className:"text-2xl font-semibold text-slate-100",children:"S\xe5 fungerar det"}),(0,wo.jsxs)("div",{className:"grid gap-4 text-left sm:grid-cols-3",children:[(0,wo.jsxs)("div",{className:"rounded-2xl border border-slate-700 bg-slate-900/70 p-5",children:[(0,wo.jsx)("div",{className:"mb-3 text-3xl",children:"\ud83d\udccd"}),(0,wo.jsx)("h3",{className:"text-lg font-semibold text-slate-100",children:"Automatisk ruttplanering"}),(0,wo.jsx)("p",{className:"mt-2 text-sm text-gray-400",children:"Ange l\xe4ngd och sv\xe5righetsgrad s\xe5 skapar vi en rutt med fr\xe5gor automatiskt"})]}),(0,wo.jsxs)("div",{className:"rounded-2xl border border-slate-700 bg-slate-900/70 p-5",children:[(0,wo.jsx)("div",{className:"mb-3 text-3xl",children:"\ud83d\uddfa\ufe0f"}),(0,wo.jsx)("h3",{className:"text-lg font-semibold text-slate-100",children:"Kartnavigering"}),(0,wo.jsx)("p",{className:"mt-2 text-sm text-gray-400",children:"F\xf6lj kartan till varje kontrollpunkt och svara p\xe5 fr\xe5gor l\xe4ngs v\xe4gen"})]}),(0,wo.jsxs)("div",{className:"rounded-2xl border border-slate-700 bg-slate-900/70 p-5",children:[(0,wo.jsx)("div",{className:"mb-3 text-3xl",children:"\ud83c\udfc6"}),(0,wo.jsx)("h3",{className:"text-lg font-semibold text-slate-100",children:"Live resultat"}),(0,wo.jsx)("p",{className:"mt-2 text-sm text-gray-400",children:"F\xf6lj po\xe4ngen i realtid och se vem som ligger b\xe4st till"})]})]})]}),(0,wo.jsxs)("section",{className:"space-y-4 text-center",children:[(0,wo.jsxs)("div",{className:"rounded-2xl border border-slate-700 bg-slate-900/70 p-6",children:[(0,wo.jsx)("h2",{className:"text-xl font-semibold text-slate-100",children:"Perfekt f\xf6r alla tillf\xe4llen"}),(0,wo.jsx)("p",{className:"mt-3 text-gray-300",children:"Anv\xe4nd RouteQuest f\xf6r teambuilding, familjeaktiviteter, skolprojekt eller bara f\xf6r att g\xf6ra en promenad mer engagerande. Ingen installation beh\xf6vs \u2013 allt fungerar direkt i webbl\xe4saren."})]}),!n&&(0,wo.jsx)("p",{className:"text-sm text-gray-400",children:"K\xf6r som g\xe4st eller skapa konto f\xf6r att spara rundor mellan enheter"})]})]})},Ml=()=>{const e=J(),{login:n}=Eo(),[r,o]=(0,t.useState)(""),[i,a]=(0,t.useState)(""),[s,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(""),[d,h]=(0,t.useState)(!1);return(0,wo.jsxs)("div",{className:"min-h-screen bg-slate-950",children:[(0,wo.jsx)(Tl,{}),(0,wo.jsx)("div",{className:"mx-auto max-w-md px-4 py-12",children:(0,wo.jsxs)("div",{className:"rounded-lg border border-slate-700 bg-slate-900/60 p-8",children:[(0,wo.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Logga in"}),(0,wo.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),r.trim()&&i){h(!0),u("");try{await n({email:r,password:i,name:s}),e("/")}catch(o){u((null===o||void 0===o?void 0:o.message)||"Kunde inte logga in. Kontrollera dina uppgifter.")}finally{h(!1)}}else u("Fyll i e-post och l\xf6senord.")},className:"space-y-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-gray-200 mb-1",children:"Namn (valfritt)"}),(0,wo.jsx)("input",{type:"text",autoComplete:"name",value:s,onChange:e=>l(e.target.value),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2",placeholder:"Ditt namn"})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-gray-200 mb-1",children:"E-post"}),(0,wo.jsx)("input",{type:"email",autoComplete:"username",value:r,onChange:e=>o(e.target.value),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2",placeholder:"din@epost.se",required:!0})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-gray-200 mb-1",children:"L\xf6senord"}),(0,wo.jsx)("input",{type:"password",autoComplete:"current-password",value:i,onChange:e=>a(e.target.value),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2",placeholder:"********",required:!0})]}),c&&(0,wo.jsx)("div",{className:"bg-red-900/30 border border-red-500/50 rounded-lg p-3 text-sm text-red-200",children:c}),(0,wo.jsx)("button",{type:"submit",disabled:d,className:"w-full rounded-lg px-4 py-3 font-semibold transition-colors bg-cyan-500 hover:bg-cyan-400 text-black disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Loggar in...":"Logga in"})]}),(0,wo.jsx)("div",{className:"mt-6 text-center",children:(0,wo.jsxs)("p",{className:"text-sm text-gray-300",children:["Har du inget konto?"," ",(0,wo.jsx)(je,{to:"/register",className:"text-cyan-300 hover:text-cyan-200",children:"Registrera dig h\xe4r"})]})})]})})]})},Ll=()=>{const e=J(),{register:n}=Eo(),[r,o]=(0,t.useState)(""),[i,a]=(0,t.useState)(""),[s,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(""),[d,h]=(0,t.useState)(""),[f,p]=(0,t.useState)(!1);return(0,wo.jsxs)("div",{className:"min-h-screen bg-slate-950",children:[(0,wo.jsx)(Tl,{}),(0,wo.jsx)("div",{className:"mx-auto max-w-md px-4 py-12",children:(0,wo.jsxs)("div",{className:"rounded-lg border border-slate-700 bg-slate-900/60 p-8",children:[(0,wo.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Skapa konto"}),(0,wo.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),r.trim()&&i.trim()&&s){p(!0),h("");try{await n({name:r,email:i,password:s,contact:c}),e("/")}catch(o){h((null===o||void 0===o?void 0:o.message)||"Kunde inte skapa konto.")}finally{p(!1)}}else h("Fyll i namn, e-post och l\xf6senord.")},className:"space-y-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-gray-200 mb-1",children:"Namn *"}),(0,wo.jsx)("input",{type:"text",autoComplete:"name",value:r,onChange:e=>o(e.target.value),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2",placeholder:"Ditt namn",required:!0})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-gray-200 mb-1",children:"E-post *"}),(0,wo.jsx)("input",{type:"email",autoComplete:"username",value:i,onChange:e=>a(e.target.value),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2",placeholder:"din@epost.se",required:!0})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-gray-200 mb-1",children:"L\xf6senord *"}),(0,wo.jsx)("input",{type:"password",autoComplete:"new-password",value:s,onChange:e=>l(e.target.value),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2",placeholder:"********",required:!0})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-gray-200 mb-1",children:"Kontakt (valfritt)"}),(0,wo.jsx)("input",{type:"text",autoComplete:"tel",value:c,onChange:e=>u(e.target.value),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2",placeholder:"Telefon eller annan kontakt"})]}),d&&(0,wo.jsx)("div",{className:"bg-red-900/30 border border-red-500/50 rounded-lg p-3 text-sm text-red-200",children:d}),(0,wo.jsx)("button",{type:"submit",disabled:f,className:"w-full rounded-lg px-4 py-3 font-semibold transition-colors bg-cyan-500 hover:bg-cyan-400 text-black disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Skapar konto...":"Skapa konto"})]}),(0,wo.jsx)("div",{className:"mt-6 text-center",children:(0,wo.jsxs)("p",{className:"text-sm text-gray-300",children:["Har du redan ett konto?"," ",(0,wo.jsx)(je,{to:"/login",className:"text-cyan-300 hover:text-cyan-200",children:"Logga in h\xe4r"})]})})]})})]})},Rl=e=>{let{dataUrl:t,isLoading:n,error:r,description:o}=e;return n?(0,wo.jsx)("p",{className:"text-sm text-gray-400",children:"Genererar QR-kod..."}):r?(0,wo.jsx)("p",{className:"text-sm text-red-300",children:r}):(0,wo.jsxs)("div",{className:"rounded-lg bg-slate-900/60 p-4",children:[o&&(0,wo.jsx)("p",{className:"text-sm text-gray-400 mb-3",children:o}),t&&(0,wo.jsx)("img",{src:t,alt:"QR-kod",className:"w-full max-w-sm mx-auto rounded"})]})};function Dl(e,t){return Object.freeze((0,To.A)((0,To.A)({},e),t))}const Fl=(0,t.createContext)(null),zl=Fl.Provider;function Bl(){const e=(0,t.useContext)(Fl);if(null==e)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function Ul(){return Bl().map}function ql(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Vl=__webpack_require__(228),Hl=__webpack_require__.n(Vl);const Gl=["bounds","boundsOptions","center","children","className","id","placeholder","style","whenReady","zoom"];function Kl(){return Kl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kl.apply(this,arguments)}function Wl(e,n){let{bounds:r,boundsOptions:o,center:i,children:a,className:s,id:l,placeholder:c,style:u,whenReady:d,zoom:h}=e,f=ql(e,Gl);const[p]=(0,t.useState)({className:s,id:l,style:u}),[m,g]=(0,t.useState)(null);(0,t.useImperativeHandle)(n,()=>{var e;return null!==(e=null===m||void 0===m?void 0:m.map)&&void 0!==e?e:null},[m]);const v=(0,t.useCallback)(e=>{if(null!==e&&null===m){const t=new Vl.Map(e,f);null!=i&&null!=h?t.setView(i,h):null!=r&&t.fitBounds(r,o),null!=d&&t.whenReady(d),g(function(e){return Object.freeze({__version:1,map:e})}(t))}},[]);(0,t.useEffect)(()=>()=>{null===m||void 0===m||m.map.remove()},[m]);const y=m?t.createElement(zl,{value:m},a):null!==c&&void 0!==c?c:null;return t.createElement("div",Kl({},p,{ref:v}),y)}const Ql=(0,t.forwardRef)(Wl);function Zl(e){function n(n,r){const{instance:o,context:i}=e(n).current;return(0,t.useImperativeHandle)(r,()=>o),null==n.children?null:t.createElement(zl,{value:i},n.children)}return(0,t.forwardRef)(n)}function Yl(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function Jl(e,n){return null==n?function(n,r){const o=(0,t.useRef)();return o.current||(o.current=e(n,r)),o}:function(r,o){const i=(0,t.useRef)();i.current||(i.current=e(r,o));const a=(0,t.useRef)(r),{instance:s}=i.current;return(0,t.useEffect)(function(){a.current!==r&&(n(s,r,a.current),a.current=r)},[s,r,o]),i}}function $l(e,n){const r=(0,t.useRef)();(0,t.useEffect)(function(){return null!=n&&e.instance.on(n),r.current=n,function(){null!=r.current&&e.instance.off(r.current),r.current=null}},[e,n])}function Xl(e,t){var n;const r=null!==(n=e.pane)&&void 0!==n?n:t.pane;return r?(0,To.A)((0,To.A)({},e),{},{pane:r}):e}function ec(e,n){(0,t.useEffect)(function(){var t;return(null!==(t=n.layerContainer)&&void 0!==t?t:n.map).addLayer(e.instance),function(){var t;null===(t=n.layerContainer)||void 0===t||t.removeLayer(e.instance),n.map.removeLayer(e.instance)}},[n,e])}function tc(e){return function(n){const r=Bl(),o=e(Xl(n,r),r);return function(e,n){const r=(0,t.useRef)(n);(0,t.useEffect)(function(){n!==r.current&&null!=e.attributionControl&&(null!=r.current&&e.attributionControl.removeAttribution(r.current),null!=n&&e.attributionControl.addAttribution(n)),r.current=n},[e,n])}(r.map,n.attribution),$l(o.current,n.eventHandlers),ec(o.current,r),o}}function nc(e){return function(n){const r=Bl(),o=e(Xl(n,r),r);return $l(o.current,n.eventHandlers),ec(o.current,r),function(e,n){const r=(0,t.useRef)();(0,t.useEffect)(function(){if(n.pathOptions!==r.current){var t;const o=null!==(t=n.pathOptions)&&void 0!==t?t:{};e.instance.setStyle(o),r.current=o}},[e,n])}(o.current,n),o}}const rc=["url"],oc=function(e){function n(n,r){const{instance:o}=e(n).current;return(0,t.useImperativeHandle)(r,()=>o),null}return(0,t.forwardRef)(n)}(tc(Jl(function(e,t){let{url:n}=e,r=ql(e,rc);return Yl(new Vl.TileLayer(n,Xl(r,t)),t)},function(e,t,n){!function(e,t,n){const{opacity:r,zIndex:o}=t;null!=r&&r!==n.opacity&&e.setOpacity(r),null!=o&&o!==n.zIndex&&e.setZIndex(o)}(e,t,n);const{url:r}=t;null!=r&&r!==n.url&&e.setUrl(r)})));const ic=["positions"],ac=function(e,t){return Zl(nc(Jl(e,t)))}(function(e,t){let{positions:n}=e,r=ql(e,ic);const o=new Vl.Polyline(n,r);return Yl(o,Dl(t,{overlayContainer:o}))},function(e,t,n){t.positions!==n.positions&&e.setLatLngs(t.positions)}),sc=["position"],lc=function(e,t){return Zl(tc(Jl(e,t)))}(function(e,t){let{position:n}=e,r=ql(e,sc);const o=new Vl.Marker(n,r);return Yl(o,Dl(t,{overlayContainer:o}))},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())});__webpack_require__(8856);const cc=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=n?36:32;return Hl().divIcon({html:'\n      <div style="\n        background: '.concat(t,";\n        color: white;\n        border: 3px solid white;\n        border-radius: 50%;\n        width: ").concat(o,"px;\n        height: ").concat(o,"px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: ").concat(n?"16px":"14px",";\n        font-weight: bold;\n        box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n        ").concat(n?"box-shadow: 0 0 0 4px rgba(245, 158, 11, 0.3);":"","\n        ").concat(r?"cursor: pointer; transition: transform 0.2s;":"",'\n      "\n      ').concat(r?'class="clickable-checkpoint"':"","\n      >").concat(e,"</div>\n      ").concat(r?"\n        <style>\n          .clickable-checkpoint:hover {\n            transform: scale(1.15);\n          }\n        </style>\n      ":"","\n    "),className:"custom-checkpoint-icon",iconSize:[o,o],iconAnchor:[o/2,o/2]})},uc=e=>{let{positions:n}=e;const r=Ul();return(0,t.useEffect)(()=>{if(!r||!n||0===n.length)return;const e=setTimeout(()=>{try{r&&r._container&&n.length>0&&r.fitBounds(n,{padding:[50,50]})}catch(e){console.warn("FitBounds error (ignoreras):",e)}},100);return()=>clearTimeout(e)},[n,r]),null},dc=e=>{let{route:n}=e;const r=Ul();return(0,t.useEffect)(()=>{if(!r||!n||0===n.length)return;const e=Hl().polylineDecorator(n,{patterns:[{offset:25,repeat:120,symbol:Hl().Symbol.arrowHead({pixelSize:12,pathOptions:{color:"#FFFFFF",fillOpacity:.9,weight:1,stroke:!0,fill:!0}})}]});return e.addTo(r),()=>{r.hasLayer(e)&&r.removeLayer(e)}},[r,n]),null},hc=e=>{let{checkpoints:n,userPosition:r,activeOrder:o,answeredCount:i,route:a,startPoint:s,className:l="h-full",onCheckpointClick:c=null,manualMode:u=!1,gpsTrail:d=null}=e;const h=(0,t.useMemo)(()=>n.map(e=>[e.location.lat,e.location.lng]),[n]),f=(0,t.useMemo)(()=>{if(a&&Array.isArray(a)&&a.length>1){if(a.every(e=>e&&"number"===typeof e.lat&&"number"===typeof e.lng&&!isNaN(e.lat)&&!isNaN(e.lng)))return a.map(e=>[e.lat,e.lng])}return h},[a,h]),p=(0,t.useMemo)(()=>{if(r)return[r.lat,r.lng];if(h.length>0){const e=h.map(e=>e[0]),t=h.map(e=>e[1]);return[e.reduce((e,t)=>e+t,0)/e.length,t.reduce((e,t)=>e+t,0)/t.length]}return Fi},[r,h]);return(0,wo.jsx)("div",{className:"w-full overflow-hidden relative ".concat(l),children:(0,wo.jsxs)(Ql,{center:p,zoom:13,style:{height:"100%",width:"100%"},className:"h-full w-full relative z-0",scrollWheelZoom:!0,zoomControl:!1,attributionControl:!1,doubleClickZoom:!0,touchZoom:!0,dragging:!0,children:[(0,wo.jsx)(uc,{positions:h}),(0,wo.jsx)(oc,{attribution:'\xa9 <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),f.length>1&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)(ac,{positions:f,pathOptions:{color:"#000000",weight:8,opacity:.8}}),(0,wo.jsx)(ac,{positions:f,pathOptions:{color:"#06b6d4",weight:6,opacity:1,lineCap:"round",lineJoin:"round"}}),(0,wo.jsx)(dc,{route:f})]}),d&&d.length>1&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)(ac,{positions:d.map(e=>[e.lat,e.lng]),pathOptions:{color:"#000000",weight:6,opacity:.6}}),(0,wo.jsx)(ac,{positions:d.map(e=>[e.lat,e.lng]),pathOptions:{color:"#a855f7",weight:4,opacity:.9,lineCap:"round",lineJoin:"round",dashArray:"10, 5"}})]}),h.map((e,t)=>{const r=t<i,a=t===o,s=r?"#10b981":a?"#f59e0b":"#6366f1",l=n[t].questionId||n[t].order||t,d=u&&!r,h={position:e,icon:cc(t+1,s,a,d)};return d&&c&&(h.eventHandlers={click:()=>{c(t)}}),(0,wo.jsx)(lc,(0,To.A)({},h),l)}),s&&(0,wo.jsx)(lc,{position:[s.lat,s.lng],icon:Hl().divIcon({html:'\n      <div style="\n        background: #22c55e;\n        color: white;\n        border: 3px solid white;\n        border-radius: 50%;\n        width: 32px;\n        height: 32px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 16px;\n        font-weight: bold;\n        box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n      ">\ud83c\udfc1</div>\n    ',className:"custom-start-finish-icon",iconSize:[32,32],iconAnchor:[16,16]})}),r&&(0,wo.jsx)(lc,{position:[r.lat,r.lng],icon:Hl().divIcon({html:'\n      <div style="\n        background: #3b82f6;\n        color: white;\n        border: 4px solid white;\n        border-radius: 50%;\n        width: 40px;\n        height: 40px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 20px;\n        font-weight: bold;\n        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.6), 0 0 0 4px rgba(59, 130, 246, 0.2);\n        animation: pulse 2s ease-in-out infinite;\n      ">\ud83d\udccd</div>\n      <style>\n        @keyframes pulse {\n          0%, 100% { transform: scale(1); }\n          50% { transform: scale(1.1); }\n        }\n      </style>\n    ',className:"custom-user-position-icon",iconSize:[40,40],iconAnchor:[20,20]})})]})})},fc=e=>e?"".concat("https://routequest.se","/join?code=").concat(e):"";const pc=new class{constructor(){this.logsCollection=(0,io.rJ)(vo,"errorLogs"),this.breadcrumbs=[],this.maxBreadcrumbs=20,this.setupGlobalErrorHandler()}addBreadcrumb(e,t){const n={category:e,message:t,data:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},timestamp:(new Date).toISOString(),url:"undefined"!==typeof window?window.location.pathname:"unknown"};this.breadcrumbs.push(n),this.breadcrumbs.length>this.maxBreadcrumbs&&this.breadcrumbs.shift()}clearBreadcrumbs(){this.breadcrumbs=[]}setupGlobalErrorHandler(){"undefined"!==typeof window&&(window.addEventListener("error",e=>{var t;this.logError({type:"uncaught_error",message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,stack:null===(t=e.error)||void 0===t?void 0:t.stack})}),window.addEventListener("unhandledrejection",e=>{var t,n;this.logError({type:"unhandled_rejection",message:(null===(t=e.reason)||void 0===t?void 0:t.message)||String(e.reason),stack:null===(n=e.reason)||void 0===n?void 0:n.stack})}))}async logError(e){try{const t=Xa(),n="undefined"!==typeof navigator?navigator.userAgent:"unknown",r=this.parseStackTrace(e.stack);await(0,io.gS)(this.logsCollection,(0,To.A)((0,To.A)({},e),{},{deviceId:t,userAgent:n,url:"undefined"!==typeof window?window.location.href:"unknown",pathname:"undefined"!==typeof window?window.location.pathname:"unknown",timestamp:(0,io.O5)(),level:"error",stackInfo:r,browserInfo:{platform:"undefined"!==typeof navigator?navigator.platform:"unknown",language:"undefined"!==typeof navigator?navigator.language:"unknown",screenResolution:"undefined"!==typeof window?"".concat(window.screen.width,"x").concat(window.screen.height):"unknown",viewport:"undefined"!==typeof window?"".concat(window.innerWidth,"x").concat(window.innerHeight):"unknown"},breadcrumbs:[...this.breadcrumbs]})),console.error("\ud83d\udd34 Error logged:",e)}catch(t){console.error("Failed to log error to Firestore:",t)}}parseStackTrace(e){if(!e)return null;const t=e.split("\n"),n=[];for(const r of t.slice(0,5)){const e=r.match(/at\s+(.+?)\s+\((.+?):(\d+):(\d+)\)/),t=r.match(/(.+?)@(.+?):(\d+):(\d+)/),o=r.match(/(.+?):(\d+):(\d+)/);e?n.push({function:e[1].trim(),file:e[2],line:parseInt(e[3]),column:parseInt(e[4])}):t?n.push({function:t[1].trim(),file:t[2],line:parseInt(t[3]),column:parseInt(t[4])}):o&&n.push({file:o[1],line:parseInt(o[2]),column:parseInt(o[3])})}return n.length>0?n:null}async logGPSDebug(e){try{const t=Xa();await(0,io.gS)(this.logsCollection,(0,To.A)((0,To.A)({type:"gps_debug"},e),{},{deviceId:t,userAgent:"undefined"!==typeof navigator?navigator.userAgent:"unknown",url:"undefined"!==typeof window?window.location.href:"unknown",timestamp:(0,io.O5)(),level:"debug"}))}catch(t){console.error("Failed to log GPS debug to Firestore:",t)}}async logRouteGeneration(e){try{const t=Xa();await(0,io.gS)(this.logsCollection,(0,To.A)((0,To.A)({type:"route_generation"},e),{},{deviceId:t,userAgent:"undefined"!==typeof navigator?navigator.userAgent:"unknown",timestamp:(0,io.O5)(),level:"info"}))}catch(t){console.error("Failed to log route generation to Firestore:",t)}}async logInfo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const n=Xa();await(0,io.gS)(this.logsCollection,{type:"info",message:e,data:t,deviceId:n,userAgent:"undefined"!==typeof navigator?navigator.userAgent:"unknown",url:"undefined"!==typeof window?window.location.href:"unknown",timestamp:(0,io.O5)(),level:"info"})}catch(n){console.error("Failed to log info to Firestore:",n)}}};var mc=__webpack_require__(8970);const gc=(e,n)=>{const[r,o]=(0,t.useState)(""),[i,a]=(0,t.useState)(!1),[s,l]=(0,t.useState)("");return(0,t.useEffect)(()=>{if(!e)return void o("");let t=!1;a(!0),l("");const r=document.createElement("canvas");return mc.toCanvas(r,e,{width:n,margin:2,color:{dark:"#0f172a",light:"#f8fafc"},errorCorrectionLevel:"H"}).then(()=>{if(t)return;const e=r.getContext("2d"),i=new Image;i.src="/logo-compass.svg",i.onload=()=>{if(t)return;const a=.25*n,s=(n-a)/2,l=(n-a)/2;e.fillStyle="#f8fafc",e.fillRect(s,l,a,a),e.drawImage(i,s,l,a,a),o(r.toDataURL())},i.onerror=()=>{t||o(r.toDataURL())}}).catch(e=>{t||(console.warn("Kunde inte generera QR-kod",e),l("Kunde inte generera QR-kod."))}).finally(()=>{t||a(!1)}),()=>{t=!0}},[e,n]),{dataUrl:r,isLoading:i,error:s}},vc=()=>{const e=Z();return(0,t.useEffect)(()=>{pc.addBreadcrumb("navigation","Navigated to ".concat(e.pathname),{pathname:e.pathname,search:e.search})},[e.pathname,e.search]),{logClick:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};pc.addBreadcrumb("user_action","Clicked: ".concat(e),t)},logFormSubmit:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};pc.addBreadcrumb("form","Submitted form: ".concat(e),t)},logApiCall:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};pc.addBreadcrumb("api","API call: ".concat(e),t)},logStateChange:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};pc.addBreadcrumb("state",e,t)}}},yc=e=>{let{dataUrl:t,onClose:n}=e;return t?(0,wo.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",onClick:n,children:(0,wo.jsxs)("div",{className:"relative",children:[(0,wo.jsx)("img",{src:t,alt:"QR-kod",className:"max-w-full max-h-full p-4 bg-white rounded-lg"}),(0,wo.jsx)("button",{onClick:n,className:"absolute top-2 right-2 bg-white rounded-full p-2 text-black font-bold text-xl",children:"\xd7"})]})}):null},bc=e=>{let{checkpoints:t,route:n,userPosition:r,onClose:o}=e;return(0,wo.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",onClick:o,children:(0,wo.jsxs)("div",{className:"relative w-full h-full p-4",children:[(0,wo.jsx)(hc,{checkpoints:t,route:n,userPosition:r,activeOrder:0,answeredCount:0}),(0,wo.jsx)("button",{onClick:o,className:"absolute top-8 right-8 bg-white rounded-full p-2 text-black font-bold text-xl",children:"\xd7"})]})})},xc={name:"",runType:"route-based",difficulty:"family",categories:[],lengthMeters:3e3,questionCount:9,distanceBetweenQuestions:500,minutesBetweenQuestions:5,preferGreenAreas:!1,allowRouteSelection:!1},wc=[{value:"children",label:"Barn (6-12 \xe5r)"},{value:"youth",label:"Ungdom (13-17 \xe5r)"},{value:"adults",label:"Vuxen (18+ \xe5r)"},{value:"family",label:"Familj (1/3 av varje)"}],_c=[{value:"Geografi",label:"Geografi"},{value:"Historia",label:"Historia"},{value:"Naturvetenskap",label:"Naturvetenskap"},{value:"Kultur",label:"Kultur"},{value:"Sport",label:"Sport"},{value:"Natur",label:"Natur"},{value:"Teknik",label:"Teknik"},{value:"Djur",label:"Djur"},{value:"G\xe5tor",label:"G\xe5tor"}],kc=()=>{const e=J(),{currentUser:n,loginAsGuest:r}=Eo(),{generateRun:o}=sa(),{coords:i,status:a,trackingEnabled:s}=_s(),{logFormSubmit:l,logStateChange:c}=vc(),[u,d]=(0,t.useState)(xc),h=t.useMemo(()=>xo.getAlias()||"",[]),[f,p]=(0,t.useState)(h),[m,g]=(0,t.useState)(()=>Boolean(h.trim())),[v,y]=(0,t.useState)(!1),[b,x]=(0,t.useState)(""),[w,_]=(0,t.useState)(null),[k,A]=(0,t.useState)(!1),[S,N]=(0,t.useState)(!1),[C,j]=(0,t.useState)(!1),[E,T]=(0,t.useState)(!1),[I,P]=(0,t.useState)(""),[O,M]=(0,t.useState)(()=>Math.floor(1e5*Math.random())),L=t.useMemo(()=>w?fc(w.joinCode):"",[w]),{dataUrl:R,isLoading:D,error:F}=gc(L,320),z=t.useRef(null),B=t.useCallback(async()=>{var e;if(null!==n&&void 0!==n&&n.id)return{id:n.id,name:n.name||""};const t=(null===f||void 0===f?void 0:f.trim())||(null===(e=u.name)||void 0===e?void 0:e.trim())||"G?st";try{xo.saveAlias(t),p(t),g(!0);const e=await r({alias:t});if(!e)throw new Error("G?st-inloggning misslyckades");return{id:e.uid||e.id||"anonymous",name:e.displayName||e.name||t||"G?st"}}catch(o){throw console.error("[GenerateRunPage] Kunde inte skapa g?stidentitet:",o),o}},[f,n,u.name,r]),U=t.useCallback(async()=>{if(w&&L){z.current&&clearTimeout(z.current);try{var e;"undefined"!==typeof navigator&&navigator.share?(await navigator.share({title:w.name||"RouteQuest",text:"Hang med pa min runda!",url:L}),P("Delat!")):"undefined"!==typeof navigator&&null!==(e=navigator.clipboard)&&void 0!==e&&e.writeText?(await navigator.clipboard.writeText(L),P("Lanken kopierades.")):P("Kopiera Lanken: "+L)}catch(n){var t;console.warn("[GenerateRunPage] Share failed",n),"undefined"!==typeof navigator&&null!==(t=navigator.clipboard)&&void 0!==t&&t.writeText?(await navigator.clipboard.writeText(L),P("Lanken kopierades.")):P("Kunde inte dela automatiskt.")}"undefined"!==typeof window&&(z.current=window.setTimeout(()=>{P("")},4e3))}},[w,L]);t.useEffect(()=>{z.current&&clearTimeout(z.current),P("")},[w]),t.useEffect(()=>()=>{z.current&&clearTimeout(z.current)},[]);const q=t.useMemo(()=>i&&i.lat&&i.lng?{lat:i.lat,lng:i.lng}:null,[i]),V=t.useRef(a),H=t.useRef(s);t.useEffect(()=>{const e=V.current!==a,t=H.current!==s;(e||t)&&(pc.logGPSDebug({message:"GenerateRunPage GPS status change",coords:i?{latitude:i.lat,longitude:i.lng,accuracy:i.accuracy}:null,gpsStatus:a,trackingEnabled:s,userPosition:q,statusChanged:e,trackingChanged:t}),V.current=a,H.current=s)},[i,a,s,q]);const G=e=>{const{name:t,value:n,type:r,checked:o}=e.target,i="checkbox"===r?o:n;d(e=>{const n=(0,To.A)({},e);if("questionCount"===t){const t=Math.max(3,Number(i)||3);if("family"===e.difficulty){const e=Math.max(3,3*Math.round(t/3));n.questionCount=e}else n.questionCount=t;return n}if("difficulty"===t){if(n.difficulty=i,"family"===i){const t=Math.max(3,3*Math.round((e.questionCount||9)/3));n.questionCount=t}return n}return n[t]=i,n})},K=async t=>{if(t.preventDefault(),x(""),null===n||void 0===n||!n.isAnonymous||f.trim()){l("Create Run Form",{name:u.name,difficulty:u.difficulty,lengthMeters:u.lengthMeters,hasGPS:!!q});try{if(!u.name.trim())return x("Ange ett namn p\xe5 rundan."),void c("Form validation failed: name missing");if(null!==n&&void 0!==n&&n.isAnonymous&&f.trim()){const e=f.trim();xo.saveAlias(e),g(!0),await r({alias:e})}const t=q?{lat:q.lat,lng:q.lng}:Di;await pc.logRouteGeneration({message:"Route generation started - DETAILED",originPosition:t,hasGPS:!!q,gpsStatus:a,trackingEnabled:s,coords:i?{latitude:i.lat,longitude:i.lng,accuracy:i.accuracy}:null,userPosition:q,fallbackPosition:Di,willUseFallback:!q,formData:{name:u.name,difficulty:u.difficulty,lengthMeters:u.lengthMeters,questionCount:u.questionCount}});const l=await B(),d={name:u.name,difficulty:u.difficulty,audience:u.difficulty,categories:u.categories||[],questionCount:Number(u.questionCount),allowAnonymous:!0,runType:u.runType};let h;h="distance-based"===u.runType?(0,To.A)((0,To.A)({},d),{},{distanceBetweenQuestions:Number(u.distanceBetweenQuestions)}):"time-based"===u.runType?(0,To.A)((0,To.A)({},d),{},{minutesBetweenQuestions:Number(u.minutesBetweenQuestions)}):(0,To.A)((0,To.A)({},d),{},{lengthMeters:Number(u.lengthMeters),allowRouteSelection:u.allowRouteSelection,origin:t,seed:O,preferGreenAreas:u.preferGreenAreas});const p=await o(h,l);p&&(_(p),es("create_run",{runId:p.id,difficulty:u.difficulty,categories:u.categories,questionCount:u.questionCount}),await pc.logInfo("Route generated successfully",{runId:p.id,usedGPS:!!q,originPosition:t}),u.allowRouteSelection?N(!1):(n||Da(p),e("/join?code=".concat(p.joinCode),{replace:!0})))}catch(d){console.error("\u274c Fel vid generering:",d);const e="permission-denied"===(null===d||void 0===d?void 0:d.code)?"Behorighet saknas for att skapa rundan. Ladda om sidan eller logga in och forsok igen.":d.message;x("Kunde inte generera runda: ".concat(e)),await pc.logError({type:"route_generation_failed",message:d.message,stack:d.stack,gpsStatus:a,trackingEnabled:s,userPosition:q})}}else y(!0)};return(0,wo.jsxs)(Pl,{headerTitle:"Skapa runda",maxWidth:"max-w-5xl",className:"space-y-10",children:[C&&(0,wo.jsx)(yc,{dataUrl:R,onClose:()=>j(!1)}),E&&(0,wo.jsx)(bc,{checkpoints:(null===w||void 0===w?void 0:w.checkpoints)||[],route:null===w||void 0===w?void 0:w.route,userPosition:q,onClose:()=>T(!1)}),v&&(0,wo.jsx)("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center bg-black/70 p-4 backdrop-blur-sm",children:(0,wo.jsxs)("div",{className:"w-full max-w-md rounded-2xl border border-cyan-500/40 bg-slate-900 p-6 shadow-2xl",children:[(0,wo.jsx)("h2",{className:"text-xl font-semibold text-slate-100 mb-4",children:"Ange ditt alias"}),(0,wo.jsx)("p",{className:"text-sm text-gray-300 mb-6",children:"F\xf6r att skapa en runda beh\xf6ver vi veta vad du vill kallas. Aliaset sparas p\xe5 enheten."}),(0,wo.jsxs)("div",{className:"space-y-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-cyan-200 mb-2",children:"Alias"}),(0,wo.jsx)("input",{type:"text",value:f,onChange:e=>p(e.target.value),placeholder:"T.ex. Erik",autoFocus:!0,className:"w-full rounded-lg border border-slate-700 bg-slate-800 px-3 py-3 text-slate-100 focus:border-cyan-400 focus:outline-none"})]}),(0,wo.jsxs)("div",{className:"flex gap-3",children:[(0,wo.jsx)("button",{onClick:()=>y(!1),className:"flex-1 rounded-lg border border-slate-600 bg-slate-800 px-4 py-3 font-semibold text-slate-100 hover:bg-slate-700",children:"Avbryt"}),(0,wo.jsx)("button",{onClick:async()=>{if(!f.trim())return void x("Ange ett alias");const e=f.trim();xo.saveAlias(e),g(!0),await r({alias:e}),y(!1),K({preventDefault:()=>{}})},className:"flex-1 rounded-lg bg-cyan-500 px-4 py-3 font-semibold text-black hover:bg-cyan-400",children:"Forts\xe4tt"})]})]})]})}),w?(0,wo.jsxs)("section",{className:"grid gap-8 lg:grid-cols-[minmax(0,1.15fr)_minmax(0,0.85fr)]",children:[(0,wo.jsx)("article",{className:"space-y-6 rounded-2xl border border-purple-500/40 bg-slate-900/70 p-6 shadow-xl",children:S?(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsxs)("div",{className:"space-y-2 text-center sm:text-left",children:[(0,wo.jsx)("h2",{className:"text-xl font-semibold text-slate-100",children:w.name}),(0,wo.jsxs)("p",{className:"text-sm text-gray-300",children:["L\ufffdngd: ",w.lengthMeters," m \ufffd ",w.questionCount," fr\ufffdgor"]}),(0,wo.jsxs)("p",{className:"text-sm text-gray-300",children:["Anslutningskod: ",(0,wo.jsx)("span",{className:"font-mono text-lg tracking-wide text-cyan-200",children:w.joinCode})]})]}),(0,wo.jsx)("div",{className:"cursor-pointer",onClick:()=>j(!0),children:(0,wo.jsx)(Rl,{dataUrl:R,isLoading:D,error:F})}),(0,wo.jsxs)("div",{className:"flex flex-wrap justify-center gap-3 text-sm",children:[(0,wo.jsxs)("button",{type:"button",onClick:()=>e("/join?code=".concat(w.joinCode)),className:"inline-flex items-center gap-2 rounded-lg bg-emerald-500 px-4 py-2 font-semibold text-black transition-colors hover:bg-emerald-400 disabled:opacity-60",disabled:!(null!==w&&void 0!==w&&w.joinCode),children:[(0,wo.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})}),"Starta runda"]}),(0,wo.jsxs)("button",{type:"button",onClick:U,disabled:!L,className:"inline-flex items-center gap-2 rounded-lg border border-slate-600/70 px-3 py-2 text-slate-100 transition-colors hover:border-cyan-400/80 hover:text-cyan-200 disabled:opacity-60",children:[(0,wo.jsxs)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 3v8"}),(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 6l3-3 3 3"}),(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"})]}),"Dela"]}),(0,wo.jsxs)("button",{type:"button",onClick:()=>T(!0),className:"inline-flex items-center gap-2 rounded-lg border border-slate-600/70 px-3 py-2 text-slate-100 transition-colors hover:border-cyan-400/80 hover:text-cyan-200",children:[(0,wo.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 20l-5.447-2.724A2 2 0 013 15.382V5.618a2 2 0 011.105-1.795L9 2m6 0l4.895 1.823A2 2 0 0121 5.618v9.764a2 2 0 01-1.105 1.795L15 20m-6 0V2m6 18V2"})}),"Visa karta"]})]}),I&&(0,wo.jsx)("p",{className:"text-xs text-center text-emerald-200",children:I})]}):(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h2",{className:"text-xl font-semibold text-slate-100",children:"F\xf6rslag p\xe5 runda"}),(0,wo.jsx)("p",{className:"text-sm text-gray-300",children:"Granska kartan nedan. Spara rundan f\xf6r att visa QR-kod och dela lanken."})]}),(0,wo.jsx)("button",{type:"button",onClick:async()=>{x(""),A(!0);const e=Math.floor(1e5*Math.random());M(e);try{const t=q?{lat:q.lat,lng:q.lng}:Di;await pc.logRouteGeneration({message:"Route REGENERATION - DETAILED",originPosition:t,hasGPS:!!q,gpsStatus:a,trackingEnabled:s,coords:i?{latitude:i.lat,longitude:i.lng,accuracy:i.accuracy}:null,userPosition:q,fallbackPosition:Di,willUseFallback:!q});const n=await B(),r=await o({name:u.name,difficulty:u.difficulty,audience:u.difficulty,categories:u.categories||[],lengthMeters:Number(u.lengthMeters),questionCount:Number(u.questionCount),allowAnonymous:!0,allowRouteSelection:u.allowRouteSelection,origin:t,seed:e,preferGreenAreas:u.preferGreenAreas},n);r&&(_(r),N(!1))}catch(t){console.error("\u274c Fel vid regenerering:",t);const e="permission-denied"===(null===t||void 0===t?void 0:t.code)?"Behorighet saknas for att spara rundan. Ladda om sidan eller logga in och forsok igen.":t.message;x("Kunde inte regenerera runda: ".concat(e))}finally{A(!1)}},disabled:k,className:"rounded-full bg-yellow-500/90 p-3 text-black shadow-lg transition enabled:hover:bg-yellow-400 disabled:bg-slate-700 disabled:text-gray-400",title:"Generera om",children:k?(0,wo.jsxs)("svg",{className:"h-5 w-5 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,wo.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,wo.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,wo.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),(0,wo.jsx)("div",{className:"h-[22rem] rounded-xl border border-slate-700 bg-slate-900/70",children:(0,wo.jsx)(hc,{checkpoints:w.checkpoints||[],userPosition:q,activeOrder:0,answeredCount:0,route:w.route})}),(0,wo.jsx)("button",{type:"button",onClick:()=>{w&&(n||Da(w),z.current&&clearTimeout(z.current),P(""),N(!0))},className:"w-full rounded-xl bg-green-500 px-4 py-3 text-lg font-bold text-black transition-colors hover:bg-green-400",children:"Spara och visa QR-kod"})]})}),(0,wo.jsxs)("aside",{className:"space-y-6",children:[(0,wo.jsxs)("div",{className:"rounded-2xl border border-slate-700 bg-slate-900/70 p-6 text-sm text-gray-300 shadow-lg",children:[(0,wo.jsx)("h3",{className:"text-base font-semibold text-slate-100",children:"Tips f\xf6r en rolig runda"}),(0,wo.jsxs)("ul",{className:"mt-3 list-disc space-y-2 pl-5",children:[(0,wo.jsx)("li",{children:"Placera f\xf6rsta kontrollen d\xe4r alla enkelt samlas."}),(0,wo.jsx)("li",{children:"Variera fr\xe5getyp och tema f\xf6r b\xe4ttre engagemang."}),(0,wo.jsx)("li",{children:"Spara rundan i din meny om du vill \xe5teranv\xe4nda den senare."})]})]}),!S&&(0,wo.jsxs)("div",{className:"rounded-2xl border border-slate-700 bg-slate-900/70 p-6 text-sm text-gray-300",children:[(0,wo.jsx)("h3",{className:"text-base font-semibold text-slate-100",children:"Beh\xf6ver du \xe4ndra n\xe5got?"}),(0,wo.jsx)("p",{className:"mt-2",children:"G\xe5 tillbaka och justera l\xe4ngd, kategorier eller sv\xe5righetsgrad. Du kan generera om hur m\xe5nga g\xe5nger som helst."})]})]})]}):(0,wo.jsxs)("section",{className:"space-y-8",children:[(0,wo.jsxs)("div",{className:"rounded-2xl border border-slate-700 bg-slate-900/70 p-6 text-center shadow-lg",children:[(0,wo.jsx)("h1",{className:"text-2xl font-semibold text-slate-100",children:"Skapa en tipsrunda automatiskt"}),(0,wo.jsx)("p",{className:"mt-3 text-sm text-gray-300 sm:text-base",children:"Ange namn, sv\xe5righetsgrad och \xf6nskad l\xe4ngd. RouteQuest skapar en rutt och v\xe4ljer fr\xe5gor \xe5t dig."})]}),b&&(0,wo.jsx)("div",{className:"rounded-2xl border border-red-500/40 bg-red-900/40 px-4 py-3 text-red-100",children:b}),(null===n||void 0===n?void 0:n.isAnonymous)&&!m&&(0,wo.jsxs)("div",{className:"space-y-3 rounded-2xl border border-cyan-500/30 bg-cyan-500/5 p-4",children:[(0,wo.jsx)("h3",{className:"text-sm font-semibold text-cyan-200",children:"Ditt alias"}),(0,wo.jsxs)("div",{className:"space-y-1.5",children:[(0,wo.jsx)("label",{className:"block text-xs text-gray-400",children:"Alias (visas f\xf6r deltagare)"}),(0,wo.jsx)("input",{type:"text",value:f,onChange:e=>{p(e.target.value)},placeholder:"T.ex. Erik",className:"w-full rounded-lg border border-slate-700 bg-slate-800 px-3 py-2 text-slate-100 focus:border-cyan-400 focus:outline-none"})]}),(0,wo.jsx)("p",{className:"text-xs text-gray-400",children:"Aliaset sparas p\xe5 denna enhet och kommer ih\xe5g n\xe4sta g\xe5ng."})]}),(0,wo.jsxs)("form",{onSubmit:K,className:"mx-auto max-w-xl space-y-5 rounded-2xl border border-slate-700 bg-slate-900/70 p-6 shadow-xl",children:[(0,wo.jsxs)("div",{className:"space-y-1.5",children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-purple-200",children:"Namn p\xe5 runda"}),(0,wo.jsx)("input",{name:"name",value:u.name,onChange:G,className:"w-full rounded-lg border border-slate-700 bg-slate-800 px-3 py-3 text-slate-100 focus:border-purple-400 focus:outline-none",placeholder:"T.ex. Stadsvandring",required:!0})]}),(0,wo.jsxs)("div",{className:"space-y-2",children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-purple-200",children:"Typ av runda"}),(0,wo.jsxs)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-3",children:[(0,wo.jsx)("button",{type:"button",onClick:()=>d((0,To.A)((0,To.A)({},u),{},{runType:"route-based"})),className:"rounded-lg px-4 py-3 text-sm font-medium transition-colors ".concat("route-based"===u.runType?"bg-purple-500 text-black":"border border-slate-600 bg-slate-800 text-slate-100 hover-border-purple-400"),children:"Rutt-baserad"}),(0,wo.jsx)("button",{type:"button",onClick:()=>d((0,To.A)((0,To.A)({},u),{},{runType:"distance-based"})),className:"rounded-lg px-4 py-3 text-sm font-medium transition-colors ".concat("distance-based"===u.runType?"bg-purple-500 text-black":"border border-slate-600 bg-slate-800 text-slate-100 hover-border-purple-400"),children:"Distans-baserad"}),(0,wo.jsx)("button",{type:"button",onClick:()=>d((0,To.A)((0,To.A)({},u),{},{runType:"time-based"})),className:"rounded-lg px-4 py-3 text-sm font-medium transition-colors ".concat("time-based"===u.runType?"bg-purple-500 text-black":"border border-slate-600 bg-slate-800 text-slate-100 hover-border-purple-400"),children:"Tids-baserad"})]}),(0,wo.jsx)("p",{className:"text-xs text-gray-400",children:"route-based"===u.runType?"F\xf6rutbest\xe4md rutt p\xe5 kartan med fr\xe5gor p\xe5 specifika platser.":"distance-based"===u.runType?"G\xe5 fritt \u2013 fr\xe5gor triggas automatiskt n\xe4r du g\xe5tt tillr\xe4ckligt l\xe5ngt.":"Fr\xe5gor triggas automatiskt efter ett valt tidsintervall."})]}),(0,wo.jsxs)("div",{className:"space-y-1.5",children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-purple-200",children:"Sv\xe5righetsgrad"}),(0,wo.jsx)("select",{name:"difficulty",value:u.difficulty,onChange:G,className:"w-full rounded-lg border border-slate-700 bg-slate-800 px-3 py-3 text-slate-100 focus:border-purple-400 focus:outline-none",children:wc.map(e=>(0,wo.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,wo.jsxs)("p",{className:"mt-1 text-xs text-gray-400",children:["children"===u.difficulty&&"Endast fr\xe5gor m\xe4rkta f\xf6r barn (ageGroups: children).","youth"===u.difficulty&&"Endast fr\xe5gor m\xe4rkta f\xf6r ungdomar (ageGroups: youth).","adults"===u.difficulty&&"Endast fr\xe5gor m\xe4rkta f\xf6r vuxna (ageGroups: adults).","family"===u.difficulty&&"Familjel\xe4ge blandar 1/3 barn-, 1/3 ungdoms- och 1/3 vuxenfr\xe5gor."]})]}),(0,wo.jsxs)("div",{className:"space-y-2",children:[(0,wo.jsxs)("label",{className:"block text-sm font-semibold text-purple-200",children:["Kategorier ",0===u.categories.length?"(Alla)":"(".concat(u.categories.length," valda)")]}),(0,wo.jsx)("div",{className:"grid grid-cols-2 gap-2 sm:grid-cols-3",children:_c.map(e=>{const t=u.categories.includes(e.value);return(0,wo.jsx)("button",{type:"button",onClick:()=>{return t=e.value,void d(e=>{const n=e.categories||[],r=n.includes(t);return(0,To.A)((0,To.A)({},e),{},{categories:r?n.filter(e=>e!==t):[...n,t]})});var t},className:"rounded-lg px-3 py-2 text-sm font-medium transition-colors ".concat(t?"bg-purple-500 text-black":"border border-slate-600 bg-slate-800 text-slate-100 hover-border-purple-400"),children:e.label},e.value)})}),(0,wo.jsx)("p",{className:"text-xs text-gray-400",children:"V\xe4lj kategorier eller l\xe4mna tomt f\xf6r alla."})]}),"route-based"===u.runType&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,wo.jsxs)("div",{className:"space-y-1.5",children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-purple-200",children:"Rundans l\xe4ngd (meter)"}),(0,wo.jsx)("input",{type:"number",name:"lengthMeters",min:500,max:1e4,step:100,value:u.lengthMeters,onChange:G,className:"w-full rounded-lg border border-slate-700 bg-slate-800 px-3 py-3 text-slate-100 focus:border-purple-400 focus:outline-none"})]}),(0,wo.jsxs)("div",{className:"space-y-1.5",children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-purple-200",children:"Antal fr\xe5gor"}),(0,wo.jsx)("input",{type:"number",name:"questionCount",min:3,max:20,step:"family"===u.difficulty?3:1,value:u.questionCount,onChange:G,className:"w-full rounded-lg border border-slate-700 bg-slate-800 px-3 py-3 text-slate-100 focus:border-purple-400 focus:outline-none"}),"family"===u.difficulty&&(0,wo.jsx)("p",{className:"text-xs text-gray-400",children:"Familjel\xe4ge anv\xe4nder en tredjedel per \xe5ldersgrupp. Antal fr\xe5gor rundas till n\xe4rmaste multipel av tre."})]})]}),(0,wo.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-purple-200",children:[(0,wo.jsx)("input",{type:"checkbox",name:"preferGreenAreas",checked:u.preferGreenAreas,onChange:G,className:"rounded border-slate-600 bg-slate-800 text-purple-500 focus:ring-purple-500"}),"F\xf6redra parker och stigar"]}),(0,wo.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-purple-200",children:[(0,wo.jsx)("input",{type:"checkbox",name:"allowRouteSelection",checked:u.allowRouteSelection,onChange:G,className:"rounded border-slate-600 bg-slate-800 text-purple-500 focus:ring-purple-500"}),(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsx)("span",{children:"Visa karta innan start"}),(0,wo.jsx)("p",{className:"text-xs font-normal text-gray-400 mt-0.5",children:"Om ikryssad kan deltagare se kartan och generera om rutten innan de startar"})]})]})]}),"time-based"===u.runType&&(0,wo.jsx)(wo.Fragment,{children:(0,wo.jsxs)("div",{className:"space-y-1.5",children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-purple-200",children:"Minuter mellan fr\xe5gor"}),(0,wo.jsx)("input",{type:"number",name:"minutesBetweenQuestions",min:1,max:180,value:u.minutesBetweenQuestions,onChange:G,className:"w-full rounded-lg border border-slate-700 bg-slate-800 px-3 py-3 text-slate-100 focus:border-purple-400 focus:outline-none"}),(0,wo.jsx)("p",{className:"text-xs text-gray-400",children:"Ange hur m\xe5nga minuter som ska g\xe5 innan n\xe4sta fr\xe5ga l\xe5ses upp automatiskt."})]})}),"distance-based"===u.runType&&(0,wo.jsx)(wo.Fragment,{children:(0,wo.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,wo.jsxs)("div",{className:"space-y-1.5",children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-purple-200",children:"Distans mellan fr\xe5gor (meter)"}),(0,wo.jsx)("input",{type:"number",name:"distanceBetweenQuestions",min:10,max:2e3,step:10,value:u.distanceBetweenQuestions,onChange:G,className:"w-full rounded-lg border border-slate-700 bg-slate-800 px-3 py-3 text-slate-100 focus:border-purple-400 focus:outline-none"}),(0,wo.jsx)("p",{className:"text-xs text-gray-400",children:"Fr\xe5gor triggas automatiskt n\xe4r du g\xe5tt denna distans (min 10m f\xf6r testning)"})]}),(0,wo.jsxs)("div",{className:"space-y-1.5",children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-purple-200",children:"Antal fr\xe5gor"}),(0,wo.jsx)("input",{type:"number",name:"questionCount",min:3,max:20,step:"family"===u.difficulty?3:1,value:u.questionCount,onChange:G,className:"w-full rounded-lg border border-slate-700 bg-slate-800 px-3 py-3 text-slate-100 focus:border-purple-400 focus:outline-none"}),"family"===u.difficulty&&(0,wo.jsx)("p",{className:"text-xs text-gray-400",children:"Familjel\xe4ge anv\xe4nder en tredjedel per \xe5ldersgrupp. Antal fr\xe5gor rundas till n\xe4rmaste multipel av tre."})]})]})}),(0,wo.jsx)("button",{type:"submit",className:"w-full rounded-xl bg-purple-500 px-4 py-3 font-semibold text-black transition-colors hover:bg-purple-400",children:"Skapa runda"})]})]})]})},Ac=()=>{const e=J(),n=Z(),{currentUser:r,loginAsGuest:o,isAuthInitialized:i}=Eo(),{joinRunByCode:a}=sa(),[s,l]=(0,t.useState)(""),c=(0,t.useMemo)(()=>xo.getAlias()||"",[]),[u,d]=(0,t.useState)(c),[h,f]=(0,t.useState)(()=>Boolean(c.trim())),[p,m]=(0,t.useState)(()=>xo.getContact()),[g,v]=(0,t.useState)(""),[y,b]=(0,t.useState)(""),x=(0,t.useCallback)(async t=>{v(""),b("");const n=t.trim().toUpperCase();if(n.length<4)return void v("Ange en giltig anslutningskod.");if(null!==r&&void 0!==r&&r.isAnonymous&&!u.trim())return void v("Ange ett alias f\xf6r att delta.");let i=r;if(null!==r&&void 0!==r&&r.isAnonymous&&u.trim()){const e=u.trim();xo.saveAlias(e),d(e),f(!0),p&&xo.saveContact(p),i=await o({alias:e,contact:p})}try{var s,l,c,h,m,g,y,x,w,_;const{run:t}=await a(n,{userId:null!==(s=i)&&void 0!==s&&s.isAnonymous?null:null===(l=i)||void 0===l?void 0:l.id,alias:null===(c=i)||void 0===c?void 0:c.name,contact:null===(h=i)||void 0===h?void 0:h.contact,isAnonymous:null===(m=i)||void 0===m?void 0:m.isAnonymous}),o={userId:null!==(g=i)&&void 0!==g&&g.isAnonymous?null:null===(y=i)||void 0===y?void 0:y.id,alias:null===(x=i)||void 0===x?void 0:x.name,contact:null===(w=i)||void 0===w?void 0:w.contact,isAnonymous:null===(_=i)||void 0===_?void 0:_.isAnonymous};r&&!r.isAnonymous||Fa(t,o),es("join_run",{runId:t.id,runName:t.name}),b("Du \xe4r nu ansluten till ".concat(t.name,"!")),setTimeout(()=>{e("/run/".concat(t.id,"/play"))},600)}catch(k){v(k.message)}},[r,u,p,o,a,e]);(0,t.useEffect)(()=>{if("undefined"===typeof window)return;const e=e=>{if(!e.key||"geoquest:preferences"===e.key){const e=xo.getAlias()||"";d(e),f(Boolean(e.trim())),m(xo.getContact())}};return window.addEventListener("storage",e),window.addEventListener("userPreferences:changed",e),()=>{window.removeEventListener("storage",e),window.removeEventListener("userPreferences:changed",e)}},[]),(0,t.useEffect)(()=>{if(!i)return;const e=new URLSearchParams(n.search).get("code");if(e){const t=e.toUpperCase();l(t),(r&&!r.isAnonymous||null!==r&&void 0!==r&&r.isAnonymous&&h)&&x(t)}},[n.search,r,i,h,x]);const w=null!==r&&void 0!==r&&r.isAnonymous?Ba():[];return(0,wo.jsxs)(Pl,{headerTitle:"Anslut till runda",maxWidth:"max-w-2xl",className:"space-y-8",children:[(0,wo.jsxs)("section",{className:"space-y-3 text-center",children:[(0,wo.jsx)("h1",{className:"text-3xl font-semibold text-slate-100",children:"Skriv in din kod"}),(0,wo.jsx)("p",{className:"text-sm text-gray-300 sm:text-base",children:"Koden finns i QR-l\xe4nken eller p\xe5 kortet som delades med dig. Skanna g\xe4rna QR:n direkt om du har den."})]}),w.length>0&&(0,wo.jsxs)("div",{className:"rounded-2xl border border-cyan-500/30 bg-cyan-500/10 p-4 text-sm text-cyan-100",children:["Du har sparade rundor p\xe5 denna enhet. Du hittar dem under ",(0,wo.jsx)("span",{className:"font-semibold",children:"Mina rundor"})," i menyn."]}),g&&(0,wo.jsx)("div",{className:"rounded-2xl border border-red-500/40 bg-red-900/40 px-4 py-3 text-red-100",children:g}),y&&(0,wo.jsx)("div",{className:"rounded-2xl border border-emerald-500/40 bg-emerald-900/40 px-4 py-3 text-emerald-100",children:y}),(0,wo.jsxs)("form",{onSubmit:e=>{e.preventDefault(),x(s)},className:"space-y-5 rounded-2xl border border-slate-700 bg-slate-900/70 p-5 sm:p-6",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"mb-1 block text-sm font-semibold text-cyan-200",children:"Anslutningskod"}),(0,wo.jsx)("input",{value:s,onChange:e=>l(e.target.value.toUpperCase()),className:"w-full rounded-lg border border-slate-700 bg-slate-800 px-3 py-3 font-mono text-lg tracking-[0.4em] text-center text-slate-100 focus:border-cyan-400 focus:outline-none",placeholder:"ABC123",inputMode:"text"})]}),(null===r||void 0===r?void 0:r.isAnonymous)&&!h&&(0,wo.jsxs)("div",{className:"space-y-3 rounded-2xl border border-cyan-500/30 bg-cyan-500/5 p-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h2",{className:"text-base font-semibold text-cyan-200",children:"Ditt alias"}),(0,wo.jsx)("p",{className:"text-xs text-gray-400",children:u?"Detta alias sparas p\xe5 din enhet och anv\xe4nds vid framtida anslutningar.":"Ange ett alias f\xf6r att delta."})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"mb-1 block text-sm font-semibold text-slate-200",children:"Alias"}),(0,wo.jsx)("input",{value:u,onChange:e=>{d(e.target.value)},className:"w-full rounded-lg border border-slate-700 bg-slate-800 px-3 py-2 text-slate-100 focus:border-cyan-400 focus:outline-none",placeholder:"T.ex. Erik"})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"mb-1 block text-sm font-semibold text-slate-200",children:"Kontakt (valfritt)"}),(0,wo.jsx)("input",{value:p,onChange:e=>{m(e.target.value),xo.saveContact(e.target.value)},className:"w-full rounded-lg border border-slate-700 bg-slate-800 px-3 py-2 text-slate-100 focus:border-cyan-400 focus:outline-none",placeholder:"E-post eller telefon"})]})]}),(null===r||void 0===r?void 0:r.isAnonymous)&&h&&(0,wo.jsxs)("div",{className:"space-y-1 rounded-2xl border border-cyan-500/30 bg-cyan-500/5 p-4 text-sm text-cyan-100",children:[(0,wo.jsxs)("p",{children:["Aliaset ",(0,wo.jsx)("span",{className:"font-semibold text-cyan-200",children:u})," anv\xe4nds automatiskt f\xf6r denna anslutning."]}),(0,wo.jsx)("p",{className:"text-xs text-gray-400",children:"Du kan ta bort aliaset via menyn om du vill ange ett nytt."})]}),(0,wo.jsx)("button",{type:"submit",className:"w-full rounded-xl bg-cyan-500 px-4 py-3 font-semibold text-black transition-colors hover:bg-cyan-400",children:"Anslut till runda"})]})]})};var Sc=__webpack_require__(3339),Nc=__webpack_require__(4830);const Cc=(0,Pe.F3)("Haptics",{web:()=>__webpack_require__.e(182).then(__webpack_require__.bind(__webpack_require__,4182)).then(e=>new e.HapticsWeb)}),jc=e=>e*Math.PI/180,Ec=(e,t)=>{if(!e||!t)return null;const{lat:n,lng:r}=e,{lat:o,lng:i}=t;if([n,r,o,i].some(e=>"number"!==typeof e))return null;const a=jc(o-n),s=jc(i-r),l=Math.sin(a/2)**2+Math.cos(jc(n))*Math.cos(jc(o))*Math.sin(s/2)**2,c=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l));return Math.round(6371e3*c)},Tc=e=>{let{coords:n,trackingEnabled:r,distanceBetweenQuestions:o,currentQuestionIndex:i,totalQuestions:a}=e;const[s,l]=(0,t.useState)([]),[c,u]=(0,t.useState)(0),[d,h]=(0,t.useState)(o),[f,p]=(0,t.useState)(!1),m=(0,t.useRef)(null),g=(0,t.useRef)(0);(0,t.useEffect)(()=>{g.current=0,h(o),p(0===i)},[i,o]),(0,t.useEffect)(()=>{if(!n||!r)return;const e={lat:n.lat,lng:n.lng,timestamp:Date.now()};if(!m.current)return m.current=e,void l([e]);const t=Ec(m.current,e),a=t<100,s=!n.accuracy||n.accuracy<50;if(!a||!s)return void console.warn("[DistanceTracking] Filtrerar bort outlier position:",{distance:t,accuracy:n.accuracy});l(t=>[...t,e]),u(e=>e+t),g.current+=t;const c=o-g.current;h(Math.max(0,c)),console.log("[DistanceTracking] Position update:",{moved:Math.round(t)+"m",questionDistance:Math.round(g.current)+"m",required:o+"m",remaining:Math.round(c)+"m"}),g.current>=o&&(console.log("\ud83c\udfaf [DistanceTracking] TRIGGERING QUESTION!",{questionDistance:g.current,required:o,currentIndex:i}),p(!0)),m.current=e},[n,r,o,i]);return{gpsTrail:s,totalDistance:c,distanceToNextQuestion:d,shouldShowQuestion:f,resetQuestionDistance:(0,t.useCallback)(()=>{g.current=0,h(o),p(!1)},[o])}},Ic=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const[n,r]=(0,t.useState)(0),o=(0,t.useRef)(null),i=(0,t.useRef)(null);(0,t.useEffect)(()=>(e?(o.current||(o.current=Date.now()),i.current=setInterval(()=>{const e=Date.now(),t=Math.floor((e-o.current)/1e3);r(t)},1e3)):i.current&&(clearInterval(i.current),i.current=null),()=>{i.current&&clearInterval(i.current)}),[e]);return{elapsedSeconds:n,formattedTime:(e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=e%60;return t>0?"".concat(t,":").concat(String(n).padStart(2,"0"),":").concat(String(r).padStart(2,"0")):"".concat(n,":").concat(String(r).padStart(2,"0"))})(n),reset:()=>{o.current=Date.now(),r(0)}}},Pc=e=>"timeQuestionTrigger_q".concat(e),Oc=e=>{if("undefined"===typeof window)return null;try{const t=sessionStorage.getItem(Pc(e));return t?parseInt(t,10):null}catch(Vu){return null}},Mc=e=>{if("undefined"!==typeof window)try{sessionStorage.removeItem(Pc(e))}catch(Vu){}},Lc=e=>{let{isEnabled:n,intervalMinutes:r,currentQuestionIndex:o,totalQuestions:i}=e;const a=(s=r,Number.isFinite(s)?Math.max(1,Math.min(s,180)):1);var s;const l=(0,t.useMemo)(()=>6e4*a,[a]),[c,u]=(0,t.useState)(()=>!n),[d,h]=(0,t.useState)(()=>{if(!n)return 0;const e=Oc(o);if(e){return Math.max(0,e-Date.now())}return l}),f=(0,t.useRef)(null),p=(0,t.useRef)(null),m=(0,t.useRef)(null),g=(0,t.useRef)(!1),v=(0,t.useCallback)(()=>{p.current&&(clearTimeout(p.current),p.current=null),m.current&&(clearInterval(m.current),m.current=null),f.current=null},[]),y=(0,t.useCallback)(()=>{console.log("[TimeQuestionTrigger] showQuestionNow called for question",o),v(),g.current=!0,u(!0),h(0)},[v,o]),b=(0,t.useCallback)(()=>{console.log("[TimeQuestionTrigger] resetForNextQuestion called - setting shouldShowQuestion=false"),v(),g.current=!1,u(!1),h(l)},[v,l]),x=(0,t.useCallback)(()=>{if(console.log("[TimeQuestionTrigger] \ud83d\udd35 armNextQuestion called for index:",o,"isEnabled:",n),!n)return void console.log("[TimeQuestionTrigger] Not enabled, returning");if(o>=i)return console.log("[TimeQuestionTrigger] All questions done, showing question now"),y(),void Mc(o);v();for(let n=0;n<o;n++)Mc(n);console.log("[TimeQuestionTrigger] Cleared old timers for questions 0 to",o-1);const e=Oc(o);let t;e&&e>Date.now()?(t=e,console.log("[TimeQuestionTrigger] Restored timer for question",o,"remaining:",t-Date.now(),"ms")):(t=Date.now()+l,((e,t)=>{if("undefined"!==typeof window)try{sessionStorage.setItem(Pc(e),t.toString())}catch(Vu){console.warn("[TimeQuestionTrigger] Could not save timer state",Vu)}})(o,t),console.log("[TimeQuestionTrigger] Created new timer for question",o,"intervalMs:",l)),f.current=t;const r=Math.max(0,t-Date.now());console.log("[TimeQuestionTrigger] Setting shouldShowQuestion=false, remainingMs:",r),u(!1),h(r),console.log("[TimeQuestionTrigger] Starting setTimeout for",r,"ms"),p.current=setTimeout(()=>{console.log("[TimeQuestionTrigger] \u23f0 setTimeout fired for question",o),y(),Mc(o)},r),m.current=setInterval(()=>{const e=Date.now(),n=Math.max(0,t-e);h(n),0===n&&(console.log("[TimeQuestionTrigger] \u23f0 Ticker reached 0 for question",o),y(),Mc(o))},1e3)},[v,o,l,n,y,i]);return(0,t.useEffect)(()=>{if(!n)return v(),u(!0),void h(0);f.current||0!==o||x()},[x,v,o,n]),(0,t.useEffect)(()=>v,[v]),{shouldShowQuestion:c,timeRemainingMs:d,armNextQuestion:x,cancel:v,showQuestionNow:y,resetForNextQuestion:b,hasActiveTimer:null!==f.current,wasTriggeredByTimer:g.current}},Rc=(0,Pe.F3)("App",{web:()=>__webpack_require__.e(551).then(__webpack_require__.bind(__webpack_require__,6551)).then(e=>new e.AppWeb)}),Dc=()=>{const[e,n]=(0,t.useState)(()=>"undefined"===typeof document||"hidden"!==document.visibilityState);return(0,t.useEffect)(()=>{const e=()=>{n("hidden"!==document.visibilityState)};let t;"undefined"!==typeof document&&document.addEventListener("visibilitychange",e);return Pe.Ii.isNativePlatform()&&Rc&&"function"===typeof Rc.getState&&"function"===typeof Rc.addListener&&(Rc.getState().then(e=>{let{isActive:t}=e;return n(t)}).catch(()=>{}),t=Rc.addListener("appStateChange",e=>{let{isActive:t}=e;n(t)})),()=>{"undefined"!==typeof document&&document.removeEventListener("visibilitychange",e),t&&"function"===typeof t.remove&&t.remove()}},[]),e},Fc=async()=>{if(Pe.Ii.isNativePlatform())try{await Sc.LocalNotifications.requestPermissions()}catch(e){console.warn("[QuestionNotification] Could not request native permissions:",e)}else if("undefined"!==typeof window&&"Notification"in window&&"default"===Notification.permission)try{await Notification.requestPermission()}catch(e){console.warn("[QuestionNotification] Could not request web notification permission:",e)}},zc=async function(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{questionId:o,questionText:i,questionOrder:a,order:s,totalQuestions:l,total:c,mode:u="route",runId:d,minutesBetweenQuestions:h}=n;console.log("[QuestionNotification] \ud83d\udce2 Sending notification for question:",o,"order:",a,"mode:",u);const f=null!==(e=null!==s&&void 0!==s?s:a)&&void 0!==e?e:1,p=null!==(t=null!==c&&void 0!==c?c:l)&&void 0!==t?t:1;let m;switch(u){case"distance":m="\ud83e\udded Ny fr\xe5ga tillg\xe4nglig!";break;case"time":m="\u23f1\ufe0f Fr\xe5ga ".concat(f," av ").concat(p);break;default:m="\ud83d\uddfa\ufe0f Fr\xe5ga ".concat(f," av ").concat(p)}let g=i?"".concat(i.substring(0,100)).concat(i.length>100?"...":""):"En ny fr\xe5ga v\xe4ntar p\xe5 dig!";"time"!==u||i||(g="Nedr\xe4kningen \xe4r klar \u2013 dags att svara!"),"time"===u&&h&&(g="".concat(g," (Intervall: ").concat(h," min)"));const v=d?"/run/".concat(d,"/play"):"/",y="undefined"!==typeof window?"".concat(window.location.origin).concat(v):v;if(console.log("[QuestionNotification] Target URL:",y),Pe.Ii.isNativePlatform())try{const e=await Sc.LocalNotifications.checkPermissions();if(console.log("[QuestionNotification] Permission status:",e),"granted"!==e.display){console.warn("[QuestionNotification] Notifications not granted, requesting...");const e=await Sc.LocalNotifications.requestPermissions();if(console.log("[QuestionNotification] Request result:",e),"granted"!==e.display)return void console.warn("[QuestionNotification] User denied notification permission")}const t=o?Math.abs(o.split("").reduce((e,t)=>(e<<5)-e+t.charCodeAt(0),0)):Date.now();console.log("[QuestionNotification] Scheduling native notification with ID:",t),await Sc.LocalNotifications.schedule({notifications:[{title:m,body:g,id:t,schedule:{at:new Date(Date.now()+100)},sound:"question_alert.wav",actionTypeId:"QUESTION_READY",extra:(0,To.A)({questionId:o,runId:d,mode:u,minutesBetweenQuestions:h},r)}]}),console.log("[QuestionNotification] \u2705 Native notification scheduled successfully")}catch(b){console.error("[QuestionNotification] Could not schedule native notification:",b)}else if("undefined"!==typeof window&&"Notification"in window){if("default"===Notification.permission)try{await Notification.requestPermission()}catch(b){console.warn("[QuestionNotification] Could not request Notification permission:",b)}"granted"===Notification.permission&&await(async(e,t)=>{try{if("serviceWorker"in navigator){const n=await navigator.serviceWorker.ready;await n.showNotification(e,t)}else new Notification(e,t)}catch(b){console.warn("[QuestionNotification] Could not show notification:",b)}})(m,{body:g,tag:"question-".concat(o||Date.now()),data:(0,To.A)({questionId:o,runId:d,mode:u,minutesBetweenQuestions:h,url:y},r)})}},Bc=Pe.Ii.isNativePlatform()?(0,Pe.F3)("BackgroundGeolocation"):null,Uc=Pe.Ii.isNativePlatform()?(0,Pe.F3)("Haptics"):null,qc="HEAVY";const Vc=new class{constructor(){this.isNative=Pe.Ii.isNativePlatform(),this.watcher=null,this.listeners=new Set,this.distanceCallback=null,this.totalDistance=0,this.lastPosition=null,this.distanceSinceLastQuestion=0,this.distanceThreshold=500,this.notificationPayloadSupplier=null,this.isTracking=!1}async startTracking(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{distanceBetweenQuestions:t=500,onDistanceReached:n,getNotificationPayload:r}=e;this.distanceThreshold=t,this.distanceCallback=n,this.notificationPayloadSupplier="function"===typeof r?r:null,this.isTracking=!0,await this.requestPermissions(),this.isNative?await this.startNativeTracking():await this.startWebTracking()}async stopTracking(){this.isTracking=!1,this.notificationPayloadSupplier=null,this.watcher&&(this.isNative&&Bc?await Bc.removeWatcher({id:this.watcher}):navigator.geolocation.clearWatch(this.watcher),this.watcher=null),this.resetDistance()}async startNativeTracking(){if(!Bc)return console.warn("[BackgroundLocation] Plugin not available, falling back to web"),void await this.startWebTracking();try{this.watcher=await Bc.addWatcher({backgroundMessage:"GeoQuest sp\xe5rar din position f\xf6r att trigga fr\xe5gor.",backgroundTitle:"GeoQuest Aktiv",requestPermissions:!0,stale:!1,distanceFilter:10},(e,t)=>{t?console.error("[BackgroundLocation] Error:",t):e&&this.handleLocationUpdate(e)}),console.log("[BackgroundLocation] Native tracking started")}catch(e){console.error("[BackgroundLocation] Failed to start native tracking:",e),await this.startWebTracking()}}async startWebTracking(){if(!navigator.geolocation)throw new Error("Geolocation is not supported");this.watcher=navigator.geolocation.watchPosition(e=>{const t={latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy,time:e.timestamp};this.handleLocationUpdate(t)},e=>{console.error("[BackgroundLocation] Web tracking error:",e)},{enableHighAccuracy:!0,maximumAge:5e3,timeout:1e4}),console.log("[BackgroundLocation] Web tracking started")}handleLocationUpdate(e){if(!this.isTracking)return;const t={lat:e.latitude,lng:e.longitude,accuracy:e.accuracy,timestamp:e.time||Date.now()};if(t.accuracy>50)console.warn("[BackgroundLocation] Poor accuracy, skipping:",t.accuracy);else{if(this.lastPosition){const e=this.calculateDistance(this.lastPosition.lat,this.lastPosition.lng,t.lat,t.lng);if(e>100)return console.warn("[BackgroundLocation] Outlier detected, skipping:",e),void(this.lastPosition=t);this.totalDistance+=e,this.distanceSinceLastQuestion+=e,this.notifyListeners({totalDistance:this.totalDistance,distanceSinceLastQuestion:this.distanceSinceLastQuestion,currentPosition:t}),this.distanceSinceLastQuestion>=this.distanceThreshold&&this.triggerQuestion()}this.lastPosition=t}}async triggerQuestion(){console.log("[BackgroundLocation] Distance threshold reached! Triggering question..."),await this.vibrate(),this.isNative&&await this.showNotification(),this.distanceCallback&&this.distanceCallback({totalDistance:this.totalDistance,distanceSinceLastQuestion:this.distanceSinceLastQuestion}),this.distanceSinceLastQuestion=0}async vibrate(){if(this.isNative)if(Uc)try{await Uc.impact({style:qc}),await new Promise(e=>setTimeout(e,200)),await Uc.impact({style:qc})}catch(e){console.warn("[BackgroundLocation] Haptics not available:",e)}else console.warn("[BackgroundLocation] Haptics plugin not available");else navigator.vibrate&&navigator.vibrate([200,100,200,100,200])}async showNotification(){var e;console.log("[BackgroundLocation] showNotification() called");const t="function"===typeof this.notificationPayloadSupplier?this.notificationPayloadSupplier():null;await zc((0,To.A)((0,To.A)({},t),{},{distanceMeters:null!==(e=null===t||void 0===t?void 0:t.distanceMeters)&&void 0!==e?e:this.distanceSinceLastQuestion,mode:"distance"}))}resetDistance(){this.distanceSinceLastQuestion=0}addListener(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notifyListeners(e){this.listeners.forEach(t=>{try{t(e)}catch(n){console.error("[BackgroundLocation] Listener error:",n)}})}async requestPermissions(){if(this.isNative)try{Bc&&await Bc.requestPermissions(),await Fc()}catch(e){console.error("[BackgroundLocation] Permission request failed:",e)}}calculateDistance(e,t,n,r){const o=e*Math.PI/180,i=n*Math.PI/180,a=(n-e)*Math.PI/180,s=(r-t)*Math.PI/180,l=Math.sin(a/2)*Math.sin(a/2)+Math.cos(o)*Math.cos(i)*Math.sin(s/2)*Math.sin(s/2);return 6371e3*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))}getTotalDistance(){return this.totalDistance}getDistanceSinceLastQuestion(){return this.distanceSinceLastQuestion}isActive(){return this.isTracking}},Hc=Vc,Gc=e=>{let{questionId:n,questionText:r,onClose:o,onReported:i}=e;const[a,s]=(0,t.useState)(""),[l,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)({isOpen:!1,title:"",message:"",type:"info"});return(0,wo.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,wo.jsxs)("div",{className:"bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6 border border-slate-700",children:[(0,wo.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Rapportera fr\xe5ga"}),r&&(0,wo.jsx)("div",{className:"mb-4 p-3 bg-slate-900 rounded border border-slate-700",children:(0,wo.jsx)("p",{className:"text-sm text-gray-300",children:r})}),(0,wo.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),a.trim()){c(!0);try{const e=localStorage.getItem("geoquest:user:alias")||"anonymous";await Pi(n,a.trim(),e),i&&i(),d({isOpen:!0,title:"Rapport skickad",message:"Tack f\xf6r din rapport! Fr\xe5gan har skickats till granskning.",type:"success"}),setTimeout(()=>o(),2e3)}catch(t){console.error("Kunde inte rapportera fr\xe5ga:",t),d({isOpen:!0,title:"Kunde inte skicka rapport",message:t.message,type:"error"})}finally{c(!1)}}else d({isOpen:!0,title:"Anledning saknas",message:"Ange en anledning till rapporten",type:"warning"})},children:[(0,wo.jsxs)("div",{className:"mb-4",children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-cyan-200 mb-2",children:"Varf\xf6r rapporterar du denna fr\xe5ga?"}),(0,wo.jsx)("textarea",{value:a,onChange:e=>s(e.target.value),className:"w-full rounded bg-slate-900 border border-slate-600 px-3 py-2 text-white min-h-[100px]",placeholder:"T.ex. 'Felaktigt svar', 'Tvetydiga alternativ', 'Ol\xe4mpligt inneh\xe5ll'...",required:!0,disabled:l}),(0,wo.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Din rapport hj\xe4lper oss att f\xf6rb\xe4ttra fr\xe5gebanken. Fr\xe5gan kommer att granskas av administrat\xf6rer."})]}),(0,wo.jsxs)("div",{className:"flex gap-3",children:[(0,wo.jsx)("button",{type:"button",onClick:o,className:"flex-1 rounded bg-slate-700 px-4 py-2 font-semibold text-white hover:bg-slate-600",disabled:l,children:"Avbryt"}),(0,wo.jsx)("button",{type:"submit",className:"flex-1 rounded bg-yellow-600 px-4 py-2 font-semibold text-white hover:bg-yellow-500 disabled:bg-slate-600 disabled:text-gray-400",disabled:l,children:l?"Skickar...":"\u26a0\ufe0f Rapportera"})]})]}),(0,wo.jsx)(la,{isOpen:u.isOpen,onClose:()=>d((0,To.A)((0,To.A)({},u),{},{isOpen:!1})),title:u.title,message:u.message,type:u.type})]})})},Kc="undefined"!==typeof window&&null!==(Wc=window.location)&&void 0!==Wc&&Wc.origin?"".concat(window.location.origin,"/sounds/question_alert.wav"):"/sounds/question_alert.wav";var Wc;let Qc=null;const Zc=()=>{if("undefined"!==typeof Audio)try{Qc||(Qc=new Audio(Kc),Qc.preload="auto"),Qc.currentTime=0,Qc.play().catch(e=>{console.warn("[PlayRunPage] Could not play in-app alert sound",e),Qc=null})}catch(e){console.warn("[PlayRunPage] Failed to play in-app alert sound:",e)}},Yc=()=>{var e,n;const{runId:r}=$(),o=J(),{currentRun:i,currentParticipant:a,loadRunById:s,submitAnswer:l,completeRunForParticipant:c,refreshParticipants:u}=sa(),{trackingEnabled:d,coords:h}=_s(),[f,p]=(0,t.useState)(null),[m,g]=(0,t.useState)(null),[v,y]=(0,t.useState)(""),[b,x]=(0,t.useState)(!1),[w,_]=(0,t.useState)(null),[k,A]=(0,t.useState)(null),[S,N]=(0,t.useState)(!1),[C,j]=(0,t.useState)(null),[E,T]=(0,t.useState)(!1),[I,P]=(0,t.useState)(()=>"undefined"!==typeof window&&localStorage.getItem("routequest:language")||"sv"),O=(0,t.useRef)(new Set),M=(0,t.useRef)(!1),L="distance-based"===(null===i||void 0===i?void 0:i.type),R="time-based"===(null===i||void 0===i?void 0:i.type),D=Dc();(0,t.useEffect)(()=>{if("true"===new URLSearchParams(window.location.search).get("fromNotification")){console.log("[PlayRunPage] Opened from notification via URL parameter, showing question"),x(!0);const e=window.location.pathname+window.location.hash;window.history.replaceState({},"",e)}},[]),(0,t.useEffect)(()=>{if("undefined"!==typeof window)return sessionStorage.setItem("currentPlayRunId",r),()=>{sessionStorage.removeItem("currentPlayRunId")}},[r]),(0,t.useEffect)(()=>{O.current.clear(),!Pe.Ii.isNativePlatform()&&"serviceWorker"in navigator&&(console.log("[PlayRunPage] Attempting to close old notifications..."),navigator.serviceWorker.ready.then(e=>"getNotifications"in e?e.getNotifications():(console.log("[PlayRunPage] getNotifications not available"),[])).then(e=>{console.log("[PlayRunPage] Found",e.length,"old notifications, closing them"),e.forEach(e=>{var t;console.log("[PlayRunPage] Closing notification:",null===(t=e.data)||void 0===t?void 0:t.questionId),e.close()})}).catch(e=>{console.warn("[PlayRunPage] Could not close old notifications:",e)}))},[r]),(0,t.useEffect)(()=>{const e=()=>{const e=localStorage.getItem("routequest:language")||"sv";P(e)};return window.addEventListener("storage",e),window.addEventListener("languageChange",e),()=>{window.removeEventListener("storage",e),window.removeEventListener("languageChange",e)}},[]),(0,t.useEffect)(()=>{try{i&&i.id===r||s(r)}catch(e){y(e.message)}},[i,s,r]),(0,t.useEffect)(()=>{u().catch(e=>console.warn("Kunde inte uppdatera deltagare",e)),Pe.Ii.isNativePlatform()?Fc().catch(e=>{console.warn("[PlayRunPage] Could not ensure notification permissions",e)}):"undefined"!==typeof Notification&&"default"===Notification.permission&&Notification.requestPermission().catch(()=>{})},[u]),(0,t.useEffect)(()=>{if(!Pe.Ii.isNativePlatform())return;const e=Sc.LocalNotifications.addListener("localNotificationActionPerformed",e=>{var t,n;console.log("[PlayRunPage] Native notification clicked:",e),x(!0),null!==(t=e.notification)&&void 0!==t&&null!==(n=t.extra)&&void 0!==n&&n.questionId&&O.current.add(e.notification.extra.questionId)});return()=>{e.remove()}},[]);const F=!!("route-based"===(null===i||void 0===i?void 0:i.type)||"distance-based"===(null===i||void 0===i?void 0:i.type))&&!d,z=Pe.Ii.isNativePlatform(),{formattedTime:B}=Ic(!0),[U,q]=(0,t.useState)(0),[V,H]=(0,t.useState)(0);(0,t.useEffect)(()=>{p(null),g(null),x(!R&&!F)},[null===a||void 0===a?void 0:a.currentOrder,R,F]);const G=(0,t.useMemo)(()=>i?i.questionIds.map(e=>{const t=bi(e,I);return t||(console.warn("[PlayRunPage] Fr\xe5ga med ID ".concat(e," hittades inte i questionService")),{id:e,text:"Fr\xe5ga ".concat(e," kunde inte laddas"),options:["Ladda om sidan","F\xf6rs\xf6k igen","Kontakta admin","Hoppa \xf6ver"],explanation:"Denna fr\xe5ga kunde inte laddas fr\xe5n databasen.",correctOption:0})}):[],[i,I]),K=G.length,W=(0,t.useMemo)(()=>a?Math.max(0,a.currentOrder-1):0,[a]),Q=Tc({coords:h,trackingEnabled:d&&!z,distanceBetweenQuestions:(null===i||void 0===i?void 0:i.distanceBetweenQuestions)||500,currentQuestionIndex:W,totalQuestions:K}),{resetQuestionDistance:Z}=Q,{shouldShowQuestion:Y,timeRemainingMs:X,armNextQuestion:ee,showQuestionNow:te,resetForNextQuestion:ne,wasTriggeredByTimer:re}=Lc({isEnabled:Boolean(R),intervalMinutes:(null===i||void 0===i?void 0:i.minutesBetweenQuestions)||5,currentQuestionIndex:W,totalQuestions:K}),oe=(0,t.useMemo)(()=>(e=>{if(!Number.isFinite(e)||e<=0)return"0:00";const t=Math.max(0,Math.round(e/1e3)),n=Math.floor(t/60),r=t%60;return"".concat(n,":").concat(r.toString().padStart(2,"0"))})(X),[X]);(0,t.useEffect)(()=>{if(R&&0!==W){console.log("[PlayRunPage] Cleaning up sessionStorage for answered questions (0 to",W-1,")");for(let e=0;e<W;e++){const t="timeQuestionTrigger_q".concat(e);sessionStorage.removeItem(t)}}},[r,R,W]),(0,t.useEffect)(()=>{R&&0!==W&&W>0&&W<K&&(console.log("[PlayRunPage] Scheduling next timed question after answer, index:",W),ee())},[R,W,K,ee]),(0,t.useEffect)(()=>{if(Pe.Ii.isNativePlatform()||!("serviceWorker"in navigator))return;const e=e=>{var t,n,o,i,a;if(console.log("[PlayRunPage] Service worker message received:",e.data),"SHOW_QUESTION"===(null===(t=e.data)||void 0===t?void 0:t.type)){var s,l,c;const t=null===(s=e.data)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.questionId,n=null===(c=G[W])||void 0===c?void 0:c.id;return console.log("[PlayRunPage] SHOW_QUESTION received, notification questionId:",t,"current:",n),t!==n?void console.log("[PlayRunPage] \u26a0\ufe0f Ignoring old notification - question already answered"):(console.log("[PlayRunPage] Showing question without navigation"),x(!0),R&&te(),void(t&&O.current.add(t)))}if("NAVIGATE_TO"===(null===(n=e.data)||void 0===n?void 0:n.type)){const t=e.data.url;console.log("[PlayRunPage] NAVIGATE_TO received, target:",t);const n=window.location.pathname;var u,d;return n===new URL(t).pathname||n==="/play/".concat(r)||n==="/run/".concat(r,"/play")?(console.log("[PlayRunPage] Already on target page, showing question instead of navigating"),x(!0),R&&te(),void(null!==(u=e.data)&&void 0!==u&&null!==(d=u.data)&&void 0!==d&&d.questionId&&O.current.add(e.data.data.questionId))):(console.log("[PlayRunPage] Navigating to different page:",t),void(window.location.href=t))}"NOTIFICATION_CLICKED"===(null===(o=e.data)||void 0===o?void 0:o.type)&&(console.log("[PlayRunPage] Web notification clicked, showing question"),x(!0),R&&te(),null!==(i=e.data)&&void 0!==i&&null!==(a=i.data)&&void 0!==a&&a.questionId&&O.current.add(e.data.data.questionId))};return navigator.serviceWorker.addEventListener("message",e),()=>{navigator.serviceWorker.removeEventListener("message",e)}},[R,te,r,W,G]),(0,t.useEffect)(()=>{if(!z||!L||!d||!i)return;console.log("[PlayRunPage] Starting background location tracking (native)"),Hc.startTracking({distanceBetweenQuestions:i.distanceBetweenQuestions||500,onDistanceReached:e=>{console.log("[PlayRunPage] Distance reached!",e),x(!0);const t=G[W]||null;null!==t&&void 0!==t&&t.id&&O.current.add(t.id)},getNotificationPayload:()=>{const e=G[W];return e?{questionId:e.id,runId:r,questionTitle:"".concat((null===i||void 0===i?void 0:i.name)||"GeoQuest"," - Fraga ").concat(W+1,"/").concat(K),questionText:e.text,options:e.options,order:W+1,total:K,mode:"distance"}:null}});const e=Hc.addListener(e=>{q(e.totalDistance),H(e.distanceSinceLastQuestion)});return()=>{console.log("[PlayRunPage] Stopping background location tracking"),Hc.stopTracking(),e()}},[z,L,d,i,W,G,K,r]);const ie=(null===i||void 0===i||null===(e=i.checkpoints)||void 0===e?void 0:e[W])||null;(0,t.useEffect)(()=>{if(!h||!ie)return void _(null);const e=Ec(h,ie.location);_(e)},[h,ie]),(0,t.useEffect)(()=>{if(!h||null===i||void 0===i||!i.startPoint)return void A(null);const e=Ec(h,i.startPoint);A(e)},[h,null===i||void 0===i?void 0:i.startPoint]);const ae=d&&null!=w&&w<=25,se=d&&null!=k&&k<=25,le=i?fc(i.joinCode):"",{dataUrl:ce,isLoading:ue,error:de}=gc(le,280),he=R?Y:L?F&&b||Q.shouldShowQuestion:F&&b||!F&&ae,fe=he&&G[W]||null;(0,t.useEffect)(()=>{if(!R||!Y)return;if(console.log("[PlayRunPage] timedShouldShowQuestion=true, currentOrderIndex:",W,"wasTriggeredByTimer:",re,"remaining:",X),!re)return console.log("[PlayRunPage] NOT sending notification - shouldShowQuestion not triggered by timer, race condition at mount"),void x(!0);console.log("[PlayRunPage] \u2705 Timer triggered shouldShowQuestion");if(!(window.location.pathname.includes("/run/")||window.location.pathname.includes("/play/")))return void console.log("[PlayRunPage] NOT sending notification - user not on play page, path:",window.location.pathname);x(!0);const e=G[W]||null,t=null===e||void 0===e?void 0:e.id;t&&!O.current.has(t)?(O.current.add(t),D?(console.log("[PlayRunPage] \ud83d\udfe2 App in foreground, playing sound + haptics"),Zc(),Pe.Ii.isNativePlatform()?Cc.impact({style:Nc.k.Heavy}).catch(e=>console.warn("[PlayRunPage] Could not trigger haptics:",e)):navigator.vibrate&&navigator.vibrate([150,75,150])):(console.log("[PlayRunPage] \ud83d\udce2 App in background, sending native notification"),zc({questionId:t,runId:r,questionTitle:"".concat((null===i||void 0===i?void 0:i.name)||"GeoQuest"," - Fraga ").concat(W+1,"/").concat(K),questionText:(null===e||void 0===e?void 0:e.text)||"",options:(null===e||void 0===e?void 0:e.options)||[],questionOrder:W+1,totalQuestions:K,mode:"time",minutesBetweenQuestions:null===i||void 0===i?void 0:i.minutesBetweenQuestions}),navigator.vibrate&&navigator.vibrate([200,100,200]))):console.log("[PlayRunPage] NOT sending notification - already notified or no questionId:",t,"has?",O.current.has(t))},[R,Y,G,W,K,null===i||void 0===i?void 0:i.name,null===i||void 0===i?void 0:i.minutesBetweenQuestions,r,D]),(0,t.useEffect)(()=>{if(!L||z||!Q.shouldShowQuestion)return;x(!0);const e=G[W]||null,t=null===e||void 0===e?void 0:e.id;if(t&&!O.current.has(t)&&(O.current.add(t),zc({questionId:t,runId:r,questionTitle:"".concat((null===i||void 0===i?void 0:i.name)||"GeoQuest"," - Fraga ").concat(W+1,"/").concat(K),questionText:(null===e||void 0===e?void 0:e.text)||"",options:(null===e||void 0===e?void 0:e.options)||[],order:W+1,total:K,mode:"distance"})),navigator.vibrate&&navigator.vibrate([200,100,200]),"undefined"!==typeof Notification&&"granted"===Notification.permission)if("serviceWorker"in navigator)navigator.serviceWorker.ready.then(e=>{e.showNotification("Ny fr\xe5ga!",{body:"Du har g\xe5tt ".concat((null===i||void 0===i?void 0:i.distanceBetweenQuestions)||500,"m. Dags att svara!"),icon:"/favicon.ico",tag:"question-trigger"}).catch(e=>console.warn("[PlayRunPage] Kunde inte visa notifikation:",e))});else try{new Notification("Ny fr\xe5ga!",{body:"Du har g\xe5tt ".concat((null===i||void 0===i?void 0:i.distanceBetweenQuestions)||500,"m. Dags att svara!"),icon:"/favicon.ico",tag:"question-trigger"})}catch(n){console.warn("[PlayRunPage] Kunde inte visa notifikation:",n)}Zc()},[Q.shouldShowQuestion,L,z,G,W,K,null===i||void 0===i?void 0:i.name,null===i||void 0===i?void 0:i.distanceBetweenQuestions,r]),(0,t.useEffect)(()=>{if(L||R)return;if(!he||!fe)return;const e=fe.id;e&&(O.current.has(e)||(O.current.add(e),zc({questionId:e,runId:r,questionTitle:"".concat((null===i||void 0===i?void 0:i.name)||"GeoQuest"," - Fraga ").concat(W+1,"/").concat(K),questionText:fe.text,options:fe.options,order:W+1,total:K,mode:"route"})))},[L,R,he,fe,W,K,null===i||void 0===i?void 0:i.name,r]);const pe=(null===a||void 0===a||null===(n=a.answers)||void 0===n?void 0:n.length)||0,me=pe>=K,ge="route-based"===(null===i||void 0===i?void 0:i.type)&&!F,ve=me&&(!ge||se),ye=(0,t.useCallback)(async()=>{await c();const e=null===i||void 0===i?void 0:i.id;e&&o("/run/".concat(e,"/results"))},[c,null===i||void 0===i?void 0:i.id,o]),be=(0,t.useCallback)(async(e,t)=>{if(null==e||"number"!==typeof t||Number.isNaN(t)||t<0)return void console.warn("[PlayRunPage] Invalid notification answer payload",{questionId:e,answerIndex:t});if(G.find(t=>t.id===e)||null){if(!M.current){M.current=!0;try{await l({questionId:e,answerIndex:t}),g(null),L?(x(!1),z?Hc.resetDistance():Z()):F&&setTimeout(()=>x(!1),500);L&&pe+1>=K&&setTimeout(()=>{ye()},500)}catch(n){console.error("[PlayRunPage] Failed to submit answer from notification:",n)}finally{M.current=!1}}}else console.warn("[PlayRunPage] Question ".concat(e," not found when answering via notification"))},[G,l,L,F,z,Z,pe,K,ye]),xe=(0,t.useCallback)(async e=>{if(!e)return;const t=e.actionId,n=(e.notification||{}).extra||e.extra||{},r=n.questionId,o=Array.isArray(n.options)?n.options:[];if("open"===t||"tap"===t)return r&&O.current.add(r),void x(!0);if("answer"===t){const t=e.inputValue||"",n=t.trim();if(!n)return;let i=Number.parseInt(n,10)-1;if(Number.isNaN(i)||i<0||i>=o.length){const e=n.toLowerCase();i=o.findIndex(t=>{if(!t)return!1;const n=t.toLowerCase();return n===e||n.startsWith(e)})}i>=0?await be(r,i):console.warn("[PlayRunPage] Could not parse notification answer",{rawValue:t,optionsList:o})}},[be]);return(0,t.useEffect)(()=>{if("undefined"===typeof window)return;const e=e=>{Promise.resolve(xe(e.detail)).catch(e=>{console.error("[PlayRunPage] Notification action handler error:",e)})},t=e=>{const t=null===e||void 0===e?void 0:e.detail;null!==t&&void 0!==t&&t.questionId&&O.current.add(t.questionId),x(!0)};return window.addEventListener("routequest:notificationAction",e),window.addEventListener("routequest:webNotificationClicked",t),()=>{window.removeEventListener("routequest:notificationAction",e),window.removeEventListener("routequest:webNotificationClicked",t)}},[xe]),v?(0,wo.jsxs)("div",{className:"mx-auto max-w-2xl px-4 py-8",children:[(0,wo.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"N\xe5got gick fel"}),(0,wo.jsx)("p",{className:"text-red-300 mb-4",children:v})]}):i&&a?(0,wo.jsxs)("div",{className:"h-dvh flex flex-col",children:[(0,wo.jsx)("style",{children:"\n          @media (max-width: 768px) { .leaflet-container { height: 100% !important; } }\n        "}),(0,wo.jsx)(Tl,{title:"".concat(i.name," (").concat(Math.min((null===a||void 0===a?void 0:a.currentOrder)||1,K),"/").concat(K,")"),children:(0,wo.jsx)("button",{onClick:()=>T(!0),className:"p-2 hover:bg-slate-700/50 rounded-lg transition-colors",title:"Dela runda","aria-label":"Dela runda",children:(0,wo.jsx)("svg",{className:"w-5 h-5 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})})}),(0,wo.jsxs)("main",{className:"flex-1 relative overflow-hidden",children:[(0,wo.jsx)(hc,{checkpoints:i.checkpoints||[],userPosition:h,activeOrder:W,answeredCount:pe,route:i.route,startPoint:i.startPoint,manualMode:!d,gpsTrail:d?Q.gpsTrail:null,onCheckpointClick:()=>{x(!0)}}),(d||R)&&(0,wo.jsx)("div",{className:"absolute top-4 left-4 right-4 z-20",children:(0,wo.jsxs)("div",{className:"bg-slate-900/90 backdrop-blur-sm rounded-lg border border-cyan-400/40 p-3 shadow-lg",children:[(0,wo.jsxs)("div",{className:"flex items-center justify-between gap-4 text-sm",children:[d&&(0,wo.jsxs)("div",{className:"flex items-center gap-2",children:[(0,wo.jsx)("span",{className:"text-cyan-400",children:"??"}),(0,wo.jsx)("span",{className:"text-white font-medium",children:(()=>{const e=z?U:Q.totalDistance;return e>=1e3?"".concat((e/1e3).toFixed(2)," km"):"".concat(Math.round(e)," m")})()})]}),(0,wo.jsxs)("div",{className:"flex items-center gap-2",children:[(0,wo.jsx)("span",{className:"text-yellow-400",children:"??"}),(0,wo.jsx)("span",{className:"text-white font-medium",children:B})]}),R&&(0,wo.jsxs)("div",{className:"space-y-1.5",children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-purple-200",children:"Nedr\xe4kning till n\xe4sta fr\xe5ga"}),(0,wo.jsx)("div",{className:"rounded-lg border border-slate-700 bg-slate-800 px-3 py-3 text-2xl font-semibold text-slate-100",children:me?"Alla fr\xe5gor klara":Y?"Fr\xe5ga tillg\xe4nglig":oe}),(0,wo.jsx)("p",{className:"text-xs text-gray-400",children:"Fr\xe5gor l\xe5ses upp automatiskt n\xe4r nedr\xe4kningen n\xe5r noll."})]}),d&&L&&(0,wo.jsxs)("div",{className:"flex items-center gap-2",children:[(0,wo.jsx)("span",{className:"text-purple-400",children:"??"}),(0,wo.jsxs)("span",{className:"text-white font-medium",children:[Math.round(z?V:Q.distanceToNextQuestion),"m"]})]})]}),d&&L&&(0,wo.jsx)("div",{className:"mt-3 h-2 rounded-full bg-slate-800",children:(0,wo.jsx)("div",{className:"h-full rounded-full bg-purple-500 transition-all",style:{width:"".concat(Math.min(100,(z?V:Q.distanceToNextQuestion)/(i.distanceBetweenQuestions||1)*100),"%")}})})]})}),fe&&(0,wo.jsx)("div",{className:"absolute inset-x-4 bottom-4 z-30",children:(0,wo.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),null===f||!fe)return;if(R){const e="timeQuestionTrigger_q".concat(W);sessionStorage.removeItem(e),console.log("[PlayRunPage] Cleared timer for answered question",W),ne()}const{correct:t}=await l({questionId:fe.id,answerIndex:f});g(t?"R\xe4tt svar!":"Tyv\xe4rr fel svar."),p(null),setTimeout(()=>{g(null)},2e3),F&&setTimeout(()=>{x(!1)},2e3),L&&(z?Hc.resetDistance():Z(),pe+1>=K&&setTimeout(()=>{ye()},500))},className:"bg-slate-900/95 backdrop-blur-sm rounded-xl border border-cyan-400/40 p-4 shadow-xl",children:[(0,wo.jsxs)("div",{className:"mb-3",children:[(0,wo.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,wo.jsx)("h2",{className:"text-lg font-semibold text-white flex-1",children:fe.text}),(0,wo.jsxs)("div",{className:"ml-3 flex items-center gap-2",children:[fe.category&&(0,wo.jsx)("span",{className:"inline-flex items-center rounded-full bg-purple-500/20 px-2.5 py-0.5 text-xs font-medium text-purple-200",children:fe.category}),(0,wo.jsx)("span",{className:"inline-flex items-center rounded-full bg-cyan-500/20 px-2.5 py-0.5 text-xs font-medium text-cyan-200",children:I.toUpperCase()})]})]}),(0,wo.jsx)("button",{type:"button",onClick:()=>{j({id:fe.id,text:fe.text}),N(!0)},className:"text-xs text-yellow-400 hover:text-yellow-300 underline",children:"\u26a0\ufe0f Rapportera problem med fr\xe5gan"})]}),(0,wo.jsx)("div",{className:"space-y-2 mb-4",children:fe.options.map((e,t)=>(0,wo.jsxs)("label",{className:"flex cursor-pointer items-center gap-3 rounded-lg border px-3 py-2 transition ".concat(f===t?"border-cyan-400 bg-cyan-500/20":"border-slate-600 bg-slate-800/40 hover:border-cyan-500/60"),children:[(0,wo.jsx)("input",{type:"radio",name:"answer",value:t,checked:f===t,onChange:()=>p(t),className:"text-cyan-500"}),(0,wo.jsx)("span",{className:"text-white text-sm",children:e})]},e))}),(0,wo.jsx)("button",{type:"submit",disabled:null===f,className:"w-full rounded-lg bg-cyan-500 px-4 py-2 font-semibold text-black hover:bg-cyan-400 disabled:cursor-not-allowed disabled:bg-slate-700 disabled:text-gray-400",children:"L\xe4mna svar"}),m&&(0,wo.jsx)("div",{className:"rounded-lg px-3 py-2 text-sm mt-3 ".concat(m.includes("R\xe4tt")?"bg-emerald-900/60 text-emerald-100 border border-emerald-500/40":"bg-amber-900/60 text-amber-100 border border-amber-500/40"),children:m})]})}),me&&(0,wo.jsx)("div",{className:"absolute inset-x-4 top-4 z-30",children:(0,wo.jsx)("div",{className:"backdrop-blur-sm rounded-xl border p-4 text-center shadow-xl ".concat(ve?"bg-emerald-900/95 border-emerald-500/40":"bg-amber-900/95 border-amber-500/40"),children:ve?(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("h2",{className:"text-lg font-semibold text-emerald-200 mb-2",children:"\ud83c\udf89 Runda avslutad!"}),(0,wo.jsx)("p",{className:"text-emerald-100 text-sm mb-3",children:"Du har svarat p\xe5 alla fr\xe5gor och \xe4r tillbaka vid startpunkten!"}),(0,wo.jsx)("button",{type:"button",onClick:ye,className:"w-full rounded-lg bg-emerald-500 px-4 py-2 font-semibold text-black hover:bg-emerald-400",children:"Se resultat och st\xe4llning"})]}):(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("h2",{className:"text-lg font-semibold text-amber-200 mb-2",children:"\ud83d\udeb6 Alla fr\xe5gor besvarade!"}),(0,wo.jsx)("p",{className:"text-amber-100 text-sm mb-3",children:F?"Du har svarat p\xe5 alla fr\xe5gor. Klicka f\xf6r att se resultat.":"G\xe5 tillbaka till startpunkten for att avsluta rundan."}),F?(0,wo.jsx)("button",{type:"button",onClick:ye,className:"w-full rounded-lg bg-amber-500 px-4 py-2 font-semibold text-black hover:bg-amber-400",children:"Se resultat och st\xe4llning"}):(0,wo.jsxs)("p",{className:"text-xs text-amber-200",children:["Avst\xe5nd till startpunkt: ",k?(we=k,null==we?"-":we<1e3?"".concat(we," m"):"".concat((we/1e3).toFixed(1)," km")):"?"]})]})})})]}),S&&C&&(0,wo.jsx)(Gc,{questionId:C.id,questionText:C.text,onClose:()=>{N(!1),j(null)},onReported:()=>{N(!1),j(null)}}),E&&(0,wo.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",onClick:()=>T(!1),children:(0,wo.jsxs)("div",{className:"bg-slate-900 rounded-2xl border border-cyan-500/40 p-6 max-w-md w-full shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,wo.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,wo.jsxs)("h2",{className:"text-xl font-bold text-white",children:["Dela ",i.name]}),(0,wo.jsx)("button",{onClick:()=>T(!1),className:"text-gray-400 hover:text-white text-2xl leading-none",children:"\xd7"})]}),(0,wo.jsxs)("div",{className:"space-y-4",children:[(0,wo.jsxs)("div",{className:"text-center",children:[(0,wo.jsx)("p",{className:"text-sm text-gray-300 mb-3",children:"Skanna QR-koden eller anv\xe4nd koden f\xf6r att bjuda in fler deltagare"}),(0,wo.jsx)("div",{className:"flex justify-center mb-4",children:(0,wo.jsx)(Rl,{dataUrl:ce,isLoading:ue,error:de})})]}),(0,wo.jsxs)("div",{className:"bg-slate-800 rounded-lg p-4 border border-slate-600",children:[(0,wo.jsx)("p",{className:"text-xs text-gray-400 mb-1",children:"Anslutningskod:"}),(0,wo.jsx)("p",{className:"text-2xl font-mono font-bold text-cyan-400 tracking-widest text-center",children:i.joinCode})]}),(0,wo.jsxs)("div",{className:"flex gap-2",children:[(0,wo.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(i.joinCode)},className:"flex-1 rounded-lg bg-purple-500 px-4 py-2 font-semibold text-white hover:bg-purple-400",children:"Kopiera kod"}),(0,wo.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(le)},className:"flex-1 rounded-lg bg-cyan-500 px-4 py-2 font-semibold text-black hover:bg-cyan-400",children:"Kopiera l\xe4nk"})]}),(0,wo.jsx)("div",{className:"text-xs text-gray-400 text-center",children:(0,wo.jsx)("a",{href:le,target:"_blank",rel:"noopener noreferrer",className:"text-cyan-400 hover:underline break-all",children:le})})]})]})})]}):(0,wo.jsx)("div",{className:"mx-auto max-w-2xl px-4 py-8 text-center",children:(0,wo.jsx)("p",{className:"text-gray-300",children:"H\xe4mtar rundainformation\u2026"})});var we},Jc={active:{label:"Aktiv",dotClass:"bg-emerald-400",pillClass:"text-emerald-200 border border-emerald-500/40 bg-emerald-500/10"},inactive:{label:"Fr\xe5nkopplad",dotClass:"bg-amber-400",pillClass:"text-amber-200 border border-amber-500/40 bg-amber-500/10"},finished:{label:"Klar",dotClass:"bg-slate-400",pillClass:"text-slate-200 border border-slate-500/40 bg-slate-500/10"}},$c=e=>Jc[e]||Jc.inactive,Xc=()=>{const{runId:e}=$(),n=J(),{currentRun:r,participants:o,loadRunById:i,refreshParticipants:a,closeRun:s,deleteRun:l}=sa(),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(!1),[f,p]=(0,t.useState)("sv"),m=r?fc(r.joinCode):"",{dataUrl:g,isLoading:v,error:y}=gc(m,320);(0,t.useEffect)(()=>{r&&r.id===e||i(e).catch(e=>console.warn("Kunde inte ladda runda",e))},[r,i,e]),(0,t.useEffect)(()=>{const e=setInterval(()=>{a().catch(e=>console.warn("Kunde inte uppdatera deltagare",e))},5e3);return()=>clearInterval(e)},[a]);const b=(0,t.useMemo)(()=>r?r.questionIds.reduce((e,t)=>{const n=bi(t,f);return n&&(e[t]=n),e},{}):{},[r,f]);if(!r)return(0,wo.jsx)("div",{className:"mx-auto max-w-3xl px-4 py-8 text-center",children:(0,wo.jsx)("p",{className:"text-gray-300",children:"H\xe4mtar rundainformation..."})});const x=[...o].sort((e,t)=>t.score-e.score);return(0,wo.jsxs)("div",{className:"min-h-screen bg-slate-950 text-white",children:[c&&(0,wo.jsx)(yc,{dataUrl:g,onClose:()=>u(!1)}),d&&(0,wo.jsx)(bc,{checkpoints:r.checkpoints,route:r.route,onClose:()=>h(!1)}),(0,wo.jsx)("header",{className:"bg-slate-900 border-b border-slate-800 px-4 py-3 sticky top-0 z-40",children:(0,wo.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wo.jsx)("h1",{className:"text-lg font-bold truncate",children:r.name}),(0,wo.jsx)("button",{onClick:()=>n("/"),className:"rounded bg-slate-700 px-3 py-2 text-sm font-semibold hover:bg-slate-600",children:"Tillbaka"})]})}),(0,wo.jsxs)("div",{className:"px-4 py-6 space-y-6",children:[(0,wo.jsxs)("div",{className:"rounded-lg border border-cyan-500/40 bg-slate-900/60 p-6 text-center",children:[(0,wo.jsx)("h2",{className:"text-lg font-semibold mb-4 text-cyan-200",children:"Bjud in deltagare"}),(0,wo.jsx)("div",{className:"flex justify-center cursor-pointer",onClick:()=>u(!0),children:(0,wo.jsx)(Rl,{dataUrl:g,isLoading:v,error:y})}),(0,wo.jsxs)("div",{className:"mt-4",children:[(0,wo.jsx)("p",{className:"text-sm text-gray-300 mb-2",children:"Anslutningskod:"}),(0,wo.jsx)("div",{className:"text-2xl font-mono font-bold text-white bg-slate-800 rounded-lg py-2 px-4",children:r.joinCode})]}),(0,wo.jsx)("div",{className:"mt-4 text-center",children:(0,wo.jsx)("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"text-purple-300 hover:underline break-all",children:m})})]}),(0,wo.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,wo.jsx)("button",{onClick:()=>n("/run/".concat(e,"/results")),className:"rounded-lg bg-emerald-500 px-4 py-3 font-semibold text-black hover:bg-emerald-400",children:"Se resultat"}),(0,wo.jsx)("button",{onClick:()=>h(!0),className:"rounded-lg bg-blue-500 px-4 py-3 font-semibold text-black hover:bg-blue-400",children:"Visa karta"}),(0,wo.jsx)("button",{onClick:async()=>{window.confirm("\xc4r du s\xe4ker p\xe5 att du vill avsluta spelet? Nya spelare kommer inte kunna ansluta.")&&await s()},className:"rounded-lg bg-orange-600 px-4 py-3 font-semibold text-white hover:bg-orange-500",children:"Avsluta spel"})]}),(0,wo.jsxs)("div",{className:"rounded-lg border border-slate-600 bg-slate-900/60 p-4",children:[(0,wo.jsxs)("h2",{className:"text-lg font-semibold mb-4 text-cyan-200",children:["Live Leaderboard (",o.length,")"]}),0===o.length?(0,wo.jsx)("div",{className:"text-center py-8",children:(0,wo.jsx)("p",{className:"text-gray-400",children:"V\xe4ntar p\xe5 att spelare ska ansluta..."})}):(0,wo.jsx)("div",{className:"space-y-3",children:x.map((e,t)=>{const n=$c(e.status);return(0,wo.jsx)("div",{className:"rounded-lg border border-slate-700 bg-slate-800/40 p-4",children:(0,wo.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wo.jsxs)("div",{className:"flex items-center gap-3",children:[(0,wo.jsxs)("span",{className:"text-xl",children:[t+1,"."]}),(0,wo.jsx)("p",{className:"font-semibold",children:e.alias})]}),(0,wo.jsxs)("div",{className:"text-right",children:[(0,wo.jsxs)("p",{className:"text-lg font-bold text-cyan-300",children:[e.score," po\xe4ng"]}),(0,wo.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs font-medium ".concat(n.pillClass),children:[(0,wo.jsx)("span",{className:"h-1.5 w-1.5 rounded-full ".concat(n.dotClass)}),n.label]})]})]})},e.id)})})]}),(0,wo.jsxs)("div",{className:"rounded-lg border border-slate-600 bg-slate-900/60 p-4",children:[(0,wo.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,wo.jsxs)("h2",{className:"text-lg font-semibold text-cyan-200",children:["Fr\xe5gor (",r.questionIds.length,")"]}),(0,wo.jsxs)("div",{className:"flex gap-1 rounded-lg bg-slate-800 p-1",children:[(0,wo.jsx)("button",{type:"button",onClick:()=>p("sv"),className:"rounded-md px-3 py-1.5 text-sm font-semibold transition ".concat("sv"===f?"bg-cyan-500 text-black":"text-gray-300 hover:text-white"),children:"\ud83c\uddf8\ud83c\uddea SV"}),(0,wo.jsx)("button",{type:"button",onClick:()=>p("en"),className:"rounded-md px-3 py-1.5 text-sm font-semibold transition ".concat("en"===f?"bg-cyan-500 text-black":"text-gray-300 hover:text-white"),children:"\ud83c\uddec\ud83c\udde7 EN"})]})]}),(0,wo.jsx)("div",{className:"space-y-3",children:r.questionIds.map((e,t)=>{const n=b[e];return(0,wo.jsxs)("div",{className:"border border-slate-700 bg-slate-800/40 rounded-lg p-3",children:[(0,wo.jsxs)("p",{className:"text-sm font-semibold text-cyan-300",children:["Fr\xe5ga #",t+1]}),(0,wo.jsx)("p",{className:"text-sm text-gray-300",children:n?n.text:"Laddar fr\xe5ga..."})]},e)})})]}),(0,wo.jsx)("div",{className:"text-center mt-4",children:(0,wo.jsx)("button",{onClick:async()=>{window.confirm("\xc4r du s\xe4ker p\xe5 att du vill radera denna runda permanent? Detta g\xe5r inte att \xe5ngra.")&&(await l(),n("/"))},className:"text-red-500 hover:underline",children:"Radera runda"})})]})]})},eu=()=>{const{runId:e}=$(),n=J(),{currentRun:r,participants:o,currentParticipant:i,loadRunById:a,refreshParticipants:s}=sa(),{currentUser:l,isAuthenticated:c}=Eo(),[u,d]=(0,t.useState)(!1),[h,f]=(0,t.useState)(!1),[p,m]=(0,t.useState)(""),[g]=(0,t.useState)(()=>"undefined"!==typeof window&&localStorage.getItem("geoquest:language")||"sv");(0,t.useEffect)(()=>{r&&r.id===e||a(e).catch(e=>console.warn("Kunde inte ladda runda",e))},[r,a,e]),(0,t.useEffect)(()=>{s().catch(e=>console.warn("Kunde inte uppdatera deltagare",e))},[s]);const v=(0,t.useMemo)(()=>[...o].sort((e,t)=>t.score!==e.score?t.score-e.score:(e.completedAt||"").localeCompare(t.completedAt||"")),[o]),y=(0,t.useMemo)(()=>i&&null!==r&&void 0!==r&&r.questionIds?r.questionIds.map((e,t)=>{var n;let r=bi(e,g);r||(r=bi(e,"sv")),r||(r=yi(e)),r||(console.warn("[RunResultsPage] Fr\xe5ga med ID ".concat(e," hittades inte")),r={id:e,text:"Fr\xe5ga ".concat(e," kunde inte laddas"),options:["Kunde inte ladda alternativ"],correctOption:0,explanation:"Denna fr\xe5ga kunde inte laddas fr\xe5n databasen."});const o=null===(n=i.answers)||void 0===n?void 0:n.find(t=>t.questionId===e),a=(null===o||void 0===o?void 0:o.correct)||!1,s=null===o||void 0===o?void 0:o.answerIndex;return{questionNumber:t+1,question:r.text,options:r.options,correctOption:r.correctOption,userSelectedOption:s,isCorrect:a,explanation:r.explanation}}):[],[i,r,g]),b=r&&l&&(r.createdBy===l.id||r.createdByName===l.name);return r?(0,wo.jsxs)("div",{className:"min-h-screen bg-slate-950",children:[(0,wo.jsx)(Tl,{title:"Resultat - ".concat(r.name)}),(0,wo.jsxs)("div",{className:"mx-auto max-w-4xl px-4 pt-24 pb-8 space-y-6",children:[(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[(0,wo.jsx)("div",{children:(0,wo.jsxs)("p",{className:"text-gray-400",children:["Status: ",r.status]})}),(0,wo.jsx)("div",{className:"flex flex-col sm:flex-row gap-2",children:i&&(0,wo.jsxs)("button",{type:"button",onClick:()=>d(!u),className:"rounded-lg bg-slate-700 px-3 py-1.5 text-sm font-semibold text-gray-200 hover:bg-slate-600",children:[u?"D\xf6lj":"Visa"," mina svar"]})})]}),p&&(0,wo.jsx)("div",{className:"rounded-2xl border border-emerald-500/40 bg-emerald-900/30 px-4 py-3 text-emerald-100",children:p}),(0,wo.jsxs)("section",{className:"rounded border border-emerald-500/40 bg-emerald-900/20 p-6",children:[(0,wo.jsx)("h2",{className:"text-xl font-semibold mb-3 text-emerald-200",children:"Ledartavla"}),(0,wo.jsxs)("ol",{className:"space-y-2",children:[0===v.length&&(0,wo.jsx)("li",{className:"text-gray-300",children:"Inga svar registrerade \xe4nnu."}),v.map((e,t)=>{const n=$c(e.status);return(0,wo.jsxs)("li",{className:"flex items-center justify-between rounded bg-emerald-900/40 px-3 py-2",children:[(0,wo.jsxs)("div",{className:"flex items-center gap-2",children:[(0,wo.jsx)("span",{className:"h-2 w-2 rounded-full ".concat(n.dotClass)}),(0,wo.jsxs)("span",{children:["#",t+1," ",e.alias,e.isAnonymous?" (anonym)":""]})]}),(0,wo.jsxs)("div",{className:"flex items-center gap-2",children:[(0,wo.jsxs)("span",{className:"font-semibold",children:[e.score," po\xe4ng"]}),(0,wo.jsx)("span",{className:"inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs font-semibold ".concat(n.pillClass),children:n.label})]})]},e.id)})]})]}),u&&i&&y.length>0&&(0,wo.jsxs)("section",{className:"rounded border border-cyan-500/40 bg-cyan-900/10 p-6",children:[(0,wo.jsxs)("h2",{className:"text-xl font-semibold mb-3 text-cyan-200",children:["Dina detaljerade resultat (",i.score,"/",y.length," r\xe4tt)"]}),(0,wo.jsx)("div",{className:"space-y-4",children:y.map(e=>(0,wo.jsxs)("div",{className:"rounded-lg border p-4 ".concat(e.isCorrect?"border-emerald-500/40 bg-emerald-900/20":"border-red-500/40 bg-red-900/20"),children:[(0,wo.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,wo.jsxs)("h3",{className:"font-semibold text-white",children:["Fr\xe5ga ",e.questionNumber,": ",e.question]}),(0,wo.jsx)("span",{className:"inline-flex items-center rounded-full px-2 py-1 text-xs font-semibold ".concat(e.isCorrect?"bg-emerald-500/20 text-emerald-200":"bg-red-500/20 text-red-200"),children:e.isCorrect?"\u2713 R\xe4tt":"\u2717 Fel"})]}),(0,wo.jsx)("div",{className:"space-y-2 mb-3",children:e.options.map((t,n)=>{const r=n===e.correctOption,o=n===e.userSelectedOption;return(0,wo.jsxs)("div",{className:"rounded px-3 py-2 text-sm ".concat(r&&o?"bg-emerald-500/30 border border-emerald-500/50 text-emerald-100":o&&!r?"bg-red-500/30 border border-red-500/50 text-red-100":r?"bg-emerald-500/20 border border-emerald-500/30 text-emerald-200":"bg-slate-800/50 border border-slate-600 text-gray-300"),children:[t,o&&(0,wo.jsx)("span",{className:"ml-2 text-xs",children:"\u2190 Ditt svar"}),r&&(0,wo.jsx)("span",{className:"ml-2 text-xs",children:"\u2190 R\xe4tt svar"})]},n)})}),e.explanation&&(0,wo.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-3 text-sm text-gray-300",children:[(0,wo.jsx)("span",{className:"font-semibold text-cyan-200",children:"F\xf6rklaring: "}),e.explanation]})]},e.questionNumber))})]}),(0,wo.jsxs)("section",{className:"rounded border border-slate-600 bg-slate-900/60 p-6",children:[(0,wo.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"Detaljer"}),(0,wo.jsx)("div",{className:"overflow-x-auto",children:(0,wo.jsxs)("table",{className:"min-w-full divide-y divide-slate-800 text-sm",children:[(0,wo.jsx)("thead",{className:"bg-slate-800/70",children:(0,wo.jsxs)("tr",{children:[(0,wo.jsx)("th",{className:"px-3 py-2 text-left",children:"Deltagare"}),(0,wo.jsx)("th",{className:"px-3 py-2 text-left",children:"R\xe4tt svar"}),(0,wo.jsx)("th",{className:"px-3 py-2 text-left",children:"Tidsst\xe4mpel"})]})}),(0,wo.jsx)("tbody",{className:"divide-y divide-slate-800",children:v.map(e=>(0,wo.jsxs)("tr",{children:[(0,wo.jsx)("td",{className:"px-3 py-2",children:e.alias}),(0,wo.jsxs)("td",{className:"px-3 py-2",children:[e.score," / ",r.questionCount]}),(0,wo.jsx)("td",{className:"px-3 py-2 text-gray-400",children:e.completedAt?new Date(e.completedAt).toLocaleString():"P\xe5g\xe5ende"})]},e.id))})]})})]}),(0,wo.jsxs)("div",{className:"flex flex-wrap gap-3",children:[i&&(0,wo.jsx)("button",{type:"button",onClick:()=>n("/run/".concat(r.id,"/play")),className:"rounded bg-cyan-500 px-4 py-2 font-semibold text-black hover:bg-cyan-400",children:"Tillbaka till rundan"}),b&&(0,wo.jsx)("button",{type:"button",onClick:()=>n("/run/".concat(r.id,"/admin")),className:"rounded bg-indigo-600 px-4 py-2 font-semibold text-white hover:bg-indigo-700",children:"Administrera"}),c&&(0,wo.jsx)("button",{type:"button",onClick:()=>n("/my-runs"),className:"rounded bg-purple-600 px-4 py-2 font-semibold text-white hover:bg-purple-700",children:"Mina rundor"}),(0,wo.jsx)("button",{type:"button",onClick:()=>{m(""),f(!0)},disabled:h,className:"rounded bg-emerald-600 px-4 py-2 font-semibold text-white transition-colors hover:bg-emerald-500 disabled:opacity-60",children:"St\xf6d RouteQuest (20 kr)"}),(0,wo.jsx)("button",{type:"button",onClick:()=>n("/"),className:"rounded bg-slate-700 px-4 py-2 font-semibold text-gray-200 hover:bg-slate-600",children:"Startsidan"})]}),(0,wo.jsx)(xl,{isOpen:h,runName:(null===r||void 0===r?void 0:r.name)||"",amount:2e3,onSuccess:e=>{f(!1),m("Tack f\xf6r ditt st\xf6d! Donationen registrerades."),null!==e&&void 0!==e&&e.paymentIntentId&&r&&rs(2e3,e.paymentIntentId,{runId:r.id,context:"results"})},onCancel:()=>{f(!1)},runId:null===r||void 0===r?void 0:r.id,participantId:null===i||void 0===i?void 0:i.id,allowSkip:!1})]})]}):(0,wo.jsxs)("div",{className:"min-h-screen bg-slate-950",children:[(0,wo.jsx)(Tl,{title:"Resultat"}),(0,wo.jsx)("div",{className:"mx-auto max-w-2xl px-4 pt-24 text-center",children:(0,wo.jsx)("p",{className:"text-gray-300",children:"H\xe4mtar resultat..."})})]})},tu=e=>{let{currentPage:t,totalItems:n,itemsPerPage:r,onPageChange:o}=e;const i=Math.ceil(n/r);if(i<=1)return null;const a=e=>{e>=1&&e<=i&&o(e)};return(0,wo.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-8",children:[(0,wo.jsx)("button",{onClick:()=>a(t-1),disabled:1===t,className:"px-3 py-1 rounded-md text-sm font-medium bg-slate-700 text-gray-300 hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"F\xf6reg\xe5ende"}),(()=>{const e=[];for(let n=1;n<=i;n++)e.push((0,wo.jsx)("button",{onClick:()=>a(n),className:"px-3 py-1 rounded-md text-sm font-medium ".concat(t===n?"bg-cyan-500 text-black":"bg-slate-700 text-gray-300 hover:bg-slate-600"),children:n},n));return e})(),(0,wo.jsx)("button",{onClick:()=>a(t+1),disabled:t===i,className:"px-3 py-1 rounded-md text-sm font-medium bg-slate-700 text-gray-300 hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"N\xe4sta"})]})},nu=()=>{const e=J(),{currentUser:n,isAuthenticated:r}=Eo(),[o,i]=(0,t.useState)([]),[a,s]=(0,t.useState)(!0),[l,c]=(0,t.useState)(new Set),[u,d]=(0,t.useState)(1),[h,f]=(0,t.useState)(25),[p,m]=(0,t.useState)({isOpen:!1,title:"",message:"",type:"info"});(0,t.useEffect)(()=>{(async()=>{s(!0);try{let e=[];if(r&&n){const t=await ta.listRuns();e=t.filter(e=>e.createdBy===n.id||e.createdByName===n.name)}else{const t=za(),n=t.map(e=>e.runId);if(n.length>0&&(e=await ta.listRunsByIds(n),e.length<n.length)){console.warn("[MyRunsPage] Varning: Hittade bara",e.length,"av",n.length,"rundor i Firestore");const r=n.filter(t=>!e.some(e=>e.id===t));if(console.warn("[MyRunsPage] Saknade rundor:",r),r.length>0){const e=t.filter(e=>!r.includes(e.runId));localStorage.setItem("geoquest:local:createdRuns",JSON.stringify(e))}}}const t=e.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt));i(t)}catch(e){console.error("Kunde inte ladda rundor:",e)}finally{s(!1)}})()},[n,r]);const g=e=>{if(!e)return"Ok\xe4nt datum";try{return new Date(e).toLocaleDateString("sv-SE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return"Ok\xe4nt datum"}},v=e=>{switch(e){case"hosted":return"Administrerad";case"generated":return"Auto-genererad";case"route-based":return"Rutt-baserad";case"distance-based":return"Distans-baserad";case"time-based":return"Tids-baserad";default:return e||"Ok\xe4nd"}},y=e=>{switch(e){case"active":return"Aktiv";case"completed":return"Avslutad";case"draft":return"Utkast";default:return e||"Ok\xe4nd"}},b=e=>{switch(e){case"active":return"text-green-400";case"completed":default:return"text-gray-400";case"draft":return"text-yellow-400"}},x=Math.ceil(o.length/h),w=(u-1)*h,_=w+h,k=o.slice(w,_);return a?(0,wo.jsxs)("div",{className:"min-h-screen bg-slate-950",children:[(0,wo.jsx)(Tl,{title:"Mina rundor"}),(0,wo.jsx)("div",{className:"max-w-4xl mx-auto text-center pt-24 px-4",children:(0,wo.jsx)("div",{className:"text-lg text-gray-100",children:"Laddar dina rundor..."})})]}):(0,wo.jsxs)("div",{className:"min-h-screen bg-slate-950",children:[(0,wo.jsx)(Tl,{title:"Mina rundor"}),(0,wo.jsx)("div",{className:"max-w-6xl mx-auto pt-24 px-4 pb-8",children:0===o.length?(0,wo.jsxs)("div",{className:"text-center py-12",children:[(0,wo.jsx)("div",{className:"text-gray-300 text-lg mb-4",children:"Du har inte skapat n\xe5gra rundor \xe4n"}),(0,wo.jsx)("button",{onClick:()=>e("/generate"),className:"bg-green-600 hover:bg-green-700 px-6 py-3 rounded font-medium text-white",children:"Generera din f\xf6rsta runda"})]}):(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("div",{className:"mb-6 flex flex-wrap items-center justify-between gap-4",children:(0,wo.jsxs)("div",{className:"flex gap-3",children:[(0,wo.jsx)("button",{onClick:()=>e("/generate"),className:"bg-green-600 hover:bg-green-700 px-4 py-2 rounded font-medium text-white",children:"Generera runda"}),(0,wo.jsx)("button",{onClick:()=>{l.size===o.length?c(new Set):c(new Set(o.map(e=>e.id)))},className:"bg-slate-700 hover:bg-slate-600 px-4 py-2 rounded font-medium text-white",children:l.size===o.length?"Avmarkera alla":"Markera alla"}),l.size>0&&(0,wo.jsxs)("button",{onClick:async()=>{if(0!==l.size&&window.confirm("\xc4r du s\xe4ker p\xe5 att du vill radera ".concat(l.size," runda(r)?")))try{if(r){const e=Array.from(l).map(e=>ta.deleteRun(e));await Promise.all(e)}const e=za().filter(e=>!l.has(e.runId));localStorage.setItem("geoquest:local:createdRuns",JSON.stringify(e)),i(e=>e.filter(e=>!l.has(e.id))),c(new Set)}catch(e){console.error("Kunde inte radera rundor:",e),m({isOpen:!0,title:"Kunde inte radera rundor",message:"Kunde inte radera alla rundor. Se konsolen f\xf6r detaljer.",type:"error"})}},className:"bg-red-500 hover:bg-red-400 px-4 py-2 rounded font-medium text-white",children:["Radera markerade (",l.size,")"]})]})}),(0,wo.jsx)(tu,{currentPage:u,totalPages:x,onPageChange:d,itemsPerPage:h,totalItems:o.length,onItemsPerPageChange:f}),(0,wo.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:k.map(t=>{var n;return(0,wo.jsxs)("div",{className:"bg-slate-800 border rounded-lg p-6 hover:bg-slate-750 transition-colors ".concat(l.has(t.id)?"border-cyan-500":"border-slate-600"),children:[(0,wo.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,wo.jsx)("input",{type:"checkbox",checked:l.has(t.id),onChange:()=>{return e=t.id,void c(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n});var e},className:"mt-1 w-5 h-5 rounded"}),(0,wo.jsx)("div",{className:"flex-1 min-w-0",children:(0,wo.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,wo.jsx)("h3",{className:"text-lg font-semibold text-white truncate",children:t.name||"Namnl\xf6s runda"}),(0,wo.jsx)("span",{className:"text-sm font-medium ".concat(b(t.status)),children:y(t.status)})]})})]}),(0,wo.jsxs)("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[(0,wo.jsxs)("div",{className:"flex justify-between",children:[(0,wo.jsx)("span",{children:"Typ:"}),(0,wo.jsx)("span",{children:v(t.type)})]}),(0,wo.jsxs)("div",{className:"flex justify-between",children:[(0,wo.jsx)("span",{children:"Skapad:"}),(0,wo.jsx)("span",{children:g(t.createdAt)})]}),(0,wo.jsxs)("div",{className:"flex justify-between",children:[(0,wo.jsx)("span",{children:"Fr\xe5gor:"}),(0,wo.jsx)("span",{children:t.questionCount||(null===(n=t.checkpoints)||void 0===n?void 0:n.length)||0})]}),(0,wo.jsxs)("div",{className:"flex justify-between",children:[(0,wo.jsx)("span",{children:"L\xe4ngd:"}),(0,wo.jsx)("span",{children:"distance-based"===t.type?"".concat(t.distanceBetweenQuestions||500,"m mellan fr\xe5gor"):"time-based"===t.type?"".concat(t.minutesBetweenQuestions||5," min mellan fr\xe5gor"):t.lengthMeters?"".concat(Math.round(t.lengthMeters/1e3)," km"):"Ok\xe4nd"})]}),(0,wo.jsxs)("div",{className:"flex justify-between",children:[(0,wo.jsx)("span",{children:"Kod:"}),(0,wo.jsx)("span",{className:"font-mono text-purple-300",children:t.joinCode||"Ingen"})]})]}),t.description&&(0,wo.jsx)("p",{className:"text-sm text-gray-400 mb-4 line-clamp-2",children:t.description}),(0,wo.jsxs)("div",{className:"flex gap-2",children:[(0,wo.jsx)("button",{onClick:()=>e("/run/".concat(t.id,"/admin")),className:"flex-1 bg-indigo-600 hover:bg-indigo-700 px-3 py-2 rounded text-sm font-medium",children:"Administrera"}),(0,wo.jsx)("button",{onClick:()=>e("/run/".concat(t.id,"/results")),className:"flex-1 bg-slate-600 hover:bg-slate-700 px-3 py-2 rounded text-sm font-medium",children:"Resultat"}),(0,wo.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\xc4r du s\xe4ker p\xe5 att du vill radera denna runda?"))try{r&&await ta.deleteRun(e);const t=za().filter(t=>t.runId!==e);localStorage.setItem("geoquest:local:createdRuns",JSON.stringify(t)),i(t=>t.filter(t=>t.id!==e))}catch(t){console.error("Kunde inte radera runda:",t),m({isOpen:!0,title:"Kunde inte radera runda",message:"Kunde inte radera rundan. Se konsolen f\xf6r detaljer.",type:"error"})}})(t.id),className:"bg-red-500 hover:bg-red-400 px-3 py-2 rounded text-sm font-medium",title:"Radera runda",children:"\ud83d\uddd1\ufe0f"})]})]},t.id)})}),(0,wo.jsx)(tu,{currentPage:u,totalPages:x,onPageChange:d,itemsPerPage:h,totalItems:o.length,onItemsPerPageChange:f})]})}),(0,wo.jsx)(la,{isOpen:p.isOpen,onClose:()=>m((0,To.A)((0,To.A)({},p),{},{isOpen:!1})),title:p.title,message:p.message,type:p.type})]})},ru=(e,t)=>{if(!e)return console.error("subscribeToTask called with no taskId."),()=>{};const n=(0,io.H9)(vo,"backgroundTasks",e);return(0,io.aQ)(n,n=>{n.exists()?t((0,To.A)({id:n.id},n.data())):(console.warn("Task with ID ".concat(e," not found.")),t(null))},t=>{console.error("Error listening to task ".concat(e,":"),t)})},ou=e=>e?new Promise((t,n)=>{const r=ru(e,e=>{if(e)if("completed"===e.status)r(),t(e);else if("failed"===e.status||"cancelled"===e.status){const t=e.error||"Background task failed";r(),n(new Error(t))}})}):Promise.reject(new Error("No taskId provided")),iu=()=>{const[e,n]=(0,t.useState)([]),[r,o]=(0,t.useState)(!1),[i,a]=(0,t.useState)(85),[s,l]=(0,t.useState)(new Set),[c,u]=(0,t.useState)({isOpen:!1,title:"",message:"",type:"info"}),d=()=>{o(!0);try{const e=Si("sv",i/100),t=[],r=new Set;for(const n of e){const e=n.pairId||[n.question1.id,n.question2.id].sort().join("-");r.has(e)?console.warn("[DuplicateQuestionsPanel] Skippar dublett av dublett:",e):(r.add(e),t.push(n))}n(t)}catch(e){console.error("Fel vid dubletts\xf6kning:",e)}finally{o(!1)}},h=async e=>{if(window.confirm("\xc4r du s\xe4ker p\xe5 att du vill ta bort denna fr\xe5ga?"))try{await _i(e),l(t=>new Set([...t,e])),setTimeout(d,500)}catch(t){u({isOpen:!0,title:"Kunde inte ta bort fr\xe5ga",message:t.message,type:"error"})}},f=e.filter(e=>!s.has(e.question1.id)&&!s.has(e.question2.id));return(0,wo.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[(0,wo.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h2",{className:"text-xl font-bold text-white",children:"Dubblettfr\xe5gor"}),(0,wo.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"S\xf6k efter liknande fr\xe5gor i databasen"})]}),(0,wo.jsxs)("div",{className:"flex gap-2",children:[(0,wo.jsx)("button",{onClick:d,disabled:r,className:"px-4 py-2 bg-cyan-500 text-black rounded-lg font-semibold hover:bg-cyan-400 disabled:bg-slate-600 disabled:text-gray-400",children:r?"S\xf6ker...":"\ud83d\udd0d S\xf6k dubletter"}),f.length>0&&(0,wo.jsxs)("button",{onClick:async()=>{const e="Detta kommer att automatiskt ta bort ".concat(f.length," dublettfr\xe5gor.\n\n")+"F\xf6r varje par beh\xe5lls den f\xf6rsta fr\xe5gan och den andra tas bort.\n\n\xc4r du s\xe4ker p\xe5 att du vill forts\xe4tta?";if(!window.confirm(e))return;o(!0);let t=0;const n=[];try{for(const o of f)try{await _i(o.question2.id),t++,l(e=>new Set([...e,o.question2.id]))}catch(r){console.error("[AutoClean] Fel vid borttagning av ".concat(o.question2.id,":"),r),n.push("".concat(o.question2.id,": ").concat(r.message))}const e="Automatisk dublettrensning klar!\n\n"+"Borttagna fr\xe5gor: ".concat(t,"\n")+(n.length>0?"Fel: ".concat(n.length,"\n\n").concat(n.join("\n")):"");u({isOpen:!0,title:"Dublettrensning klar",message:e,type:n.length>0?"warning":"success"}),setTimeout(d,1e3)}catch(r){u({isOpen:!0,title:"Fel vid rensning",message:r.message,type:"error"})}finally{o(!1)}},disabled:r,className:"px-4 py-2 bg-red-500 text-white rounded-lg font-semibold hover:bg-red-400 disabled:bg-slate-600 disabled:text-gray-400",children:["\ud83e\uddf9 Auto-rensa (",f.length,")"]})]})]}),(0,wo.jsxs)("div",{className:"mb-6",children:[(0,wo.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Likhetstr\xf6sk: ",i,"%"]}),(0,wo.jsx)("input",{type:"range",min:"70",max:"100",value:i,onChange:e=>a(Number(e.target.value)),className:"w-full"}),(0,wo.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[(0,wo.jsx)("span",{children:"70% - M\xe5nga tr\xe4ffar"}),(0,wo.jsx)("span",{children:"100% - Endast identiska"})]})]}),0===f.length&&!r&&(0,wo.jsx)("div",{className:"text-center py-8 text-gray-400",children:0===e.length?'Klicka p\xe5 "S\xf6k dubletter" f\xf6r att b\xf6rja':"\u2705 Inga dubletter hittades!"}),f.length>0&&(0,wo.jsxs)("div",{className:"space-y-4",children:[(0,wo.jsxs)("div",{className:"text-sm text-gray-300 mb-4",children:["Hittade ",f.length," potentiella dubletter"]}),f.map((e,t)=>{var n,r;return(0,wo.jsxs)("div",{className:"bg-slate-900 rounded-lg p-4 border border-amber-500/30",children:[(0,wo.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,wo.jsxs)("span",{className:"text-xs font-bold text-amber-400",children:[e.similarity,"% likhet"]}),(0,wo.jsxs)("span",{className:"text-xs text-gray-500",children:["Dublett #",t+1]})]}),(0,wo.jsx)("div",{className:"mb-3 pb-3 border-b border-slate-700",children:(0,wo.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,wo.jsx)("div",{className:"text-xs text-gray-400",children:"Fr\xe5ga 1:"}),(0,wo.jsx)("code",{className:"text-xs px-1.5 py-0.5 bg-slate-800 text-cyan-400 rounded font-mono",children:e.question1.id})]}),(0,wo.jsx)("div",{className:"text-sm text-white",children:e.text1}),(0,wo.jsxs)("div",{className:"mt-1 flex gap-2 flex-wrap",children:[(0,wo.jsx)("span",{className:"text-xs px-2 py-0.5 bg-purple-500/20 text-purple-300 rounded",children:e.question1.difficulty}),(0,wo.jsx)("span",{className:"text-xs px-2 py-0.5 bg-blue-500/20 text-blue-300 rounded",children:e.question1.audience}),(0,wo.jsx)("span",{className:"text-xs text-gray-500",children:null===(n=e.question1.categories)||void 0===n?void 0:n.join(", ")})]})]}),(0,wo.jsx)("button",{onClick:()=>h(e.question1.id),className:"ml-4 px-3 py-1 bg-red-500/20 text-red-300 rounded text-xs hover:bg-red-500/30 flex-shrink-0",children:"Ta bort"})]})}),(0,wo.jsx)("div",{children:(0,wo.jsxs)("div",{className:"flex items-start justify-between",children:[(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,wo.jsx)("div",{className:"text-xs text-gray-400",children:"Fr\xe5ga 2:"}),(0,wo.jsx)("code",{className:"text-xs px-1.5 py-0.5 bg-slate-800 text-cyan-400 rounded font-mono",children:e.question2.id})]}),(0,wo.jsx)("div",{className:"text-sm text-white",children:e.text2}),(0,wo.jsxs)("div",{className:"mt-1 flex gap-2 flex-wrap",children:[(0,wo.jsx)("span",{className:"text-xs px-2 py-0.5 bg-purple-500/20 text-purple-300 rounded",children:e.question2.difficulty}),(0,wo.jsx)("span",{className:"text-xs px-2 py-0.5 bg-blue-500/20 text-blue-300 rounded",children:e.question2.audience}),(0,wo.jsx)("span",{className:"text-xs text-gray-500",children:null===(r=e.question2.categories)||void 0===r?void 0:r.join(", ")})]})]}),(0,wo.jsx)("button",{onClick:()=>h(e.question2.id),className:"ml-4 px-3 py-1 bg-red-500/20 text-red-300 rounded text-xs hover:bg-red-500/30 flex-shrink-0",children:"Ta bort"})]})})]},"".concat(e.question1.id,"-").concat(e.question2.id))})]}),(0,wo.jsx)(la,{isOpen:c.isOpen,onClose:()=>u((0,To.A)((0,To.A)({},c),{},{isOpen:!1})),title:c.title,message:c.message,type:c.type})]})},au=()=>{const[e,n]=(0,t.useState)(null),[r,o]=(0,t.useState)(!1),[i,a]=(0,t.useState)(null),[s,l]=(0,t.useState)({isOpen:!1,title:"",message:"",type:"info"});return(0,wo.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[(0,wo.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h2",{className:"text-xl font-bold text-white",children:"Validering av fr\xe5gor"}),(0,wo.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Kontrollera att alla fr\xe5gor i databasen \xe4r korrekt formaterade"})]}),(0,wo.jsx)("button",{onClick:async()=>{o(!0),n(null);try{const o=await vi(),i=o.length;if(0===i)return void n({total:0,valid:0,invalid:0,results:[]});a({current:0,total:i});const s=[];let l=0,c=0;for(let n=0;n<i;n+=1){const u=o[n],d=Ai(u,"sv"),h=d.errors||[],f={validationType:"structure",valid:d.valid,issues:h,reasoning:d.valid?"Strukturvalidering: Godk\xe4nd":"Strukturvalidering: ".concat(h.join(", ")),checkedAt:(new Date).toISOString()};if(d.valid){l+=1;try{await ji(u.id,f)}catch(r){console.error("[ValidationPanel] Kunde inte uppdatera strukturvalidering:",r)}}else{var e,t;c+=1;const o=(null===(e=u.languages)||void 0===e||null===(t=e.sv)||void 0===t?void 0:t.text)||u.text||"";s.push({index:n,questionId:u.id,questionText:o,errors:h,valid:!1});try{await Ei(u.id,f)}catch(r){console.error("[ValidationPanel] Kunde inte markera fr\xe5ga som ogiltig:",r)}}a({current:n+1,total:i})}n({total:i,valid:l,invalid:c,results:s})}catch(r){console.error("Fel vid validering:",r),l({isOpen:!0,title:"Fel vid validering",message:"Kunde inte validera fr\xe5gor: "+r.message,type:"error"})}finally{a(null),o(!1)}},disabled:r,className:"px-4 py-2 bg-cyan-500 text-black rounded-lg font-semibold hover:bg-cyan-400 disabled:bg-slate-600 disabled:text-gray-400",children:r?"Validerar...":"\u2705 Validera alla fr\xe5gor"})]}),i&&(0,wo.jsxs)("div",{className:"mb-4 rounded-lg border border-cyan-500/30 bg-cyan-500/10 p-4",children:[(0,wo.jsxs)("div",{className:"flex items-center justify-between text-sm text-cyan-200",children:[(0,wo.jsx)("span",{children:"Validerar fr\xe5gor..."}),(0,wo.jsxs)("span",{children:[i.current," / ",i.total]})]}),(0,wo.jsx)("div",{className:"mt-2 h-2 w-full rounded bg-slate-900",children:(0,wo.jsx)("div",{className:"h-full rounded bg-cyan-400 transition-all",style:{width:"".concat(i.total>0?Math.min(100,Math.round(i.current/i.total*100)):0,"%")}})})]}),e&&(0,wo.jsxs)("div",{className:"space-y-4",children:[(0,wo.jsxs)("div",{className:"bg-slate-900 rounded-lg p-4 border border-slate-700",children:[(0,wo.jsx)("h3",{className:"text-lg font-semibold text-white mb-3",children:"\xd6versikt"}),(0,wo.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,wo.jsxs)("div",{className:"text-center",children:[(0,wo.jsx)("div",{className:"text-3xl font-bold text-cyan-400",children:e.total}),(0,wo.jsx)("div",{className:"text-sm text-gray-400 mt-1",children:"Totalt fr\xe5gor"})]}),(0,wo.jsxs)("div",{className:"text-center",children:[(0,wo.jsx)("div",{className:"text-3xl font-bold text-green-400",children:e.valid}),(0,wo.jsx)("div",{className:"text-sm text-gray-400 mt-1",children:"Giltiga"})]}),(0,wo.jsxs)("div",{className:"text-center",children:[(0,wo.jsx)("div",{className:"text-3xl font-bold text-red-400",children:e.invalid}),(0,wo.jsx)("div",{className:"text-sm text-gray-400 mt-1",children:"Ogiltiga"})]})]})]}),e.invalid>0?(0,wo.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4",children:[(0,wo.jsxs)("h3",{className:"text-lg font-semibold text-red-400 mb-3",children:["\u26a0\ufe0f Hittade ",e.invalid," ogiltiga fr\xe5gor"]}),(0,wo.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:e.results.map((e,t)=>(0,wo.jsx)("div",{className:"bg-slate-900 rounded p-3 border border-red-500/20",children:(0,wo.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,wo.jsxs)("span",{className:"text-xs text-gray-400",children:["Fr\xe5ga #",e.index+1,":"]}),(0,wo.jsx)("code",{className:"text-xs px-1.5 py-0.5 bg-slate-800 text-cyan-400 rounded font-mono",children:e.questionId})]}),(0,wo.jsxs)("div",{className:"text-sm text-white mb-2",children:[e.questionText.substring(0,80),e.questionText.length>80?"...":""]}),(0,wo.jsx)("div",{className:"space-y-1",children:e.errors.map((e,t)=>(0,wo.jsxs)("div",{className:"text-xs text-red-300 flex items-start gap-2",children:[(0,wo.jsx)("span",{className:"text-red-400",children:"\u2022"}),(0,wo.jsx)("span",{children:e})]},t))})]})})},e.questionId||t))})]}):(0,wo.jsxs)("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-6 text-center",children:[(0,wo.jsx)("div",{className:"text-4xl mb-2",children:"\u2705"}),(0,wo.jsx)("div",{className:"text-lg font-semibold text-green-400",children:"Alla fr\xe5gor \xe4r giltiga!"}),(0,wo.jsxs)("div",{className:"text-sm text-gray-400 mt-2",children:["Alla ",e.total," fr\xe5gor i databasen \xe4r korrekt formaterade."]})]})]}),!e&&!r&&!i&&(0,wo.jsx)("div",{className:"text-center py-8 text-gray-400",children:'Klicka p\xe5 "Validera alla fr\xe5gor" f\xf6r att b\xf6rja'}),(0,wo.jsx)(la,{isOpen:s.isOpen,onClose:()=>l((0,To.A)((0,To.A)({},s),{},{isOpen:!1})),title:s.title,message:s.message,type:s.type})]})},su=e=>{var n,r;let{question:o,index:i,expandedQuestion:a,setExpandedQuestion:s,handleDeleteQuestion:l,handleManualApprove:c,handleManualReject:u,handleApproveReported:d,handleRejectReported:h,isSelected:f,onSelect:p,registerTask:m,validatingQuestions:g,regeneratingEmojis:v,onValidationStart:y,onValidationEnd:b,setIndividualValidationTasks:x,setDialogConfig:w}=e;const[_,k]=(0,t.useState)("sv"),[A,S]=(0,t.useState)(!1),N=(null===(n=o.languages)||void 0===n?void 0:n.sv)||{text:o.text,options:o.options,explanation:o.explanation},C=null===(r=o.languages)||void 0===r?void 0:r.en,j=a===o.id,E="sv"===_?N:C,T=N&&C,I=Array.isArray(o.categories)?o.categories:o.category?[o.category]:[],P=(Array.isArray(o.ageGroups)?o.ageGroups:[]).map(e=>{switch(e){case"children":return"Barn";case"youth":return"Ungdom";case"adults":return"Vuxna";default:return e}}),O=o.targetAudience,M=o.aiValidationResult,L=o.structureValidationResult||("structure"===(null===M||void 0===M?void 0:M.validationType)?M:null),R=M&&"structure"!==M.validationType?M:null,D=!0===(null===L||void 0===L?void 0:L.valid),F=!1===(null===L||void 0===L?void 0:L.valid),z=!0===o.manuallyApproved||!0===o.aiValidated||!0===(null===R||void 0===R?void 0:R.valid),B=!0===o.manuallyRejected||R&&!1===R.valid;return(0,wo.jsxs)("div",{className:"rounded-lg border transition-all duration-300 p-4 ".concat(g&&g.has(o.id)?"border-yellow-400 bg-yellow-50/5 animate-pulse":v&&v.has(o.id)?"border-blue-400 bg-blue-50/5 animate-pulse":f?"border-cyan-500 bg-slate-900/60":"border-slate-700 bg-slate-900/60"),children:[(0,wo.jsxs)("div",{className:"flex items-start gap-4",children:[(0,wo.jsx)("input",{type:"checkbox",checked:f,onChange:()=>p(o.id),className:"mt-1 h-5 w-5 rounded border-gray-600 bg-slate-800 text-cyan-500 focus:ring-cyan-500"}),(0,wo.jsxs)("div",{className:"flex-1",children:[g&&g.has(o.id)&&(0,wo.jsxs)("div",{className:"mb-2 flex items-center text-yellow-400",children:[(0,wo.jsx)("div",{className:"animate-spin mr-2",children:"\u23f3"}),(0,wo.jsx)("span",{className:"text-sm font-medium",children:"AI-validering p\xe5g\xe5r..."})]}),v&&v.has(o.id)&&(0,wo.jsxs)("div",{className:"mb-2 flex items-center text-blue-400",children:[(0,wo.jsx)("div",{className:"animate-spin mr-2",children:"\ud83c\udfa8"}),(0,wo.jsx)("span",{className:"text-sm font-medium",children:"Emoji-regenerering p\xe5g\xe5r..."})]}),(0,wo.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsxs)("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[(0,wo.jsxs)("span",{className:"text-sm font-mono text-gray-400",children:["#",i+1]}),!0===o.reported&&(0,wo.jsxs)("span",{className:"inline-flex items-center rounded-full bg-yellow-500/20 px-2.5 py-0.5 text-xs font-medium text-yellow-300",title:"Rapporterad av anv\xe4ndare - i karant\xe4n",children:["\u26a0\ufe0f Rapporterad (",o.reportCount||1,")"]}),!0===o.aiValidated&&!0===o.manuallyApproved&&!o.reported&&(0,wo.jsx)("span",{className:"inline-flex items-center rounded-full bg-blue-500/20 px-2.5 py-0.5 text-xs font-medium text-blue-300",title:"Manuellt godk\xe4nd efter granskning",children:"\u2713 Manuell OK"}),!0===o.manuallyRejected&&!o.reported&&(0,wo.jsx)("span",{className:"inline-flex items-center rounded-full bg-orange-500/20 px-2.5 py-0.5 text-xs font-medium text-orange-300",title:"Manuellt underk\xe4nd efter granskning",children:"\u2717 Manuellt underk\xe4nd"}),F&&(0,wo.jsx)("span",{className:"inline-flex items-center rounded-full bg-red-500/20 px-2.5 py-0.5 text-xs font-medium text-red-300",title:"Strukturvalidering - problem hittades",children:"\u2717 Struktur-fel"}),D&&!F&&(0,wo.jsx)("span",{className:"inline-flex items-center rounded-full bg-emerald-500/20 px-2.5 py-0.5 text-xs font-medium text-emerald-200",title:"Strukturvalidering - godk\xe4nd",children:"\u2713 Struktur-OK"}),z&&!0!==o.manuallyRejected&&(0,wo.jsx)("span",{className:"inline-flex items-center rounded-full bg-green-500/20 px-2.5 py-0.5 text-xs font-medium text-green-300",title:"AI-validerad - Alla providers godk\xe4nde",children:"\u2713 AI-OK"}),B&&(0,wo.jsx)("span",{className:"inline-flex items-center rounded-full bg-red-500/20 px-2.5 py-0.5 text-xs font-medium text-red-300",title:"AI-validering - problem hittades",children:"\u2717 AI-fel"}),o.createdAt&&(0,wo.jsx)("span",{className:"text-xs text-gray-500",children:o.createdAt.toDate?o.createdAt.toDate().toLocaleString("sv-SE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):new Date(o.createdAt).toLocaleString("sv-SE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),P.map((e,t)=>(0,wo.jsx)("span",{className:"inline-flex items-center rounded-full bg-cyan-500/15 px-2.5 py-0.5 text-xs font-medium text-cyan-200",children:e},"age-".concat(o.id,"-").concat(e,"-").concat(t))),I.map((e,t)=>(0,wo.jsx)("span",{className:"inline-flex items-center rounded-full bg-purple-500/20 px-2.5 py-0.5 text-xs font-medium text-purple-200",children:e},"cat-".concat(o.id,"-").concat(e,"-").concat(t))),O&&(0,wo.jsx)("span",{className:"inline-flex items-center rounded-full bg-emerald-500/15 px-2.5 py-0.5 text-xs font-medium text-emerald-200",children:"swedish"===O?"Svensk m\xe5lgrupp":O}),o.difficulty&&(0,wo.jsx)("span",{className:"inline-flex items-center rounded-full bg-slate-700/60 px-2.5 py-0.5 text-xs font-medium text-gray-200",children:"kid"===o.difficulty?"Legacy: Barn":"family"===o.difficulty?"Legacy: Familj":"adult"===o.difficulty?"Legacy: Vuxen":"Legacy: ".concat(o.difficulty)}),T&&(0,wo.jsxs)("div",{className:"flex items-center rounded-full bg-slate-800 p-0.5",children:[(0,wo.jsx)("button",{onClick:()=>k("sv"),className:"px-2 py-0.5 text-xs rounded-full ".concat("sv"===_?"bg-cyan-500 text-black":"text-gray-300"),children:"SV"}),(0,wo.jsx)("button",{onClick:()=>k("en"),className:"px-2 py-0.5 text-xs rounded-full ".concat("en"===_?"bg-cyan-500 text-black":"text-gray-300"),children:"EN"})]})]}),(0,wo.jsxs)("div",{className:"flex items-center gap-4",children:[o.illustration&&(0,wo.jsx)("span",{className:"text-2xl",title:o.illustration.includes("<svg")?"SVG Illustration":"Emoji",children:o.illustration.includes("<svg")?"\ud83d\uddbc\ufe0f":o.illustration}),(0,wo.jsx)("button",{onClick:()=>s(j?null:o.id),className:"text-lg font-semibold text-left hover:text-cyan-300 transition-colors flex-1",children:(null===E||void 0===E?void 0:E.text)||("en"===_?"(No English text)":"(Ingen svensk text)")})]})]}),(0,wo.jsx)("div",{className:"flex gap-2",children:!0===o.reported?(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("button",{onClick:()=>d(o.id),className:"rounded bg-green-600 px-3 py-1 text-sm font-semibold text-white hover:bg-green-500",title:"Godk\xe4nn rapporterad fr\xe5ga - ta bort fr\xe5n karant\xe4n",children:"\u2713 Godk\xe4nn"}),(0,wo.jsx)("button",{onClick:()=>h(o.id),className:"rounded bg-red-600 px-3 py-1 text-sm font-semibold text-white hover:bg-red-500",title:"Underk\xe4nn rapporterad fr\xe5ga",children:"\u2717 Underk\xe4nn"})]}):(0,wo.jsxs)(wo.Fragment,{children:[!o.manuallyApproved&&(0,wo.jsx)("button",{onClick:()=>c(o.id),className:"rounded bg-blue-600 px-3 py-1 text-sm font-semibold text-white hover:bg-blue-500",title:"Godk\xe4nn manuellt efter granskning",children:"\u2713 Godk\xe4nn"}),!o.manuallyRejected&&(0,wo.jsx)("button",{onClick:()=>u(o.id),className:"rounded bg-orange-600 px-3 py-1 text-sm font-semibold text-white hover:bg-orange-500",title:"Underk\xe4nn manuellt",children:"\u2717 Underk\xe4nn"}),(0,wo.jsx)("button",{onClick:()=>l(o.id),className:"rounded bg-red-600 px-3 py-1 text-sm font-semibold text-white hover:bg-red-500",children:"Ta bort"})]})})]})]})]}),j&&(0,wo.jsxs)("div",{className:"mt-4 pt-4 border-t border-slate-700 space-y-4",children:[o.illustration&&(()=>{const e=o.illustrationGeneratedAt||o.migrationSvgUpdatedAt,t=o.illustrationProvider||o.migrationSvgProvider,n=!o.illustration.includes("<svg");return(0,wo.jsxs)("div",{className:"bg-slate-800/40 rounded border border-slate-600 p-4",children:[(0,wo.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,wo.jsx)("p",{className:"text-sm font-semibold text-gray-300",children:"Illustration:"}),(e||t)&&(0,wo.jsxs)("p",{className:"text-xs text-gray-400",children:[e&&(0,wo.jsx)(wo.Fragment,{children:e.toDate?e.toDate().toLocaleString("sv-SE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):new Date(e).toLocaleString("sv-SE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),t&&" \xb7 ".concat(t.charAt(0).toUpperCase()+t.slice(1))]})]}),(0,wo.jsx)("div",{className:"mx-auto w-full max-w-xs",children:n?(0,wo.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,wo.jsx)("span",{className:"text-8xl",role:"img","aria-label":"Question illustration",children:o.illustration})}):(0,wo.jsx)("div",{className:"rounded bg-white/5 p-3 shadow-inner [&_svg]:mx-auto [&_svg]:block [&_svg]:h-auto [&_svg]:max-h-60 [&_svg]:w-full",dangerouslySetInnerHTML:{__html:o.illustration}})})]})})(),(0,wo.jsxs)("div",{className:"space-y-2",children:[(0,wo.jsxs)("p",{className:"text-sm font-semibold text-gray-300 mb-2",children:["Svarsalternativ (",_.toUpperCase(),"):"]}),((null===E||void 0===E?void 0:E.options)||[]).map((e,t)=>(0,wo.jsxs)("div",{className:"flex items-center gap-3 rounded border px-3 py-2 ".concat(t===o.correctOption?"border-emerald-500 bg-emerald-500/20 text-emerald-100":"border-slate-600 bg-slate-800/40 text-gray-300"),children:[(0,wo.jsxs)("span",{className:"text-sm font-mono",children:[String.fromCharCode(65+t),":"]}),(0,wo.jsx)("span",{children:e}),t===o.correctOption&&(0,wo.jsx)("span",{className:"ml-auto text-xs font-semibold text-emerald-200",children:"R\xc4TT SVAR"})]},t))]}),(null===E||void 0===E?void 0:E.explanation)&&(0,wo.jsxs)("div",{className:"p-3 bg-slate-800/40 rounded border border-slate-600",children:[(0,wo.jsxs)("p",{className:"text-sm font-semibold text-gray-300 mb-1",children:["F\xf6rklaring (",_.toUpperCase(),"):"]}),(0,wo.jsx)("p",{className:"text-sm text-gray-300",children:E.explanation})]}),L&&(0,wo.jsxs)("div",{className:"p-4 rounded border ".concat(L.valid?"bg-emerald-500/10 border-emerald-500/30":"bg-red-500/10 border-red-500/30"),children:[(0,wo.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,wo.jsx)("span",{className:"text-sm font-bold ".concat(L.valid?"text-emerald-300":"text-red-300"),children:L.valid?"\u2713 Strukturvalidering: GODK\xc4ND":"\u2717 Strukturvalidering: UNDERK\xc4ND"})}),L.issues&&L.issues.length>0&&(0,wo.jsxs)("div",{className:"mb-3",children:[(0,wo.jsx)("p",{className:"text-xs font-semibold text-red-300 mb-1",children:"Problem:"}),(0,wo.jsx)("ul",{className:"list-disc list-inside space-y-1",children:L.issues.map((e,t)=>(0,wo.jsx)("li",{className:"text-xs text-red-200",children:e},"structure-issue-".concat(t)))})]}),L.reasoning&&(0,wo.jsxs)("div",{className:"mb-2",children:[(0,wo.jsx)("p",{className:"text-xs font-semibold text-gray-300 mb-1",children:"Motivering:"}),(0,wo.jsx)("p",{className:"text-xs text-gray-300 whitespace-pre-wrap",children:L.reasoning})]}),L.checkedAt&&(0,wo.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["Kontrollerad: ",new Date(L.checkedAt).toLocaleString("sv-SE")]})]}),R&&(0,wo.jsxs)("div",{className:"p-4 rounded border ".concat(o.manuallyRejected?"bg-orange-500/10 border-orange-500/30":o.aiValidated?o.manuallyApproved?"bg-blue-500/10 border-blue-500/30":"bg-green-500/10 border-green-500/30":"bg-red-500/10 border-red-500/30"),children:[(0,wo.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,wo.jsx)("span",{className:"text-sm font-bold ".concat(o.manuallyRejected?"text-orange-300":o.aiValidated?o.manuallyApproved?"text-blue-300":"text-green-300":"text-red-300"),children:o.manuallyRejected?"\u2717 Manuellt underk\xe4nd":"manual"===R.validationType?"\u2713 Manuellt godk\xe4nd":o.aiValidated?"\u2713 AI-validering: GODK\xc4ND":"\u2717 AI-validering: UNDERK\xc4ND"}),R.providersChecked&&(0,wo.jsxs)("span",{className:"text-xs text-gray-400",children:["(",R.providersChecked," providers)"]})]}),R.issues&&R.issues.length>0&&(0,wo.jsxs)("div",{className:"mb-3",children:[(0,wo.jsx)("p",{className:"text-xs font-semibold text-red-300 mb-1",children:"Problem:"}),(0,wo.jsx)("ul",{className:"list-disc list-inside space-y-1",children:R.issues.map((e,t)=>(0,wo.jsx)("li",{className:"text-xs text-red-200",children:e},t))})]}),R.reasoning&&(0,wo.jsxs)("div",{className:"mb-2",children:[(0,wo.jsx)("p",{className:"text-xs font-semibold text-gray-300 mb-1",children:"Motivering:"}),(0,wo.jsx)("p",{className:"text-xs text-gray-300 whitespace-pre-wrap",children:R.reasoning})]}),R.providerResults&&(0,wo.jsxs)("div",{className:"mt-3 pt-3 border-t border-slate-600",children:[(0,wo.jsx)("p",{className:"text-xs font-semibold text-gray-300 mb-2",children:"Provider-resultat:"}),(0,wo.jsx)("div",{className:"space-y-2",children:Object.entries(R.providerResults).map(e=>{let[t,n]=e;const r=t.charAt(0).toUpperCase()+t.slice(1);let o="text-amber-300",i="\u26a0",a=(null===n||void 0===n?void 0:n.error)||"Otillg\xe4nglig";return!0===(null===n||void 0===n?void 0:n.valid)?(o="text-green-300",i="\u2713",a="Godk\xe4nd"):!1===(null===n||void 0===n?void 0:n.valid)&&(o="text-red-300",i="\u2717",a=Array.isArray(null===n||void 0===n?void 0:n.issues)&&n.issues.length>0?n.issues.join(", "):"Underk\xe4nd"),(0,wo.jsxs)("div",{className:"flex items-start gap-2",children:[(0,wo.jsxs)("span",{className:"text-xs font-bold ".concat(o),children:[i," ",r,":"]}),(0,wo.jsx)("span",{className:"text-xs text-gray-300 flex-1",children:a})]},t)})})]}),o.manuallyApprovedAt&&(0,wo.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["Manuellt godk\xe4nd: ",o.manuallyApprovedAt.toDate?o.manuallyApprovedAt.toDate().toLocaleString("sv-SE"):new Date(o.manuallyApprovedAt).toLocaleString("sv-SE")]}),o.manuallyRejectedAt&&(0,wo.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["Manuellt underk\xe4nd: ",o.manuallyRejectedAt.toDate?o.manuallyRejectedAt.toDate().toLocaleString("sv-SE"):new Date(o.manuallyRejectedAt).toLocaleString("sv-SE")]}),o.aiValidatedAt&&!o.manuallyApprovedAt&&!o.manuallyRejectedAt&&(0,wo.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["Validerad: ",o.aiValidatedAt.toDate?o.aiValidatedAt.toDate().toLocaleString("sv-SE"):new Date(o.aiValidatedAt).toLocaleString("sv-SE")]})]}),o.reports&&o.reports.length>0&&(0,wo.jsxs)("div",{className:"p-4 rounded border bg-yellow-500/10 border-yellow-500/30",children:[(0,wo.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,wo.jsxs)("span",{className:"text-sm font-bold text-yellow-300",children:["\u26a0\ufe0f Anv\xe4ndarrapporter (",o.reports.length,")"]})}),(0,wo.jsx)("div",{className:"space-y-2",children:o.reports.map((e,t)=>(0,wo.jsxs)("div",{className:"bg-slate-900 rounded p-2 border border-yellow-500/20",children:[(0,wo.jsxs)("div",{className:"text-xs text-yellow-200 mb-1",children:[(0,wo.jsx)("strong",{children:"Rapporterad av:"})," ",e.reportedBy||"Anonym"]}),(0,wo.jsxs)("div",{className:"text-xs text-yellow-200 mb-1",children:[(0,wo.jsx)("strong",{children:"Anledning:"})," ",e.reason||"Ingen anledning angiven"]}),(0,wo.jsxs)("div",{className:"text-xs text-gray-400",children:[e.reportedAt&&new Date(e.reportedAt).toLocaleString("sv-SE"),e.resolved&&(0,wo.jsxs)("span",{className:"ml-2 text-green-300",children:["(","approved"===e.resolution?"Godk\xe4nd":"Underk\xe4nd"," - ",new Date(e.resolvedAt).toLocaleString("sv-SE"),")"]})]})]},t))})]}),(0,wo.jsxs)("div",{className:"text-sm text-gray-400 space-y-1",children:[(0,wo.jsxs)("p",{children:["ID: ",o.id]}),o.source&&(0,wo.jsxs)("p",{children:["K\xe4lla: ",o.source]}),o.createdBy&&(0,wo.jsxs)("p",{children:["Skapad av: ",o.createdBy]})]}),(0,wo.jsxs)("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-slate-700",children:[(0,wo.jsx)("button",{onClick:async()=>{if(o.id&&(!g||!g.has(o.id))){y&&y(o.id);try{const t=await Ni(o.id),n=null===t||void 0===t?void 0:t.taskId;if(n&&"function"===typeof m){var e;const t=(null===(e=o.languages)||void 0===e?void 0:e.sv)||{text:o.text,options:o.options,explanation:o.explanation},r=["Fr\xe5ga ".concat(o.id),t.text.length>80?"".concat(t.text.slice(0,80),"\u2026"):t.text];m(n,{taskType:"validation",label:"AI-validering",description:r.join(" \u2013 "),createdAt:new Date}),x(e=>new Map(e).set(n,o.id))}}catch(t){console.error("[AdminQuestionsPage] Kunde inte starta AI-validering:",t),w({isOpen:!0,title:"Fel vid AI-validering",message:"Kunde inte starta AI-validering: ".concat(t.message),type:"error"})}finally{b&&b(o.id)}}},disabled:g&&g.has(o.id),className:"px-3 py-1 text-xs rounded-md transition-colors ".concat(g&&g.has(o.id)?"bg-gray-600 text-gray-400 opacity-50 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white"),children:g&&g.has(o.id)?"\u23f3 Validerar...":"\u2705 AI-validera"}),(0,wo.jsx)("button",{onClick:async()=>{if(!A){S(!0);try{const e=await Mi(o.id);null!==e&&void 0!==e&&e.taskId&&"function"===typeof m&&m(e.taskId,{taskType:"regenerateemoji",label:"Emoji-regenerering",description:"Genererar nya emojis f\xf6r fr\xe5ga ".concat(o.id),createdAt:new Date})}catch(e){console.error("[AdminQuestionsPage] Kunde inte regenerera emojis:",e),w({isOpen:!0,title:"Fel vid emoji-generering",message:"Kunde inte generera emojis: ".concat(e.message),type:"error"})}finally{S(!1)}}},disabled:A||g&&g.has(o.id)||v&&v.has(o.id),className:"px-3 py-1 text-xs rounded-md transition-colors ".concat(A||g&&g.has(o.id)||v&&v.has(o.id)?"bg-gray-600 text-gray-400 opacity-50 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"),children:A||v&&v.has(o.id)?"\u23f3 Genererar...":"\ud83c\udfa8 Nya emojis"}),!0===o.reported&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("button",{onClick:()=>d(o.id),className:"px-3 py-1 text-xs bg-green-600 hover:bg-green-700 text-white rounded-md",children:"\u2705 Godk\xe4nn rapport"}),(0,wo.jsx)("button",{onClick:()=>h(o.id),className:"px-3 py-1 text-xs bg-red-600 hover:bg-red-700 text-white rounded-md",children:"\u274c Underk\xe4nn rapport"})]}),(0,wo.jsx)("button",{onClick:()=>l(o.id),className:"px-3 py-1 text-xs bg-red-600 hover:bg-red-700 text-white rounded-md",children:"\ud83d\uddd1\ufe0f Radera"})]})]})]})},lu=()=>{var e,n,r,o,i,a,s,l;const c=J(),{isSuperUser:u}=Eo(),{registerTask:d}=ja(),[h,f]=(0,t.useState)([]),[p,m]=(0,t.useState)(!0),[g,v]=(0,t.useState)(!1),[y,b]=(0,t.useState)(!1),[x,w]=(0,t.useState)(!1),[_,k]=(0,t.useState)(new Set),[A,S]=(0,t.useState)(new Set),[N,C]=(0,t.useState)(!1),[j,E]=(0,t.useState)(new Map),[T,I]=(0,t.useState)(!1),[P,O]=(0,t.useState)(10),[M,L]=(0,t.useState)(""),[R,D]=(0,t.useState)(""),[F,z]=(0,t.useState)("random"),[B,U]=(0,t.useState)(null),[q,V]=(0,t.useState)(!1),[H,G]=(0,t.useState)(null),[K,W]=(0,t.useState)(""),[Q,Z]=(0,t.useState)("all"),[Y,$]=(0,t.useState)("all"),[X,ee]=(0,t.useState)("all"),[te,ne]=(0,t.useState)("all"),[re,oe]=(0,t.useState)(new Set),[ie,ae]=(0,t.useState)(1),[se,le]=(0,t.useState)("questions"),ce=(0,t.useRef)(!0),[ue,de]=(0,t.useState)({isOpen:!1,title:"",message:"",type:"info"});(0,t.useEffect)(()=>{(()=>{try{m(!0);const e=gi();f(e||[])}catch(e){console.error("Kunde inte ladda fr\xe5gor:",e),f([])}finally{m(!1)}})();const e=ki(e=>{f(e||[])});return()=>e()},[]),(0,t.useEffect)(()=>{u||c("/")},[u,c]),(0,t.useEffect)(()=>()=>{ce.current=!1},[]),(0,t.useEffect)(()=>{if(!u)return;const e=po();return(0,io.aQ)((0,io.P)((0,io.rJ)(e,"backgroundTasks"),(0,io._M)("taskType","in",["validation","batchvalidation","regenerateemoji","batchregenerateemojis"]),(0,io._M)("status","in",["processing","queued","pending"])),e=>{const t=e.docs.map(e=>(0,To.A)({id:e.id},e.data())),n=new Set,r=new Set;let o=!1;t.forEach(e=>{var t,i;if("batchvalidation"===e.taskType)o=!0,null!==(t=e.payload)&&void 0!==t&&t.questions&&e.payload.questions.forEach(e=>{e.id&&n.add(e.id)}),null!==(i=e.progress)&&void 0!==i&&i.questionIds&&e.progress.questionIds.forEach(e=>n.add(e));else if("validation"===e.taskType){const t=j.get(e.id);t&&n.add(t)}else if("batchregenerateemojis"===e.taskType){var a;null!==(a=e.payload)&&void 0!==a&&a.questionIds&&e.payload.questionIds.forEach(e=>r.add(e))}else if("regenerateemoji"===e.taskType){var s;null!==(s=e.payload)&&void 0!==s&&s.questionId&&r.add(e.payload.questionId)}}),k(n),S(r),C(o);const i=new Set(t.map(e=>e.id));E(e=>{const t=new Map;for(const[n,r]of e.entries())i.has(n)&&t.set(n,r);return t})},e=>{console.error("Error listening to background tasks:",e)})},[u,j]),(0,t.useEffect)(()=>{T&&!B&&he()},[T]);const he=async()=>{V(!0);try{const r=await fetch("https://europe-west1-geoquest2-7e45c.cloudfunctions.net/getAIStatus"),o=await r.json();U(o.providers);const i=Object.values(o.providers).some(e=>e.available);var e,t,n;if(!i)null!==(e=o.providers.gemini)&&void 0!==e&&e.available?z("gemini"):null!==(t=o.providers.anthropic)&&void 0!==t&&t.available?z("anthropic"):null!==(n=o.providers.openai)&&void 0!==n&&n.available&&z("openai")}catch(r){console.error("Failed to fetch AI status:",r),U({gemini:{available:!1,message:"Kunde inte h\xe4mta status"},anthropic:{available:!1,message:"Kunde inte h\xe4mta status"},openai:{available:!1,message:"Kunde inte h\xe4mta status"}})}finally{V(!1)}},fe=new Set,pe=new Set,me=new Set;h.forEach(e=>{(Array.isArray(e.categories)?e.categories:e.category?[e.category]:[]).forEach(e=>{e&&fe.add(e)});(Array.isArray(e.ageGroups)?e.ageGroups:[]).forEach(e=>{e&&pe.add(e)});const t=e.targetAudience||e.audience;t&&me.add(t)});const ge=["all",...Array.from(fe).sort((e,t)=>e.localeCompare(t,"sv"))],ve=["children","youth","adults"],ye=["all",...Array.from(pe).sort((e,t)=>{const n=ve.indexOf(e),r=ve.indexOf(t);return-1===n||-1===r?e.localeCompare(t):n-r})],be=["all",...Array.from(me).sort((e,t)=>e.localeCompare(t,"sv"))],xe=K.trim().toLowerCase(),we=Q.toLowerCase(),_e=te.toLowerCase(),ke=h.filter(e=>{var t,n,r,o,i,a,s,l;const c=(null===(t=e.languages)||void 0===t||null===(n=t.sv)||void 0===n?void 0:n.text)||e.text||"",u=(null===(r=e.languages)||void 0===r||null===(o=r.en)||void 0===o?void 0:o.text)||"",d=(null===(i=e.languages)||void 0===i||null===(a=i.sv)||void 0===a?void 0:a.options)||e.options||[],h=(null===(s=e.languages)||void 0===s||null===(l=s.en)||void 0===l?void 0:l.options)||[],f=Array.isArray(e.categories)?e.categories:e.category?[e.category]:[],p=f.map(e=>e.toLowerCase()),m=Array.isArray(e.ageGroups)?e.ageGroups:[],g=m.map(e=>e.toLowerCase()),v=(e.targetAudience||e.audience||"").toLowerCase(),y=!xe||[c,u,...d,...h,e.id,...f,...m,e.targetAudience].filter(Boolean).some(e=>e.toLowerCase().includes(xe)),b="all"===Q||p.includes(we),x="all"===X||g.includes(X.toLowerCase()),w="all"===te||v===_e,_=e.aiValidationResult,k=e.structureValidationResult||("structure"===(null===_||void 0===_?void 0:_.validationType)?_:null),A=_&&"structure"!==_.validationType?_:null,S=Boolean(k),N=!0===(null===k||void 0===k?void 0:k.valid),C=!1===(null===k||void 0===k?void 0:k.valid),j=!0===e.manuallyApproved||!0===e.aiValidated||!0===(null===A||void 0===A?void 0:A.valid),E=!0===e.manuallyRejected||A&&!1===A.valid;let T=!0;return"validated"===Y?T=j&&(!S||N):"failed"===Y?T=E||C:"unvalidated"===Y?T=!S&&!j&&!E&&!e.reported:"reported"===Y?T=!0===e.reported:"manual-approved"===Y?T=!0===e.manuallyApproved:"manual-rejected"===Y?T=!0===e.manuallyRejected:"structure-approved"===Y?T=N:"structure-rejected"===Y&&(T=C),y&&b&&x&&w&&T}),Ae=ke.slice(10*(ie-1),10*ie),Se=async e=>{if(window.confirm("Godk\xe4nn denna fr\xe5ga manuellt?\n\nDetta markerar fr\xe5gan som validerad oavsett AI-valideringens resultat."))try{await Ti(e),de({isOpen:!0,title:"Fr\xe5ga godk\xe4nd",message:"Fr\xe5gan har markerats som manuellt godk\xe4nd!",type:"success"})}catch(t){console.error("Kunde inte godk\xe4nna fr\xe5ga:",t),de({isOpen:!0,title:"Fel vid godk\xe4nnande",message:"Kunde inte godk\xe4nna fr\xe5ga: "+t.message,type:"error"})}},Ne=async e=>{const t=window.prompt("Underk\xe4nn denna fr\xe5ga manuellt?\n\nAnge anledning (valfritt):");if(null!==t)try{await Ii(e,t),de({isOpen:!0,title:"Fr\xe5ga underk\xe4nd",message:"Fr\xe5gan har markerats som manuellt underk\xe4nd!",type:"success"})}catch(n){console.error("Kunde inte underk\xe4nna fr\xe5ga:",n),de({isOpen:!0,title:"Fel vid underk\xe4nnande",message:"Kunde inte underk\xe4nna fr\xe5ga: "+n.message,type:"error"})}},Ce=async e=>{if(window.confirm("Godk\xe4nn denna rapporterade fr\xe5ga?\n\nDetta tar bort den fr\xe5n karant\xe4n och g\xf6r den tillg\xe4nglig f\xf6r rundor igen."))try{await Oi(e),de({isOpen:!0,title:"Rapporterad fr\xe5ga godk\xe4nd",message:"Fr\xe5gan har godk\xe4nts och tagits bort fr\xe5n karant\xe4n!",type:"success"})}catch(t){console.error("Kunde inte godk\xe4nna rapporterad fr\xe5ga:",t),de({isOpen:!0,title:"Fel vid godk\xe4nnande",message:"Kunde inte godk\xe4nna fr\xe5ga: "+t.message,type:"error"})}},je=async e=>{if(window.confirm("Underk\xe4nn denna rapporterade fr\xe5ga?\n\nDetta markerar fr\xe5gan som manuellt underk\xe4nd baserat p\xe5 anv\xe4ndarrapporterna."))try{await Li(e),de({isOpen:!0,title:"Rapporterad fr\xe5ga underk\xe4nd",message:"Fr\xe5gan har underk\xe4nts baserat p\xe5 anv\xe4ndarrapporter!",type:"success"})}catch(t){console.error("Kunde inte underk\xe4nna rapporterad fr\xe5ga:",t),de({isOpen:!0,title:"Fel vid underk\xe4nnande",message:"Kunde inte underk\xe4nna fr\xe5ga: "+t.message,type:"error"})}},Ee=async e=>{if(window.confirm("\xc4r du s\xe4ker p\xe5 att du vill ta bort denna fr\xe5ga?"))try{await _i(e),f(t=>t.filter(t=>t.id!==e))}catch(t){console.error("Kunde inte ta bort fr\xe5ga:",t),de({isOpen:!0,title:"Fel vid radering",message:t.message||"Kunde inte ta bort fr\xe5gan. F\xf6rs\xf6k igen.",type:"error"})}},Te=e=>{oe(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},Ie=e=>{k(t=>new Set([...t,e]))},Pe=e=>{k(t=>{const n=new Set(t);return n.delete(e),n})},Oe=ke,Me=re.size>0&&re.size===Oe.length;return u?(0,wo.jsxs)("div",{className:"min-h-screen bg-slate-950",children:[(0,wo.jsx)(Tl,{title:"Fr\xe5gebank"}),(0,wo.jsxs)("div",{className:"mx-auto max-w-6xl px-4 pt-24 pb-8",children:[(0,wo.jsxs)("div",{className:"mb-6 flex gap-2 border-b border-slate-700",children:[(0,wo.jsxs)("button",{onClick:()=>le("questions"),className:"px-4 py-2 font-semibold transition-colors ".concat("questions"===se?"text-cyan-400 border-b-2 border-cyan-400":"text-gray-400 hover:text-gray-300"),children:["\ud83d\udcdd Fr\xe5gor (",h.length,")"]}),(0,wo.jsx)("button",{onClick:()=>le("duplicates"),className:"px-4 py-2 font-semibold transition-colors ".concat("duplicates"===se?"text-amber-400 border-b-2 border-amber-400":"text-gray-400 hover:text-gray-300"),children:"\ud83d\udd0d Dubletter"}),(0,wo.jsx)("button",{onClick:()=>le("validation"),className:"px-4 py-2 font-semibold transition-colors ".concat("validation"===se?"text-green-400 border-b-2 border-green-400":"text-gray-400 hover:text-gray-300"),children:"\u2713 Validering"})]}),"validation"===se?(0,wo.jsx)(au,{}):"duplicates"===se?(0,wo.jsx)(iu,{}):(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsxs)("div",{className:"mb-6 flex flex-col gap-4",children:[(0,wo.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-5 gap-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-cyan-200 mb-2",children:"S\xf6k fr\xe5gor"}),(0,wo.jsx)("input",{type:"text",value:K,onChange:e=>W(e.target.value),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2",placeholder:"S\xf6k i fr\xe5getext, svarsalternativ eller ID..."})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-cyan-200 mb-2",children:"Kategori"}),(0,wo.jsx)("select",{value:Q,onChange:e=>Z(e.target.value),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2",children:ge.map(e=>(0,wo.jsx)("option",{value:e,children:"all"===e?"Alla kategorier":e},e))})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-cyan-200 mb-2",children:"Valideringsstatus"}),(0,wo.jsxs)("select",{value:Y,onChange:e=>$(e.target.value),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2",children:[(0,wo.jsx)("option",{value:"all",children:"Alla"}),(0,wo.jsx)("option",{value:"validated",children:"Godk\xe4nda (AI)"}),(0,wo.jsx)("option",{value:"failed",children:"Underk\xe4nda (AI)"}),(0,wo.jsx)("option",{value:"manual-approved",children:"Manuellt godk\xe4nda"}),(0,wo.jsx)("option",{value:"manual-rejected",children:"Manuellt underk\xe4nda"}),(0,wo.jsx)("option",{value:"structure-approved",children:"Strukturellt godk\xe4nda"}),(0,wo.jsx)("option",{value:"structure-rejected",children:"Strukturellt underk\xe4nda"}),(0,wo.jsx)("option",{value:"unvalidated",children:"Ej validerade"}),(0,wo.jsx)("option",{value:"reported",children:"Rapporterade (karant\xe4n)"})]})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-cyan-200 mb-2",children:"\xc5ldersgrupp"}),(0,wo.jsx)("select",{value:X,onChange:e=>ee(e.target.value),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2",children:ye.map(e=>(0,wo.jsx)("option",{value:e,children:"all"===e?"Alla \xe5ldersgrupper":("children"===e?"Barn":"youth"===e&&"Ungdom")||"adults"===e&&"Vuxna"||e},e))})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-cyan-200 mb-2",children:"M\xe5lgrupp"}),(0,wo.jsx)("select",{value:te,onChange:e=>ne(e.target.value),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2",children:be.map(e=>(0,wo.jsx)("option",{value:e,children:"all"===e?"Alla m\xe5lgrupper":"swedish"===e?"Svensk m\xe5lgrupp":e.charAt(0).toUpperCase()+e.slice(1)},e))})]})]}),(0,wo.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,wo.jsxs)("p",{className:"text-sm text-gray-400",children:["Beh\xf6ver du k\xf6ra struktur- eller AI-validering p\xe5 nytt? Anv\xe4nd fliken"," ",(0,wo.jsx)("span",{className:"text-cyan-300",children:"Validering"})," f\xf6r strukturvalidering. F\xf6r AI-validering, anv\xe4nd knapparna p\xe5 individuella fr\xe5gor eller batch-funktionen ovan."]}),(0,wo.jsx)("button",{onClick:()=>I(!0),disabled:g,className:"rounded bg-gradient-to-r from-purple-600 to-indigo-600 px-4 py-2 font-semibold text-white hover:from-purple-700 hover:to-indigo-700 disabled:bg-slate-700 disabled:text-gray-400 flex items-center gap-2",children:g?"\ud83e\udd16 Genererar...":"\ud83e\udd16 AI-Generera fr\xe5gor"})]})]}),(0,wo.jsxs)("div",{className:"mb-4 flex items-center justify-between bg-slate-800/50 border border-slate-700 rounded-lg p-2",children:[(0,wo.jsxs)("div",{className:"flex items-center gap-3",children:[(0,wo.jsx)("input",{type:"checkbox",checked:Me,onChange:()=>{re.size===Oe.length?oe(new Set):oe(new Set(Oe.map(e=>e.id)))},disabled:0===Oe.length,className:"h-5 w-5 rounded border-gray-600 bg-slate-800 text-cyan-500 focus:ring-cyan-500 disabled:opacity-50"}),(0,wo.jsx)("label",{className:"text-sm text-gray-300",children:re.size>0?"".concat(re.size," valda"):"Markera alla"})]}),(0,wo.jsxs)("div",{className:"flex items-center gap-2",children:[(0,wo.jsx)("button",{onClick:async()=>{if(0===re.size)return;if(!window.confirm("\xc4r du s\xe4ker p\xe5 att du vill k\xf6ra AI-validering p\xe5 ".concat(re.size," fr\xe5ga(r)? Detta kan medf\xf6ra kostnader.")))return;w(!0),C(!0);const e=Array.from(re);k(new Set(e));try{const{taskId:t}=await Ci(e);t&&d(t,{taskType:"batchvalidation",label:"AI-validering (batch)",description:"Validerar ".concat(e.length," fr\xe5gor med AI."),createdAt:new Date}),oe(new Set)}catch(t){console.error("Kunde inte starta batch AI-validering:",t),de({isOpen:!0,title:"Fel vid AI-validering",message:"Ett fel uppstod vid start av AI-validering: "+t.message,type:"error"})}finally{w(!1)}},disabled:0===re.size||x||N,className:"rounded bg-purple-600 px-3 py-1.5 text-sm font-semibold text-white hover:bg-purple-500 disabled:bg-slate-700 disabled:cursor-not-allowed",children:x||N?"\ud83e\udd16 Validerar...":"\ud83e\udd16 AI-validera"}),(0,wo.jsx)("button",{onClick:async()=>{if(0!==re.size&&window.confirm("\xc4r du s\xe4ker p\xe5 att du vill regenerera emojis f\xf6r ".concat(re.size," fr\xe5ga(r)?"))){b(!0);try{const e=Array.from(re),{taskId:t}=await Go({questionIds:e});t&&d(t,{taskType:"batchregenerateemojis",label:"Mass-regenerering Emojis",description:"Genererar om emojis f\xf6r ".concat(e.length," fr\xe5gor."),createdAt:new Date}),oe(new Set)}catch(e){console.error("Kunde inte starta mass-regenerering av emojis:",e),de({isOpen:!0,title:"Fel vid mass-regenerering",message:"Ett fel uppstod vid start av mass-regenerering: "+e.message,type:"error"})}finally{b(!1)}}},disabled:0===re.size||y,className:"rounded bg-teal-600 px-3 py-1.5 text-sm font-semibold text-white hover:bg-teal-500 disabled:bg-slate-700 disabled:cursor-not-allowed",children:y?"\ud83c\udfa8 Genererar...":"\ud83c\udfa8 Regenerera Emojis"}),(0,wo.jsx)("button",{onClick:async()=>{if(0!==re.size&&window.confirm("\xc4r du s\xe4ker p\xe5 att du vill radera ".concat(re.size," fr\xe5ga(r)?")))try{await Ro(Array.from(re)),f(e=>e.filter(e=>!re.has(e.id))),oe(new Set)}catch(e){console.error("Kunde inte radera markerade fr\xe5gor:",e),de({isOpen:!0,title:"Fel vid radering",message:"Ett fel uppstod vid radering. Vissa fr\xe5gor kan vara kvar.",type:"error"})}},disabled:0===re.size,className:"rounded bg-red-600 px-3 py-1.5 text-sm font-semibold text-white hover:bg-red-500 disabled:bg-slate-700 disabled:cursor-not-allowed",children:"Radera markerade"})]})]}),N&&(0,wo.jsxs)("div",{className:"mb-4 p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:[(0,wo.jsxs)("div",{className:"flex items-center gap-2 text-yellow-300",children:[(0,wo.jsx)("div",{className:"animate-spin",children:"\u23f3"}),(0,wo.jsx)("span",{className:"font-medium",children:"Batch-validering p\xe5g\xe5r..."})]}),(0,wo.jsxs)("div",{className:"mt-1 text-sm text-yellow-200",children:[_.size," fr\xe5gor kvar att validera"]})]}),A.size>0&&(0,wo.jsxs)("div",{className:"mb-4 p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:[(0,wo.jsxs)("div",{className:"flex items-center gap-2 text-blue-300",children:[(0,wo.jsx)("div",{className:"animate-spin",children:"\ud83c\udfa8"}),(0,wo.jsx)("span",{className:"font-medium",children:"Emoji-regenerering p\xe5g\xe5r..."})]}),(0,wo.jsxs)("div",{className:"mt-1 text-sm text-blue-200",children:[A.size," fr\xe5gor kvar att bearbeta"]})]}),p?(0,wo.jsx)("div",{className:"text-center py-8",children:(0,wo.jsx)("p",{className:"text-gray-300",children:"Laddar fr\xe5gor..."})}):(0,wo.jsxs)("div",{children:[(0,wo.jsx)("div",{className:"mb-4 flex items-center justify-between",children:(0,wo.jsxs)("p",{className:"text-sm text-gray-400",children:["Visar ",ke.length," av ",h.length," fr\xe5gor"]})}),0===ke.length?(0,wo.jsx)("div",{className:"text-center py-8",children:(0,wo.jsx)("p",{className:"text-gray-300",children:K||"all"!==Q?"Inga fr\xe5gor matchade dina filter.":"Inga fr\xe5gor hittades i systemet."})}):(0,wo.jsxs)("div",{className:"space-y-4",children:[Ae.map((e,t)=>{const n=10*(ie-1)+t;return(0,wo.jsx)(su,{question:e,index:n,expandedQuestion:H,setExpandedQuestion:G,handleDeleteQuestion:Ee,handleManualApprove:Se,handleManualReject:Ne,handleApproveReported:Ce,handleRejectReported:je,registerTask:d,isSelected:re.has(e.id),onSelect:Te,validatingQuestions:_,regeneratingEmojis:A,onValidationStart:Ie,onValidationEnd:Pe,setIndividualValidationTasks:E,setDialogConfig:de},"".concat(e.id,"-").concat(t))}),(0,wo.jsx)(tu,{currentPage:ie,totalItems:ke.length,itemsPerPage:10,onPageChange:e=>{ae(e)}})]})]}),T&&(0,wo.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-[1200]",children:(0,wo.jsxs)("div",{className:"bg-slate-900 rounded-xl shadow-2xl border border-purple-500/40 max-w-md w-full max-h-[90vh] overflow-y-auto p-6",children:[(0,wo.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,wo.jsx)("h3",{className:"text-xl font-bold bg-gradient-to-r from-cyan-400 to-indigo-400 bg-clip-text text-transparent",children:"\ud83e\udd16 AI-Generera fr\xe5gor"}),(0,wo.jsx)("button",{onClick:()=>I(!1),className:"text-gray-400 hover:text-gray-200 transition-colors",children:(0,wo.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,wo.jsx)("p",{className:"text-gray-300 text-sm mb-4",children:"Generera fr\xe5gor med AI som automatiskt f\xe5r b\xe5de svensk och engelsk text, kategori och sv\xe5righetsgrad."}),q?(0,wo.jsxs)("div",{className:"bg-slate-800 rounded-lg p-4 mb-4 flex items-center gap-3",children:[(0,wo.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-cyan-400"}),(0,wo.jsx)("span",{className:"text-gray-300 text-sm",children:"Kontrollerar AI-providers..."})]}):B&&(0,wo.jsx)("div",{className:"space-y-2 mb-4",children:Object.entries(B).map(e=>{let[t,n]=e;const r=t.charAt(0).toUpperCase()+t.slice(1);return(0,wo.jsxs)("div",{className:"rounded-lg p-3 text-sm ".concat(n.available?"bg-green-500/10 border border-green-500/30":"bg-red-500/10 border border-red-500/30"),children:[(0,wo.jsxs)("div",{className:"flex items-center gap-2",children:[(0,wo.jsx)("span",{className:"text-lg",children:n.available?"\u2705":"\u274c"}),(0,wo.jsx)("span",{className:"font-semibold",children:r}),(0,wo.jsx)("span",{className:"ml-auto text-xs ".concat(n.available?"text-green-400":"text-red-400"),children:n.available?"Tillg\xe4nglig":n.configured?"Ej tillg\xe4nglig":"Inte konfigurerad"})]}),n.model&&(0,wo.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Model: ",n.model]}),!n.available&&n.error&&(0,wo.jsxs)("p",{className:"text-xs text-red-200 mt-1",children:["Fel: ",n.error]}),!n.available&&n.errorStatus&&(0,wo.jsxs)("p",{className:"text-[11px] text-red-200/80 mt-1",children:["Statuskod: ",n.errorStatus]})]},t)})}),(0,wo.jsxs)("div",{className:"space-y-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-cyan-200 mb-2",children:"Antal fr\xe5gor (1-50)"}),(0,wo.jsx)("input",{type:"number",min:"1",max:"50",value:P,onChange:e=>O(parseInt(e.target.value)||10),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2 text-white focus:ring-2 focus:ring-cyan-500 focus:outline-none"})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-cyan-200 mb-2",children:"Kategori (valfri)"}),(0,wo.jsxs)("select",{value:M,onChange:e=>L(e.target.value),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2 text-white focus:ring-2 focus:ring-cyan-500 focus:outline-none",children:[(0,wo.jsx)("option",{value:"",children:"Blandad"}),(0,wo.jsx)("option",{value:"Geografi",children:"Geografi"}),(0,wo.jsx)("option",{value:"Historia",children:"Historia"}),(0,wo.jsx)("option",{value:"Naturvetenskap",children:"Naturvetenskap"}),(0,wo.jsx)("option",{value:"Kultur",children:"Kultur"}),(0,wo.jsx)("option",{value:"Sport",children:"Sport"}),(0,wo.jsx)("option",{value:"Natur",children:"Natur"}),(0,wo.jsx)("option",{value:"Teknik",children:"Teknik"}),(0,wo.jsx)("option",{value:"Djur",children:"Djur"}),(0,wo.jsx)("option",{value:"G\xe5tor",children:"G\xe5tor"})]})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-cyan-200 mb-2",children:"\xc5ldersgrupp (valfri)"}),(0,wo.jsxs)("select",{value:R,onChange:e=>D(e.target.value),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2 text-white focus:ring-2 focus:ring-cyan-500 focus:outline-none",children:[(0,wo.jsx)("option",{value:"",children:"Blandad"}),(0,wo.jsx)("option",{value:"children",children:"Barn (6-12 \xe5r)"}),(0,wo.jsx)("option",{value:"youth",children:"Ungdomar (13-25 \xe5r)"}),(0,wo.jsx)("option",{value:"adults",children:"Vuxna (25+ \xe5r)"})]})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-cyan-200 mb-2",children:"AI-Provider"}),(0,wo.jsxs)("select",{value:F,onChange:e=>z(e.target.value),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2 text-white focus:ring-2 focus:ring-cyan-500 focus:outline-none",disabled:!B||Object.values(B).every(e=>!e.available),children:[B&&Object.values(B).some(e=>e.available)&&(0,wo.jsx)("option",{value:"random",children:"\ud83c\udfb2 Slumpm\xe4ssig (rekommenderad)"}),(null===B||void 0===B||null===(e=B.gemini)||void 0===e?void 0:e.available)&&(0,wo.jsx)("option",{value:"gemini",children:"Gemini (Google) - Snabb & Gratis"}),(null===B||void 0===B||null===(n=B.anthropic)||void 0===n?void 0:n.available)&&(0,wo.jsx)("option",{value:"anthropic",children:"Claude (Anthropic) - H\xf6g kvalitet"}),(null===B||void 0===B||null===(r=B.openai)||void 0===r?void 0:r.available)&&(0,wo.jsx)("option",{value:"openai",children:"GPT-4 (OpenAI) - Balanserad"}),(!B||Object.values(B).every(e=>!e.available))&&(0,wo.jsx)("option",{value:"",children:"Ingen provider tillg\xe4nglig"})]})]}),"random"===F&&B&&Object.values(B).some(e=>e.available)&&(0,wo.jsx)("div",{className:"bg-gradient-to-r from-purple-500/10 to-cyan-500/10 border border-purple-500/30 rounded-lg p-3",children:(0,wo.jsx)("p",{className:"text-xs text-purple-200",children:"\ud83c\udfb2 Slumpm\xe4ssig provider ger b\xe4st variation och kvalitet. Systemet v\xe4ljer automatiskt mellan tillg\xe4ngliga AI-providers f\xf6r varje fr\xe5ga."})}),"gemini"===F&&(null===B||void 0===B||null===(o=B.gemini)||void 0===o?void 0:o.available)&&(0,wo.jsx)("div",{className:"bg-cyan-500/10 border border-cyan-500/30 rounded-lg p-3",children:(0,wo.jsx)("p",{className:"text-xs text-cyan-200",children:"\ud83d\udca1 Gemini \xe4r Google's AI-modell. Den \xe4r helt gratis att anv\xe4nda och genererar fr\xe5gor snabbt p\xe5 b\xe5de svenska och engelska."})}),"anthropic"===F&&(null===B||void 0===B||null===(i=B.anthropic)||void 0===i?void 0:i.available)&&(0,wo.jsx)("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-3",children:(0,wo.jsx)("p",{className:"text-xs text-purple-200",children:"\ud83d\udca1 Claude \xe4r Anthropic's AI-modell. H\xf6g kvalitet med $5 gratis kredit per m\xe5nad (ca 500-1000 fr\xe5gor)."})}),"openai"===F&&(null===B||void 0===B||null===(a=B.openai)||void 0===a?void 0:a.available)&&(0,wo.jsx)("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-3",children:(0,wo.jsx)("p",{className:"text-xs text-green-200",children:"\ud83d\udca1 GPT-4 \xe4r OpenAI's AI-modell. Balanserad mellan kvalitet och kostnad. Kr\xe4ver betalning efter gratis-krediter."})}),(0,wo.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,wo.jsx)("button",{onClick:()=>I(!1),className:"flex-1 rounded-lg bg-slate-700 px-4 py-2 font-semibold text-gray-200 hover:bg-slate-600",children:"Avbryt"}),(0,wo.jsx)("button",{onClick:async()=>{v(!0),I(!1);const e=Math.ceil(1.5*P);try{const{taskId:t}=await Uo({amount:e,category:M||void 0,ageGroup:R||void 0,provider:F});if(t){const e="random"===F?"Blandade providers":F.toUpperCase(),n=[];if(n.push("".concat(P," fr\xe5gor")),M&&n.push(M),R){const e={children:"Barn",youth:"Ungdomar",adults:"Vuxna"};n.push(e[R]||R)}n.push(e),d(t,{taskType:"generation",label:"AI-generering",description:n.join(" \xb7 "),createdAt:new Date})}if(!t)throw new Error("Bakgrundsjobbet saknar taskId.");await ou(t)}catch(t){console.error("Kunde inte generera fr\xe5gor:",t),de({isOpen:!0,title:"Fel vid AI-generering",message:"Kunde inte generera fr\xe5gor: ".concat(t.message),type:"error"})}finally{ce.current&&v(!1)}},disabled:!B||"random"!==F&&!(null!==(s=B[F])&&void 0!==s&&s.available)||"random"===F&&!Object.values(B).some(e=>e.available),className:"flex-1 rounded-lg px-4 py-2 font-semibold text-white transition-colors ".concat(B&&("random"===F&&Object.values(B).some(e=>e.available)||null!==(l=B[F])&&void 0!==l&&l.available)?"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700":"bg-gray-600 cursor-not-allowed opacity-50"),children:"Generera"})]})]})]})})]})]}),(0,wo.jsx)(la,{isOpen:ue.isOpen,onClose:()=>de((0,To.A)((0,To.A)({},ue),{},{isOpen:!1})),title:ue.title,message:ue.message,type:ue.type})]}):null},cu=()=>{const e=J(),{isSuperUser:n}=Eo(),[r,o]=(0,t.useState)([]),[i,a]=(0,t.useState)(!0),[s,l]=(0,t.useState)(new Set),[c,u]=(0,t.useState)(""),[d,h]=(0,t.useState)({isOpen:!1,title:"",message:"",type:"info"});(0,t.useEffect)(()=>{if(!n)return void e("/");(async()=>{try{a(!0);const e=await ta.listRuns();o(e||[])}catch(e){console.error("Kunde inte ladda rundor:",e),o([])}finally{a(!1)}})()},[n,e]);const f=r.filter(e=>{var t,n,r;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(c.toLowerCase()))||(null===(n=e.createdByName)||void 0===n?void 0:n.toLowerCase().includes(c.toLowerCase()))||(null===(r=e.joinCode)||void 0===r?void 0:r.toLowerCase().includes(c.toLowerCase()))});return n?(0,wo.jsxs)("div",{className:"min-h-screen bg-slate-950",children:[(0,wo.jsx)(Tl,{title:"Alla rundor"}),(0,wo.jsxs)("div",{className:"mx-auto max-w-6xl px-4 pt-24 pb-8",children:[(0,wo.jsxs)("div",{className:"mb-6 flex flex-col md:flex-row gap-4 items-center justify-between",children:[(0,wo.jsx)("input",{type:"text",placeholder:"S\xf6k rundor...",value:c,onChange:e=>u(e.target.value),className:"w-full md:w-96 rounded bg-slate-800 border border-slate-600 px-4 py-2 text-gray-200"}),(0,wo.jsxs)("div",{className:"flex gap-2",children:[(0,wo.jsx)("button",{onClick:()=>{s.size===f.length?l(new Set):l(new Set(f.map(e=>e.id)))},className:"rounded bg-slate-700 px-4 py-2 font-semibold text-gray-200 hover:bg-slate-600",children:s.size===f.length?"Avmarkera alla":"Markera alla"}),s.size>0&&(0,wo.jsxs)("button",{onClick:async()=>{if(0!==s.size&&window.confirm("\xc4r du s\xe4ker p\xe5 att du vill radera ".concat(s.size," runda(r)?")))try{const e=Array.from(s).map(e=>ta.deleteRun(e));await Promise.all(e),o(e=>e.filter(e=>!s.has(e.id))),l(new Set)}catch(e){console.error("Kunde inte radera rundor:",e),h({isOpen:!0,title:"Kunde inte radera rundor",message:"Kunde inte radera alla rundor. Se konsolen f\xf6r detaljer.",type:"error"})}},className:"rounded bg-red-500 px-4 py-2 font-semibold text-white hover:bg-red-400",children:["Radera markerade (",s.size,")"]})]})]}),i?(0,wo.jsx)("div",{className:"text-center py-12 text-gray-400",children:"Laddar rundor..."}):0===f.length?(0,wo.jsx)("div",{className:"text-center py-12 text-gray-400",children:"Inga rundor hittades"}):(0,wo.jsx)("div",{className:"space-y-2",children:f.map(e=>{var t;return(0,wo.jsx)("div",{className:"rounded-lg border p-4 transition-colors ".concat(s.has(e.id)?"border-cyan-500 bg-cyan-900/20":"border-slate-700 bg-slate-900/60"),children:(0,wo.jsxs)("div",{className:"flex items-start gap-4",children:[(0,wo.jsx)("input",{type:"checkbox",checked:s.has(e.id),onChange:()=>{return t=e.id,void l(e=>{const n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n});var t},className:"mt-1 w-5 h-5 rounded"}),(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,wo.jsx)("h3",{className:"text-lg font-semibold text-gray-200",children:e.name}),(0,wo.jsx)("span",{className:"px-3 py-1 bg-slate-800 rounded text-sm font-mono text-cyan-300",children:e.joinCode})]}),(0,wo.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm text-gray-400",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("span",{className:"font-semibold",children:"Skapare:"})," ",e.createdByName||"Anonym"]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("span",{className:"font-semibold",children:"L\xe4ngd:"})," ","distance-based"===e.type?"".concat(e.distanceBetweenQuestions||500,"m mellan fr\xe5gor"):"time-based"===e.type?"".concat(e.minutesBetweenQuestions||5," min mellan fr\xe5gor"):"".concat(e.lengthMeters||0,"m")]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("span",{className:"font-semibold",children:"Fr\xe5gor:"})," ",e.questionCount||(null===(t=e.checkpoints)||void 0===t?void 0:t.length)||0]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("span",{className:"font-semibold",children:"Sv\xe5righet:"})," ",e.difficulty||"N/A"]})]}),e.createdAt&&(0,wo.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["Skapad: ",new Date(e.createdAt).toLocaleString("sv-SE")]})]})]})},e.id)})})]}),(0,wo.jsx)(la,{isOpen:d.isOpen,onClose:()=>h((0,To.A)((0,To.A)({},d),{},{isOpen:!1})),title:d.title,message:d.message,type:d.type})]}):null},uu=()=>{const e=J(),{isSuperUser:n,currentUser:r}=Eo(),[o,i]=(0,t.useState)([]),[a,s]=(0,t.useState)(!0),[l,c]=(0,t.useState)(new Set),[u,d]=(0,t.useState)(""),[h,f]=(0,t.useState)({isOpen:!1,title:"",message:"",type:"info"});(0,t.useEffect)(()=>{if(!n)return void e("/");(async()=>{try{s(!0);const e=po(),t=(0,io.rJ)(e,"users"),n=(await(0,io.getDocs)(t)).docs.map(e=>(0,To.A)({id:e.id},e.data()));i(n||[])}catch(e){console.error("Kunde inte ladda anv\xe4ndare:",e),i([])}finally{s(!1)}})()},[n,e]);const p=o.filter(e=>{var t,n,r;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(u.toLowerCase()))||(null===(n=e.email)||void 0===n?void 0:n.toLowerCase().includes(u.toLowerCase()))||(null===(r=e.id)||void 0===r?void 0:r.toLowerCase().includes(u.toLowerCase()))});return n?(0,wo.jsxs)("div",{className:"min-h-screen bg-slate-950",children:[(0,wo.jsx)(Tl,{title:"Alla anv\xe4ndare"}),(0,wo.jsxs)("div",{className:"mx-auto max-w-6xl px-4 pt-24 pb-8",children:[(0,wo.jsxs)("div",{className:"mb-6 flex flex-col md:flex-row gap-4 items-center justify-between",children:[(0,wo.jsx)("input",{type:"text",placeholder:"S\xf6k anv\xe4ndare...",value:u,onChange:e=>d(e.target.value),className:"w-full md:w-96 rounded bg-slate-800 border border-slate-600 px-4 py-2 text-gray-200"}),(0,wo.jsxs)("div",{className:"flex gap-2",children:[(0,wo.jsx)("button",{onClick:()=>{const e=p.filter(e=>e.id!==(null===r||void 0===r?void 0:r.id));l.size===e.length?c(new Set):c(new Set(e.map(e=>e.id)))},className:"rounded bg-slate-700 px-4 py-2 font-semibold text-gray-200 hover:bg-slate-600",children:l.size===p.filter(e=>e.id!==(null===r||void 0===r?void 0:r.id)).length?"Avmarkera alla":"Markera alla"}),l.size>0&&(0,wo.jsxs)("button",{onClick:async()=>{if(0!==l.size&&window.confirm("\xc4r du s\xe4ker p\xe5 att du vill radera ".concat(l.size," anv\xe4ndare?")))try{const e=po(),t=Array.from(l).map(t=>(0,io.deleteDoc)((0,io.H9)(e,"users",t)));await Promise.all(t),i(e=>e.filter(e=>!l.has(e.id))),c(new Set)}catch(e){console.error("Kunde inte radera anv\xe4ndare:",e),f({isOpen:!0,title:"Kunde inte radera anv\xe4ndare",message:"Kunde inte radera alla anv\xe4ndare. Se konsolen f\xf6r detaljer.",type:"error"})}},className:"rounded bg-red-500 px-4 py-2 font-semibold text-white hover:bg-red-400",children:["Radera markerade (",l.size,")"]})]})]}),a?(0,wo.jsx)("div",{className:"text-center py-12 text-gray-400",children:"Laddar anv\xe4ndare..."}):0===p.length?(0,wo.jsx)("div",{className:"text-center py-12 text-gray-400",children:"Inga anv\xe4ndare hittades"}):(0,wo.jsx)("div",{className:"space-y-2",children:p.map(e=>{var t,n;const o=e.id===(null===r||void 0===r?void 0:r.id),i=!0===e.superUser;return(0,wo.jsx)("div",{className:"rounded-lg border p-4 transition-colors ".concat(o?"border-yellow-500 bg-yellow-900/20":l.has(e.id)?"border-cyan-500 bg-cyan-900/20":"border-slate-700 bg-slate-900/60"),children:(0,wo.jsxs)("div",{className:"flex items-start gap-4",children:[(0,wo.jsx)("input",{type:"checkbox",checked:l.has(e.id),onChange:()=>{var t;(t=e.id)!==(null===r||void 0===r?void 0:r.id)&&c(e=>{const n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n})},disabled:o,className:"mt-1 w-5 h-5 rounded disabled:opacity-30"}),(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,wo.jsx)("h3",{className:"text-lg font-semibold text-gray-200",children:e.name}),o&&(0,wo.jsx)("span",{className:"px-2 py-0.5 bg-yellow-500/20 border border-yellow-500/50 rounded text-xs text-yellow-300",children:"Du"}),i&&(0,wo.jsx)("span",{className:"px-2 py-0.5 bg-red-500/20 border border-red-500/50 rounded text-xs text-red-300",children:"SuperUser"})]}),(0,wo.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm text-gray-400",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("span",{className:"font-semibold",children:"Kontakt:"})," ",(null===(t=e.profile)||void 0===t?void 0:t.contact)||e.email||e.contact||"Ej angiven"]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("span",{className:"font-semibold",children:"Namn:"})," ",(null===(n=e.profile)||void 0===n?void 0:n.displayName)||e.name||"Ej angiven"]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("span",{className:"font-semibold",children:"ID:"})," ",e.id]})]}),e.createdAt&&(0,wo.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["Registrerad: ",new Date(e.createdAt).toLocaleString("sv-SE")]})]})]})},e.id)})})]}),(0,wo.jsx)(la,{isOpen:h.isOpen,onClose:()=>f((0,To.A)((0,To.A)({},h),{},{isOpen:!1})),title:h.title,message:h.message,type:h.type})]}):null},du=()=>{var e,n,r;const o=J(),{isSuperUser:i,currentUser:a}=Eo(),[s,l]=(0,t.useState)(null),[c,u]=(0,t.useState)([]),[d,h]=(0,t.useState)(!0),[f,p]=(0,t.useState)("all"),[m,g]=(0,t.useState)("all"),[v,y]=(0,t.useState)("all"),[b,x]=(0,t.useState)("all"),[w,_]=(0,t.useState)("all"),[k,A]=(0,t.useState)(!1),[S,N]=(0,t.useState)(new Set),[C,j]=(0,t.useState)(!1),[E,T]=(0,t.useState)(""),[I,P]=(0,t.useState)(""),[O,M]=(0,t.useState)(!1),[L,R]=(0,t.useState)({isOpen:!1,title:"",message:"",type:"info"});(0,t.useEffect)(()=>{if(!i)return void o("/");(async()=>{try{h(!0);const e=await os();l(e);const t=await ts({limit:100});u(t)}catch(e){console.error("Kunde inte ladda analytics:",e)}finally{h(!1)}})()},[i,o]);const D=c.filter(e=>{var t;if("all"!==f&&e.eventType!==f)return!1;if("all"!==v&&e.deviceType!==v)return!1;if("all"!==b&&e.os!==b)return!1;if("all"!==w&&e.browser!==w)return!1;if("all"!==m&&null!==(t=e.timestamp)&&void 0!==t&&t.toDate){const t=e.timestamp.toDate(),n=new Date,r=864e5;switch(m){case"today":if(t<new Date(n.getFullYear(),n.getMonth(),n.getDate()))return!1;break;case"week":if(t<new Date(n.getTime()-7*r))return!1;break;case"month":if(t<new Date(n.getTime()-30*r))return!1}}return!0}),F=e=>null!==e&&void 0!==e&&e.toDate?new Date(e.toDate()).toLocaleString("sv-SE"):"N/A",z=e=>(e/100).toFixed(2)+" kr",B=[...new Set(c.map(e=>e.deviceType).filter(Boolean))],U=[...new Set(c.map(e=>e.os).filter(Boolean))],q=[...new Set(c.map(e=>e.browser).filter(Boolean))],V=c.reduce((e,t)=>{var n,r;return!e[t.deviceId]||(null===(n=t.timestamp)||void 0===n?void 0:n.toDate())>(null===(r=e[t.deviceId].timestamp)||void 0===r?void 0:r.toDate())?e[t.deviceId]={deviceId:t.deviceId,deviceType:t.deviceType,os:t.os,browser:t.browser,userId:t.userId,lastSeen:t.timestamp,eventCount:1}:e[t.deviceId].eventCount++,e},{}),H=Object.values(V),G=e=>{const t=new Set(S);t.has(e)?t.delete(e):t.add(e),N(t)},K=()=>{N(new Set)},W={totalEvents:D.length,uniqueDevices:new Set(D.map(e=>e.deviceId)).size,uniqueUsers:new Set(D.filter(e=>e.userId).map(e=>e.userId)).size,eventsByType:D.reduce((e,t)=>(e[t.eventType]=(e[t.eventType]||0)+1,e),{}),donations:{count:D.filter(e=>"donation"===e.eventType).length,total:D.filter(e=>{var t;return"donation"===e.eventType&&(null===(t=e.metadata)||void 0===t?void 0:t.amount)}).reduce((e,t)=>e+t.metadata.amount,0)}};return i?(0,wo.jsxs)("div",{className:"min-h-screen bg-slate-950",children:[(0,wo.jsx)(Tl,{title:"Bes\xf6ksstatistik"}),(0,wo.jsx)("div",{className:"mx-auto max-w-7xl px-4 pt-24 pb-8 space-y-8",children:d?(0,wo.jsx)("div",{className:"text-center py-12 text-gray-400",children:"Laddar statistik..."}):(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("div",{className:"rounded-lg border border-slate-700 bg-slate-900/60 p-4",children:(0,wo.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-cyan-200 mb-2",children:"Tidsperiod"}),(0,wo.jsxs)("select",{value:m,onChange:e=>g(e.target.value),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2 text-gray-200",children:[(0,wo.jsx)("option",{value:"all",children:"All tid"}),(0,wo.jsx)("option",{value:"today",children:"Idag"}),(0,wo.jsx)("option",{value:"week",children:"Senaste 7 dagarna"}),(0,wo.jsx)("option",{value:"month",children:"Senaste 30 dagarna"})]})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-cyan-200 mb-2",children:"H\xe4ndelsetyp"}),(0,wo.jsxs)("select",{value:f,onChange:e=>p(e.target.value),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2 text-gray-200",children:[(0,wo.jsx)("option",{value:"all",children:"Alla h\xe4ndelser"}),(0,wo.jsx)("option",{value:"page_view",children:"Sidvisningar"}),(0,wo.jsx)("option",{value:"create_run",children:"Skapade rundor"}),(0,wo.jsx)("option",{value:"join_run",children:"Anslutningar"}),(0,wo.jsx)("option",{value:"donation",children:"Donationer"}),(0,wo.jsx)("option",{value:"device_linked",children:"L\xe4nkade enheter"})]})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-cyan-200 mb-2",children:"Enhetstyp"}),(0,wo.jsxs)("select",{value:v,onChange:e=>y(e.target.value),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2 text-gray-200",children:[(0,wo.jsx)("option",{value:"all",children:"Alla enhetstyper"}),B.map(e=>(0,wo.jsx)("option",{value:e,children:e},e))]})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-cyan-200 mb-2",children:"Operativsystem"}),(0,wo.jsxs)("select",{value:b,onChange:e=>x(e.target.value),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2 text-gray-200",children:[(0,wo.jsx)("option",{value:"all",children:"Alla OS"}),U.map(e=>(0,wo.jsx)("option",{value:e,children:e},e))]})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-cyan-200 mb-2",children:"Webbl\xe4sare"}),(0,wo.jsxs)("select",{value:w,onChange:e=>_(e.target.value),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2 text-gray-200",children:[(0,wo.jsx)("option",{value:"all",children:"Alla webbl\xe4sare"}),q.map(e=>(0,wo.jsx)("option",{value:e,children:e},e))]})]}),(0,wo.jsx)("div",{className:"flex items-end",children:(0,wo.jsx)("button",{onClick:()=>A(!k),className:"w-full px-4 py-2 bg-cyan-500 hover:bg-cyan-400 text-black rounded-lg font-semibold transition-colors",children:k?"D\xf6lj enhetslista":"Visa unika enheter"})})]})}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h2",{className:"text-lg font-semibold text-gray-300 mb-3",children:"\ud83d\udcca Total statistik (all tid)"}),(0,wo.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,wo.jsxs)("div",{className:"rounded-lg border border-purple-500/40 bg-purple-900/20 p-6",children:[(0,wo.jsx)("h3",{className:"text-sm font-semibold text-purple-200 mb-2",children:"Totala h\xe4ndelser"}),(0,wo.jsx)("p",{className:"text-3xl font-bold text-purple-100",children:(null===s||void 0===s?void 0:s.totalVisits)||0})]}),(0,wo.jsxs)("div",{className:"rounded-lg border border-cyan-500/40 bg-cyan-900/20 p-6",children:[(0,wo.jsx)("h3",{className:"text-sm font-semibold text-cyan-200 mb-2",children:"Unika enheter"}),(0,wo.jsx)("p",{className:"text-3xl font-bold text-cyan-100",children:(null===s||void 0===s?void 0:s.uniqueDevices)||0})]}),(0,wo.jsxs)("div",{className:"rounded-lg border border-green-500/40 bg-green-900/20 p-6",children:[(0,wo.jsx)("h3",{className:"text-sm font-semibold text-green-200 mb-2",children:"Donationer"}),(0,wo.jsx)("p",{className:"text-3xl font-bold text-green-100",children:(null===s||void 0===s||null===(e=s.donations)||void 0===e?void 0:e.count)||0}),(0,wo.jsx)("p",{className:"text-sm text-green-300 mt-1",children:z((null===s||void 0===s||null===(n=s.donations)||void 0===n?void 0:n.total)||0)})]}),(0,wo.jsxs)("div",{className:"rounded-lg border border-amber-500/40 bg-amber-900/20 p-6",children:[(0,wo.jsx)("h3",{className:"text-sm font-semibold text-amber-200 mb-2",children:"Skapade rundor"}),(0,wo.jsx)("p",{className:"text-3xl font-bold text-amber-100",children:(null===s||void 0===s||null===(r=s.eventsByType)||void 0===r?void 0:r.create_run)||0})]})]})]}),("all"!==m||"all"!==f)&&(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("h2",{className:"text-lg font-semibold text-gray-300 mb-3",children:["\ud83d\udd0d Filtrerad statistik",(0,wo.jsxs)("span",{className:"text-sm font-normal text-gray-400 ml-2",children:["(","today"===m?"Idag":"week"===m?"Senaste 7 dagarna":"month"===m?"Senaste 30 dagarna":"All tid","all"!==f&&" \u2022 ".concat(f),")"]})]}),(0,wo.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,wo.jsxs)("div",{className:"rounded-lg border border-purple-500/40 bg-purple-900/20 p-6",children:[(0,wo.jsx)("h3",{className:"text-sm font-semibold text-purple-200 mb-2",children:"H\xe4ndelser"}),(0,wo.jsx)("p",{className:"text-3xl font-bold text-purple-100",children:W.totalEvents})]}),(0,wo.jsxs)("div",{className:"rounded-lg border border-cyan-500/40 bg-cyan-900/20 p-6",children:[(0,wo.jsx)("h3",{className:"text-sm font-semibold text-cyan-200 mb-2",children:"Unika enheter"}),(0,wo.jsx)("p",{className:"text-3xl font-bold text-cyan-100",children:W.uniqueDevices}),(0,wo.jsxs)("p",{className:"text-xs text-cyan-300 mt-1",children:[W.uniqueUsers," anv\xe4ndare"]})]}),(0,wo.jsxs)("div",{className:"rounded-lg border border-green-500/40 bg-green-900/20 p-6",children:[(0,wo.jsx)("h3",{className:"text-sm font-semibold text-green-200 mb-2",children:"Donationer"}),(0,wo.jsx)("p",{className:"text-3xl font-bold text-green-100",children:W.donations.count}),(0,wo.jsx)("p",{className:"text-sm text-green-300 mt-1",children:z(W.donations.total)})]}),(0,wo.jsxs)("div",{className:"rounded-lg border border-amber-500/40 bg-amber-900/20 p-6",children:[(0,wo.jsx)("h3",{className:"text-sm font-semibold text-amber-200 mb-2",children:"Skapade rundor"}),(0,wo.jsx)("p",{className:"text-3xl font-bold text-amber-100",children:W.eventsByType.create_run||0})]})]})]}),(0,wo.jsxs)("div",{className:"rounded-lg border border-slate-700 bg-slate-900/60 p-6",children:[(0,wo.jsx)("h2",{className:"text-xl font-semibold text-gray-200 mb-4",children:"H\xe4ndelser per typ"}),(0,wo.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries((null===s||void 0===s?void 0:s.eventsByType)||{}).map(e=>{let[t,n]=e;return(0,wo.jsxs)("div",{className:"rounded bg-slate-800/60 p-3",children:[(0,wo.jsx)("p",{className:"text-sm text-gray-400",children:t}),(0,wo.jsx)("p",{className:"text-2xl font-bold text-gray-100",children:n})]},t)})})]}),k&&(0,wo.jsxs)("div",{className:"rounded-lg border border-cyan-500/40 bg-cyan-900/10 p-6",children:[(0,wo.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,wo.jsxs)("h2",{className:"text-xl font-semibold text-gray-200",children:["\ud83d\udcf1 Unika enheter (",H.length,")"]}),(0,wo.jsxs)("div",{className:"flex gap-2",children:[S.size>0&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsxs)("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-green-500 hover:bg-green-400 text-black rounded-lg font-semibold transition-colors",children:["Skicka meddelande (",S.size,")"]}),(0,wo.jsx)("button",{onClick:K,className:"px-4 py-2 bg-red-500 hover:bg-red-400 text-white rounded-lg font-semibold transition-colors",children:"Avmarkera alla"})]}),(0,wo.jsx)("button",{onClick:S.size===H.length?K:()=>{N(new Set(H.map(e=>e.deviceId)))},className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-gray-200 rounded-lg font-semibold transition-colors",children:S.size===H.length?"Avmarkera alla":"Markera alla"})]})]}),(0,wo.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:H.map(e=>(0,wo.jsx)("div",{onClick:()=>G(e.deviceId),className:"rounded border p-4 cursor-pointer transition-all ".concat(S.has(e.deviceId)?"border-cyan-500 bg-cyan-900/30 ring-2 ring-cyan-500/50":"border-slate-700 bg-slate-800/40 hover:border-slate-600"),children:(0,wo.jsx)("div",{className:"flex items-start justify-between gap-4",children:(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,wo.jsx)("input",{type:"checkbox",checked:S.has(e.deviceId),onChange:()=>G(e.deviceId),className:"w-4 h-4",onClick:e=>e.stopPropagation()}),(0,wo.jsx)("span",{className:"font-mono text-sm text-gray-300",children:e.deviceId})]}),(0,wo.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[e.deviceType&&(0,wo.jsxs)("div",{className:"flex items-center gap-1",children:[(0,wo.jsx)("span",{className:"text-gray-400",children:"Typ:"}),(0,wo.jsx)("span",{className:"text-cyan-200",children:e.deviceType})]}),e.os&&(0,wo.jsxs)("div",{className:"flex items-center gap-1",children:[(0,wo.jsx)("span",{className:"text-gray-400",children:"OS:"}),(0,wo.jsx)("span",{className:"text-cyan-200",children:e.os})]}),e.browser&&(0,wo.jsxs)("div",{className:"flex items-center gap-1",children:[(0,wo.jsx)("span",{className:"text-gray-400",children:"Webbl\xe4sare:"}),(0,wo.jsx)("span",{className:"text-cyan-200",children:e.browser})]}),(0,wo.jsxs)("div",{className:"flex items-center gap-1",children:[(0,wo.jsx)("span",{className:"text-gray-400",children:"H\xe4ndelser:"}),(0,wo.jsx)("span",{className:"text-cyan-200",children:e.eventCount})]})]}),e.userId&&(0,wo.jsxs)("div",{className:"mt-2 text-xs text-gray-400",children:["Anv\xe4ndare: ",e.userId.substring(0,12),"..."]}),(0,wo.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:["Senast sedd: ",F(e.lastSeen)]})]})})},e.deviceId))})]}),C&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("div",{className:"fixed inset-0 bg-black/60 z-40",onClick:()=>j(!1)}),(0,wo.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:(0,wo.jsxs)("div",{className:"bg-slate-900 rounded-lg border border-slate-700 p-6 max-w-lg w-full",children:[(0,wo.jsxs)("h3",{className:"text-xl font-bold text-gray-200 mb-4",children:["Skicka meddelande till ",S.size," enheter"]}),(0,wo.jsxs)("div",{className:"space-y-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Titel"}),(0,wo.jsx)("input",{type:"text",value:E,onChange:e=>T(e.target.value),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2 text-gray-200",placeholder:"Meddelandetitel..."})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Meddelande"}),(0,wo.jsx)("textarea",{value:I,onChange:e=>P(e.target.value),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2 text-gray-200 min-h-32",placeholder:"Skriv ditt meddelande h\xe4r..."})]}),(0,wo.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,wo.jsx)("button",{onClick:()=>j(!1),disabled:O,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-gray-200 rounded-lg font-semibold transition-colors disabled:opacity-50",children:"Avbryt"}),(0,wo.jsx)("button",{onClick:async()=>{if(E.trim()&&I.trim())if(0!==S.size){M(!0);try{const e=Array.from(S).map(e=>{const t=H.find(t=>t.deviceId===e);return fs({title:E,message:I,userId:(null===t||void 0===t?void 0:t.userId)||null,deviceId:e,adminId:(null===a||void 0===a?void 0:a.uid)||null,type:"system",metadata:{sentFrom:"analytics_page",sentBy:"superuser"}})});await Promise.all(e),R({isOpen:!0,title:"Meddelande skickat",message:"Meddelande skickat till ".concat(S.size," enheter"),type:"success"}),j(!1),T(""),P(""),N(new Set)}catch(e){console.error("Kunde inte skicka meddelande:",e),R({isOpen:!0,title:"Kunde inte skicka meddelande",message:"Kunde inte skicka meddelande. Se konsolen f\xf6r detaljer.",type:"error"})}finally{M(!1)}}else R({isOpen:!0,title:"Ingen markering",message:"V\xe4lj minst en enhet att skicka till",type:"warning"});else R({isOpen:!0,title:"Ogiltigt meddelande",message:"Titel och meddelande f\xe5r inte vara tomma",type:"warning"})},disabled:O,className:"px-4 py-2 bg-green-500 hover:bg-green-400 text-black rounded-lg font-semibold transition-colors disabled:opacity-50",children:O?"Skickar...":"Skicka"})]})]})]})})]}),(0,wo.jsxs)("div",{className:"rounded-lg border border-slate-700 bg-slate-900/60 p-6",children:[(0,wo.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,wo.jsxs)("h2",{className:"text-xl font-semibold text-gray-200",children:["Senaste h\xe4ndelser",(0,wo.jsxs)("span",{className:"text-sm font-normal text-gray-400 ml-2",children:["(",D.length," av ",c.length,")"]})]})}),(0,wo.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:0===D.length?(0,wo.jsx)("div",{className:"text-center py-8 text-gray-400",children:"Inga h\xe4ndelser hittades"}):D.map(e=>{var t,n,r;return(0,wo.jsx)("div",{className:"rounded border border-slate-700 bg-slate-800/40 p-3 text-sm",children:(0,wo.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,wo.jsx)("span",{className:"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ".concat("donation"===e.eventType?"bg-green-500/20 text-green-200":"create_run"===e.eventType?"bg-purple-500/20 text-purple-200":"join_run"===e.eventType?"bg-cyan-500/20 text-cyan-200":"page_view"===e.eventType?"bg-slate-500/20 text-slate-200":"bg-amber-500/20 text-amber-200"),children:e.eventType}),e.userId&&(0,wo.jsxs)("span",{className:"text-xs text-gray-400",children:["User: ",e.userId.substring(0,8),"..."]})]}),(0,wo.jsxs)("div",{className:"text-gray-300",children:["Device: ",(0,wo.jsx)("span",{className:"font-mono text-xs",children:e.deviceId})]}),(e.deviceType||e.os||e.browser)&&(0,wo.jsxs)("div",{className:"flex gap-3 text-xs mt-1",children:[e.deviceType&&(0,wo.jsx)("span",{className:"text-cyan-300",children:e.deviceType}),e.os&&(0,wo.jsx)("span",{className:"text-cyan-300",children:e.os}),e.browser&&(0,wo.jsx)("span",{className:"text-cyan-300",children:e.browser})]}),(null===(t=e.metadata)||void 0===t?void 0:t.path)&&(0,wo.jsxs)("div",{className:"text-gray-400",children:["Path: ",e.metadata.path]}),(null===(n=e.metadata)||void 0===n?void 0:n.runId)&&(0,wo.jsxs)("div",{className:"text-gray-400",children:["Run: ",e.metadata.runName||e.metadata.runId]}),(null===(r=e.metadata)||void 0===r?void 0:r.amount)&&(0,wo.jsxs)("div",{className:"text-green-300 font-semibold",children:["Belopp: ",z(e.metadata.amount)]})]}),(0,wo.jsx)("div",{className:"text-xs text-gray-500 text-right",children:F(e.timestamp)})]})},e.id)})})]})]})}),(0,wo.jsx)(la,{isOpen:L.isOpen,onClose:()=>R((0,To.A)((0,To.A)({},L),{},{isOpen:!1})),title:L.title,message:L.message,type:L.type})]}):null},hu=()=>{const e=J(),{isSuperUser:n,currentUser:r}=Eo(),[o,i]=(0,t.useState)([]),[a,s]=(0,t.useState)(!0),[l,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)({isOpen:!1,title:"",message:"",type:"info"}),[h,f]=(0,t.useState)({title:"",body:"",type:"info",targetType:"all",targetId:""});(0,t.useEffect)(()=>{n?p():e("/")},[n,e]);const p=async()=>{try{s(!0);const e=await bs();i(e)}catch(e){console.error("Kunde inte ladda meddelanden:",e)}finally{s(!1)}},m=e=>{switch(e){case"info":return"bg-blue-500/20 text-blue-200 border-blue-500/50";case"success":return"bg-green-500/20 text-green-200 border-green-500/50";case"warning":return"bg-amber-500/20 text-amber-200 border-amber-500/50";case"error":return"bg-red-500/20 text-red-200 border-red-500/50";default:return"bg-slate-500/20 text-slate-200 border-slate-500/50"}},g=e=>"all"===e.targetType?"Alla anv\xe4ndare":"user"===e.targetType?"Anv\xe4ndare: ".concat(e.targetId):"device"===e.targetType?"Enhet: ".concat(e.targetId):"Ok\xe4nd mottagare";return n?(0,wo.jsxs)("div",{className:"min-h-screen bg-slate-950",children:[(0,wo.jsx)(Tl,{title:"Meddelanden"}),(0,wo.jsxs)("div",{className:"mx-auto max-w-6xl px-4 pt-24 pb-8 space-y-6",children:[(0,wo.jsxs)("div",{className:"flex justify-between items-center",children:[(0,wo.jsx)("h2",{className:"text-2xl font-bold text-gray-200",children:"Hantera meddelanden"}),(0,wo.jsx)("button",{onClick:()=>c(!l),className:"rounded bg-purple-500 px-4 py-2 font-semibold text-black hover:bg-purple-400",children:l?"Avbryt":"+ Nytt meddelande"})]}),l&&(0,wo.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await fs(h,r.id),f({title:"",body:"",type:"info",targetType:"all",targetId:""}),c(!1),await p(),d({isOpen:!0,title:"Meddelande skickat",message:"Meddelande skickat!",type:"success"})}catch(t){console.error("Kunde inte skicka meddelande:",t),d({isOpen:!0,title:"Kunde inte skicka meddelande",message:"Kunde inte skicka meddelande. Se konsolen f\xf6r detaljer.",type:"error"})}},className:"rounded-lg border border-purple-500/40 bg-slate-900/60 p-6 space-y-4",children:[(0,wo.jsx)("h3",{className:"text-xl font-semibold text-purple-200",children:"Skapa nytt meddelande"}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"mb-1 block text-sm font-semibold text-gray-200",children:"Rubrik"}),(0,wo.jsx)("input",{type:"text",value:h.title,onChange:e=>f((0,To.A)((0,To.A)({},h),{},{title:e.target.value})),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2 text-gray-200",required:!0})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"mb-1 block text-sm font-semibold text-gray-200",children:"Meddelande"}),(0,wo.jsx)("textarea",{value:h.body,onChange:e=>f((0,To.A)((0,To.A)({},h),{},{body:e.target.value})),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2 text-gray-200 min-h-32",required:!0})]}),(0,wo.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"mb-1 block text-sm font-semibold text-gray-200",children:"Typ"}),(0,wo.jsxs)("select",{value:h.type,onChange:e=>f((0,To.A)((0,To.A)({},h),{},{type:e.target.value})),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2 text-gray-200",children:[(0,wo.jsx)("option",{value:"info",children:"Info"}),(0,wo.jsx)("option",{value:"success",children:"Framg\xe5ng"}),(0,wo.jsx)("option",{value:"warning",children:"Varning"}),(0,wo.jsx)("option",{value:"error",children:"Fel"})]})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"mb-1 block text-sm font-semibold text-gray-200",children:"Mottagare"}),(0,wo.jsxs)("select",{value:h.targetType,onChange:e=>f((0,To.A)((0,To.A)({},h),{},{targetType:e.target.value,targetId:""})),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2 text-gray-200",children:[(0,wo.jsx)("option",{value:"all",children:"Alla"}),(0,wo.jsx)("option",{value:"user",children:"Specifik anv\xe4ndare"}),(0,wo.jsx)("option",{value:"device",children:"Specifik enhet"})]})]}),"all"!==h.targetType&&(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"mb-1 block text-sm font-semibold text-gray-200",children:"user"===h.targetType?"Anv\xe4ndar-ID":"Enhets-ID"}),(0,wo.jsx)("input",{type:"text",value:h.targetId,onChange:e=>f((0,To.A)((0,To.A)({},h),{},{targetId:e.target.value})),className:"w-full rounded bg-slate-800 border border-slate-600 px-3 py-2 text-gray-200",required:!0})]})]}),(0,wo.jsx)("button",{type:"submit",className:"w-full rounded bg-purple-500 px-4 py-3 font-bold text-black hover:bg-purple-400",children:"Skicka meddelande"})]}),(0,wo.jsxs)("div",{className:"space-y-3",children:[(0,wo.jsx)("h3",{className:"text-lg font-semibold text-gray-200",children:"Skickade meddelanden"}),a?(0,wo.jsx)("div",{className:"text-center py-12 text-gray-400",children:"Laddar meddelanden..."}):0===o.length?(0,wo.jsx)("div",{className:"text-center py-12 text-gray-400",children:"Inga meddelanden hittades"}):o.map(e=>{return(0,wo.jsx)("div",{className:"rounded-lg border border-slate-700 bg-slate-900/60 p-4",children:(0,wo.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,wo.jsx)("h4",{className:"text-lg font-semibold text-gray-200",children:e.title}),(0,wo.jsx)("span",{className:"px-2 py-0.5 border rounded text-xs font-medium ".concat(m(e.type)),children:e.type})]}),(0,wo.jsx)("p",{className:"text-gray-300 mb-3",children:e.body}),(0,wo.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[(0,wo.jsxs)("span",{children:["Mottagare: ",g(e)]}),(0,wo.jsx)("span",{children:"\u2022"}),(0,wo.jsxs)("span",{children:["Skapat: ",(t=e.createdAt,null!==t&&void 0!==t&&t.toDate?new Date(t.toDate()).toLocaleString("sv-SE"):"N/A")]}),e.read&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("span",{children:"\u2022"}),(0,wo.jsx)("span",{className:"text-green-400",children:"L\xe4st"})]})]})]}),(0,wo.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\xc4r du s\xe4ker p\xe5 att du vill radera detta meddelande?"))try{await ys(e),await p()}catch(t){console.error("Kunde inte radera meddelande:",t),d({isOpen:!0,title:"Kunde inte radera meddelande",message:"Kunde inte radera meddelande.",type:"error"})}})(e.id),className:"text-red-400 hover:text-red-300 transition-colors p-2",title:"Radera",children:(0,wo.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},e.id);var t})]})]}),(0,wo.jsx)(la,{isOpen:u.isOpen,onClose:()=>d((0,To.A)((0,To.A)({},u),{},{isOpen:!1})),title:u.title,message:u.message,type:u.type})]}):null},fu=po(),pu=()=>{const e=J(),{isSuperUser:n}=Eo(),[r,o]=(0,t.useState)([]),[i,a]=(0,t.useState)(!0),[s,l]=(0,t.useState)("all");(0,t.useEffect)(()=>{if(!n)return void e("/");const t=(0,io.P)((0,io.rJ)(fu,"notifications"),(0,io._M)("targetAudience","==","superusers"),(0,io.My)("createdAt","desc")),r=(0,io.aQ)(t,e=>{const t=e.docs.map(e=>(0,To.A)({id:e.id},e.data()));o(t),a(!1)},e=>{console.error("Kunde inte ladda notifikationer:",e),a(!1)});return()=>r()},[n,e]);const c=r.filter(e=>"unread"===s?!e.read:"success"===s?"question_import"===e.type:"error"!==s||"question_import_error"===e.type),u=r.filter(e=>!e.read).length,d=e=>{if(null===e||void 0===e||!e.toDate)return"N/A";const t=e.toDate(),n=new Date-t,r=Math.floor(n/6e4),o=Math.floor(n/36e5),i=Math.floor(n/864e5);return r<1?"Just nu":r<60?"".concat(r," min sedan"):o<24?"".concat(o," timmar sedan"):i<7?"".concat(i," dagar sedan"):t.toLocaleDateString("sv-SE")},h=e=>{switch(e){case"question_import":return"\u2705";case"question_import_error":return"\u274c";default:return"\ud83d\udce2"}},f=e=>{switch(e){case"question_import":return"border-green-500/40 bg-green-900/20";case"question_import_error":return"border-red-500/40 bg-red-900/20";default:return"border-cyan-500/40 bg-cyan-900/20"}};return n?(0,wo.jsxs)("div",{className:"min-h-screen bg-slate-950",children:[(0,wo.jsx)(Tl,{title:"Systemnotiser"}),(0,wo.jsxs)("div",{className:"mx-auto max-w-4xl px-4 pt-24 pb-8 space-y-6",children:[(0,wo.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h2",{className:"text-2xl font-bold text-gray-200",children:"Systemnotiser"}),(0,wo.jsx)("p",{className:"text-sm text-gray-400",children:u>0?"".concat(u," ol\xe4sta notiser"):"Inga ol\xe4sta notiser"})]}),u>0&&(0,wo.jsx)("button",{onClick:async()=>{const e=r.filter(e=>!e.read).map(e=>(0,io.mZ)((0,io.H9)(fu,"notifications",e.id),{read:!0}));try{await Promise.all(e)}catch(t){console.error("Kunde inte markera alla som l\xe4sta:",t)}},className:"px-4 py-2 bg-cyan-500 hover:bg-cyan-400 text-black rounded-lg font-semibold transition-colors",children:"Markera alla som l\xe4sta"})]}),(0,wo.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,wo.jsxs)("button",{onClick:()=>l("all"),className:"px-4 py-2 rounded-lg font-semibold transition-colors ".concat("all"===s?"bg-cyan-500 text-black":"bg-slate-800 text-gray-300 hover:bg-slate-700"),children:["Alla (",r.length,")"]}),(0,wo.jsxs)("button",{onClick:()=>l("unread"),className:"px-4 py-2 rounded-lg font-semibold transition-colors ".concat("unread"===s?"bg-cyan-500 text-black":"bg-slate-800 text-gray-300 hover:bg-slate-700"),children:["Ol\xe4sta (",u,")"]}),(0,wo.jsxs)("button",{onClick:()=>l("success"),className:"px-4 py-2 rounded-lg font-semibold transition-colors ".concat("success"===s?"bg-cyan-500 text-black":"bg-slate-800 text-gray-300 hover:bg-slate-700"),children:["Lyckade (",r.filter(e=>"question_import"===e.type).length,")"]}),(0,wo.jsxs)("button",{onClick:()=>l("error"),className:"px-4 py-2 rounded-lg font-semibold transition-colors ".concat("error"===s?"bg-cyan-500 text-black":"bg-slate-800 text-gray-300 hover:bg-slate-700"),children:["Fel (",r.filter(e=>"question_import_error"===e.type).length,")"]})]}),(0,wo.jsx)("div",{className:"space-y-3",children:i?(0,wo.jsx)("div",{className:"text-center py-12 text-gray-400",children:"Laddar notiser..."}):0===c.length?(0,wo.jsx)("div",{className:"text-center py-12 text-gray-400",children:"all"===s?"Inga notiser \xe4nnu":"Inga notiser matchar filtret"}):c.map(e=>(0,wo.jsx)("div",{className:"rounded-lg border p-4 transition-all ".concat(f(e.type)," ").concat(e.read?"":"ring-2 ring-cyan-500/50"),onClick:()=>!e.read&&(async e=>{try{const t=(0,io.H9)(fu,"notifications",e);await(0,io.mZ)(t,{read:!0})}catch(t){console.error("Kunde inte markera som l\xe4st:",t)}})(e.id),children:(0,wo.jsxs)("div",{className:"flex items-start gap-3",children:[(0,wo.jsx)("span",{className:"text-2xl flex-shrink-0",children:h(e.type)}),(0,wo.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,wo.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-1",children:[(0,wo.jsxs)("h3",{className:"font-semibold text-gray-200",children:[e.title,!e.read&&(0,wo.jsx)("span",{className:"ml-2 px-2 py-0.5 bg-cyan-500 text-black text-xs rounded-full",children:"Nytt"})]}),(0,wo.jsx)("span",{className:"text-xs text-gray-400 whitespace-nowrap",children:d(e.createdAt)})]}),(0,wo.jsx)("p",{className:"text-sm text-gray-300 mb-2",children:e.message}),e.data&&(0,wo.jsxs)("div",{className:"text-xs text-gray-400 space-y-1",children:[e.data.count&&(0,wo.jsxs)("div",{children:["Antal fr\xe5gor: ",(0,wo.jsx)("strong",{className:"text-gray-300",children:e.data.count})]}),e.data.provider&&(0,wo.jsxs)("div",{children:["AI-provider: ",(0,wo.jsx)("strong",{className:"text-gray-300",children:e.data.provider})]}),e.data.error&&(0,wo.jsxs)("div",{className:"text-red-300",children:["Fel: ",e.data.error]})]})]})]})},e.id))})]})]}):null},mu=()=>{const[e,n]=(0,t.useState)([]),[r,o]=(0,t.useState)([]),[i,a]=(0,t.useState)(!0),[s,l]=(0,t.useState)("all"),[c,u]=(0,t.useState)("all"),[d,h]=(0,t.useState)(50),[f,p]=(0,t.useState)([]),[m,g]=(0,t.useState)(new Set),[v,y]=(0,t.useState)(!1),[b,x]=(0,t.useState)(!0),[w,_]=(0,t.useState)({isOpen:!1,title:"",message:"",type:"info"}),k=(0,t.useCallback)(async()=>{a(!0);try{const e=(0,io.rJ)(vo,"errorLogs"),t=500,n=(0,io.P)(e,(0,io.My)("timestamp","desc"),(0,io.AB)(t)),r=(await(0,io.getDocs)(n)).docs.map(e=>{var t;return(0,To.A)((0,To.A)({id:e.id},e.data()),{},{timestamp:null===(t=e.data().timestamp)||void 0===t?void 0:t.toDate()})});o(r);const i=[...new Set(r.map(e=>e.deviceId).filter(Boolean))];p(i)}catch(e){console.error("Failed to load logs:",e)}finally{a(!1)}},[]);(0,t.useEffect)(()=>{if(!b)return;const e=(0,io.rJ)(vo,"errorLogs"),t=(0,io.P)(e,(0,io.My)("timestamp","desc"),(0,io.AB)(500)),n=(0,io.aQ)(t,e=>{const t=e.docs.map(e=>{var t;return(0,To.A)((0,To.A)({id:e.id},e.data()),{},{timestamp:null===(t=e.data().timestamp)||void 0===t?void 0:t.toDate()})});o(t);const n=[...new Set(t.map(e=>e.deviceId).filter(Boolean))];p(n),a(!1)},e=>{console.error("Error listening to logs:",e),a(!1)});return()=>n()},[b]),(0,t.useEffect)(()=>{let e=[...r];"all"!==s&&(e=e.filter(e=>e.level===s)),"all"!==c&&(e=e.filter(e=>e.deviceId===c)),e=e.slice(0,d),n(e)},[r,s,c,d]);const A=e=>{switch(e){case"error":return"bg-red-900/40 border-red-500/40 text-red-200";case"debug":return"bg-blue-900/40 border-blue-500/40 text-blue-200";case"info":return"bg-emerald-900/40 border-emerald-500/40 text-emerald-200";default:return"bg-slate-900/40 border-slate-500/40 text-slate-200"}},S=e=>{switch(e){case"error":return"\ud83d\udd34";case"debug":return"\ud83d\udccd";case"info":return"\u2139\ufe0f";default:return"\ud83d\udcdd"}};return(0,wo.jsxs)(Pl,{headerTitle:"Error Logs",maxWidth:"max-w-6xl",children:[(0,wo.jsxs)("div",{className:"space-y-6",children:[(0,wo.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,wo.jsxs)("div",{className:"flex items-center gap-3",children:[(0,wo.jsx)("h1",{className:"text-3xl font-bold text-slate-100",children:"Error Logs & Debug Info"}),b&&(0,wo.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 bg-green-900/40 border border-green-500/40 rounded-full",children:[(0,wo.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,wo.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),(0,wo.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}),(0,wo.jsx)("span",{className:"text-xs text-green-300 font-semibold",children:"LIVE"})]})]}),(0,wo.jsxs)("div",{className:"flex gap-2",children:[(0,wo.jsx)("button",{onClick:()=>x(!b),className:"px-4 py-2 rounded-lg font-semibold transition-colors ".concat(b?"bg-green-600 text-white hover:bg-green-700":"bg-slate-700 text-gray-300 hover:bg-slate-600"),children:b?"\u23f8\ufe0f Pausa live":"\u25b6\ufe0f Aktivera live"}),(0,wo.jsx)("button",{onClick:k,disabled:b,className:"px-4 py-2 bg-cyan-500 text-black rounded-lg font-semibold hover:bg-cyan-400 disabled:bg-slate-600 disabled:text-gray-400",children:"Uppdatera"}),m.size>0&&(0,wo.jsx)("button",{onClick:async()=>{if(0===m.size)return;if(window.confirm("\xc4r du s\xe4ker p\xe5 att du vill ta bort ".concat(m.size," logg").concat(1!==m.size?"ar":"","?"))){y(!0);try{const e=Array.from(m),t=500;for(let n=0;n<e.length;n+=t){const r=(0,io.wP)(vo);e.slice(n,n+t).forEach(e=>{const t=(0,io.H9)(vo,"errorLogs",e);r.delete(t)}),await r.commit()}o(e=>e.filter(e=>!m.has(e.id))),g(new Set),_({isOpen:!0,title:"Loggar borttagna",message:"".concat(e.length," logg").concat(1!==e.length?"ar":""," togs bort"),type:"success"})}catch(e){console.error("Failed to delete logs:",e),_({isOpen:!0,title:"Kunde inte ta bort loggar",message:e.message,type:"error"})}finally{y(!1)}}},disabled:v,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 disabled:bg-gray-600",children:v?"Tar bort...":"\ud83d\uddd1\ufe0f Ta bort valda (".concat(m.size,")")})]})]}),e.length>0&&(0,wo.jsxs)("div",{className:"flex items-center gap-3 bg-slate-800/50 rounded-lg p-3",children:[(0,wo.jsxs)("button",{onClick:()=>{g(new Set(e.map(e=>e.id)))},className:"px-3 py-1 bg-slate-700 text-white rounded text-sm hover:bg-slate-600",children:["Markera alla (",e.length,")"]}),(0,wo.jsx)("button",{onClick:()=>{g(new Set)},className:"px-3 py-1 bg-slate-700 text-white rounded text-sm hover:bg-slate-600",children:"Avmarkera alla"}),(0,wo.jsx)("div",{className:"flex-1"}),(0,wo.jsx)("button",{onClick:async()=>{if(!window.confirm("\u26a0\ufe0f VARNING! Du \xe4r p\xe5 v\xe4g att ta bort ALLA loggar i systemet.\n\nDetta inkluderar ALLA ".concat(r.length,"+ loggar, oavsett filter.\n\n\xc4r du s\xe4ker p\xe5 att du vill forts\xe4tta?")))return;if(window.confirm("\u26a0\ufe0f SISTA CHANSEN!\n\nDetta kommer att PERMANENT ta bort alla felloggar och debug-information.\n\nDetta kan INTE \xe5ngras!\n\nKlicka OK f\xf6r att radera alla loggar.")){y(!0);try{const e=(0,io.rJ)(vo,"errorLogs"),t=(0,io.P)(e,(0,io.My)("timestamp","desc")),n=(await(0,io.getDocs)(t)).docs.map(e=>e.id),r=500;for(let o=0;o<n.length;o+=r){const e=(0,io.wP)(vo);n.slice(o,o+r).forEach(t=>{const n=(0,io.H9)(vo,"errorLogs",t);e.delete(n)}),await e.commit()}await k(),g(new Set),_({isOpen:!0,title:"Alla loggar raderade",message:"Alla ".concat(n.length," loggar har raderats"),type:"success"})}catch(e){console.error("Failed to delete all logs:",e),_({isOpen:!0,title:"Kunde inte ta bort loggar",message:e.message,type:"error"})}finally{y(!1)}}},disabled:v,className:"px-3 py-1 bg-red-700 text-white rounded text-sm hover:bg-red-800 disabled:bg-gray-600 font-semibold",children:"\ud83d\uddd1\ufe0f Radera alla loggar"})]}),(0,wo.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,wo.jsxs)("button",{onClick:()=>l("all"),className:"px-4 py-2 rounded-lg font-semibold transition-colors ".concat("all"===s?"bg-slate-700 text-white":"bg-slate-800 text-gray-400 hover:text-white"),children:["Alla (",e.length,")"]}),(0,wo.jsx)("button",{onClick:()=>l("error"),className:"px-4 py-2 rounded-lg font-semibold transition-colors ".concat("error"===s?"bg-red-700 text-white":"bg-slate-800 text-gray-400 hover:text-white"),children:"\ud83d\udd34 Errors"}),(0,wo.jsx)("button",{onClick:()=>l("debug"),className:"px-4 py-2 rounded-lg font-semibold transition-colors ".concat("debug"===s?"bg-blue-700 text-white":"bg-slate-800 text-gray-400 hover:text-white"),children:"\ud83d\udccd GPS Debug"}),(0,wo.jsx)("button",{onClick:()=>l("info"),className:"px-4 py-2 rounded-lg font-semibold transition-colors ".concat("info"===s?"bg-emerald-700 text-white":"bg-slate-800 text-gray-400 hover:text-white"),children:"\u2139\ufe0f Info"})]}),(0,wo.jsxs)("div",{className:"space-y-2",children:[(0,wo.jsx)("span",{className:"text-sm text-gray-400",children:"Filtrera enhet:"}),(0,wo.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,wo.jsx)("button",{onClick:()=>u("all"),className:"px-3 py-1 rounded text-sm ".concat("all"===c?"bg-purple-600 text-white":"bg-slate-800 text-gray-400 hover:text-white"),children:"Alla enheter"}),f.slice(0,10).map(e=>(0,wo.jsxs)("button",{onClick:()=>u(e),className:"px-3 py-1 rounded text-sm font-mono ".concat(c===e?"bg-purple-600 text-white":"bg-slate-800 text-gray-400 hover:text-white"),title:e,children:[e.substring(0,8),"..."]},e))]})]}),(0,wo.jsxs)("div",{className:"flex items-center gap-2",children:[(0,wo.jsx)("span",{className:"text-sm text-gray-400",children:"Visa:"}),[50,100,200].map(e=>(0,wo.jsx)("button",{onClick:()=>h(e),className:"px-3 py-1 rounded text-sm ".concat(d===e?"bg-cyan-600 text-white":"bg-slate-800 text-gray-400 hover:text-white"),children:e},e))]}),i?(0,wo.jsxs)("div",{className:"text-center py-12",children:[(0,wo.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-500"}),(0,wo.jsx)("p",{className:"mt-4 text-gray-400",children:"Laddar loggar..."})]}):0===e.length?(0,wo.jsx)("div",{className:"text-center py-12 text-gray-400",children:"Inga loggar hittades"}):(0,wo.jsx)("div",{className:"space-y-4",children:e.map(e=>{var t,n,r,o,i;return(0,wo.jsx)("div",{className:"rounded-2xl border p-4 ".concat(A(e.level)," ").concat(m.has(e.id)?"ring-2 ring-cyan-500":""),children:(0,wo.jsxs)("div",{className:"flex items-start gap-4",children:[(0,wo.jsx)("input",{type:"checkbox",checked:m.has(e.id),onChange:()=>{return t=e.id,void g(e=>{const n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n});var t},className:"mt-1 h-5 w-5 rounded border-gray-600 bg-slate-800 text-cyan-500 focus:ring-cyan-500 cursor-pointer"}),(0,wo.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,wo.jsxs)("div",{className:"flex items-center gap-2",children:[(0,wo.jsx)("span",{className:"text-xl",children:S(e.level)}),(0,wo.jsx)("span",{className:"font-semibold",children:e.type}),(0,wo.jsx)("span",{className:"text-xs opacity-60",children:null===(t=e.timestamp)||void 0===t?void 0:t.toLocaleString("sv-SE")})]}),e.message&&(0,wo.jsx)("p",{className:"text-sm font-mono",children:e.message}),"error"===e.level&&(0,wo.jsxs)("div",{className:"bg-red-900/20 rounded p-3 text-xs space-y-2",children:[(0,wo.jsx)("div",{className:"font-semibold text-red-300",children:"\ud83d\udccd Error Location:"}),e.filename&&(0,wo.jsxs)("div",{className:"font-mono",children:[(0,wo.jsx)("span",{className:"text-gray-400",children:"File: "}),(0,wo.jsx)("span",{className:"text-red-200",children:e.filename}),e.lineno&&(0,wo.jsxs)("span",{className:"text-red-300",children:[" : line ",e.lineno]}),e.colno&&(0,wo.jsxs)("span",{className:"text-red-300",children:[" : col ",e.colno]})]}),e.pathname&&(0,wo.jsxs)("div",{className:"font-mono",children:[(0,wo.jsx)("span",{className:"text-gray-400",children:"Page: "}),(0,wo.jsx)("span",{className:"text-red-200",children:e.pathname})]}),e.stackInfo&&e.stackInfo.length>0&&(0,wo.jsxs)("div",{className:"space-y-1 mt-2",children:[(0,wo.jsx)("div",{className:"font-semibold text-red-300",children:"Call Stack:"}),e.stackInfo.map((e,t)=>(0,wo.jsxs)("div",{className:"font-mono pl-2 border-l-2 border-red-500/30",children:[e.function&&(0,wo.jsx)("div",{className:"text-yellow-300",children:e.function}),(0,wo.jsxs)("div",{className:"text-red-200",children:[e.file,":",e.line,":",e.column]})]},t))]}),e.browserInfo&&(0,wo.jsxs)("div",{className:"mt-2 pt-2 border-t border-red-500/20",children:[(0,wo.jsx)("div",{className:"font-semibold text-red-300 mb-1",children:"Browser Info:"}),(0,wo.jsxs)("div",{className:"grid grid-cols-2 gap-1",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("span",{className:"text-gray-400",children:"Platform:"})," ",e.browserInfo.platform]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("span",{className:"text-gray-400",children:"Language:"})," ",e.browserInfo.language]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("span",{className:"text-gray-400",children:"Screen:"})," ",e.browserInfo.screenResolution]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("span",{className:"text-gray-400",children:"Viewport:"})," ",e.browserInfo.viewport]})]})]})]}),"gps_debug"===e.type&&(0,wo.jsxs)("div",{className:"bg-black/20 rounded p-3 text-xs font-mono space-y-1",children:[(0,wo.jsxs)("div",{children:["GPS Status: ",(0,wo.jsx)("span",{className:"text-cyan-300",children:e.gpsStatus})]}),(0,wo.jsxs)("div",{children:["Tracking Enabled: ",(0,wo.jsx)("span",{className:"text-cyan-300",children:String(e.trackingEnabled)})]}),e.coords&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsxs)("div",{children:["Latitude: ",(0,wo.jsx)("span",{className:"text-cyan-300",children:e.coords.latitude})]}),(0,wo.jsxs)("div",{children:["Longitude: ",(0,wo.jsx)("span",{className:"text-cyan-300",children:e.coords.longitude})]}),(0,wo.jsxs)("div",{children:["Accuracy: ",(0,wo.jsxs)("span",{className:"text-cyan-300",children:[e.coords.accuracy,"m"]})]})]})]}),"route_generation"===e.type&&(0,wo.jsxs)("div",{className:"bg-black/20 rounded p-3 text-xs font-mono space-y-1",children:[(0,wo.jsxs)("div",{children:["Has GPS: ",(0,wo.jsx)("span",{className:"text-cyan-300",children:String(e.hasGPS)})]}),(0,wo.jsxs)("div",{children:["Origin: ",(0,wo.jsxs)("span",{className:"text-cyan-300",children:[null===(n=e.originPosition)||void 0===n||null===(r=n.lat)||void 0===r?void 0:r.toFixed(4),", ",null===(o=e.originPosition)||void 0===o||null===(i=o.lng)||void 0===i?void 0:i.toFixed(4)]})]}),e.formData&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsxs)("div",{children:["Name: ",(0,wo.jsx)("span",{className:"text-cyan-300",children:e.formData.name})]}),(0,wo.jsxs)("div",{children:["Length: ",(0,wo.jsxs)("span",{className:"text-cyan-300",children:[e.formData.lengthMeters,"m"]})]})]})]}),e.breadcrumbs&&e.breadcrumbs.length>0&&(0,wo.jsxs)("details",{className:"bg-purple-900/20 border border-purple-500/30 rounded p-3",children:[(0,wo.jsxs)("summary",{className:"text-xs cursor-pointer font-semibold text-purple-300",children:["\ud83c\udf5e User Activity Trail (",e.breadcrumbs.length," events)"]}),(0,wo.jsx)("div",{className:"mt-2 space-y-2 max-h-60 overflow-y-auto",children:e.breadcrumbs.map((e,t)=>(0,wo.jsxs)("div",{className:"text-xs border-l-2 border-purple-500/30 pl-2",children:[(0,wo.jsxs)("div",{className:"flex items-center gap-2",children:[(0,wo.jsx)("span",{className:"text-purple-400 font-mono",children:new Date(e.timestamp).toLocaleTimeString("sv-SE")}),(0,wo.jsx)("span",{className:"px-1.5 py-0.5 bg-purple-500/20 rounded text-purple-300 text-[10px] font-semibold",children:e.category}),(0,wo.jsx)("span",{className:"text-gray-300",children:e.message})]}),e.url&&(0,wo.jsx)("div",{className:"text-gray-500 font-mono text-[10px] mt-0.5",children:e.url}),e.data&&Object.keys(e.data).length>0&&(0,wo.jsx)("div",{className:"text-gray-400 font-mono text-[10px] mt-0.5",children:JSON.stringify(e.data)})]},t))})]}),e.stack&&(0,wo.jsxs)("details",{className:"bg-black/20 rounded p-3",children:[(0,wo.jsx)("summary",{className:"text-xs cursor-pointer",children:"Stack Trace"}),(0,wo.jsx)("pre",{className:"text-xs mt-2 overflow-x-auto whitespace-pre-wrap",children:e.stack})]}),(0,wo.jsxs)("div",{className:"text-xs opacity-60 space-y-1",children:[(0,wo.jsxs)("div",{children:["Device ID: ",e.deviceId]}),(0,wo.jsxs)("div",{children:["URL: ",e.url]}),e.userAgent&&(0,wo.jsxs)("div",{children:["User Agent: ",e.userAgent]})]})]})]})},e.id)})})]}),(0,wo.jsx)(la,{isOpen:w.isOpen,onClose:()=>_((0,To.A)((0,To.A)({},w),{},{isOpen:!1})),title:w.title,message:w.message,type:w.type})]})},gu=new Set(["completed","failed","cancelled"]),vu={queued:"K\xf6ad",pending:"F\xf6rbereds",processing:"P\xe5g\xe5r",completed:"Klar",failed:"Misslyckades",cancelled:"Avbruten"},yu={queued:"bg-slate-700/70 text-slate-200",pending:"bg-slate-700/70 text-slate-200",processing:"bg-amber-500/20 text-amber-300 border border-amber-500/30",completed:"bg-emerald-500/20 text-emerald-200 border border-emerald-500/30",failed:"bg-red-500/20 text-red-300 border border-red-500/40",cancelled:"bg-slate-600/30 text-slate-200 border border-slate-500/40"},bu=e=>{if(!e)return"\u2014";try{return e.toLocaleString("sv-SE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch(t){return e.toString()}},xu=(e,t)=>{if(!e||!t)return"\u2014";const n=t.getTime()-e.getTime();if(Number.isNaN(n)||n<0)return"\u2014";const r=Math.round(n/1e3);if(r<60)return"".concat(r,"s");const o=Math.floor(r/60);if(o<60){const e=r%60;return"".concat(o,"m ").concat(e,"s")}const i=Math.floor(o/60),a=o%60;return"".concat(i,"h ").concat(a,"m")},wu=()=>{const e=J(),{allTasks:n,refreshAllTasks:r}=ja(),{currentUser:o}=Eo(),[i,a]=(0,t.useState)("all"),[s,l]=(0,t.useState)("all"),[c,u]=(0,t.useState)(""),[d,h]=(0,t.useState)(!1),[f,p]=(0,t.useState)(null),[m,g]=(0,t.useState)(!1),[v,y]=(0,t.useState)(null),[b,x]=(0,t.useState)(new Set),[w,_]=(0,t.useState)(!1),[k,A]=(0,t.useState)({isOpen:!1,title:"",message:"",type:"info"}),[S,N]=(0,t.useState)(!1),C=(0,t.useMemo)(()=>n&&0!==n.length?[...n].sort((e,t)=>{const n=e.createdAt instanceof Date?e.createdAt.getTime():0,r=t.createdAt instanceof Date?t.createdAt.getTime():0;return n!==r?r-n:e.id.localeCompare(t.id)}):[],[n]),j=(0,t.useMemo)(()=>C.filter(e=>{if("all"!==i&&e.status!==i)return!1;if("all"!==s&&e.taskType!==s)return!1;if(c.trim()){var t,n,r;if(![e.id,e.userId,null===(t=e.result)||void 0===t?void 0:t.provider,null===(n=e.payload)||void 0===n?void 0:n.category,null===(r=e.payload)||void 0===r?void 0:r.difficulty,e.error,e.taskType].filter(Boolean).join(" ").toLowerCase().includes(c.toLowerCase()))return!1}return!0}),[C,i,s,c]),E=(0,t.useMemo)(()=>{const e=Date.now()-864e5,t={total:n.length,active:0,completed:0,failed:0,queued:0,last24hCompleted:0};return n.reduce((t,n)=>(gu.has(n.status)?"completed"===n.status?(t.completed+=1,n.finishedAt&&n.finishedAt.getTime()>=e&&(t.last24hCompleted+=1)):"failed"===n.status&&(t.failed+=1):("queued"!==n.status&&"pending"!==n.status||(t.queued+=1),"processing"===n.status&&(t.active+=1)),t),t)},[n]);return(0,wo.jsxs)("div",{className:"min-h-screen bg-slate-950 text-gray-100",children:[(0,wo.jsx)(Tl,{title:"Bakgrundsjobb"}),(0,wo.jsxs)("main",{className:"max-w-6xl mx-auto px-4 py-6 space-y-6 pt-24",children:[(0,wo.jsxs)("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[(0,wo.jsxs)("div",{className:"rounded-xl bg-slate-900 border border-slate-800 p-4",children:[(0,wo.jsx)("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Totalt"}),(0,wo.jsx)("div",{className:"mt-2 text-2xl font-semibold text-white",children:E.total})]}),(0,wo.jsxs)("div",{className:"rounded-xl bg-slate-900 border border-slate-800 p-4",children:[(0,wo.jsx)("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Aktiva"}),(0,wo.jsx)("div",{className:"mt-2 text-2xl font-semibold text-amber-300",children:E.active})]}),(0,wo.jsxs)("div",{className:"rounded-xl bg-slate-900 border border-slate-800 p-4",children:[(0,wo.jsx)("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Klara 24h"}),(0,wo.jsx)("div",{className:"mt-2 text-2xl font-semibold text-emerald-300",children:E.last24hCompleted})]}),(0,wo.jsxs)("div",{className:"rounded-xl bg-slate-900 border border-slate-800 p-4",children:[(0,wo.jsx)("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Misslyckade"}),(0,wo.jsx)("div",{className:"mt-2 text-2xl font-semibold text-red-300",children:E.failed})]})]}),(0,wo.jsxs)("section",{className:"rounded-xl bg-slate-900 border border-slate-800 p-4",children:[(0,wo.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Developer Tools"}),(0,wo.jsx)("p",{className:"text-sm text-slate-400 mt-1",children:"Migrera fr\xe5gor, st\xe4da gamla jobb eller konfigurera AI-providers"})]}),(0,wo.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,wo.jsx)("button",{onClick:()=>e("/superuser/ai-providers"),className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg font-semibold transition-colors whitespace-nowrap",children:"\u2699\ufe0f AI Providers"}),(0,wo.jsx)("button",{onClick:async()=>{if(window.confirm("\u26a0\ufe0f Vill du k\xf6ra om AI-kategorisering p\xe5 alla befintliga fr\xe5gor med striktare sv\xe5righetsniv\xe5er?\n\nDetta kommer att:\n- Uppdatera ageGroups f\xf6r alla fr\xe5gor\n- Anv\xe4nd striktare kriterier f\xf6r barn/ungdom/vuxen\n- K\xf6ras som en bakgrundsuppgift\n\nFortse tt?")){N(!0);try{if(!o)throw new Error("Du m\xe5ste vara inloggad f\xf6r att k\xf6ra migration");const e=mo().currentUser;if(!e)throw new Error("Kunde inte hitta Firebase-anv\xe4ndare");const t=await e.getIdToken(),n=await fetch("https://europe-west1-geoquest2-7e45c.cloudfunctions.net/queueMigration",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}),r=await n.json();n.ok?A({isOpen:!0,title:"Migration startad",message:"AI-migration har k\xf6ats som bakgrundsjobb. Du kan f\xf6lja progress nedan.",type:"success"}):A({isOpen:!0,title:"Kunde inte starta migration",message:r.error||"Ok\xe4nt fel",type:"error"})}catch(e){A({isOpen:!0,title:"Fel vid migration",message:e.message,type:"error"})}finally{N(!1),await r()}}},disabled:S,className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 disabled:bg-slate-700 disabled:text-slate-400 text-white rounded-lg font-semibold transition-colors whitespace-nowrap",children:S?"\ud83d\udd04 K\xf6r migration...":"\ud83d\udd04 Migrera fr\xe5gor"}),(0,wo.jsx)("button",{onClick:async()=>{if(window.confirm("Vill du st\xe4da h\xe4ngande bakgrundsjobb (\xe4ldre \xe4n 30 minuter)?")){h(!0),p(null);try{const e=await fetch("https://europe-west1-geoquest2-7e45c.cloudfunctions.net/cleanupStuckTasks"),t=await e.json();e.ok?p({success:!0,message:"St\xe4dat ".concat(t.cleaned," h\xe4ngande jobb (").concat(t.processingChecked," processing, ").concat(t.queuedChecked," queued)")}):p({success:!1,message:t.error||"N\xe5got gick fel"})}catch(e){p({success:!1,message:"Fel: ".concat(e.message)})}finally{h(!1),await r(),setTimeout(()=>p(null),5e3)}}},disabled:d,className:"px-4 py-2 bg-amber-600 hover:bg-amber-500 disabled:bg-slate-700 disabled:text-slate-400 text-white rounded-lg font-semibold transition-colors whitespace-nowrap",children:d?"\ud83e\uddf9 St\xe4dar...":"\ud83e\uddf9 St\xe4da h\xe4ngande"}),(0,wo.jsx)("button",{onClick:async()=>{if(window.confirm("Vill du ta bort alla gamla klara och misslyckade jobb (\xe4ldre \xe4n 24 timmar)?\n\nDetta g\xe5r INTE att \xe5ngra!")){g(!0),y(null);try{const e=await fetch("https://europe-west1-geoquest2-7e45c.cloudfunctions.net/deleteOldTasks"),t=await e.json();e.ok?y({success:!0,message:"Raderat ".concat(t.deleted," gamla jobb (").concat(t.completedDeleted," klara, ").concat(t.failedDeleted," misslyckade)")}):y({success:!1,message:t.error||"N\xe5got gick fel"})}catch(e){y({success:!1,message:"Fel: ".concat(e.message)})}finally{g(!1),await r(),setTimeout(()=>y(null),5e3)}}},disabled:m,className:"px-4 py-2 bg-red-600 hover:bg-red-500 disabled:bg-slate-700 disabled:text-slate-400 text-white rounded-lg font-semibold transition-colors whitespace-nowrap",children:m?"\ud83d\uddd1\ufe0f Raderar...":"\ud83d\uddd1\ufe0f Radera gamla"})]})]}),f&&(0,wo.jsx)("div",{className:"mt-4 p-3 rounded-lg ".concat(f.success?"bg-green-500/10 border border-green-500/30 text-green-300":"bg-red-500/10 border border-red-500/30 text-red-300"),children:f.message}),v&&(0,wo.jsx)("div",{className:"mt-3 p-3 rounded-lg ".concat(v.success?"bg-green-500/10 border border-green-500/30 text-green-300":"bg-red-500/10 border border-red-500/30 text-red-300"),children:v.message})]}),(0,wo.jsxs)("section",{className:"rounded-xl bg-slate-900 border border-slate-800 p-4",children:[(0,wo.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4",children:[(0,wo.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,wo.jsxs)("select",{value:i,onChange:e=>a(e.target.value),className:"bg-slate-950 border border-slate-700 px-3 py-1.5 rounded-md text-sm text-white focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[(0,wo.jsx)("option",{value:"all",children:"Alla statusar"}),Object.keys(vu).map(e=>(0,wo.jsx)("option",{value:e,children:vu[e]},e))]}),(0,wo.jsxs)("select",{value:s,onChange:e=>l(e.target.value),className:"bg-slate-950 border border-slate-700 px-3 py-1.5 rounded-md text-sm text-white focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[(0,wo.jsx)("option",{value:"all",children:"Alla typer"}),(0,wo.jsx)("option",{value:"generation",children:"Generering"}),(0,wo.jsx)("option",{value:"validation",children:"Validering"}),(0,wo.jsx)("option",{value:"batchvalidation",children:"Batch-validering"}),(0,wo.jsx)("option",{value:"migration",children:"Migrering"}),(0,wo.jsx)("option",{value:"regenerateemoji",children:"Emoji-regenerering"}),(0,wo.jsx)("option",{value:"batchregenerateemojis",children:"Mass-regenerering Emojis"})]})]}),(0,wo.jsx)("input",{type:"search",value:c,onChange:e=>u(e.target.value),placeholder:"S\xf6k p\xe5 jobbid, anv\xe4ndare eller provider",className:"w-full md:w-72 bg-slate-950 border border-slate-700 px-3 py-1.5 rounded-md text-sm text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-cyan-500"})]}),b.size>0&&(0,wo.jsx)("div",{className:"mb-4 bg-slate-800 rounded-lg p-3 border border-cyan-500/30",children:(0,wo.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,wo.jsxs)("div",{className:"text-sm text-white",children:[(0,wo.jsx)("span",{className:"font-semibold",children:b.size})," jobb valda"]}),(0,wo.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,wo.jsx)("button",{onClick:async()=>{if(0!==b.size){if(window.confirm("Vill du stoppa ".concat(b.size," valda jobb?"))){_(!0);try{const e=Array.from(b),t=await fetch("https://europe-west1-geoquest2-7e45c.cloudfunctions.net/bulkStopTasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskIds:e})}),n=await t.json();t.ok?(A({isOpen:!0,title:"Jobb stoppade",message:"Stoppat ".concat(n.stopped," jobb"),type:"success"}),x(new Set)):A({isOpen:!0,title:"Kunde inte stoppa jobb",message:n.error||"Ok\xe4nt fel",type:"error"})}catch(e){A({isOpen:!0,title:"Fel vid stopp",message:e.message,type:"error"})}finally{_(!1),await r()}}}else A({isOpen:!0,title:"Ingen markering",message:"V\xe4lj minst ett jobb att stoppa",type:"warning"})},disabled:w,className:"px-3 py-1.5 bg-amber-600 hover:bg-amber-500 disabled:bg-slate-700 disabled:text-slate-400 text-white text-sm rounded-md font-semibold transition-colors",children:"\u23f8\ufe0f Stoppa valda"}),(0,wo.jsx)("button",{onClick:async()=>{if(0!==b.size){if(window.confirm("\u26a0\ufe0f VARNING: Vill du radera ".concat(b.size," valda jobb permanent?\n\nDetta g\xe5r INTE att \xe5ngra!"))){_(!0);try{const e=Array.from(b),t=await fetch("https://europe-west1-geoquest2-7e45c.cloudfunctions.net/bulkDeleteTasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskIds:e})}),n=await t.json();t.ok?(A({isOpen:!0,title:"Jobb raderade",message:"Raderat ".concat(n.deleted," jobb"),type:"success"}),x(new Set)):A({isOpen:!0,title:"Kunde inte radera jobb",message:n.error||"Ok\xe4nt fel",type:"error"})}catch(e){A({isOpen:!0,title:"Fel vid radering",message:e.message,type:"error"})}finally{_(!1),await r()}}}else A({isOpen:!0,title:"Ingen markering",message:"V\xe4lj minst ett jobb att radera",type:"warning"})},disabled:w,className:"px-3 py-1.5 bg-red-600 hover:bg-red-500 disabled:bg-slate-700 disabled:text-slate-400 text-white text-sm rounded-md font-semibold transition-colors",children:"\ud83d\uddd1\ufe0f Radera valda"})]})]})}),(0,wo.jsx)("div",{className:"mt-4 overflow-x-auto",children:(0,wo.jsxs)("table",{className:"min-w-full text-sm border-separate",style:{borderSpacing:0},children:[(0,wo.jsx)("thead",{children:(0,wo.jsxs)("tr",{className:"text-left text-xs uppercase tracking-wide text-slate-400",children:[(0,wo.jsx)("th",{className:"px-4 py-2 border-b border-slate-800 w-10",children:(0,wo.jsx)("input",{type:"checkbox",checked:j.length>0&&b.size===j.length,onChange:()=>{b.size===j.length?x(new Set):x(new Set(j.map(e=>e.id)))},className:"w-4 h-4 bg-slate-700 border-slate-600 rounded focus:ring-2 focus:ring-cyan-500"})}),(0,wo.jsx)("th",{className:"px-4 py-2 border-b border-slate-800",children:"Jobb"}),(0,wo.jsx)("th",{className:"px-4 py-2 border-b border-slate-800",children:"Status"}),(0,wo.jsx)("th",{className:"px-4 py-2 border-b border-slate-800",children:"Start"}),(0,wo.jsx)("th",{className:"px-4 py-2 border-b border-slate-800",children:"Klart"}),(0,wo.jsx)("th",{className:"px-4 py-2 border-b border-slate-800",children:"Tid"}),(0,wo.jsx)("th",{className:"px-4 py-2 border-b border-slate-800",children:"Anv\xe4ndare"}),(0,wo.jsx)("th",{className:"px-4 py-2 border-b border-slate-800",children:"Detaljer"}),(0,wo.jsx)("th",{className:"px-4 py-2 border-b border-slate-800",children:"\xc5tg\xe4rder"})]})}),(0,wo.jsx)("tbody",{children:0===j.length?(0,wo.jsx)("tr",{children:(0,wo.jsx)("td",{colSpan:9,className:"px-4 py-8 text-center text-slate-500",children:"Inga jobb matchar dina filter just nu."})}):j.map(e=>{var t,n,o,i,a,s,l;const c=yu[e.status]||yu.pending,u=vu[e.status]||e.status,d=[];null!==(t=e.payload)&&void 0!==t&&t.category&&d.push("Kategori: ".concat(e.payload.category)),null!==(n=e.payload)&&void 0!==n&&n.difficulty&&d.push("Niv\xe5: ".concat(e.payload.difficulty)),null!==(o=e.payload)&&void 0!==o&&o.amount&&d.push("Antal: ".concat(e.payload.amount)),null!==(i=e.result)&&void 0!==i&&i.provider&&d.push("Provider: ".concat(e.result.provider)),"batchvalidation"===e.taskType&&e.result&&"completed"===e.status?null!=e.result.validated&&null!=e.result.failed&&(d.push("\u2713 ".concat(e.result.validated," godk\xe4nda")),d.push("\u2717 ".concat(e.result.failed," underk\xe4nda"))):"generation"===e.taskType&&e.result&&"completed"===e.status?e.result.details?(null!=e.result.details.imported&&d.push("\u2713 ".concat(e.result.details.imported," importerade")),e.result.details.duplicatesBlocked>0&&d.push("\u2298 ".concat(e.result.details.duplicatesBlocked," dubletter blockerade")),e.result.details.category&&d.push("Kategori: ".concat(e.result.details.category)),e.result.details.ageGroup&&d.push("\xc5ldersgrupp: ".concat(e.result.details.ageGroup))):null!=e.result.count&&d.push("Resultat: ".concat(e.result.count)):null!=(null===(a=e.result)||void 0===a?void 0:a.count)&&d.push("Resultat: ".concat(e.result.count)),e.error&&d.push("Fel: ".concat(e.error));const h=e.progress&&(e.progress.total>0||e.progress.phase),f=h&&e.progress.total>0?Math.round(e.progress.completed/e.progress.total*100):0;return(0,wo.jsxs)("tr",{className:"border-b border-slate-800/60",children:[(0,wo.jsx)("td",{className:"px-4 py-3 align-top",children:(0,wo.jsx)("input",{type:"checkbox",checked:b.has(e.id),onChange:()=>{return t=e.id,void x(e=>{const n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n});var t},className:"w-4 h-4 bg-slate-700 border-slate-600 rounded focus:ring-2 focus:ring-cyan-500"})}),(0,wo.jsxs)("td",{className:"px-4 py-3 align-top",children:[(0,wo.jsxs)("div",{className:"flex items-center gap-2",children:[(0,wo.jsx)("div",{className:"text-white font-semibold",children:"generation"===e.taskType?"AI-generering":"batchvalidation"===e.taskType?"AI-validering (batch)":"validation"===e.taskType?"AI-validering":"migration"===e.taskType?"AI-migrering":"regenerateemoji"===e.taskType?"Emoji-regenerering":"batchregenerateemojis"===e.taskType?"Mass-regenerering Emojis":"Bakgrundsjobb"}),"batchvalidation"===e.taskType&&(null===(s=e.payload)||void 0===s||null===(l=s.questions)||void 0===l?void 0:l.length)&&(0,wo.jsxs)("span",{className:"text-xs px-2 py-0.5 bg-purple-500/20 text-purple-200 rounded",children:[e.payload.questions.length," fr\xe5gor"]})]}),(0,wo.jsxs)("div",{className:"text-xs text-slate-500",children:[e.id.substring(0,8),"..."]}),h&&"processing"===e.status&&(0,wo.jsxs)("div",{className:"mt-2 space-y-1",children:[e.progress.total>0&&(0,wo.jsx)("div",{className:"w-full bg-slate-700 rounded-full h-2 overflow-hidden",children:(0,wo.jsx)("div",{className:"bg-cyan-500 h-full transition-all duration-300",style:{width:"".concat(f,"%")}})}),(0,wo.jsxs)("div",{className:"text-xs text-slate-400",children:[e.progress.phase&&(0,wo.jsx)("div",{className:"font-semibold",children:e.progress.phase}),e.progress.total>0&&(0,wo.jsxs)("div",{children:[e.progress.completed," / ",e.progress.total,"batchvalidation"===e.taskType&&e.progress.validated>0&&" (".concat(e.progress.validated," godk\xe4nda, ").concat(e.progress.failed," underk\xe4nda)"),"migration"===e.taskType&&e.progress.details&&" - ".concat(e.progress.details)]}),e.progress.details&&(0,wo.jsx)("div",{className:"text-slate-500",children:e.progress.details})]})]}),h&&"completed"===e.status&&(0,wo.jsxs)("div",{className:"mt-1 text-xs text-slate-400",children:["batchvalidation"===e.taskType&&null!=e.progress.validated&&"".concat(e.progress.validated," godk\xe4nda, ").concat(e.progress.failed," underk\xe4nda"),"generation"===e.taskType&&e.progress.details&&e.progress.details,"migration"===e.taskType&&e.progress.details&&e.progress.details]})]}),(0,wo.jsx)("td",{className:"px-4 py-3 align-top",children:(0,wo.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[11px] font-semibold ".concat(c),children:u})}),(0,wo.jsx)("td",{className:"px-4 py-3 align-top text-slate-300",children:bu(e.createdAt)}),(0,wo.jsx)("td",{className:"px-4 py-3 align-top text-slate-300",children:bu(e.finishedAt)}),(0,wo.jsx)("td",{className:"px-4 py-3 align-top text-slate-300",children:e.createdAt&&e.finishedAt?xu(e.createdAt,e.finishedAt):"\u2014"}),(0,wo.jsx)("td",{className:"px-4 py-3 align-top text-slate-300",children:e.userId||"Ok\xe4nd"}),(0,wo.jsx)("td",{className:"px-4 py-3 align-top text-slate-300 text-xs space-y-1",children:d.length>0?d.map((e,t)=>(0,wo.jsx)("div",{children:e},t)):(0,wo.jsx)("span",{className:"text-slate-500",children:"Ingen metadata"})}),(0,wo.jsx)("td",{className:"px-4 py-3 align-top",children:(0,wo.jsxs)("div",{className:"flex gap-2",children:[("processing"===e.status||"queued"===e.status||"pending"===e.status)&&(0,wo.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Vill du stoppa detta jobb?"))try{const t=await fetch("https://europe-west1-geoquest2-7e45c.cloudfunctions.net/stopTask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskId:e})}),n=await t.json();t.ok?A({isOpen:!0,title:"Jobb stoppat",message:"Jobb stoppat: ".concat(n.message),type:"success"}):A({isOpen:!0,title:"Kunde inte stoppa jobb",message:n.error||"Ok\xe4nt fel",type:"error"})}catch(t){A({isOpen:!0,title:"Fel vid stopp",message:t.message,type:"error"})}finally{await r()}})(e.id),className:"px-2 py-1 bg-amber-600 hover:bg-amber-500 text-white text-xs rounded font-semibold transition-colors",title:"Stoppa jobb",children:"\u23f8\ufe0f"}),(0,wo.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Vill du radera detta jobb permanent?\n\nDetta g\xe5r INTE att \xe5ngra!"))try{const t=await fetch("https://europe-west1-geoquest2-7e45c.cloudfunctions.net/deleteTask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskId:e})}),n=await t.json();t.ok?A({isOpen:!0,title:"Jobb raderat",message:"Jobb raderat!",type:"success"}):A({isOpen:!0,title:"Kunde inte radera jobb",message:n.error||"Ok\xe4nt fel",type:"error"})}catch(t){A({isOpen:!0,title:"Fel vid radering",message:t.message,type:"error"})}finally{_(!1),await r()}})(e.id),className:"px-2 py-1 bg-red-600 hover:bg-red-500 text-white text-xs rounded font-semibold transition-colors",title:"Radera jobb",children:"\ud83d\uddd1\ufe0f"})]})})]},e.id)})})]})})]})]}),(0,wo.jsx)(la,{isOpen:k.isOpen,onClose:()=>A((0,To.A)((0,To.A)({},k),{},{isOpen:!1})),title:k.title,message:k.message,type:k.type})]})},_u=()=>{const{isSuperUser:e}=Eo(),n=J(),[r,o]=(0,t.useState)(!0),[i,a]=(0,t.useState)(!1),[s,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)({generation:{anthropic:!0,openai:!0,gemini:!0},validation:{anthropic:!0,openai:!0,gemini:!0},migration:{anthropic:!0,openai:!1,gemini:!1},illustration:{anthropic:!0,openai:!0,gemini:!0}});(0,t.useEffect)(()=>{e?f():n("/")},[e,n]);const f=async()=>{o(!0),l(null);try{const e=await fetch("https://europe-west1-geoquest2-7e45c.cloudfunctions.net/getProviderSettings"),t=await e.json();if(!e.ok)throw new Error(t.error||"Failed to load settings");h(e=>(0,To.A)((0,To.A)({},e),t.settings))}catch(e){l("Kunde inte ladda inst\xe4llningar: ".concat(e.message))}finally{o(!1)}};if(!e)return null;if(r)return(0,wo.jsxs)("div",{className:"min-h-screen bg-slate-950 text-white",children:[(0,wo.jsx)(Tl,{title:"AI Provider-inst\xe4llningar"}),(0,wo.jsx)("div",{className:"flex items-center justify-center pt-32",children:(0,wo.jsx)("div",{className:"text-lg text-slate-400",children:"Laddar inst\xe4llningar..."})})]});const p=[{key:"anthropic",name:"Anthropic Claude",color:"bg-orange-500"},{key:"openai",name:"OpenAI GPT-4",color:"bg-green-500"},{key:"gemini",name:"Google Gemini",color:"bg-blue-500"}];return(0,wo.jsxs)("div",{className:"min-h-screen bg-slate-950 text-white",children:[(0,wo.jsx)(Tl,{title:"AI Provider-inst\xe4llningar"}),(0,wo.jsxs)("main",{className:"max-w-4xl mx-auto px-4 py-6 space-y-6 pt-24",children:[(0,wo.jsxs)("section",{className:"rounded-xl bg-slate-900 border border-slate-800 p-6",children:[(0,wo.jsx)("h2",{className:"text-lg font-semibold text-cyan-200 mb-2",children:"Om Provider-inst\xe4llningar"}),(0,wo.jsx)("p",{className:"text-slate-300 text-sm leading-relaxed",children:"H\xe4r kan du konfigurera vilka AI-providers som ska anv\xe4ndas f\xf6r olika \xe4ndam\xe5l. Providers som \xe4r inaktiverade kommer inte att anv\xe4ndas, \xe4ven om de \xe4r konfigurerade med API-nycklar."}),(0,wo.jsxs)("div",{className:"mt-4 space-y-2 text-sm text-slate-400",children:[(0,wo.jsxs)("div",{children:["\u2022 ",(0,wo.jsx)("strong",{className:"text-slate-300",children:"Generering:"})," Providers roteras slumpm\xe4ssigt f\xf6r variation"]}),(0,wo.jsxs)("div",{children:["\u2022 ",(0,wo.jsx)("strong",{className:"text-slate-300",children:"Validering:"})," Alla aktiverade providers anv\xe4nds parallellt f\xf6r h\xf6gre kvalitet"]}),(0,wo.jsxs)("div",{children:["\u2022 ",(0,wo.jsx)("strong",{className:"text-slate-300",children:"Migrering:"})," Endast en provider anv\xe4nds (rekommenderat: Anthropic)"]})]})]}),s&&(0,wo.jsx)("div",{className:"rounded-xl bg-red-900/40 border border-red-500/40 p-4 text-red-200",children:s}),c&&(0,wo.jsx)("div",{className:"rounded-xl bg-green-900/40 border border-green-500/40 p-4 text-green-200",children:c}),[{key:"generation",title:"Generering",description:"Vilka providers ska anv\xe4ndas f\xf6r att generera nya fr\xe5gor",icon:"\ud83c\udfaf"},{key:"validation",title:"Validering",description:"Vilka providers ska anv\xe4ndas f\xf6r att validera fr\xe5gor (fler = b\xe4ttre kvalitet)",icon:"\u2713"},{key:"illustration",title:"Illustration (SVG)",description:"Vilka providers ska anv\xe4ndas f\xf6r att generera SVG-illustrationer till fr\xe5gor",icon:"\ud83c\udfa8"},{key:"migration",title:"Migrering",description:"Vilka providers ska anv\xe4ndas f\xf6r schema-migrering (rekommenderat: endast Anthropic)",icon:"\ud83d\udd04"}].map(e=>(0,wo.jsxs)("section",{className:"rounded-xl bg-slate-900 border border-slate-800 p-6",children:[(0,wo.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[(0,wo.jsx)("span",{children:e.icon}),e.title]}),(0,wo.jsx)("p",{className:"text-sm text-slate-400 mt-1",children:e.description})]}),(0,wo.jsxs)("div",{className:"text-xs text-slate-500",children:[d[e.key]?Object.values(d[e.key]).filter(Boolean).length:0," / ",p.length," aktiva"]})]}),(0,wo.jsx)("div",{className:"space-y-3",children:p.map(t=>{const n=!!d[e.key]&&d[e.key][t.key];return(0,wo.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border transition-colors ".concat(n?"bg-slate-800 border-cyan-500/30":"bg-slate-900/50 border-slate-700"),children:[(0,wo.jsxs)("div",{className:"flex items-center gap-3",children:[(0,wo.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(t.color)}),(0,wo.jsx)("span",{className:"font-medium ".concat(n?"text-white":"text-slate-500"),children:t.name})]}),(0,wo.jsx)("button",{onClick:()=>((e,t)=>{h(n=>(0,To.A)((0,To.A)({},n),{},{[e]:(0,To.A)((0,To.A)({},n[e]||{}),{},{[t]:!n[e]||!n[e][t]})}))})(e.key,t.key),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(n?"bg-cyan-500":"bg-slate-700"),children:(0,wo.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(n?"translate-x-6":"translate-x-1")})})]},t.key)})})]},e.key)),(0,wo.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,wo.jsx)("button",{onClick:async()=>{a(!0),l(null),u(null);try{const e=yo.currentUser;if(!e)throw new Error("Du m\xe5ste vara inloggad");const t=await e.getIdToken(),n=await fetch("https://europe-west1-geoquest2-7e45c.cloudfunctions.net/updateProviderSettings",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({settings:d})}),r=await n.json();if(!n.ok)throw new Error(r.error||"Failed to save settings");u("\u2705 Inst\xe4llningar sparade!"),setTimeout(()=>u(null),5e3)}catch(e){l("Kunde inte spara inst\xe4llningar: ".concat(e.message))}finally{a(!1)}},disabled:i,className:"flex-1 min-w-[200px] rounded-lg bg-cyan-500 px-6 py-3 font-bold text-black hover:bg-cyan-400 disabled:bg-slate-700 disabled:text-slate-400 transition-colors",children:i?"\ud83d\udcbe Sparar...":"\ud83d\udcbe Spara inst\xe4llningar"}),(0,wo.jsx)("button",{onClick:()=>n("/superuser/tasks"),className:"rounded-lg bg-slate-700 px-6 py-3 font-semibold text-white hover:bg-slate-600 transition-colors",children:"Tillbaka"})]})]})]})},ku=async e=>{if(!go())return console.warn("[Migration] Firebase \xe4r inte konfigurerat"),{success:!1,error:"Firebase \xe4r inte konfigurerat"};if(qa())return console.info("[Migration] Data har redan migrerats tidigare"),{success:!0,alreadyMigrated:!0};const{createdRuns:t,joinedRuns:n}=Ha();if(0===t.length&&0===n.length)return console.info("[Migration] Ingen lokal data att migrera"),{success:!0,noData:!0};const r=po(),o={createdRuns:{success:0,failed:0},joinedRuns:{success:0,failed:0}};try{for(const n of t)try{const t=(0,io.H9)(r,"runs",n.id);await(0,io.BN)(t,(0,To.A)((0,To.A)({},n),{},{migratedFrom:"localStorage",migratedAt:(0,io.O5)(),ownerId:e}),{merge:!0}),o.createdRuns.success++}catch(i){console.error("[Migration] Kunde inte migrera skapad runda:",i),o.createdRuns.failed++}for(const t of n)try{const n=(0,io.H9)(r,"runs",t.runId,"participants",t.participantData.id);await(0,io.BN)(n,(0,To.A)((0,To.A)({},t.participantData),{},{userId:e,migratedFrom:"localStorage",migratedAt:(0,io.O5)()}),{merge:!0}),o.joinedRuns.success++}catch(i){console.error("[Migration] Kunde inte migrera deltagen runda:",i),o.joinedRuns.failed++}return Va(),{success:!0,results:o,totalMigrated:o.createdRuns.success+o.joinedRuns.success}}catch(i){return console.error("[Migration] Fel vid migrering:",i),{success:!1,error:i.message,results:o}}},Au=()=>Ua()&&!qa(),Su=e=>{let{onClose:n}=e;const{currentUser:r}=Eo(),[o,i]=(0,t.useState)(!1),[a,s]=(0,t.useState)(""),[l,c]=(0,t.useState)(!1),{createdRuns:u,joinedRuns:d}=Ha();return l?(0,wo.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,wo.jsx)("div",{className:"bg-slate-900 rounded-lg border border-emerald-500/50 p-6 max-w-md w-full",children:(0,wo.jsxs)("div",{className:"text-center",children:[(0,wo.jsx)("div",{className:"text-5xl mb-4",children:"\u2705"}),(0,wo.jsx)("h2",{className:"text-2xl font-bold text-emerald-300 mb-2",children:"Migrering klar!"}),(0,wo.jsx)("p",{className:"text-gray-300",children:"Dina rundor har sparats i ditt konto"})]})})}):(0,wo.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,wo.jsxs)("div",{className:"bg-slate-900 rounded-lg border border-slate-700 p-6 max-w-md w-full",children:[(0,wo.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Flytta dina rundor till kontot?"}),(0,wo.jsxs)("div",{className:"mb-6",children:[(0,wo.jsx)("p",{className:"text-gray-300 mb-4",children:"Vi har hittat rundor som du har skapat eller deltagit i utan att vara inloggad. Vill du flytta dessa till ditt konto?"}),(0,wo.jsxs)("div",{className:"bg-slate-800 rounded-lg p-4 space-y-2",children:[u.length>0&&(0,wo.jsxs)("div",{className:"flex items-center gap-2",children:[(0,wo.jsx)("span",{className:"text-2xl",children:"\u2728"}),(0,wo.jsxs)("span",{className:"text-gray-200",children:[(0,wo.jsx)("strong",{children:u.length})," skapade rund",1===u.length?"a":"or"]})]}),d.length>0&&(0,wo.jsxs)("div",{className:"flex items-center gap-2",children:[(0,wo.jsx)("span",{className:"text-2xl",children:"\ud83c\udfaf"}),(0,wo.jsxs)("span",{className:"text-gray-200",children:[(0,wo.jsx)("strong",{children:d.length})," deltagen",1===d.length?"":"a"," rund",1===d.length?"a":"or"]})]})]})]}),a&&(0,wo.jsx)("div",{className:"mb-4 bg-red-900/30 border border-red-500/50 rounded-lg p-3 text-sm text-red-200",children:a}),(0,wo.jsxs)("div",{className:"flex gap-3",children:[(0,wo.jsx)("button",{onClick:()=>{Va(),null===n||void 0===n||n()},disabled:o,className:"flex-1 px-4 py-2 rounded-lg bg-slate-700 hover:bg-slate-600 text-gray-200 font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Hoppa \xf6ver"}),(0,wo.jsx)("button",{onClick:async()=>{if(r){i(!0),s("");try{const e=await ku(r.id);e.success?(c(!0),setTimeout(()=>{null===n||void 0===n||n()},2e3)):s(e.error||"Kunde inte migrera data")}catch(e){s(e.message||"Ett ov\xe4ntat fel uppstod")}finally{i(!1)}}else s("Du m\xe5ste vara inloggad f\xf6r att migrera data")},disabled:o,className:"flex-1 px-4 py-2 rounded-lg bg-gradient-to-r from-cyan-500 to-indigo-600 hover:from-cyan-400 hover:to-indigo-500 text-white font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Flyttar...":"Ja, flytta"})]}),(0,wo.jsx)("p",{className:"mt-4 text-xs text-gray-400 text-center",children:"Om du hoppar \xf6ver sparas rundorna fortfarande lokalt, men de kopplas inte till ditt konto"})]})})},Nu=()=>{const{currentUser:e,isAuthenticated:n}=Eo(),[r,o]=(0,t.useState)(!1),i=(0,t.useRef)(!1);return(0,t.useEffect)(()=>{if(n&&e&&!e.isAnonymous&&!i.current){i.current=!0;Au()&&setTimeout(()=>{o(!0)},500)}},[n,e]),r?(0,wo.jsx)(Su,{onClose:()=>o(!1)}):null},Cu=e=>{let{localRunCount:n,onComplete:r,currentUser:o}=e;const[i,a]=(0,t.useState)(!1),[s,l]=(0,t.useState)("");return(0,wo.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:(0,wo.jsxs)("div",{className:"bg-slate-800 rounded-lg border border-slate-600 max-w-md w-full p-6",children:[(0,wo.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Importera dina rundor"}),s?(0,wo.jsx)("div",{className:"mb-4",children:(0,wo.jsx)("p",{className:"text-gray-300",children:s})}):(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsxs)("p",{className:"text-gray-300 mb-2",children:["Du har ",(0,wo.jsx)("span",{className:"font-bold text-cyan-300",children:n})," runda",1!==n?"r":""," som skapades innan du loggade in."]}),(0,wo.jsx)("p",{className:"text-gray-300 mb-6",children:"Vill du koppla dessa till ditt konto?"})]}),!s&&(0,wo.jsxs)("div",{className:"flex gap-3",children:[(0,wo.jsx)("button",{onClick:async()=>{a(!0),l("Importerar rundor...");try{const t=za().map(e=>e.runId);if(0===t.length)return l("Inga rundor att importera."),void setTimeout(()=>r(!0),1500);const n=await ta.listRunsByIds(t);if(0===n.length)return l("Inga giltiga rundor hittades att importera."),localStorage.setItem("geoquest:local:createdRuns",JSON.stringify([])),void setTimeout(()=>r(!0),1500);let i=0,a=0;for(const r of n)try{await ta.updateRun(r.id,{createdBy:o.id,createdByName:o.name||o.email||"Anv\xe4ndare"}),i++}catch(e){console.error("[LocalRunsImport] Kunde inte uppdatera runda:",r.id,e),a++}i>0&&localStorage.setItem("geoquest:local:createdRuns",JSON.stringify([])),l(0===a?"".concat(i," rundor importerades! \ud83c\udf89"):"".concat(i," rundor importerades, ").concat(a," misslyckades.")),setTimeout(()=>r(!0),2e3)}catch(e){console.error("[LocalRunsImport] Import misslyckades:",e),l("Import misslyckades. F\xf6rs\xf6k igen senare."),setTimeout(()=>r(!1),3e3)}finally{a(!1)}},disabled:i,className:"flex-1 bg-green-600 hover:bg-green-700 disabled:bg-slate-700 disabled:text-gray-400 px-4 py-3 rounded font-medium text-white transition-colors",children:i?"Importerar...":"Ja, importera"}),(0,wo.jsx)("button",{onClick:()=>{r(!1)},disabled:i,className:"flex-1 bg-slate-600 hover:bg-slate-700 disabled:bg-slate-700 disabled:text-gray-400 px-4 py-3 rounded font-medium text-white transition-colors",children:"Hoppa \xf6ver"})]}),s&&(0,wo.jsx)("p",{className:"text-sm text-gray-500 mt-4",children:"St\xe4nger automatiskt..."})]})})},ju=()=>{const[e,n]=(0,t.useState)(null),[r,o]=(0,t.useState)(!1);(0,t.useEffect)(()=>{const e=e=>{e.preventDefault(),n(e);const t=window.matchMedia("(display-mode: standalone)").matches,r=localStorage.getItem("geoquest:installPromptSeen");t||r||setTimeout(()=>o(!0),1e4)};return window.addEventListener("beforeinstallprompt",e),window.matchMedia("(display-mode: standalone)").matches&&o(!1),()=>{window.removeEventListener("beforeinstallprompt",e)}},[]);const i=()=>{o(!1),localStorage.setItem("geoquest:installPromptSeen","true")},a=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,s=window.navigator.standalone||window.matchMedia("(display-mode: standalone)").matches;return a&&!s&&r?(0,wo.jsx)("div",{className:"fixed bottom-4 left-4 right-4 z-50 animate-slide-up",children:(0,wo.jsxs)("div",{className:"bg-slate-900 rounded-xl shadow-2xl p-4 border border-purple-500/40",children:[(0,wo.jsx)("button",{onClick:i,className:"absolute top-2 right-2 text-white/80 hover:text-white","aria-label":"St\xe4ng",children:(0,wo.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,wo.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),(0,wo.jsxs)("div",{className:"flex items-start gap-3 pr-6",children:[(0,wo.jsx)("div",{className:"flex-shrink-0",children:(0,wo.jsx)("img",{src:"/logo-compass.svg",alt:"RouteQuest",className:"w-12 h-12"})}),(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsx)("h3",{className:"text-white font-bold text-lg mb-1",children:"Installera RouteQuest!"}),(0,wo.jsx)("p",{className:"text-gray-300 text-sm mb-2",children:"F\xe5 snabb \xe5tkomst till tipspromenader direkt fr\xe5n din hemsk\xe4rm."}),(0,wo.jsxs)("div",{className:"bg-slate-800 rounded-lg p-3 text-gray-300 text-xs space-y-1",children:[(0,wo.jsxs)("p",{children:["1. Tryck p\xe5 ",(0,wo.jsx)("strong",{className:"text-white",children:"Dela"}),"-knappen nedan"]}),(0,wo.jsxs)("p",{children:["2. V\xe4lj ",(0,wo.jsx)("strong",{className:"text-white",children:'"L\xe4gg till p\xe5 hemsk\xe4rmen"'})]})]})]})]})]})}):r&&e?(0,wo.jsx)("div",{className:"fixed bottom-4 left-4 right-4 z-50 animate-slide-up",children:(0,wo.jsxs)("div",{className:"bg-slate-900 rounded-xl shadow-2xl p-4 border border-purple-500/40",children:[(0,wo.jsx)("button",{onClick:i,className:"absolute top-2 right-2 text-white/80 hover:text-white","aria-label":"St\xe4ng",children:(0,wo.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,wo.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),(0,wo.jsxs)("div",{className:"flex items-start gap-3 pr-6",children:[(0,wo.jsx)("div",{className:"flex-shrink-0",children:(0,wo.jsx)("img",{src:"/logo-compass.svg",alt:"RouteQuest",className:"w-12 h-12"})}),(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsx)("h3",{className:"text-white font-bold text-lg mb-1",children:"Installera RouteQuest!"}),(0,wo.jsx)("p",{className:"text-gray-300 text-sm mb-3",children:"F\xe5 snabb \xe5tkomst till tipspromenader direkt fr\xe5n din hemsk\xe4rm. Fungerar offline!"}),(0,wo.jsx)("button",{onClick:async()=>{e&&(e.prompt(),await e.userChoice,n(null),o(!1),localStorage.setItem("geoquest:installPromptSeen","true"))},className:"w-full bg-purple-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-400 transition-colors",children:"\ud83d\udcf2 Installera nu"})]})]})]})}):null},Eu={info:{container:"border-cyan-500/60 bg-slate-900/95",accent:"bg-cyan-500",icon:"\u2139\ufe0f"},success:{container:"border-emerald-500/60 bg-slate-900/95",accent:"bg-emerald-500",icon:"\u2705"},warning:{container:"border-amber-500/60 bg-slate-900/95",accent:"bg-amber-500",icon:"\u26a0\ufe0f"},error:{container:"border-red-500/60 bg-slate-900/95",accent:"bg-red-500",icon:"\u274c"}},Tu=()=>{const{toasts:e,dismissToast:t}=xa();return e.length?(0,wo.jsx)("div",{className:"fixed top-4 right-4 z-[80] flex flex-col gap-3 max-w-sm w-full",children:e.map(e=>{const n=Eu[e.variant]||Eu.info;return(0,wo.jsxs)("div",{className:"relative overflow-hidden rounded-xl border shadow-lg shadow-slate-900/40 backdrop-blur ".concat(n.container),children:[(0,wo.jsx)("div",{className:"absolute inset-y-0 left-0 w-1 ".concat(n.accent)}),(0,wo.jsxs)("div",{className:"flex items-start gap-3 px-4 py-3",children:[(0,wo.jsx)("div",{className:"text-xl leading-none",children:n.icon}),(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsx)("div",{className:"text-sm font-semibold text-white",children:e.title}),e.message&&(0,wo.jsx)("div",{className:"mt-1 text-xs text-slate-300 whitespace-pre-line",children:e.message})]}),(0,wo.jsx)("button",{type:"button",className:"text-slate-400 hover:text-white transition-colors","aria-label":"St\xe4ng",onClick:()=>t(e.id),children:"\xd7"})]})]},e.id)})}):null};var Iu=__webpack_require__(4737);const Pu=()=>{const[e,n]=(0,t.useState)([]),[r,o]=(0,t.useState)(!0),[i,a]=(0,t.useState)(!1);(0,t.useEffect)(()=>{s();const e=setInterval(s,3e5);return()=>clearInterval(e)},[]);const s=async()=>{try{const e=await Iu.D.getProblematicServices();n(e)}catch(e){console.error("Kunde inte kontrollera tj\xe4nstestatus:",e)}finally{o(!1)}};if(r||0===e.length)return null;const l=e.filter(e=>"down"===e.status||"error"===e.status).length>0;return(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("button",{onClick:()=>a(!0),className:"fixed bottom-4 right-4 z-40 flex h-14 w-14 items-center justify-center rounded-full border shadow-lg transition-all hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 ".concat(l?"bg-red-900/80 border-red-400 text-red-100 focus:ring-red-400":"bg-amber-900/80 border-amber-400 text-amber-100 focus:ring-amber-400"),"aria-label":"Visa status f\xf6r externa tj\xe4nster",children:(0,wo.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,wo.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,wo.jsx)("span",{className:"absolute -top-2 -right-2 rounded-full bg-black/70 px-2 py-0.5 text-xs font-semibold text-white",children:e.length})]})}),i&&(0,wo.jsxs)("div",{className:"fixed inset-0 z-50 flex items-end justify-end sm:items-center sm:justify-center",children:[(0,wo.jsx)("button",{className:"absolute inset-0 bg-black/60","aria-label":"St\xe4ng dialogen",onClick:()=>a(!1)}),(0,wo.jsxs)("div",{className:"relative m-4 w-full max-w-md overflow-hidden rounded-xl border border-slate-700 bg-slate-900 shadow-2xl",children:[(0,wo.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b ".concat(l?"border-red-500/40 bg-red-900/20":"border-amber-500/40 bg-amber-900/20"),children:[(0,wo.jsxs)("div",{className:"flex items-center gap-3",children:[(0,wo.jsx)("svg",{className:"h-6 w-6 ".concat(l?"text-red-300":"text-amber-300"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,wo.jsxs)("div",{className:"flex flex-col",children:[(0,wo.jsxs)("span",{className:"text-sm font-semibold text-gray-100",children:[e.length," ",1===e.length?"tj\xe4nst p\xe5verkas":"tj\xe4nster p\xe5verkas"]}),(0,wo.jsx)("span",{className:"text-xs text-gray-400",children:l?"Kritiska st\xf6rningar uppt\xe4ckta":"Mindre st\xf6rningar uppt\xe4ckta"})]})]}),(0,wo.jsx)("button",{onClick:()=>a(!1),className:"rounded-md p-1 text-gray-400 hover:bg-white/10 hover:text-gray-200 focus:outline-none focus:ring-2 focus:ring-cyan-400","aria-label":"St\xe4ng",children:(0,wo.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,wo.jsx)("div",{className:"max-h-80 overflow-y-auto px-4 py-4 space-y-3",children:e.map((e,t)=>(0,wo.jsxs)("div",{className:"flex items-start gap-3 rounded-lg border border-white/5 bg-white/5 p-3 text-sm",children:[(0,wo.jsx)("div",{className:"mt-1 h-2.5 w-2.5 flex-shrink-0 rounded-full ".concat("down"===e.status||"error"===e.status?"bg-red-500":"bg-amber-500")}),(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsx)("p",{className:"font-semibold text-gray-100",children:e.name}),(0,wo.jsx)("p",{className:"text-gray-300",children:e.message}),e.since&&(0,wo.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Sedan: ",new Date(e.since).toLocaleString("sv-SE")]})]})]},t))}),(0,wo.jsxs)("div",{className:"flex items-center justify-between border-t border-slate-700 bg-black/30 px-4 py-3",children:[(0,wo.jsx)("button",{onClick:()=>a(!1),className:"text-sm text-gray-300 hover:text-gray-100 transition-colors",children:"St\xe4ng"}),(0,wo.jsx)("button",{onClick:()=>{o(!0),s()},className:"text-sm font-semibold text-cyan-400 hover:text-cyan-200 transition-colors",children:"Uppdatera status"})]})]})]})]})},Ou=e=>{let{children:t}=e;const{isSuperUser:n,isAuthInitialized:r}=Eo();return r?n?t:(0,wo.jsx)(fe,{to:"/",replace:!0}):(0,wo.jsx)("div",{className:"p-8 text-center text-gray-300",children:"Kontrollerar beh\xf6righet ..."})},Mu=()=>(0,wo.jsxs)(ge,{children:[(0,wo.jsx)(pe,{path:"/",element:(0,wo.jsx)(Ol,{})}),(0,wo.jsx)(pe,{path:"/login",element:(0,wo.jsx)(Ml,{})}),(0,wo.jsx)(pe,{path:"/register",element:(0,wo.jsx)(Ll,{})}),(0,wo.jsx)(pe,{path:"/my-runs",element:(0,wo.jsx)(nu,{})}),(0,wo.jsx)(pe,{path:"/generate",element:(0,wo.jsx)(kc,{})}),(0,wo.jsx)(pe,{path:"/join",element:(0,wo.jsx)(Ac,{})}),(0,wo.jsx)(pe,{path:"/run/:runId/play",element:(0,wo.jsx)(Yc,{})}),(0,wo.jsx)(pe,{path:"/run/:runId/results",element:(0,wo.jsx)(eu,{})}),(0,wo.jsx)(pe,{path:"/run/:runId/admin",element:(0,wo.jsx)(Xc,{})}),(0,wo.jsx)(pe,{path:"/superuser/all-runs",element:(0,wo.jsx)(Ou,{children:(0,wo.jsx)(cu,{})})}),(0,wo.jsx)(pe,{path:"/superuser/users",element:(0,wo.jsx)(Ou,{children:(0,wo.jsx)(uu,{})})}),(0,wo.jsx)(pe,{path:"/admin/questions",element:(0,wo.jsx)(Ou,{children:(0,wo.jsx)(lu,{})})}),(0,wo.jsx)(pe,{path:"/superuser/analytics",element:(0,wo.jsx)(Ou,{children:(0,wo.jsx)(du,{})})}),(0,wo.jsx)(pe,{path:"/superuser/messages",element:(0,wo.jsx)(Ou,{children:(0,wo.jsx)(hu,{})})}),(0,wo.jsx)(pe,{path:"/superuser/tasks",element:(0,wo.jsx)(Ou,{children:(0,wo.jsx)(wu,{})})}),(0,wo.jsx)(pe,{path:"/superuser/notifications",element:(0,wo.jsx)(Ou,{children:(0,wo.jsx)(pu,{})})}),(0,wo.jsx)(pe,{path:"/superuser/logs",element:(0,wo.jsx)(Ou,{children:(0,wo.jsx)(mu,{})})}),(0,wo.jsx)(pe,{path:"/superuser/ai-providers",element:(0,wo.jsx)(Ou,{children:(0,wo.jsx)(_u,{})})}),(0,wo.jsx)(pe,{path:"*",element:(0,wo.jsx)(fe,{to:"/",replace:!0})})]}),Lu=e=>{let{children:n}=e;const[r]=Ie(),o=r.get("ver")||r.get("version"),i=o&&o!==is;return(0,t.useEffect)(()=>{i&&console.error("\u274c Version mismatch! URL expects: ".concat(o,", Running: ").concat(is))},[i,o]),i?(0,wo.jsx)("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center p-4",children:(0,wo.jsx)("div",{className:"max-w-2xl w-full bg-slate-900 border-2 border-red-500 rounded-2xl p-8 shadow-2xl",children:(0,wo.jsxs)("div",{className:"text-center space-y-6",children:[(0,wo.jsx)("div",{className:"text-6xl",children:"\u26a0\ufe0f"}),(0,wo.jsx)("h1",{className:"text-3xl font-bold text-red-400",children:"Felaktig version!"}),(0,wo.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6 space-y-3",children:[(0,wo.jsxs)("p",{className:"text-gray-300",children:["URL:en f\xf6rv\xe4ntar sig version ",(0,wo.jsx)("span",{className:"font-mono font-bold text-cyan-400",children:o})]}),(0,wo.jsxs)("p",{className:"text-gray-300",children:["Men du k\xf6r version ",(0,wo.jsx)("span",{className:"font-mono font-bold text-amber-400",children:is})]})]}),(0,wo.jsxs)("div",{className:"space-y-3",children:[(0,wo.jsx)("p",{className:"text-gray-400 text-sm",children:"Detta beror troligen p\xe5 att din webbl\xe4sare har cachat en gammal version av sidan."}),(0,wo.jsx)("button",{onClick:()=>{const e=new URL(window.location.href);e.searchParams.delete("ver"),e.searchParams.delete("version"),window.location.href=e.toString()},className:"w-full px-6 py-3 bg-cyan-500 text-black rounded-lg font-bold text-lg hover:bg-cyan-400 transition-colors",children:"Ladda utan versionskontroll"}),(0,wo.jsx)("button",{onClick:()=>{window.location.reload(!0)},className:"w-full px-6 py-3 bg-slate-700 text-white rounded-lg font-semibold hover:bg-slate-600 transition-colors",children:"Tvinga omladdning (Ctrl+Shift+R)"})]})]})})}):(0,wo.jsx)(wo.Fragment,{children:n})},Ru=()=>{const e=Z(),{currentUser:n,isAuthInitialized:r}=Eo();return(0,t.useEffect)(()=>{es("page_view",{path:e.pathname})},[e.pathname]),(0,t.useEffect)(()=>{r&&n&&!n.isAnonymous&&ns(n.id)},[n,r]),null},Du=()=>{const{currentUser:e,isAuthInitialized:n,isSuperUser:r}=Eo(),[o,i]=(0,t.useState)(!1),[a,s]=(0,t.useState)(0);(0,t.useEffect)(()=>{if(n&&e&&!e.isAnonymous){if(r)return;const t="geoquest:import:handled:".concat(e.id);if("true"===localStorage.getItem(t))return;const n=za(),o=(null===n||void 0===n?void 0:n.length)||0;o>0?(s(o),i(!0)):localStorage.setItem(t,"true")}},[e,n,r]),(0,t.useEffect)(()=>{n&&!e&&i(!1)},[e,n]);return o?(0,wo.jsx)(Cu,{localRunCount:a,currentUser:e,onComplete:t=>{if(e&&!e.isAnonymous){const t="geoquest:import:handled:".concat(e.id);localStorage.setItem(t,"true")}i(!1)}}):null},Fu=()=>(vc(),null),zu=()=>{const{isSuperUser:e}=Eo();return e?(0,wo.jsx)(wo.Fragment,{children:(0,wo.jsx)(Pu,{})}):null};const Bu=function(){return(0,t.useEffect)(()=>{Pe.Ii.isNativePlatform()&&__webpack_require__.e(869).then(__webpack_require__.bind(__webpack_require__,5869)).then(e=>{let{StatusBar:t}=e;t.setBackgroundColor({color:"#0d1117"}).catch(()=>{}),t.setStyle({style:"DARK"}).catch(()=>{}),t.setOverlaysWebView({overlay:!0}).catch(()=>{})}).catch(()=>console.log("StatusBar plugin not available"))},[]),(0,t.useEffect)(()=>{if("undefined"===typeof window)return;const e="routequest:permissionPrompted";(async()=>{try{var t,n;if("true"===(null===(t=window.localStorage)||void 0===t?void 0:t.getItem(e)))return;if("geolocation"in navigator&&navigator.geolocation.getCurrentPosition(()=>{},()=>{},{enableHighAccuracy:!0,timeout:1e4}),Pe.Ii.isNativePlatform())try{var r;const e=await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,3339)),t=e.LocalNotifications||(null===(r=e.default)||void 0===r?void 0:r.LocalNotifications)||e;if(null!==t&&void 0!==t&&t.checkPermissions&&null!==t&&void 0!==t&&t.requestPermissions){if("granted"!==(await t.checkPermissions()).display){"granted"!==(await t.requestPermissions()).display&&console.warn("[Permissions] Notifications still not granted after request")}}else console.warn("[Permissions] LocalNotifications plugin saknas eller \xe4r inkompatibel")}catch(o){console.warn("[Permissions] Kunde inte hantera native-notiser",o)}else"Notification"in window&&"default"===Notification.permission&&Notification.requestPermission().catch(()=>{});null===(n=window.localStorage)||void 0===n||n.setItem(e,"true")}catch(o){console.warn("[Permissions] Kunde inte beg\xe4ra beh\xf6righeter",o)}})()},[]),(0,wo.jsx)(jo,{children:(0,wo.jsx)(ba,{children:(0,wo.jsx)(Ca,{children:(0,wo.jsx)(aa,{children:(0,wo.jsx)(Lu,{children:(0,wo.jsxs)("div",{className:"min-h-screen bg-slate-950 text-gray-100",children:[(0,wo.jsx)(Fu,{}),(0,wo.jsx)(Ru,{}),(0,wo.jsx)(Nu,{}),(0,wo.jsx)(Du,{}),(0,wo.jsx)(ju,{}),(0,wo.jsx)(Mu,{}),(0,wo.jsx)(Tu,{}),(0,wo.jsx)(zu,{})]})})})})})})};var Uu=__webpack_require__(1056);if(__webpack_require__.n(Uu)().init({defaults:{displaySize:50,transparency:.9}}),"undefined"!==typeof window&&!window.__geoquestViewportSetup){const e=()=>{const e=window.visualViewport,t=e?e.height:window.innerHeight,n=t/100;document.documentElement.style.setProperty("--app-viewport-vh","".concat(n,"px")),document.documentElement.style.setProperty("--app-viewport-100","".concat(t,"px"))};(()=>{e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),window.visualViewport&&window.visualViewport.addEventListener("resize",e)})(),window.__geoquestViewportSetup=!0}const qu=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;const n=document.querySelector(".eruda-entry-btn");n?(n.style.setProperty("position","fixed","important"),n.style.setProperty("left","10px","important"),n.style.setProperty("right","auto","important"),n.style.setProperty("top","50%","important"),n.style.setProperty("bottom","auto","important"),n.style.setProperty("transform","translateY(-50%)","important"),n.style.setProperty("z-index","9999999","important"),n.style.setProperty("background-color","#00ff00","important"),n.style.setProperty("border","3px solid red","important"),n.style.setProperty("width","60px","important"),n.style.setProperty("height","60px","important")):e<t-1&&setTimeout(()=>qu(e+1,t),500)};setTimeout(()=>qu(),1e3);r.createRoot(document.getElementById("root")).render((0,wo.jsx)(t.StrictMode,{children:(0,wo.jsx)(Se,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:(0,wo.jsx)(Bu,{})})}))})()})();
//# sourceMappingURL=main.917d5a25.js.map